(this["webpackJsonpstable-app"]=this["webpackJsonpstable-app"]||[]).push([[0],{204:function(e,t,a){"use strict";var s=a(0),i=a.n(s),o=a(1),n=a(3);class r extends s.Component{constructor(e){super(e),this.callScreen=()=>{var e=o.g.getAllFormIsOpen(),t=[],a=o.g.getFormCurrent(),s="";if(a.hasOwnProperty("getKeyFormAuto"))for(var i in s=a.getKeyFormAuto(),e)if(e[i].hasOwnProperty("getKeyFormAuto")){var n={};if(n.form_key=i,e[i].hasOwnProperty("getInfoA")){var r=e[i].getInfoA();void 0!==r&&void 0!==r.ofModal&&!1===r.ofModal&&(n.title=r.title,n.lang_form=r.lang_form,n.classActive=s===i?"active":"",t[t.length]=n)}}this.setState({data:t,key_lang:o.g.getLangKey()})},this.closeTab=e=>{o.g.removeForm(e),this.callScreen()},this.state={data:[],key_lang:o.g.getLangKey(),onMouse:!0},this.type_screen="pagebar"}componentDidMount(){o.g.addScreen(this)}renderOptions(){return this.state.data.map((e,t)=>i.a.createElement("li",{className:"jwebui-page-bar jwebui-"+e.classActive,key:t,index:t},i.a.createElement("label",{href:"#t","aria-expanded":"false",className:"jwebui-page-bar-title",onClick:t=>{o.g.openForm(e.form_key)}},void 0!==e.lang_form&&void 0!==e.lang_form[this.state.key_lang]?e.lang_form[this.state.key_lang]:e.title),i.a.createElement("label",{href:"#t",className:"jwebui-page-bar-remove","aria-expanded":"false"},i.a.createElement("i",{className:"fa fa-times","aria-hidden":"true",style:{cursor:"pointer",marginRight:10},onClick:t=>{o.g.removeForm(e.form_key),this.callScreen()}}))))}getConfigTemplate(){let e=[];for(const t of this.state.data)e.push({tabInfo:{icon:"account_balance",title:t.title,id:t.form_key},sysStyle:{show:"active"===t.classActive?"show":""}});return e}render(){const e=Object(n.b)("uTab");return i.a.createElement(e,{dataFull:{data:this.getConfigTemplate(),abs_select:(e,t)=>{o.g.openForm(t)},abs_close:this.closeTab}})}}t.a=r},205:function(e,t,a){"use strict";var s=a(0),i=a.n(s),o=a(1),n=a(3);class r extends s.Component{constructor(e){super(e),this.callScreen=()=>{this.setState({auto_change:o.g.autoID()})},this.activeMsg=(e,t)=>{void 0===t.title&&(t.title="#MsgSystem_noTitle"),void 0===t.color?t.type="warning":t.type=t.color,void 0===t.btn&&(t.btn=""),void 0===t.list_fo&&(t.list_fo=[]),void 0===t.list_fo_start&&(t.list_fo_start=[]),this.changeLangMess(e,t)},this.abs_Close=e=>{this.setState({isClose:!1})},this.getDataFull=()=>{var e;return{type:"warning",title:o.g.getLang(null===(e=this.state.msg)||void 0===e?void 0:e.title),btnClose:{isShow:!1,title:"Close",abs_Click:this.abs_Close}}},this.type_screen="msgSystem",this.state={show:"msg-none",color:"",msg:{title:"",btn:"",list_fo:[],list_fo_start:[],color:"warning"},dataFull:{},isClose:!1,stackError:{}}}componentDidMount(){this.header_=document.body.getElementsByClassName("navbar-fixed-top")[0],this.main_=document.body.getElementsByClassName("prtm-main")[0],Object(o.K)(this),o.g.addScreen(this)}changeLangMess(e,t){let a={};a=t,a.title=o.g.getLang(t.title),this.setState({isClose:e,msg:t,dataFull:a})}render(){if(!this.state.isClose)return null;const e=Object(n.b)("uMessageGlobal");return i.a.createElement(e,{dataFull:this.getDataFull(),abs_Close:this.abs_Close})}}t.a=r},206:function(e,t,a){"use strict";var s=a(0),i=a.n(s),o=a(1),n=a(3),r=a(4);class l extends s.Component{constructor(e){super(e),this.state={mode_chat:"wellcome",open_chat:!1,avatar:"",name:"",status:"",data_debug:[]}}open(e){this.setState(e)}addDebug(e){let t=this.state.data_debug;void 0===t&&(t=[]),t.unshift(e),this.setState({data_debug:t})}componentDidMount(){Object(r.b)([{txcode:"#sys:bo-load-formChat",input:{}}],{}).then(e=>{var t=o.g.foGetData("profile",e);if(void 0!==t){void 0===t.relationship&&(t.relationship=[]);let e="",a="",s="";void 0!==t.avatar&&(a=t.avatar),void 0!==t.name&&(e=t.name),void 0!==t.status&&(s=t.status),this.setState({avatar:a,name:e,status:s})}},e=>{}),Object(o.j)(this),Object(o.k)(this.refs.copyToClipboard)}render(){return i.a.createElement("div",{style:{position:"fixed"}},i.a.createElement("textarea",{style:{width:"0px",height:"0px",borderColor:"white",resize:"none",rows:0,cols:0,padding:0},ref:"copyToClipboard"}),i.a.createElement("div",{className:"fabs",style:{display:"none"}},i.a.createElement("div",{className:"chat "+(this.state.open_chat?"is-visible":"")},i.a.createElement("div",{className:"chat_header"},i.a.createElement("div",{className:"chat_option"},i.a.createElement("div",{className:"header_img"},i.a.createElement("img",{src:this.state.avatar,alt:""})),i.a.createElement("span",{id:"chat_head"},this.state.name),i.a.createElement("br",null)," ",i.a.createElement("span",{className:"agent"},this.state.status),i.a.createElement("span",{id:"chat_fullscreen_loader",className:"chat_fullscreen_loader"},i.a.createElement("i",{className:"fullscreen zmdi zmdi-window-maximize"})))),i.a.createElement("div",{id:"chat_fullscreen",className:"chat_body chat_login chat_conversion chat_converse",style:{display:this.state.open_chat&&"wellcome"===this.state.mode_chat?"block":"none"}},i.a.createElement("p",null,"T\xf4i l\xe0 ph\u1ee5 t\xe1!, H\xe3y g\u1ecdi t\xf4i b\u1eb1ng ph\xedm t\u1eaft!",i.a.createElement("br",null),"B\u1ea1n c\u1ea7n g\xec?"),i.a.createElement("div",{className:"chat_category"},i.a.createElement("ul",null,i.a.createElement("li",{className:"active",onClick:e=>{alert("Ch\u01b0a h\u1ed7 tr\u1ee3")}},"Chat"),i.a.createElement("li",{onClick:e=>{this.setState({mode_chat:"debug"})}},"Debug"),i.a.createElement("li",{onClick:e=>{alert("Ch\u01b0a h\u1ed7 tr\u1ee3")}},"Command line"),i.a.createElement("li",{onClick:e=>{alert("Ch\u01b0a h\u1ed7 tr\u1ee3")}},"Command voice")))),i.a.createElement("div",{id:"chat_fullscreen",className:"chat_conversion chat_converse chat_form",style:{display:this.state.open_chat&&"debug"===this.state.mode_chat?"block":"none"}},i.a.createElement("span",{className:"chat_msg_item chat_msg_item_admin"},i.a.createElement("div",{className:"chat_avatar"}),"Ghi ch\xfa: ch\u1ec9 copy d\u1eef li\u1ec7u kh\xf4ng qu\xe1 100 d\xf2ng.",i.a.createElement("span",{id:"chat_fourth_screen",className:"fab",title:"X\xf3a tr\u1eafng",onClick:e=>{this.setState({data_debug:[]})}},i.a.createElement("i",{className:"fa fa-free-code-camp"}))),this.state.data_debug.map((e,t)=>{let a="bo",s=o.g.getNodeJson(e,"data.bo.0.txcode");if(void 0===s&&(a="fo",s=o.g.getNodeJson(e,"data.fo.0.txcode")),void 0===s&&(s=""),s=s.split(":")[1]||"",void 0!==s)switch(a){case"fo":return i.a.createElement("span",{key:t,className:"chat_msg_item chat_msg_item_admin"},i.a.createElement("div",{className:"chat_avatar"}),i.a.createElement("span",{style:{color:"green"}},s),i.a.createElement("br",null),i.a.createElement("i",{style:{color:"#83c76d",cursor:"pointer"},className:"fa fa-clipboard",onClick:t=>{o.g.copyToClipboard(JSON.stringify(e.data))}}),"\xa0\xa0Data");default:return i.a.createElement("span",{key:t,className:"chat_msg_item chat_msg_item_admin",style:{position:"relative",float:"right",background:"#42a5f5",color:"white"}},i.a.createElement("span",null,s),i.a.createElement("br",null),i.a.createElement("i",{style:{color:"#83c76d",cursor:"pointer"},className:"fa fa-clipboard",onClick:t=>{o.g.copyToClipboard(JSON.stringify(e.data))}}),"\xa0\xa0Data")}return null})),i.a.createElement("div",{id:"chat_fullscreen",className:"chat_conversion chat_converse chat_form",style:{display:this.state.open_chat&&"conversion"===this.state.mode_chat?"block":"none"}},i.a.createElement("span",{className:"chat_msg_item chat_msg_item_admin"},i.a.createElement("div",{className:"chat_avatar"},i.a.createElement("img",{src:"",alt:""})),"Hey there! Any question?"),i.a.createElement("span",{className:"chat_msg_item chat_msg_item_user"},"Hello!"),i.a.createElement("div",{className:"status"},"20m ago"),i.a.createElement("span",{className:"chat_msg_item chat_msg_item_admin"},i.a.createElement("div",{className:"chat_avatar"},i.a.createElement("img",{src:"",alt:""})),"Hey! Would you like to talk sales, support, or anyone?"),i.a.createElement("span",{className:"chat_msg_item chat_msg_item_user"},"Lorem Ipsum is simply dummy text of the printing and typesetting industry."),i.a.createElement("span",{className:"chat_msg_item chat_msg_item_admin"},i.a.createElement("div",{className:"chat_avatar"},i.a.createElement("img",{src:"",alt:""})),"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."),i.a.createElement("span",{className:"chat_msg_item chat_msg_item_user"},"Where can I get some?"),i.a.createElement("span",{className:"chat_msg_item chat_msg_item_admin"},i.a.createElement("div",{className:"chat_avatar"},i.a.createElement("img",{src:"",alt:""})),"The standard chuck..."),i.a.createElement("span",{className:"chat_msg_item chat_msg_item_user"},"There are many variations of passages of Lorem Ipsum available"),i.a.createElement("div",{className:"status2"},"Just now, Not seen yet"),i.a.createElement("span",{className:"chat_msg_item "},i.a.createElement("ul",{className:"tags"},i.a.createElement("li",null,"Hats"),i.a.createElement("li",null,"T-Shirts"),i.a.createElement("li",null,"Pants"))),i.a.createElement("span",{className:"chat_msg_item chat_msg_item_admin"},i.a.createElement("div",{className:"chat_avatar"},i.a.createElement("img",{src:"",alt:""})),"Hey there! Any question?"),i.a.createElement("span",{className:"chat_msg_item chat_msg_item_user"},"Hello!"),i.a.createElement("span",{className:"status"},"20m ago"),i.a.createElement("span",{className:"chat_msg_item chat_msg_item_admin"},i.a.createElement("div",{className:"chat_avatar"},i.a.createElement("img",{src:"",alt:""})),"Agent typically replies in a few hours. Don't miss their reply.",i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement("div",{className:"get-notified"},i.a.createElement("label",null,"Get notified by email"),i.a.createElement("input",{id:"chat_log_email",placeholder:"Enter your email"}),i.a.createElement("i",{className:"zmdi zmdi-chevron-right"})))),i.a.createElement("span",{className:"chat_msg_item chat_msg_item_admin"},i.a.createElement("div",{className:"chat_avatar"},i.a.createElement("img",{src:"",alt:""})),"Send message to agent.",i.a.createElement("div",null,i.a.createElement("form",{className:"message_form"},i.a.createElement("input",{placeholder:"Your email"}),i.a.createElement("input",{placeholder:"Technical issue"}),i.a.createElement("textarea",{rows:"4",placeholder:"Your message"}),i.a.createElement("button",null,"Send"))))),i.a.createElement("div",{className:"fab_field"},i.a.createElement("span",{id:"fab_camera",className:"fab is-visible"},i.a.createElement("i",{className:"fa fa-video-camera"})),i.a.createElement("span",{id:"fab_send",className:"fab is-visible"},i.a.createElement("i",{className:"fa fa-paper-plane"})),i.a.createElement("textarea",{id:"chatSend",name:"chat_message",placeholder:"Send a message",className:"chat_field chat_message"}))),i.a.createElement("span",{id:"prime",className:"fab "+(this.state.open_chat?"is-visible":""),onClick:e=>{this.setState({open_chat:!this.state.open_chat})}},i.a.createElement("i",{className:this.state.open_chat?"fa fa-times":"fa fa-comments-o"}))))}}var _=l,d=a(211),c=a(8);class u extends s.Component{constructor(e){super(e),this.setInfoModal=(e,t,a,s)=>{let{title:i,content:o,main_content:n}=e;this.rollback_save=a,this.callback_save=s,this.setState({isOpen:!0,title:i,content:o,button:t,main_content:n})},this.modalClose=e=>{this.setState({isOpen:!1})},this.abs_Click_btn=(e,t)=>{this.reloadFo(t)},this.state={isOpen:!1,title:"",button:[]},this.rollback_save=void 0,this.callback_save=void 0,this.JConfirm=Object(n.c)("jwebui_Confirm"),this.RefConfirm=i.a.createRef()}componentDidMount(){o.g.confirmStartOnlyOnce(this)}reloadFo(e){void 0!==this.rollback_save?(this.rollback_save.val_select=e,c.a.runTx(void 0,void 0,this.rollback_save)):void 0!==this.callback_save&&this.callback_save(e),this.modalClose()}componentDidUpdate(){var e,t;(null===(e=this.RefConfirm)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.abs_focus)&&setTimeout(()=>{var e;(null===(e=this.state.button)||void 0===e?void 0:e.length)&&this.RefConfirm.current.abs_focus(0)},100)}getConfigTemplate(){return{visibility:!0===this.state.isOpen,abs_Close:this.modalClose,title:this.state.title,content:this.state.content,main_content:this.state.main_content,listButton:this.state.button.map((e,t)=>({dataFull:{config:{default:{title:o.g.getLang(e.name),type:e.color,class:""}},dataItem:e.val},abs_Click:this.abs_Click_btn}))}}render(){const e=this.JConfirm;return i.a.createElement(e,{ref:this.RefConfirm,stateData:this.getConfigTemplate()})}}var h=u;class m extends s.Component{constructor(e){super(e),this.setInfoModal=(e,t,a,s)=>{let{title:i,content:o,message_save:n,main_content:r}=e;this.rollback_save=a,this.callback_save=s,this.setState({isOpen:!0,title:i,message_save:n,main_content:r,content:o,button:t})},this.modalClose=e=>{this.setState({isOpen:!1})},this.abs_Click_btn=(e,t)=>{this.reloadFo(t)},this.state={isOpen:!1,content:[],message_save:"",title:"",main_content:"",button:[]},this.rollback_save=void 0,this.callback_save=void 0,this.JConfirmCompare=Object(n.c)("jwebui_Compare"),this.RefConfirmCompare=i.a.createRef()}componentDidMount(){o.g.confirmStartCompareOnlyOnce(this)}reloadFo(e){void 0!==this.rollback_save?(this.rollback_save.val_select=e,c.a.runTx(void 0,void 0,this.rollback_save)):void 0!==this.callback_save&&this.callback_save(e),this.modalClose()}componentDidUpdate(){var e,t;(null===(e=this.RefConfirmCompare)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.abs_focus)&&setTimeout(()=>{var e;(null===(e=this.state.button)||void 0===e?void 0:e.length)&&null!==this.RefConfirmCompare.current&&this.RefConfirmCompare.current.abs_focus(0)},100)}getConfigTemplate(){return{visibility:!0===this.state.isOpen,abs_Close:this.modalClose,title:this.state.title,content:this.state.content,main_content:this.state.main_content,message_save:this.state.message_save,listButton:this.state.button.map((e,t)=>({dataFull:{config:{default:{title:o.g.getLang(e.name),type:e.color,class:""}},dataItem:e.val},abs_Click:this.abs_Click_btn}))}}render(){const e=this.JConfirmCompare;return i.a.createElement(e,{ref:this.RefConfirmCompare,stateData:this.getConfigTemplate()})}}var g=m,p=a(11),b=a(14),f=a.n(b);class y extends s.Component{constructor(e){super(e),this.setInfoModal=(e,t)=>{this.rollback_save=t;let a={},s={};void 0!==t.context&&(void 0!==t.context.infoA&&(a=t.context.infoA),void 0!==t.input_action&&(s=t.input_action)),Object(p.b)(e,this.refs.form_dynamic_container,a,{},"modalDynamicFormCode_getForm",s),this.setState({show:"block",class:"modal_webui md-effect-5"})},this.getRolBackData=()=>this.rollback_save,this.componentDidUpdate=()=>{this.refs.modal&&setTimeout(()=>{this.refs.modal.focus()},100)},this.modalClose=()=>{f.a.render(i.a.createElement("div",null),this.refs.form_dynamic_container),this.setState({show:"none",class:"modal_webui"})},this.getDatafull=()=>({config:{default:{title:"",size:"S"},cmd:{visibility:"block"===this.state.show}},abs_Close:this.modalClose}),this.state={show:"none",class:"modal_webui",title:"",button:[]},this.rollback_save=void 0}componentDidMount(){o.g.modalDynamicFromFromCode_StartOnlyOnce(this)}reloadFo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0!==this.rollback_save&&(this.rollback_save.val_select=e),c.a.runTx(void 0,void 0,this.rollback_save),this.modalClose()}render(){let e=Object(n.b)("uModal");return i.a.createElement(e,{dataFull:this.getDatafull(),ref:this.ref_modal},i.a.createElement("div",{className:"modal-body",style:{backgroundColor:"#ffffff"},ref:"form_dynamic_container"}))}}var v=y,k=a(6),C=a(208);const E=Object(n.c)("jwebui_keyBoard_config");class S extends s.Component{constructor(e){var t;super(e),t=this,this.setModalOpen=()=>{this.filter_system_keyboard=this.getDataSystemKeyboardByOs(this.user_system_keyboard),this.system_keyboard=this.getDataSystemKeyboardByOs(this.user_system_keyboard);Object(r.b)([{txcode:"bo-get-cdlistKeyboard",input:{}}],{}).then(e=>{let t=o.g.foGetData("data",e);void 0!==t&&t.length>0&&(this.group_keyboard=t,this.group_keyboard.sort((function(e,t){return"MY_KEYBOARD"===e.cdid?-1:void 0!==t.cdidx?1:0})),this.setState({isOpen:!0,tab_choose:t[0].cdid},()=>{}))})},this.modalClose=e=>{this.setState({isOpen:!1})},this.convertSystemKeyboardToDataTemplate=()=>{let e=[];for(let t=0;t<this.filter_system_keyboard.length;t++){const a=this.filter_system_keyboard[t];let s=[];s.push({data:a.name}),s.push({data:a.arr_key}),e.push(s)}return e},this.clickTab=e=>{let{tab_choose:t}=this.state;this.group_keyboard.forEach(a=>{a.cdid===e&&(t=a.cdid)}),this.setState({tab_choose:t})},this.abs_ChangeSearchInput=e=>{this.propsTemplate.search.value=e.target.value,this.setState({isReload:!this.state.isReload})},this.abs_KeyUpSearchInput=e=>{this.filter_system_keyboard=this.system_keyboard.filter(t=>t.name.trim().toLowerCase().includes(e.target.value.trim().toLowerCase())||t.key.trim().toLowerCase().includes(e.target.value.trim().toLowerCase())),this.setState({isReload:!this.state.isReload})},this.clickBtnAdd=()=>{this.setState({isAddingNew:!0,isReload:!this.state.isReload})},this.getConfigTemplate=(e,t)=>({form:{cmd:{visible:!0===this.state.isOpen}},modal:{title:o.g.getLang("keyboard_modal_title"),visibility:!0===this.state.isOpen,abs_Close:this.modalClose},search:{abs_Change:this.abs_ChangeSearchInput,abs_KeyUp:this.abs_KeyUpSearchInput,value:"",placeholder:"Search"},tab:{data:this.getTabConfig(),abs_Select:this.clickTab},header_tab:{title:o.g.getLang("keyboard_header_tab_title"),btn_add:this.getBtnAdd(e),content_add:this.getContentAdd(t,this.state.data_add)},list_shortcut:this.getDataTabKeyboard(e)}),this.changeEdit=e=>{},this.keyDownEdit=(e,t)=>{},this.submitEdit=e=>{},this.keyPressEdit=e=>{},this.editBtnClick=e=>{let{data_edit:t}=this.state;for(let a=0;a<this.filter_system_keyboard.length;a++){const s=this.filter_system_keyboard[a];if(s.keyboard_id===e.data.keyboard_id){const e=s.keyboard_id;void 0===t[e]&&(t[e]={}),t[e].config={mode:{isEdit:!0}}}}this.setState({data_edit:t,isReload:!this.state.isReload},()=>{})},this.cancelBtnClick=e=>{let{data_edit:t}=this.state;this.filter_system_keyboard.forEach((a,s)=>{if(a.keyboard_id===e.data.keyboard_id){const s=a.keyboard_id;void 0===t[s]&&(t[s]={}),t[s].arr_key=e.data.arr_key,t[s].name=e.data.name,t[s].input_value=e.data.group_menu_id,t[s].config={mode:{isEdit:!1}},t[s].error_mess=""}}),this.setState({data_edit:t,isReload:!this.state.isReload},()=>{})},this.buildListFormForListKeyboard=()=>{let e={};if(this.group_menu.length>0)for(let t=0;t<this.group_menu.length;t++){const a=this.group_menu[t];e[a.id]=a.title}return e},this.change_shortcut_name=(e,t)=>{let{data_edit:a}=this.state;this.filter_system_keyboard.forEach((s,i)=>{if(s.keyboard_id===t.data.keyboard_id){const t=s.keyboard_id;void 0===a[t]&&(a[t]={}),a[t].name=e.target.value}}),this.setState({data_edit:a,isReload:!this.state.isReload})},this.keyUpkeystrokes=(e,t)=>{let{data_edit:a}=this.state,s=this.filter_system_keyboard.find(e=>e.keyboard_id===t.keyboard_id).keyboard_id;void 0===a[s]&&(a[s]={});let i=[];if(e.shiftKey&&16!==e.keyCode||e.ctrlKey&&17!==e.keyCode||e.altKey&&18!==e.keyCode){e.shiftKey&&i.push({title:"SHIFT",icon:""}),e.altKey&&i.push({title:"ALT",icon:""}),e.ctrlKey&&i.push({title:"CTRL",icon:""});let t=i;e.keyCode>=65&&e.keyCode<=90?(t.push({title:String.fromCharCode(96<=e.keyCode&&e.keyCode<=105?e.keyCode-48:e.keyCode).toLocaleUpperCase(),icon:""}),a[s].arr_key=t,a[s].error_mess=""):Object.keys(this.key_special).includes(String(e.keyCode))?(t.push({title:this.key_special[e.keyCode],icon:""}),a[s].arr_key=t,a[s].error_mess=""):(a[s].keystrokes=[],a[s].error_mess=o.g.getLang("keyboard_wrong_keyPress"))}else if(113===e.keyCode||115===e.keyCode||117===e.keyCode||118===e.keyCode||119===e.keyCode||120===e.keyCode){let t=[];t.push({title:this.key_special[e.keyCode],icon:""}),a[s].arr_key=t,a[s].error_mess=""}else a[s].arr_key=[],a[s].error_mess=o.g.getLang("keyboard_wrong_keyPress");-1!==this.filter_system_keyboard.findIndex(e=>JSON.stringify(e.arr_key)===JSON.stringify(a[s].arr_key))&&(a[s].arr_key=[],a[s].error_mess=o.g.getLang("keyboard_wrong_keyPress_duplicate")),this.setState({data_edit:a,isReload:!this.state.isReload})},this.keyDownkeystrokes=()=>{},this.changekeystrokes=()=>{},this.keyPresskeystrokes=()=>{},this.changeListForms=(e,t,a,s)=>{let{data_edit:i}=this.state;for(let o=0;o<this.group_menu.length;o++){const e=this.group_menu[o];if(e.id===s.menu_item.group_menu.group_menu_id){const t=this.filter_system_keyboard.find(e=>e.keyboard_id===s.shortcut_item.keyboard_id).keyboard_id;void 0===i[t]&&(i[t]={}),i[t].input_value=e.id,i[t].input_form_value=s.menu_item.group_menu.group_menu_function_code}else if(e.data.length>0)for(let t=0;t<e.data.length;t++){const a=e.data[t];if(a.id===s.menu_item.group_menu.group_menu_id){const e=this.filter_system_keyboard.find(e=>e.keyboard_id===s.shortcut_item.keyboard_id).keyboard_id;void 0===i[e]&&(i[e]={}),i[e].input_value=a.id,i[e].input_form_value=s.menu_item.group_menu.group_menu_function_code}else if(a.data.length>0)for(let e=0;e<a.data.length;e++){const t=a.data[e];if(t.id===s.menu_item.group_menu.group_menu_id){const e=this.filter_system_keyboard.find(e=>e.keyboard_id=s.shortcut_item.keyboard_id).keyboard_id;void 0===i[e]&&(i[e]={}),i[e].input_value=t.id,i[e].input_form_value=s.menu_item.group_menu.group_menu_function_code}}}}this.setState({data_edit:i,isReload:!this.state.isReload})},this.searchListForms=()=>{},this.buildDataItemFromGroupMenu=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=o.g.cloneJson(e);for(let s=0;s<e.length;s++)if(a[s].dataItem.shortcut_item=t,e[s].data.length>0)for(let i=0;i<e[s].data.length;i++)if(a[s].data[i].dataItem.shortcut_item=t,e[s].data[i].data.length>0)for(let o=0;o<e[s].data[i].data.length;o++)a[s].data[i].data[o].dataItem.shortcut_item=t;return a},this.submitBtnClick=e=>{let{data_edit:t}=this.state;const a=e.data.keyboard_id;void 0===t[a]&&(t[a]={});let s={default:"",mac:""};"macOS"!==o.g.getMyDevice().osVersion&&(s.default=this.getKeyInputFromKeyStrokes(t[a].arr_key||e.data.arr_key));const i={keyboard_id:a,group_id:this.MY_KEYBOARD,fo:JSON.stringify([{txcode:"#sys:fo-keyboard-openForm",input:{form_code:t[a].input_form_value||e.data.group_menu_id}}]),menu_key:JSON.stringify({key_name:"",form_code:t[a].input_value||e.data.function_code}),key:JSON.stringify(s),name:t[a].name||e.data.name};Object(r.b)([{txcode:"#sys:bo-save-edit-keyboard",input:{dataItem:{app:Object(o.r)(),user_id:Object(o.z)(),data_save:i}}}],{}).then(e=>{"NOT_ERROR"===o.g.foGetData("result",e).error_code&&(this.user_system_keyboard.forEach((e,t)=>{e.system_keyboard.keyboard_id===i.keyboard_id&&(this.user_system_keyboard[t].system_keyboard=i)}),this.filter_system_keyboard=this.getDataSystemKeyboardByOs(this.user_system_keyboard),this.setState({data_edit:{},isReload:!this.state.isReload}))})},this.getDataTabKeyboard=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const s=t.buildListFormForListKeyboard();let i=[];for(let n=0;n<t.filter_system_keyboard.length;n++){const r=t.filter_system_keyboard[n];if(r.group_id===e){let n=r.arr_key||[],l=r.name||"",_=r.group_menu_id||"",d=t.buildDataItemFromGroupMenu(t.group_menu,r);const c=r.keyboard_id;void 0!==a[c]&&(void 0!==a[c].arr_key&&(n=a[c].arr_key),void 0!==a[c].name&&(l=a[c].name),void 0!==a[c].input_value&&(_=a[c].input_value),void 0!==a[c].list_menu&&(d=a[c].list_menu));let u={shortcut_name:{value:l,placeholder:"",abs_Change:t.change_shortcut_name},keystrokes:{abs_Change:t.changekeystrokes,abs_KeyDown:t.keyDownkeystrokes,abs_KeyUp:t.keyUpkeystrokes,abs_KeyPress:t.keyPresskeystrokes,data:n,dataItem:r,placeholder:o.g.getLang("keyboard_keystrokes")},list_form:{placeholder:"Choose...",search:{placeholder:"Search",value:""},input_value:s[_],data:d,abs_Change:t.changeListForms,abs_Search:t.searchListForms},btn_edit:{title:o.g.getLang("keyboard_edit_btn"),cmd:{visible:e===t.MY_KEYBOARD,disable:!1}},dataItem:{data:r},abs_Edit:t.editBtnClick,abs_Cancel:t.cancelBtnClick,abs_Submit:t.submitBtnClick,config:{mode:{isEdit:t.checkIsEdit(a,c)},cmd:{error:{message:void 0!==a[c]?a[c].error_mess:"",type:""}}}};i.push(u)}}return i},this.getTabConfig=e=>{let t=[];for(let a=0;a<this.group_keyboard.length;a++)-1===this.filter_system_keyboard.findIndex(e=>e.group_id===this.group_keyboard[a].cdid)&&this.group_keyboard[a].cdid!==this.MY_KEYBOARD||t.push({title:this.group_keyboard[a].caption,id:this.group_keyboard[a].cdid,selected:this.group_keyboard[a].cdid===e});return t},this.change_shortcut_name_content_add=e=>{let{data_add:t}=this.state;t.shortcut_name=e.target.value,this.setState({data_add:t,isReload:!this.state.isReload})},this.keyUp_keystrokes_content_add=e=>{let{data_add:t}=this.state,a=[];if(e.shiftKey&&16!==e.keyCode||e.ctrlKey&&17!==e.keyCode||e.altKey&&18!==e.keyCode){e.shiftKey&&a.push({title:"SHIFT",icon:""}),e.altKey&&a.push({title:"ALT",icon:""}),e.ctrlKey&&a.push({title:"CTRL",icon:""});let s=a;e.keyCode>=65&&e.keyCode<=90?(s.push({title:String.fromCharCode(96<=e.keyCode&&e.keyCode<=105?e.keyCode-48:e.keyCode).toLocaleUpperCase(),icon:""}),t.keystrokes=s,t.error_mess=""):Object.keys(this.key_special).includes(String(e.keyCode))?(s.push({title:this.key_special[e.keyCode],icon:""}),t.keystrokes=s,t.error_mess=""):(t.keystrokes=[],t.error_mess=o.g.getLang("keyboard_wrong_keyPress"))}else if(113===e.keyCode||115===e.keyCode||117===e.keyCode||118===e.keyCode||119===e.keyCode||120===e.keyCode){let a=[];a.push({title:this.key_special[e.keyCode],icon:""}),t.keystrokes=a,t.error_mess=""}else t.keystrokes=[],t.error_mess=o.g.getLang("keyboard_wrong_keyPress");-1!==this.filter_system_keyboard.findIndex(e=>JSON.stringify(e.arr_key)===JSON.stringify(t.keystrokes))&&(t.keystrokes=[],t.error_mess=o.g.getLang("keyboard_wrong_keyPress_duplicate")),this.setState({data_add:t,isReload:!this.state.isReload})},this.search_list_form_content_add=(e,t)=>{let{data_add:a}=this.state;a.list_form.search=e.target.value,this.filter_group_menu=this.group_menu.filter(t=>t.title.trim().toLowerCase().includes(e.target.value.trim().toLowerCase())||t.dataItem.menu_item.group_menu.group_menu_id.trim().toLowerCase().includes(e.target.value.trim().toLowerCase())),this.setState({data_add:a,isReload:!this.state.isReload})},this.change_list_form_content_add=(e,t,a,s)=>{let{data_add:i}=this.state;for(let o=0;o<this.filter_group_menu.length;o++){const e=this.filter_group_menu[o];if(e.dataItem.menu_item.group_menu.group_menu_id===s.menu_item.group_menu.group_menu_id)this.filter_group_menu[o].selected=!0;else if(e.data.length>0)for(let t=0;t<e.data.length;t++){const a=e.data[t];if(a.dataItem.menu_item.group_menu.group_menu_id===s.menu_item.group_menu.group_menu_id)this.filter_group_menu[o].data[t].selected=!0;else if(a.data.length>0)for(let e=0;e<a.data.length;e++){a.data[e].dataItem.menu_item.group_menu.group_menu_id===s.menu_item.group_menu.group_menu_id?this.filter_group_menu[o].data[t].data[e].selected=!0:this.filter_group_menu[o].data[t].data[e].selected=!1}else this.filter_group_menu[o].data[t].selected=!1}else this.filter_group_menu[o].selected=!1}i.list_form.item_choose_value=s.menu_item.group_menu.group_menu_function_code,i.list_form.item_choose_title=s.menu_item.group_menu.group_menu_name,i.list_form.item_choose_id=s.menu_item.group_menu.group_menu_id,this.setState({data_add:i,isReload:!this.state.isReload})},this.submit_content_add=()=>{let{data_add:e}=this.state,t={default:"",mac:""};"macOS"!==o.g.getMyDevice().osVersion&&(t.default=this.getKeyInputFromKeyStrokes(e.keystrokes));const a={keyboard_id:o.g.autoID(),group_id:this.MY_KEYBOARD,fo:JSON.stringify([{txcode:"#sys:fo-keyboard-openForm",input:{form_code:e.list_form.item_choose_value}}]),menu_key:JSON.stringify({key_name:"",form_code:e.list_form.item_choose_id}),key:JSON.stringify(t),name:e.shortcut_name};Object(r.b)([{txcode:"#sys:bo-system-save-mykeyboard",input:{dataItem:{app:Object(o.r)(),user_id:Object(o.z)(),data_save:a}}}],{}).then(e=>{"NOT_ERROR"===o.g.foGetData("result",e).error_code&&(this.user_system_keyboard.push({system_keyboard:a}),this.filter_system_keyboard=this.getDataSystemKeyboardByOs(this.user_system_keyboard),this.setState({data_add:{error_mess:"",shortcut_name:"",keystrokes:[],list_form:{search:"",item_choose_value:"",item_choose_title:"",item_choose_id:""}},isReload:!this.state.isReload,isAddingNew:!1}))})},this.keyDown_keystrokes_content_add=()=>{},this.change_keystrokes_content_add=()=>{},this.keyPress_keystrokes_content_add=()=>{},this.cancel_content_add=()=>{this.setState({data_add:{error_mess:"",shortcut_name:"",keystrokes:[],list_form:{search:"",item_choose_value:"",item_choose_title:"",item_choose_id:""}},isAddingNew:!1,isReload:!this.state.isReload})},this.getContentAdd=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{abs_Cancel:t.cancel_content_add,abs_Submit:t.submit_content_add,config:{cmd:{isShow:!0===e,error:{message:void 0!==a.error_mess?a.error_mess:"",type:""}}},keystrokes:{abs_Change:t.change_keystrokes_content_add,abs_KeyDown:t.keyDown_keystrokes_content_add,abs_KeyUp:t.keyUp_keystrokes_content_add,abs_KeyPress:t.keyPress_keystrokes_content_add,data:void 0!==a.keystrokes?a.keystrokes:[],placeholder:"Keystrokes"},shortcut_name:{placeholder:"Shortcut Name",value:void 0!==a.shortcut_name?a.shortcut_name:"",abs_Change:t.change_shortcut_name_content_add},list_form:{placeholder:"Choose...",search:{placeholder:"search",value:a.list_form.search},data:t.filter_group_menu,input_value:a.list_form.item_choose_title,abs_Change:t.change_list_form_content_add,abs_search:t.search_list_form_content_add}}},this.getBtnAdd=e=>({dataFull:{config:{cmd:{visible:e===this.MY_KEYBOARD},default:{title:"New Shortcut",icon:"add",type:"primary"}},abs_Click:this.clickBtnAdd}}),this.key_form="keyBoard_config",this.MY_KEYBOARD="MY_KEYBOARD",this.iconCtrl_macOS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADrSURBVHgBnVKLDYJADD2MA7ABbAAj3Ca6gW4CbsAmsAE4ATgBblBf4ZU0GBNik5e7/l+bBhHJgVZWGYEy7ERtQM8Yjc2DSzLHDKQuKWVBcbFt2D5rUE09usRIW019aXDGfwAiHQXjLy4541vAVuHVUSbjb1SOyLztgXNo14bOO/XIv9AXbX6lGpIkeePpHL0Bto5FbdzJbCqn8KecjSqHtkWUrpMtLCOjYWHI5cxyXEbNSfSDKjnwYHWt2gAv6wRcdQfAE7hpVzuAnpQr6tF4yvcBtKr4k2sdlf3J2SjbvarDH3kvv498dA3yDwrUrlg4T/oiAAAAAElFTkSuQmCC",this.key_special=o.g.getConfigUser("key_special"),this.group_keyboard=[],this.group_menu=[],this.filter_group_menu=[],this.filter_system_keyboard=[],this.allKeyboard=o.g.getData("system_keyboard");const a=o.g.cloneJson(C.a.getMenu(1))||[];this.MENUS=a.filter(e=>"T"===e.group_menu.group_menu_visible||!e.group_menu.group_menu_visible),this.MENU_JSON={},this.buildMenuJson(this.MENUS,"0",{search:"",item_choose_value:""}),this.group_tab=[],this.user_system_keyboard=[],void 0!==Object(o.x)().system_keyboard&&(this.user_system_keyboard=Object(o.x)().system_keyboard.map(e=>({system_keyboard:e}))),this.state={isAddingContent:!1,isAddingNew:!1,isReload:!1,isOpen:!1,tab_choose:"",data_edit:{},data_add:{error_mess:"",shortcut_name:"",keystrokes:[],list_form:{search:"",item_choose_value:"",item_choose_title:"",item_choose_id:""}},stateData:{}},this.propsTemplate=this.getConfigTemplate(),this.RefKeyboard=i.a.createRef()}getDataOfParent(e,t){let a=[];for(let s=0;s<e.length;s++){let i=e[s];t===i.group_menu.group_menu_parent&&a.push(i)}return a}buildMenuJson(e,t,a){let s=[],i=this.getDataOfParent(e,t);if(i.length>0)for(let n=0;n<i.length;n++){let t=i[n],r=t.group_menu.group_menu_name,l=t.group_menu.group_menu_function_code;if(void 0!==t.group_menu.group_menu_lang&&(r=t.group_menu.group_menu_lang[o.g.getLangKey()]),""!==r&&void 0!==r){let i=this.buildMenuJson(e,t.group_menu.group_menu_id,a),o="";void 0!==t.group_menu.group_menu_icon&&(o=t.group_menu.group_menu_icon);let n={dataItem:{menu_item:t},data:i,group_menu_function_code:l,title:r,icon:o,device_option:{desktop:{show_type:"min"},mobile:{show_type:"min"}},abs_Change:this.change,abs_Search:this.search};this.MENU_JSON[t.group_menu.group_menu_id]=n,this.group_menu.push({dataItem:{menu_item:t},data:i,group_menu_function_code:l,id:t.group_menu.group_menu_id,title:r,abs_Change:this.change,abs_Search:this.search,selected:a.item_choose_value===l&&a.item_choose_id===t.group_menu.group_menu_id}),this.filter_group_menu=this.group_menu,s.push(n)}}return s}checkIsEdit(e,t){return void 0!==e[t]&&(void 0!==e[t].config&&e[t].config.mode.isEdit)}getKeyInputFromKeyStrokes(e){return e.reduce((e,t,a)=>0===a?t.title:e+"+"+t.title,"")}getArrKeyFromString(e){return e.map(e=>e.key.default.split("+").map(e=>({title:e,icon:""})))}getDataSystemKeyboardByOs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=/(\+(\+)|[+]*([^+]+))/gm,a=o.g.getLangKey();let s=[];void 0!==o.g.getData("system_keyboard")&&(s=o.g.getData("system_keyboard"));let i,n=s.concat(e);const r=o.g.getMyDevice().osVersion;let l=[];for(let o=0;o<n.length;o++){l[o]={};const e=n[o].system_keyboard;if(l[o].keyboard_id=e.keyboard_id,"object"===typeof e.menu_key?l[o].group_menu_id=e.menu_key.form_code:l[o].group_menu_id=JSON.parse(e.menu_key).form_code,e.group_id===this.MY_KEYBOARD){let t=JSON.parse(e.fo)[0].input.form_code;l[o].function_code=t}if("Windows"===r){e.group_id!==this.MY_KEYBOARD?l[o].name=void 0!==JSON.parse(e.name)[a]?JSON.parse(e.name)[a]:"":l[o].name=e.name,l[o].key=JSON.parse(e.key).default,l[o].group_id=e.group_id;let s=[];for(;null!==(i=t.exec(JSON.parse(e.key).default));){i.index===t.lastIndex&&t.lastIndex++;let e={title:void 0!==i[3]?i[3].toLocaleUpperCase():i[2].toLocaleUpperCase(),icon:""};s.push(e)}l[o].arr_key=s}}return l}UNSAFE_componentWillUpdate(e,t){t.isOpen&&(t.tab_choose===this.state.tab_choose&&t.isReload===this.state.isReload||(this.propsTemplate.form.cmd.visible=!0,this.propsTemplate.modal.visibility=!0,this.propsTemplate.header_tab.title="Shortcuts",this.propsTemplate.header_tab.btn_add=this.getBtnAdd(t.tab_choose),this.propsTemplate.header_tab.content_add.config.cmd.isShow=!1,this.propsTemplate.tab.data=this.getTabConfig(t.tab_choose),this.propsTemplate.list_shortcut=this.getDataTabKeyboard(t.tab_choose,t.data_edit)),t.isAddingNew===this.state.isAddingNew&&t.isReload===this.state.isReload||t.tab_choose===this.MY_KEYBOARD&&(this.propsTemplate.header_tab.content_add=this.getContentAdd(t.isAddingNew,t.data_add)))}componentDidMount(){o.g.confirmStartOnlyOnceKeyboard(this)}render(){return this.state.isOpen?i.a.createElement(E,{ref:this.RefKeyboard,stateData:Object(k.a)({},this.propsTemplate)}):null}}var N=S;class L extends s.Component{constructor(e){super(e),this.callScreen=()=>{if(this.state.isListen){var e=o.g.getListNotifications(this.type_screen);void 0!==e&&e.length>0&&(o.g.clearNotifyType(this.type_screen),this.setState({data:e}))}},this.state={isListen:!1,data:[]},this.type_screen="notifyToast"}componentDidMount(){o.g.addScreen(this),this.setState({isListen:!0})}render(){const e=Object(n.b)("uContent");return i.a.createElement(i.a.Fragment,null,i.a.createElement(v,null),i.a.createElement(d.a,{data:this.state.data}),i.a.createElement(h,null),i.a.createElement(g,null),i.a.createElement(e,null),i.a.createElement(_,null),i.a.createElement(N,null))}}t.a=L},207:function(e,t,a){"use strict";var s=a(6),i=a(0),o=a.n(i),n=a(1),r=a(4),l=a(3);class _ extends i.Component{constructor(e){super(e),this.getLangTemplate=e=>({data:this.LANG_USER.map(t=>{let a={title:t.view,img:void 0===t.img?"":t.img,dataItem:{key:t.key}};return a.selected=a.dataItem.key===e,a}),abs_Click:this.changeLang}),this.changeLang=e=>{this.props.abs_Close(),this.setState({lang_select_key:e.key,lang_tempdate:this.getLangTemplate(e.key)},()=>{void 0===n.g.getAllLang()[e.key]?Object(r.b)([{txcode:"#sys:bo-load-jlang",input:{lang_data:e.key}}],{}).then(t=>{var a=n.g.foGetData("sys_lang_data",t);void 0===a&&(a={});var s=n.g.foGetData("lang_data",t);if(void 0!==s)for(var i in s)a[i]=s[i];n.g.addLang(e.key,a),this.callUpdateLang(e.key)},e=>{}):this.callUpdateLang(e.key)})},this.getDatafull=()=>({config:{default:{title:n.g.getLang("jLang_choose_language"),size:""},cmd:{visibility:!0===this.props.isOpen}},abs_Close:this.props.abs_Close}),this.type_screen="header",this.LANG_USER=n.g.getConfigUser("list_lang_config");for(var t={},a=Object(n.u)(),s=0;s<this.LANG_USER.length;s++)this.LANG_USER[s].key===a&&(t=this.LANG_USER[s]);this.state={data:this.LANG_USER,lang_select_key:t.key,lang_select_view:t.view,isOpen:!1,onMouse:!0,lang_tempdate:this.getLangTemplate(t.key)}}callUpdateLang(e){n.g.setLangKey(e),n.g.changeKeyLanguage(),n.g.callAllScreenListen(),document.title=n.g.getLang("title")}getConfigData(){return this.state.lang_tempdate}render(){const e=Object(l.b)("uChangeLang");let t=Object(l.b)("uModal");return o.a.createElement(t,{dataFull:this.getDatafull(),ref:this.ref_modal},o.a.createElement(e,{dataFull:Object(s.a)({},this.getConfigData())}))}}var d=_,c=a(8),u=a(208);const h={group_menu:{group_menu_name:"Home",group_menu_id:"0"}};class m{constructor(e){this.handelSelect=e=>{const t=e.group_menu_function_code.group_menu;void 0!==t&&void 0!==t.group_menu_function_code&&c.a.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:t.group_menu_function_code}}],{})},this.handelSelectPath=e=>{this.handelSelectMenu(e)},this.reloadMenu=()=>{this.dataFull.path=this.buildPathTemplate(),this.dataFull.sidebarBody=this.buildListMenuWithParentTemplate(this.MENUS,"0"),this.props.abs_rebuild()},this.chooseItem_mobile=e=>{},this.handelSelectMenu=e=>{const t=e.group_menu_function_code;this.dataFull.path=this.buildPathTemplate(t),this.dataFull.sidebarBody=this.buildListMenuWithParentTemplate(this.MENUS,t.group_menu.group_menu_id),this.props.abs_rebuild()},this.getDataFull=()=>this.dataFull,this.props=e;const t=n.g.cloneJson(u.a.getMenu(1))||[];this.MENUS=t.filter(e=>"T"===e.group_menu.group_menu_visible||!e.group_menu.group_menu_visible),this.MENU_JSON={},this.buildMenuJson(this.MENUS,"0"),this.dataFull={path:this.buildPathTemplate(),sidebarHeader:{title:n.g.getLang("header_app_title"),img:"../rs/global/img/logo_app_o9.svg"},sidebarBody:this.buildListMenuWithParentTemplate(this.MENUS,"0"),abs_select:this.handelSelect,abs_ClickPath:this.handelSelectPath,abs_ChooseItem:this.handelSelectMenu,abs_ResetData:this.reloadMenu,abs_ChooseItemMobile:this.chooseItem_mobile}}buildPathTemplate(e){var t,a;let s=[{title:h.group_menu.group_menu_name,group_menu_function_code:h}];var i=(null===e||void 0===e||null===(t=e.group_menu)||void 0===t?void 0:t.group_menu_parent)||"0";let o=[];for(;"0"!==i&&i;){const e=this.MENU_JSON[i].dataItem;if(!e)break;var r;o.push({title:this.getNameMenu(e),group_menu_function_code:e}),i=null===e||void 0===e||null===(r=e.group_menu)||void 0===r?void 0:r.group_menu_parent}return s=s.concat(o.reverse()),e&&"0"!==(null===e||void 0===e||null===(a=e.group_menu)||void 0===a?void 0:a.group_menu_id)&&s.push({title:this.getNameMenu(e),group_menu_function_code:e}),{data:s,title_back:n.g.getLang("header_menu_backto"),node_parent:s[s.length-2]}}buildListMenuWithParentTemplate(e,t){return e.filter(e=>e.group_menu.group_menu_parent===t).map(e=>{const t=e.group_menu.group_menu_id;return{dataItem:e,data:this.MENU_JSON[t].data,group_menu_function_code:e,title:this.getNameMenu(e),icon:e.group_menu.group_menu_icon||(this.MENU_JSON[t].data.length?"folder_open":""),device_option:{desktop:{show_type:"min"},mobile:{show_type:"min"}}}})}buildMenuJson(e,t){let a=[],s=this.getDataOfParent(e,t);if(s.length>0)for(let i=0;i<s.length;i++){let t=s[i],o=t.group_menu.group_menu_name,r=t.group_menu.group_menu_function_code;if(void 0!==t.group_menu.group_menu_lang&&(o=t.group_menu.group_menu_lang[n.g.getLangKey()]),""!==o&&void 0!==o){let s=this.buildMenuJson(e,t.group_menu.group_menu_id),i="";void 0!==t.group_menu.group_menu_icon&&(i=t.group_menu.group_menu_icon);let n={dataItem:t,data:s,group_menu_function_code:r,title:o,icon:i,device_option:{desktop:{show_type:"min"},mobile:{show_type:"min"}}};this.MENU_JSON[t.group_menu.group_menu_id]=n,a.push(n)}}return a}getNameMenu(e){var t;return(null===(t=e.group_menu.group_menu_lang)||void 0===t?void 0:t[n.g.getLangKey()])||e.group_menu.group_menu_name}getDataOfParent(e,t){let a=[];for(let s=0;s<e.length;s++){let i=e[s];t===i.group_menu.group_menu_parent&&a.push(i)}return a}}class g{constructor(e){var t,a;this.rebuildDataFull=()=>{this.info_user_template=this.loopLoopMenuData(this.DATA_MENU,"0")},this.getDataFull=()=>this.info_user_template;let i=n.g.profileUser_get("avatar");""===i.trim()&&(i="../rs/global/img/avatar.jpg");const o=n.g.context_get("user_acc"),r=(null===(t=e.additionalConfig)||void 0===t||null===(a=t.dataHeader)||void 0===a?void 0:a.persist_info_user_add)||{};this.info_user_template=Object(s.a)({icon:i,for_mobile_app:{title:"Good morning, Vinh!"},img_for_option:"../rs/global/img/logo_branch.png",data:[{icon:i,value:"",title_big:n.g.context_get("user_jwebui.email"),title_sub:(null===o||void 0===o?void 0:o.usrname)||n.g.context_get("user_jwebui.email"),config:{isHaveUnderline:!0}},{img:"devices_other",title:n.g.getLang("jMyDevice_title"),value:"MY_DEVICE"},{img:"person",title:n.g.getLang("jProfile_title"),value:"MY_PROFILE",config:{isHaveUnderline:!0}},{img:"lock",title:n.g.getLang("cLockScreen_title"),value:"LOCK_SCREEN"},{img:"language",title:n.g.getLang("change_language_title"),value:"CHANGE_LANG",config:{isHaveUnderline:!0}},{img:"exit_to_app",title:n.g.getLang("device_action"),value:"LOGOUT"}]},r)}}class p{constructor(e){this.getLink=e=>{let t="";for(var a=e.group_menu.group_menu_parent;"0"!==a&&a;){const e=this.MENU_JSON[a];if(!e)break;var s;t="/"+this.getNameMenu(e)+t,a=null===e||void 0===e||null===(s=e.group_menu)||void 0===s?void 0:s.group_menu_parent}return t},this.handleClearValueSearchInput=()=>{this.dataFull.search_input_value="",this.props.abs_rebuild(),this.handelEnterSearchInput()},this.handelChangeSearchInput=e=>{this.dataFull.search_input_value=e.target.value,this.search_timer&&clearTimeout(this.search_timer),this.search_timer=setTimeout(()=>{this.handelEnterSearchInput()},500),this.props.abs_rebuild()},this.handelEnterSearchInput=e=>{this.search_timer&&clearTimeout(this.search_timer),this.rebuildContentFunction(),this.rebuildTitle(),this.dataFull.config.mode_for_all=""===this.dataFull.search_input_value?"search_begin":"search_typing",this.props.abs_rebuild()},this.clickItem=e=>{var t;const a=null===e||void 0===e||null===(t=e.group_menu)||void 0===t?void 0:t.group_menu_function_code;a&&(this.pushSearchItemToStore(e),c.a.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:a}}],{}))},this.getDataFull=()=>(this.rebuildContentFunction(),this.rebuildTitle(),this.dataFull),this.props=e;const t=u.a.getMenu(1);this.search_timer=null,this.MENU_JSON={};for(const a of t)this.MENU_JSON[a.group_menu.group_menu_id]=a;this.MENU_VIEW=t.filter(e=>{var t;return"C"!==e.group_menu.group_menu_visible&&(null===e||void 0===e||null===(t=e.group_menu)||void 0===t?void 0:t.group_menu_id)}),this.dataFull={config:{search_voice_open:!1,search_voice_lang:"EN",mode_for_all:"search_begin"},tab_id_selected:"content_function",title:{tab_all:"",tab_function:"",tab_fordata:"",tab_suggestion:"",tab_content_all_top_function:"",tab_content_all_recently_function:"",tab_content_function:"",tab_content_fordata:"",tab_content_suggestion:{title:"",result:""},search_input:"",show_more_result:"",search_begin_title:"",search_begin_title_sub:"",no_data_title:"",no_data_title_sub:""},search_input_value:"",content_function:{tab_id:"content_function",isLoading:!1,isLoadData:!1,data:[],list_history_for_session:{isLoading:!1,data:this.getFunctionTopSearch()},list_search_history:{isLoading:!1,data:this.getFunctionRecently()}},content_fordata:{tab_id:"content_fordata",isLoading:!1,data:[]},content_suggestion:{tab_id:"content_suggestion",isLoading:!1,data:[]},content_all:{tab_id:"content_all",list_top_form:{isLoading:!1,data:[]},list_search_history:{isLoading:!1,data:[]}},abs_ClickToFunction:()=>{console.log("abs_ClickToFunction")},abs_ClickToFordata:()=>{console.log("abs_ClickToFordata")},abs_ClickToSuggestion:()=>{console.log("abs_ClickToSuggestion")},abs_ClickMoreFunction:()=>{console.log("abs_ClickMoreFunction")},abs_ClickMoreFordata:()=>{console.log("abs_ClickMoreFordata")},abs_ClickMoreSuggestion:()=>{console.log("abs_ClickMoreSuggestion")},abs_ClickDataItem:this.clickItem,abs_ClickTab:()=>{console.log("abs_ClickTab")},abs_Change:this.handelChangeSearchInput,abs_Search:this.handelEnterSearchInput,abs_ClearValue:this.handleClearValueSearchInput},this.rebuildTitle()}getNameMenu(e){var t;return null===(t=e.group_menu.group_menu_lang)||void 0===t?void 0:t[n.g.getLangKey()]}getSearchValue(e,t){var a,s;if(!t)return 0;return((null===(a=n.g.searchPerfect(e,t))||void 0===a||null===(s=a.filter(e=>e.status))||void 0===s?void 0:s.length)||0)/t.length}rebuildContentFunction(){const e=this.dataFull.search_input_value.trim(),t=e.toLowerCase().trim().split(" ");let a=this.MENU_VIEW.filter(e=>{let a=this.getNameMenu(e),s=e.group_menu.group_menu_function_code,i=(a+s).toLowerCase();if(!s)return!1;for(const o of t)if(!i.includes(o))return!1;return!0});a=a.sort((e,t)=>this.getNameMenu(e)<this.getNameMenu(t)?-1:1),this.dataFull.content_function.data=a.map(t=>{const a=this.getNameMenu(t),s=a.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());let i=a,o="",r="";return-1!==s&&(i=a.substring(0,s),o=a.substring(s,s+e.length),r=a.substring(s+e.length,a.length)),{info:{label_text:n.g.getLang("header_search_perform"),label_icon:"",icon_img:"account_balance",search:{title_1:i,result:o,title_2:r},link:this.getLink(t),module:{type:"Database",title_1:"in",title_2:"Account Management"}},dataItem:t,mode:"mode_1"}}),this.dataFull.content_function.list_history_for_session.data=this.getFunctionTopSearch(),this.dataFull.content_function.list_search_history.data=this.getFunctionRecently()}getRandom(){return Math.round(100*Math.random())/100}rebuildTitle(){const e={tab_all:n.g.getLang("header_tab_all"),tab_function:n.g.getLang("header_tab_function"),tab_fordata:n.g.getLang("header_tab_fordata"),tab_suggestion:n.g.getLang("header_tab_suggestion"),tab_content_all_top_function:n.g.getLang("header_tab_content_all_top_function"),tab_content_all_recently_function:n.g.getLang("header_tab_content_all_recently_function"),tab_content_function:n.g.getLang("header_tab_content_function").replace("@{param1}",this.dataFull.content_function.data.length).replace("@{param2}",this.getRandom()),tab_content_fordata:"DATA (11)",tab_content_suggestion:{title:"SUGGESTION for",result:"User"},search_input:n.g.getLang("header_search_input"),show_more_result:n.g.getLang("header_show_more_result"),search_begin_title:n.g.getLang("header_search_begin_title").replace("@{param1}",n.g.getLang("header_app_title")),search_begin_title_sub:n.g.getLang("header_search_begin_title_sub"),no_data_title:n.g.getLang("header_no_data_title").replace("@{param1}",this.dataFull.search_input_value),no_data_title_sub:n.g.getLang("header_no_data_title_sub")};return this.dataFull.title=e,e}getFunctionTopSearch(){let e=localStorage.getItem("JWEBUI_SEARCH_FUNCTION")||"[]",t=n.g.parseJson(e)||[];return t=t.sort((e,t)=>t.count-e.count),t.map(e=>{const t=this.getNameMenu(e);let a="";for(var s=e.group_menu.group_menu_parent;"0"!==s&&s;){const e=this.MENU_JSON[s];if(!e)break;var i,o;s=null===e||void 0===e||null===(i=e.group_menu)||void 0===i?void 0:i.group_menu_parent,a=null===e||void 0===e||null===(o=e.group_menu)||void 0===o?void 0:o.group_menu_icon}return{title_function:t,dataItem:e,img:a||"account_balance"}})}getFunctionRecently(){let e=localStorage.getItem("JWEBUI_SEARCH_FUNCTION")||"[]";return(n.g.parseJson(e)||[]).map(e=>({title_function:this.getNameMenu(e),dataItem:e,img:"menu"}))}pushSearchItemToStore(e){let t=localStorage.getItem("JWEBUI_SEARCH_FUNCTION")||"[]",a=n.g.parseJson(t)||[],s=!1;for(const n of a){var i,o;(null===n||void 0===n||null===(i=n.group_menu)||void 0===i?void 0:i.group_menu_function_code)===(null===e||void 0===e||null===(o=e.group_menu)||void 0===o?void 0:o.group_menu_function_code)&&(n.count++,s=!0)}!1===s&&(e.count=1,a.unshift(e),a=a.slice(0,5)),localStorage.setItem("JWEBUI_SEARCH_FUNCTION",JSON.stringify(a))}}var b=a(58);class f extends i.Component{constructor(e){var t;super(e),this.rebuildDataFull=e=>{let t=this.state.data_full;switch(e){case"search_global":t.search_global=this.LOGIC_SEARCH.getDataFull();break;case"sidebarMenu":t.sidebarMenu=this.LOGIC_MENU.getDataFull()}this.setState({data_full:t})},this.onClickNotification=()=>{let{data_full:e}=this.state;e.notification.number_unRead=0,this.setState({data_full:e})},this.onClickMessage=e=>{let t=e.dataItem;void 0!==t.action&&t.action.length>0&&c.a.fo(t.action,c.a.createContext(t.data,{},{},{}));let{data_full:a}=this.state,s=a.notification.data.filter(t=>t.id===e.id);s.length>0&&!1===s[0].isRead&&(s[0].isRead=!0,a.notification.number_unRead--,a.notification.headerNoti.title_header=this.getUnreadNotification(a.notification.data),this.setState({data_full:a}))},this.onClickReadAll=()=>{let{data_full:e}=this.state;for(let t=0;t<e.notification.data.length;t++)e.notification.data[t].isRead=!0;e.notification.number_unRead=0,e.notification.headerNoti.title_header=this.getUnreadNotification(e.notification.data),this.setState({data_full:e})},this.callScreen=()=>{let{data_full:e}=this.state;if(this.state.isListen){let t=e.notification.data,a=n.g.getListNotifications("notifyDefault");if(a=[],void 0!==a&&t.length<a.length&&a.length>0){e.notification.number_unRead++,e.notification.headerNoti.title_readAll=n.g.getLang("notifyDefaultMarksAsRead");for(let s=t.length;s<a.length;s++)e.notification.data.unshift({id:s,title:a[s].description,title_sub:n.g.timeSince(Date.now()),isRead:!1,time:Date.now(),dataItem:a[s]});e.notification.headerNoti.title_header=this.getUnreadNotification(e.notification.data)}e.info_connect.isOnline=Object(b.a)(),e.info_connect.title.title_status=Object(b.a)()?n.g.getLang("header_connected"):n.g.getLang("header_disconnected"),this.LOGIC_MENU.reloadMenu(),e.sidebarMenu=this.LOGIC_MENU.getDataFull(),e.info_user=this.LOGIC_INFO_USER.getDataFull(),e.search_global=this.LOGIC_SEARCH.getDataFull()}this.setState({data_full:e,auto_change:n.g.autoID()})},this.onSelectedItemMenuProfile=e=>{switch(e.value){case"CHANGE_LANG":this.setState({isOpenLang:!0});break;case"MY_PROFILE":c.a.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:"myProfile"}}],{});break;case"MY_DEVICE":c.a.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:"myDevice"}}],{});break;case"LOCK_SCREEN":n.g.relogin_lockScreen();break;case"LOGOUT":Object(r.b)([{txcode:"bo-delete-session",input:{token_webui:n.g.getSessionFromStore()}}],{}).then(this.gotoLogin()),void 0!==this.props.check_screen_width&&this.props.check_screen_width&&this.props.closedUser()}},this.gotoLogin=()=>{window.location.replace(n.g.getUrlLogin_ver2())},this.onSelectMenu=e=>{e.value&&c.a.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:e.value}}],{})},this.modalLangClose=()=>{this.setState({isOpenLang:!1})},this.LOGIC_MENU=new m({abs_rebuild:()=>this.rebuildDataFull("sidebarMenu")}),this.LOGIC_INFO_USER=new g(Object(s.a)({},this.props)),this.LOGIC_SEARCH=new p({abs_rebuild:()=>this.rebuildDataFull("search_global")});let a={sidebarMenu:this.LOGIC_MENU.getDataFull(),info_connect:{title:{title_status:n.g.getLang("header_connected")+":",title_server_id:window.mainstart.server_name||"JWEBUI",title_version:window.mainstart.server_version},isOnline:!0},info_user:this.LOGIC_INFO_USER.getDataFull(),notification:{tooltip:{title_big:n.g.getLang("header_notifications")},number_unRead:0,data:[],headerNoti:{title_header:n.g.getLang("header_notifications"),title_readAll:n.g.getLang("notifyDefaultMarksAsRead")},abs_Open:this.onClickNotification,abs_ClickItem:this.onClickMessage,abs_ReadAll:this.onClickReadAll},search_global:this.LOGIC_SEARCH.getDataFull()};void 0!==(null===(t=this.props.additionalConfig)||void 0===t?void 0:t.dataHeader)&&(a=Object.assign(a,this.props.additionalConfig.dataHeader)),this.type_screen="header",this.state={isListen:!1,langKey:n.g.getLangKey(),isOpenLang:!1,isOpen:!0,isUserOpen:!0,isSearchOpen:!0,check_screen_width:void 0,data_full:a}}componentDidMount(){n.g.addScreen(this),this.setState({isListen:!0})}getUnreadNotification(){let e=0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>{t.isRead||e++}),`${n.g.getLang("notifyDefaultTitle")} (${e})`}componentDidUpdate(){let{data_full:e}=this.state,t=n.g.getLangKey(),a=e.notification.data;t!==this.state.langKey&&(e.info_user.data[0].title_big=n.g.context_get("user_jwebui.email"),e.info_user.data[1].title=n.g.getLang("jMyDevice_title"),e.info_user.data[2].title=n.g.getLang("jProfile_title"),e.info_user.data[3].title=n.g.getLang("cLockScreen_title"),e.info_user.data[4].title=n.g.getLang("change_language_title"),e.info_user.data[5].title=n.g.getLang("device_action"),e.notification.headerNoti.title_readAll=n.g.getLang("notifyDefaultMarksAsRead"),e.notification.headerNoti.title_header=this.getUnreadNotification(e.notification.data),a=this.setTimeSinceNotification(a),this.setState({langKey:t,data_full:e})),a.length>0?(void 0!==this.save_interval&&clearInterval(this.save_interval),this.save_interval=setInterval(()=>{a=this.setTimeSinceNotification(a),this.setState({data_full:e})},6e4)):clearInterval(this.save_interval)}setTimeSinceNotification(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=0;t<e.length;t++)e[t].title_sub=n.g.timeSince(e[t].time);return e}componentWillUnmount(){clearInterval(this.save_interval)}render(){const e=Object(l.b)("uHeaderMoreOption");return o.a.createElement(o.a.Fragment,null,o.a.createElement(d,{isOpen:this.state.isOpenLang,abs_Close:this.modalLangClose}),o.a.createElement(e,{dataFull:Object(s.a)(Object(s.a)(Object(s.a)({},this.state.data_full),{notification:void 0}),{},{abs_search:this.onSearch,abs_Click:this.onSelectedItemMenuProfile,abs_select:this.onSelectMenu})}))}}t.a=f},208:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(1);class i{static getMenu(e){var t=s.g.getRoleCache(),a=s.g.getData("group_menu_role");let i=s.g.cloneJson(a);for(let s=0;s<i.length;s++){const e=i[s];e.group_menu.group_menu_order?i[s].group_menu.group_menu_order=Number(e.group_menu.group_menu_order):i[s].group_menu.group_menu_order=0}if(void 0!==(a=(a=i).sort((e,t)=>e.group_menu.group_menu_order-t.group_menu.group_menu_order))){switch(e){case 1:for(let e=0;e<a.length;e++)"I"===a[e].group_menu.group_menu_status&&a.splice(e,1)}return function e(t,a,s){var i=[];if(void 0!==s)for(var o=0;o<a.length;o++){var n=a[o];if(n.group_menu.group_menu_parent===s){var r=e(t,a,n.group_menu.group_menu_id);if(r.length>0){i[i.length]=n;for(var l=0;l<r.length;l++)i[i.length]=r[l]}else void 0!==t[n.group_menu.group_menu_function_code]&&!0===t[n.group_menu.group_menu_function_code]&&(i[i.length]=n)}}return i}(t,a,"0")}}}},211:function(e,t,a){"use strict";var s=a(0),i=a.n(s),o=a(3);class n extends s.Component{constructor(){super(...arguments),this.getUNotificationConfig=()=>{let e={config:{mode:"toast"},data:[]};return this.props.data.forEach((t,a)=>{e.data.push({id:t.time,title:t.description,color:t.class_,message:t.description,config:{time_out:1e4}})}),e}}render(){const e=Object(o.b)("uNotification");return i.a.createElement(e,{dataFull:this.getUNotificationConfig()})}}t.a=n}}]);