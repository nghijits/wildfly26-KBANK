(this["webpackJsonpstable-app"]=this["webpackJsonpstable-app"]||[]).push([[134],[,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"K",(function(){return setMsgSystem})),__webpack_require__.d(__webpack_exports__,"G",(function(){return sendMsgSystem})),__webpack_require__.d(__webpack_exports__,"H",(function(){return setDataBase})),__webpack_require__.d(__webpack_exports__,"n",(function(){return getDataBase})),__webpack_require__.d(__webpack_exports__,"f",(function(){return context_set})),__webpack_require__.d(__webpack_exports__,"o",(function(){return getDataBaseTable})),__webpack_require__.d(__webpack_exports__,"J",(function(){return setLibDefault})),__webpack_require__.d(__webpack_exports__,"N",(function(){return setUserConfig})),__webpack_require__.d(__webpack_exports__,"x",(function(){return getUserConfig})),__webpack_require__.d(__webpack_exports__,"O",(function(){return setUserConfigDefault})),__webpack_require__.d(__webpack_exports__,"p",(function(){return getForm})),__webpack_require__.d(__webpack_exports__,"l",(function(){return form_getCDList})),__webpack_require__.d(__webpack_exports__,"v",(function(){return getReactTxt})),__webpack_require__.d(__webpack_exports__,"q",(function(){return getFormInfo})),__webpack_require__.d(__webpack_exports__,"m",(function(){return getAllForm})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addForm})),__webpack_require__.d(__webpack_exports__,"I",(function(){return setForm})),__webpack_require__.d(__webpack_exports__,"M",(function(){return setRoleOfUser})),__webpack_require__.d(__webpack_exports__,"w",(function(){return getRoleOfUser})),__webpack_require__.d(__webpack_exports__,"L",(function(){return setRoleCache})),__webpack_require__.d(__webpack_exports__,"P",(function(){return setUserID})),__webpack_require__.d(__webpack_exports__,"Q",(function(){return setUserIDFind})),__webpack_require__.d(__webpack_exports__,"y",(function(){return getUserID})),__webpack_require__.d(__webpack_exports__,"z",(function(){return getUserIDFind})),__webpack_require__.d(__webpack_exports__,"d",(function(){return buildRoleOfForm})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addRole})),__webpack_require__.d(__webpack_exports__,"s",(function(){return getKey_D})),__webpack_require__.d(__webpack_exports__,"r",(function(){return getKey_APP})),__webpack_require__.d(__webpack_exports__,"A",(function(){return getWebSV})),__webpack_require__.d(__webpack_exports__,"u",(function(){return getLangKey})),__webpack_require__.d(__webpack_exports__,"t",(function(){return getLang})),__webpack_require__.d(__webpack_exports__,"c",(function(){return autoId})),__webpack_require__.d(__webpack_exports__,"j",(function(){return formChatBox_set})),__webpack_require__.d(__webpack_exports__,"i",(function(){return formChatBox_open})),__webpack_require__.d(__webpack_exports__,"h",(function(){return formChatBox_addDebug})),__webpack_require__.d(__webpack_exports__,"k",(function(){return formChatBox_setCopyToClipboard})),__webpack_require__.d(__webpack_exports__,"D",(function(){return lazyLoad})),__webpack_require__.d(__webpack_exports__,"e",(function(){return calculatorBandwidth})),__webpack_require__.d(__webpack_exports__,"B",(function(){return hostname_set})),__webpack_require__.d(__webpack_exports__,"F",(function(){return protocol_set})),__webpack_require__.d(__webpack_exports__,"E",(function(){return port_set})),__webpack_require__.d(__webpack_exports__,"C",(function(){return isMobile_set})),__webpack_require__.d(__webpack_exports__,"g",(function(){return Application}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14),react_dom__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__),_libQuery__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(61),_libClient__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_libPost__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4),_tx_coreTx__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9),_tx_basicTxCode__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(66),_libStoreHtml5__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(64),_libDatabaseSmart__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(65),_libNetwork__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(58),_libKeyboard__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(32),_libRSA__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(19),cache={user:{roles:[],role_cache:{},config_of_user:{},config_of_user_default:{},session_id:"",user_id:"",my_device:{my_ip:"",screen:"",browser:"",browserVersion:"",browserMajorVersion:"",mobile:"",os:"",osVersion:"",cookies:""},user_profile:{}},config:{form_config:{},role_function:{},role_right:{},fo:{},fo_black_list:{tx_fo:{},function:{}},parameter_system:{},location:{hostname:"",protocol:"",port:""},isMobile:!1},app_config:{},data_schema:{},data:{},constData:{},form:{auto_form:{},opening_forms:[],selected_form:{},shared_form_data:{},time_add_component:300,button_watting_action:5e3,mapping_dom_react:{}},lib_defaults:[],screens:[],websocket:{connectStatus:"Close",webSocket:null},notification:{},trace:[],protect:{key:"",bitwise:0,time_refresh:3e5,oncePacked:0},chat:{data_chat:[]},master_data:{},system_mode:{pin:!1,isLock:!1,reloginCount:0,reloginUserCount:0,safe:{fo:";fo-load-txFo;fo-protect-start;fo-load-bigData;fo-load-screen;fo-container;fo-scheduleJob-extendToken;",bo:";bo-load-txFo;"},mode:{lock:{fo:";fo-goto-pageLogin;fo-protect-key;",bo:";bo-relogin-login;bo-relogin-loginPin;bo-relogin-lockToken;"}}},rsa:{position_default:121,algorithm:{1:{drop:[1],id:"1",cross:{group:3,run:["02","10"],max:4},tag:{val:"AGhuk",start:100},crack:"aOiO"}},algorithm_response:{1:{translation:[4,5]}},privateKey:"",publicKey:"",count_change:0,max_use:30,template:{}},context:{time:0,user_jwebui:{},user_acc:{}},contextweb:{},store_html5:{},statusDebug:!1,assistant:{isRun:!0,dataAssistantSupport:[],max_data:20},scheduleJob:{job_run:{},job_config:{}},template_config:{},template_html:{},loading_cache:{component:{},form:{}},response_file:{file_name:"",file_name_exist:!1,buffer_data:"",buffer_status:!1}},obj_component_render_config=void 0,obj_component_render_role=void 0,obj_component_render_property=void 0,obj_component_render_validate=void 0,obj_component_render_lang=void 0,modal_confirm=void 0,modal_compare=void 0,modal_keyboard=void 0,modal_dynamic_fromFromCode=void 0,form_relogin=void 0,form_relogin_timeout=void 0,form_chat=void 0,form_WChatBox=void 0,elearning_render_markdown=void 0,code_basicTxCode=_tx_basicTxCode__WEBPACK_IMPORTED_MODULE_6__.a,list_jcontext=[],copyToClipboard=null,var_MsgSystem=null;const setMsgSystem=e=>{var_MsgSystem=e},sendMsgSystem=(e,t)=>{var_MsgSystem&&(var_MsgSystem.activeMsg(e,t),Application.callAllScreenListen())},setDataBase=e=>{cache.data_schema=e},getDataBase=()=>cache.data_schema,context_set=e=>{cache.context=e},getDataBaseTable=e=>{for(var t=0;t<cache.data_schema.all_id_button.length;t++)if(cache.data_schema.all_id_button[t].type===e)return cache.data_schema.all_id_button[t]},setLibDefault=e=>{cache.lib_defaults=e},getLibDefault=e=>{for(var t=0;t<cache.lib_defaults.length;t++){var a=cache.lib_defaults[t];if(null!=a.code&&a.code===e)return a}},readFlowFunctionClientStep=(e,t,a)=>{for(var i=0;i<t.length;i++)if(null!=t[i].sourceId&&t[i].sourceId===e&&null!=t[i].targetId)for(var o=0;o<a.length;o++)if(null!=a[o].action_code&&a[o].action_code===t[i].targetId)return a[o]},getAllLibDefault=()=>cache.lib_defaults,setUserConfig=e=>{cache.user.config_of_user=e},getUserConfig=()=>cache.user.config_of_user,setUserConfigDefault=e=>{cache.user.config_of_user_default=e},getUserConfigDefault=()=>cache.user.config_of_user_default,getAllAppAuto=()=>cache.form.auto_form,getForm=e=>{if(null!=cache.config.form_config[e]&&null!=cache.config.form_config[e].list_layout)return cache.config.form_config[e].list_layout},form_getCDList=(e,t,a)=>{if(null!=cache.config.form_config[e]&&null!=cache.config.form_config[e].list_layout){let t=cache.config.form_config[e].list_layout,a=[];for(let e=0;e<t.length;e++){let c=t[e].list_view;if(void 0!==c)for(let e=0;e<c.length;e++){let t=c[e].list_input;if(void 0!==t)for(let e=0;e<t.length;e++){let c=t[e];switch(c.inputtype){case"cTextInput":break;case"jSelect":if(void 0!==c.config&&void 0!==c.config.cdlist&&"cdlist"===c.config.data_mode&&void 0!==c.config.cdlist.cdgrp&&void 0!==c.config.cdlist.cdname){0===Application.data_cdList(c.config.cdlist.cdgrp,c.config.cdlist.cdname).length&&a.push({dbcoffee_create:!1,dbcoffee_col1:c.config.cdlist.cdgrp,dbcoffee_col2:c.config.cdlist.cdname})}break;case"cTableDefault":let e=Application.jsonParser(c.config.columns)||[];for(const s of e)if("ColumnCdlist"===s.inputtype||"ColumnSelectEdit"===s.inputtype){var i,o;const e=(null===(i=s.config)||void 0===i?void 0:i.cdgrp)||"",t=(null===(o=s.config)||void 0===o?void 0:o.cdname)||"";0===Application.data_cdList(e,t).length&&a.push({dbcoffee_create:!1,dbcoffee_col1:e,dbcoffee_col2:t})}break;case"jTableForm":let t=Application.jsonParser(c.config.columns)||[];for(const i of t)if("ColumnCdlist"===i.inputtype||"ColumnSelectEdit"===i.inputtype){var s,l;const e=(null===(s=i.config)||void 0===s?void 0:s.cdgrp)||"",t=(null===(l=i.config)||void 0===l?void 0:l.cdname)||"";0===Application.data_cdList(e,t).length&&a.push({dbcoffee_create:!1,dbcoffee_col1:e,dbcoffee_col2:t})}break;case"jTableSearch":let d=Application.jsonParser(c.config.columns)||[];for(const i of d)if("ColumnCdlist"===i.inputtype||"ColumnSelectEdit"===i.inputtype){var n,r;const e=(null===(n=i.config)||void 0===n?void 0:n.cdgrp)||"",t=(null===(r=i.config)||void 0===r?void 0:r.cdname)||"";0===Application.data_cdList(e,t).length&&a.push({dbcoffee_create:!1,dbcoffee_col1:e,dbcoffee_col2:t})}}}}}let c=[];return c=a,{c_cdlist:c}}return{}},getReactTxt=e=>{if(null!=cache.config.form_config[e]&&null!=cache.config.form_config[e].react_txt)return cache.config.form_config[e].react_txt},getFormInfo=e=>null!=cache.config.form_config[e]&&null!=cache.config.form_config[e].info?cache.config.form_config[e].info:{},getAllForm=()=>cache.config.form_config,addForm=(e,t)=>{cache.config.form_config[e]=t},setForm=e=>{cache.config.form_config=e},setRoleOfUser=e=>{null!==e&&(cache.user.roles=e)},getRoleOfUser=()=>cache.user.roles,setRoleCache=e=>{null!==e&&(cache.user.role_cache=e)},setUserID=e=>{null!==e&&(cache.user.session_id=e)},setUserIDFind=e=>{null!==e&&(cache.user.user_id=e)},getUserID=()=>cache.user.session_id,getUserIDFind=()=>cache.user.user_id,buildRoleOfForm=e=>{for(var t=getRole(e),a={},i=0;i<cache.user.roles.length;i++)if(void 0!==t[cache.user.roles[i]]){var o=t[cache.user.roles[i]];for(var s in o)if(void 0===a[s])a[s]=o[s];else{var l=a[s];if(void 0!==o[s].role)for(var n in o[s].role)!0===o[s].role[n]&&void 0!==l.role&&(l.role[n]=!0);for(var r in o[s])void 0!==o[s][r]&&!0===o[s][r].install&&(l[r]=o[s][r]);a[s]=l}}cache.config.role_right[e]=a},addRole=(e,t)=>{cache.config.role_function[e]=null!=t?t:{}},getRole=e=>void 0!==cache.config.role_function[e]?cache.config.role_function[e]:{},getKey_D=()=>cache.app_config.domain,getKey_APP=()=>cache.app_config.para.app_id,getWebSV=()=>cache.app_config.server.web,getLangKey=()=>cache.app_config.para.language,getLang=e=>Application.isDebug()&&e?`(${e})`:null!=cache.app_config&&void 0!==cache.app_config.lang_data[cache.app_config.para.language]&&null!=cache.app_config.lang_data[cache.app_config.para.language]&&void 0!==cache.app_config.lang_data[cache.app_config.para.language][e]?cache.app_config.lang_data[cache.app_config.para.language][e]:""!==e?"#"+e:"",autoId=()=>{for(var e=""+(new Date).getTime()+(Math.floor(6e6*Math.random())+1),t="",a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i=0;i<e.length;i++){var o=Number(e[i]);if(0<=o&&o<=2&&e.length>i+1){var s=10*o+Number(e[i+1]);if(s>0&&s<a.length){t+=a[s],i++;continue}}t+=e[i]}return t},buildBitwiseFromProtect=()=>{var e=cache.protect.key;if(void 0!==e){for(var t=e.codePointAt(0),a=1;a<e.length;a++)t^=e.codePointAt(a);cache.protect.bitwise=t}},formChatBox_set=e=>{form_WChatBox=e},formChatBox_open=e=>{void 0!==form_WChatBox&&form_WChatBox.open(e)},formChatBox_addDebug=e=>{void 0!==form_WChatBox&&form_WChatBox.addDebug(e)},formChatBox_setCopyToClipboard=e=>{copyToClipboard=e},createStringID=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1),lazyLoad=e=>{let t=!1;for(let a in e){void 0===cache.data[a]&&(cache.data[a]=[]),"c_cdlist"===a&&(t=!0);let i=e[a];for(let e=0;e<i.length;e++){let t=i[e][a],o=!1;for(let e=0;e<cache.data[a].length;e++){let i=cache.data[a][e][a];if(void 0!==t.AFGHkeyIndexWJ&&void 0!==i.AFGHkeyIndexWJ&&t.AFGHkeyIndexWJ===i.AFGHkeyIndexWJ){i=t,o=!0;break}}o||cache.data[a].unshift(i[e])}}t&&Application.data_buildCdListQuick(cache.data.c_cdlist)},calculatorBandwidth=(e,t,a)=>{},hostname_set=e=>{cache.config.location.hostname=e},hostname_get=()=>cache.config.location.hostname,protocol_set=e=>{cache.config.location.protocol=e},protocol_get=()=>cache.config.location.protocol,port_set=e=>{cache.config.location.port=e},port_get=()=>cache.config.location.port,isMobile_set=e=>{cache.config.isMobile=e},isMobile_get=()=>cache.config.isMobile;class Application{constructor(){this.convertConfigWithContext=e=>{let t=e,a=Application.getlistCodeContext(e);for(const i of a){let e=Application.context_get(i.code)||"";t=t.replace(i.key,e),"number"===typeof e&&(t=Number(t))}return t}}static readHTML5RSA(){var e=new URL(window.location.href);cache.store_html5=_libStoreHtml5__WEBPACK_IMPORTED_MODULE_7__.a.buildStoreHtml5_for_app(e)}static start(e){cache.app_config=e;var t="";void 0!==cache.store_html5.session_id_app&&(t=cache.store_html5.session_id_app),cache.app_config.para.app_id=cache.store_html5.app_code,void 0!==t&&null!=t&&""!==(t=t.trim())&&setUserID(t),cache.app_config.domain=hostname_get(),cache.app_config.server.web=cache.app_config.server.web.replace("#",hostname_get()),cache.app_config.server.socket=cache.app_config.server.socket.replace("#",hostname_get()),Object(_libPost__WEBPACK_IMPORTED_MODULE_4__.b)([{txcode:"#sys:bo-protected-checkParameter",input:{}}],{}).then(e=>{Application.setMyDevice(Application.foGetData("read_info_client",e)),Application.start_step2()},e=>{})}static start_step2(){Object(_libNetwork__WEBPACK_IMPORTED_MODULE_9__.b)(),Application.compareMyDevice()?Application.loadFoDefault():_libClient__WEBPACK_IMPORTED_MODULE_3__.a.fo([{txcode:"#sys:fo-goto-pageLogin",input:{line:"start_step2"}}],{})}static template_getConfigTemplate(){let e=window.obManagerTemplate_libManagerTemplate.managerTemplate_getDevie();return cache.store_html5.configTemplate[e]}static compareMyDevice(){let e=Application.getMyDevice(),t=cache.store_html5;if(void 0!==t.device){for(let a in t.device){if(void 0===e[a]||void 0===t.device[a])return!1;if(t.device[a]!==e[a])return!1}return!0}return!1}static loadFoDefault(){""!==cache.app_config.fo_load?Object(_libPost__WEBPACK_IMPORTED_MODULE_4__.b)([{txcode:"#sys:bo-load-txFo",input:{list_tx:cache.app_config.fo_load}},{txcode:"#sys:bo-load-dyjs",input:{key_map:"start",key_position:""}}],{}).then(e=>{var t=Application.foGetData("txClient",e);if(void 0!==t)for(var a=0;a<t.length;a++)Application.addTxFo(t[a].txcode,t[a]);_libKeyboard__WEBPACK_IMPORTED_MODULE_10__.a.startKeyboard(),Application.webSocketConnect()},e=>{}):Object(_libPost__WEBPACK_IMPORTED_MODULE_4__.b)([{txcode:"#sys:bo-load-dyjs",input:{key_map:"start",key_position:""}}],{}).then(e=>{Application.webSocketConnect()},e=>{})}static getMyDevice(){return cache.user.my_device}static setMyDevice(e){void 0===cache.user.my_device&&(cache.user.my_device={});for(let t in e)cache.user.my_device[t]=e[t]}static checkIsPublic(){return!0}static getUrlLogin(){let e="";return e=Application.checkIsPublic()?isMobile_get()?window.location.origin+window.location.pathname+"?isMobile=true&app=login&cordovaProtocol="+protocol_get()+"&cordovaDomain="+hostname_get()+"&cordovaPort="+port_get()+"&b="+cache.app_config.para.app_id:"//"+cache.app_config.domain+cache.app_config.public.port+"/login?b="+cache.app_config.para.app_id:"//"+cache.app_config.domain+cache.app_config.dev.login_port+"/login?b="+cache.app_config.para.app_id,e}static getUrlLogin_ver2(){let e="";return e=Application.checkIsPublic()?isMobile_get()?window.location.origin+window.location.pathname+"?isMobile=true&app=login&cordovaProtocol="+protocol_get()+"&cordovaDomain="+hostname_get()+"&cordovaPort="+port_get():"//"+cache.app_config.domain+cache.app_config.public.port+"/login":"//"+cache.app_config.domain+cache.app_config.dev.login_port+"/login",e}static checkIsMobi(){return void 0!==cache.app_config.isMobi&&cache.app_config.isMobi}static setSessionTemp(e){void 0!==e&&(cache.user.session_id=e)}static getUserCode(){return cache.user.user_id}static loadParameterSystem(e){void 0===cache.config.parameter_system&&(cache.config.parameter_system={});for(var t=0;t<e.length;t++)void 0!==e[t].code&&(cache.config.parameter_system[e[t].code]=e[t]);let a=Application.getParameterSystem("button_watting_action");void 0!==a&&(cache.form.button_watting_action=a)}static getSessionFromStore(){return cache.user.session_id}static clearSessionStorage(){return localStorage.removeItem("session_id_"+cache.app_config.para.app_id)}static parameterSystem_start(){var e=Application.getParameterSystem("reloginCount");void 0!==e&&(cache.system_mode.reloginCount=e);var t=Application.getParameterSystem("reloginTimer");void 0!==t&&window.addEventListener("mousemove",()=>{Application.relogin_ResetTimer(t)})}static relogin_up_loginFalse(){void 0===cache.system_mode.reloginUserCount&&(cache.system_mode.reloginUserCount=0),cache.system_mode.reloginUserCount++}static relogin_checkOverLoadLoginFalse(){return void 0!==cache.system_mode.reloginCount&&void 0!==cache.system_mode.reloginUserCount&&0!==cache.system_mode.reloginCount&&cache.system_mode.reloginUserCount>=cache.system_mode.reloginCount}static relogin_maxLoginFalse(){return cache.system_mode.reloginCount}static relogin_checkHasPinCode(){return void 0!==cache.system_mode.pin&&cache.system_mode.pin}static relogin_setHasPinCode(){cache.system_mode.pin=!0}static relogin_loginFalseCurrent(){return cache.system_mode.reloginUserCount}static relogin_resetCount(){cache.system_mode.reloginUserCount=0}static relogin_ResetTimer(e){void 0!==form_relogin_timeout&&clearTimeout(form_relogin_timeout),form_relogin_timeout=setTimeout(()=>{Application.relogin_getStatus()||Application.relogin_lockScreen()},1e3*e*60)}static getParameterSystem(e){if(void 0===cache.config.parameter_system&&(cache.config.parameter_system={}),void 0!==cache.config.parameter_system[e]){var t=cache.config.parameter_system[e];if(void 0!==t.value&&void 0!==t.data_type)switch(t.data_type){case"s":return t.value;case"b":return"true"===t.value;case"n":return Number(t.value);default:return}}}static checkSystemModeLock_bo_fo(e,t){if(void 0!==e)return!!cache.system_mode.safe.fo.includes(";"+e+";")||(!cache.system_mode.isLock||!!cache.system_mode.mode.lock.fo.includes(";"+e+";"))}static jcontextAdd(e){list_jcontext.push(e)}static jcontextGetAll(){return list_jcontext}static setFormChat(e){form_chat=e}static getDataChatTemp(){return cache.chat.data_chat}static addDataChatTemp(e){cache.chat.data_chat[cache.chat.data_chat.length]=e}static addDataChatNew(e){for(var t=0;t<cache.chat.data_chat.length;t++)if(cache.chat.data_chat[t].id===e.id)return;if(cache.chat.data_chat[cache.chat.data_chat.length]=e,void 0!==form_chat)form_chat.hasOwnProperty("showChat")&&form_chat.showChat(e);else{const e=new Date;var a={icon:"fa-info-circle",color:"success",title:Application.getLang("systemTitle"),time:e.getTime()+"",description:Application.getLang("hasChat"),data:{},action:{}};Application.pushNotify("notifyToast",a,{}),Application.callAllScreenListen()}}static setStatusChat(e){if(void 0!==e.statusSend)for(var t=0;t<cache.chat.data_chat.length;t++)if(cache.chat.data_chat[t].id===e.data_chat.id)return cache.chat.data_chat[t].status=e.statusSend,void(void 0!==form_chat&&form_chat.hasOwnProperty("changeStatusChat")&&form_chat.changeStatusChat(e))}static setProtect(e){cache.protect.key=e,buildBitwiseFromProtect()}static getProtect(){return cache.protect.key}static getTimeProtect(){return cache.protect.time_refresh}static getKeyX(e){var t=0;t=void 0!==cache.protect.bitwise&&0!==cache.protect.bitwise?cache.protect.bitwise:15;for(var a=0;a<e.length;a++)t+=e.codePointAt(a)^t;return t}static getConfigUser(e){return void 0!==cache.user.config_of_user&&void 0!==cache.user.config_of_user[e]?cache.user.config_of_user[e]:void 0!==cache.user.config_of_user_default&&void 0!==cache.user.config_of_user_default[e]?cache.user.config_of_user_default[e]:void 0}static getConfigUserDefault(e){return""===e?cache.user.config_of_user_default:void 0!==cache.user.config_of_user_default&&void 0!==cache.user.config_of_user_default[e]?cache.user.config_of_user_default[e]:void 0}static getFormAppAuto(e){if(void 0!==cache.form.auto_form[e])return cache.form.auto_form[e]}static getOncePacked(){return cache.protect.oncePacked}static setOncePacked(e){cache.protect.oncePacked=e}static changeKeyLanguage(){for(var e in cache.form.auto_form)cache.form.auto_form[e].hasOwnProperty("changeKeyLanguage")&&cache.form.auto_form[e].changeKeyLanguage()}static changeForDebug(e){for(var t in cache.form.auto_form)cache.form.auto_form[t].hasOwnProperty("forDebug")&&cache.form.auto_form[t].forDebug(e)}static foGetData(e,t){if(void 0!==t.fo)for(var a=0;a<t.fo.length;a++)if(void 0!==t.fo[a].input&&void 0!==t.fo[a].input[e])return t.fo[a].input[e]}static putDataGB(e,t,a){null==cache.form.shared_form_data[e]&&(cache.form.shared_form_data[e]={}),cache.form.shared_form_data[e][t]=a}static putDataJoinGB(e,t){if(null==cache.form.shared_form_data[e]&&(cache.form.shared_form_data[e]={}),void 0!==t)for(var a in t)cache.form.shared_form_data[e][a]=t[a]}static FromAddComponent(e,t){void 0!==cache.form.auto_form[e]&&cache.form.auto_form[e].addComponent(t)}static putData(e,t,a,i){if(void 0!==i&&void 0!==i.key_form&&void 0!==cache.form.auto_form[i.key_form]){var o=cache.form.auto_form[i.key_form];void 0!==o&&o.hasOwnProperty("putData")&&o.putData(e,t,a)}}static putDataJoin(e,t){var a=this.getFormCurrent();void 0!==a&&a.hasOwnProperty("putDataJoin")&&a.putDataJoin(e,t)}static putDataAll(e){cache.form.shared_form_data=e}static copyToClipboard(e){if(copyToClipboard){copyToClipboard.value=e,copyToClipboard.focus(),copyToClipboard.select(),copyToClipboard.setSelectionRange(0,99999),document.execCommand("copy");const a=new Date;var t={class_:"success",icon:"fa fa-clipboard",title:Application.getLang("systemTitle"),time:a.getTime()+"",description:Application.getLang("copyToClipboard"),data:{},action:{}};Application.pushNotify("notifyToast",t,{}),Application.callAllScreenListen(),window.getSelection&&(window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges())}}static clearClipboardFo(){Application.isDebug()||copyToClipboard&&(window.isSecureContext?navigator.clipboard.writeText(""):(copyToClipboard.value=" ",copyToClipboard.focus(),copyToClipboard.select(),copyToClipboard.setSelectionRange(0,99999),document.execCommand("copy")))}static getDataGB(e){return""!==e.trim&&null!=cache.form.shared_form_data[e]?cache.form.shared_form_data[e]:cache.form.shared_form_data}static getAllFormIsOpen(){return cache.form.auto_form}static getLongTime(){return 1*new Date}static autoID(){return createStringID()+createStringID()+createStringID()+createStringID()}static autoUui(){return createStringID()+createStringID()+createStringID()+createStringID()+"-"+createStringID()+createStringID()}static autoUui_key_feedback(){var e=new Date,t=new Date(e.getFullYear(),0,0),a=e-t+60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3,i=Math.floor(a/864e5);return createStringID()+createStringID()+createStringID()+createStringID()+createStringID()+createStringID()+"-"+i}static addAppAuto(e,t,a){cache.form.auto_form[e]=t,void 0!==a&&(a||(this.hiddenAllForm(),this.setFormCurrent(t)))}static profileUser_set(e){cache.user.user_profile=e}static profileUser_get(e){return void 0!==cache.user.user_profile&&void 0!==cache.user.user_profile[e]?cache.user.user_profile[e]:""}static relogin_setForm(e){form_relogin=e}static relogin_getForm(){return form_relogin}static relogin_lockScreen(){void 0!==form_relogin&&form_relogin.hasOwnProperty("startRelogin")&&(form_relogin.startRelogin(),Application.relogin_setStatus(!0))}static relogin_setStatus(e){cache.system_mode.isLock=e}static relogin_getStatus(){return cache.system_mode.isLock}static addScreen(e){cache.screens[cache.screens.length]=e}static getAllScreen(){return cache.screens}static pushNotify(e,t,a){null==cache.notification[e]&&(cache.notification[e]=[]);var i=cache.notification[e].length;void 0===cache.notification[e][i]&&(cache.notification[e][i]={}),cache.notification[e][i]=t}static pushAllNotify(e,t){void 0===cache.notification[e]&&(cache.notification[e]=[]),cache.notification[e]=cache.notification[e].concat(t)}static getListNotifications(e){if(void 0!==cache.notification[e])return cache.notification[e]}static clearNotifyType(e){void 0!==cache.notification[e]&&(cache.notification[e]=[])}static callAllScreenListen(){for(var e=0;e<cache.screens.length;e++)cache.screens[e].hasOwnProperty("callScreen")&&cache.screens[e].callScreen()}static openForm(e){return cache.form.selected_form={},!(""===e||void 0===cache.form.auto_form[e]||!cache.form.auto_form[e].hasOwnProperty("callSetHidden")||!cache.form.auto_form[e].hasOwnProperty("getKeyFormAuto")||cache.form.auto_form[e].getKeyFormAuto()!==e)&&(this.setFormCurrent(cache.form.auto_form[e]),!0)}static hiddenAllForm(){for(var e in cache.form.auto_form)if(void 0!==cache.form.auto_form[e]&&cache.form.auto_form[e].hasOwnProperty("getInfoA")){var t=cache.form.auto_form[e].getInfoA();void 0!==t&&void 0!==t.ofModal&&!1===t.ofModal&&cache.form.auto_form[e].hasOwnProperty("callSetHidden")&&cache.form.auto_form[e].callSetHidden("none")}}static getAllFormIdOpen_DOM(){return cache.form.opening_forms}static newForm(e){cache.form.opening_forms.push(e),react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,cache.form.opening_forms),document.getElementById("content")),this.callAllScreenListen()}static checkRoleSuperAdmin(){return!!this.getParameterSystem("roleSupperAdmin")}static checkRole_AppAdmin(){return!0}static systemName(){return"/"}static checkTrace(){return!!this.getParameterSystem("monitoringPost")}static isDebug(){return cache.statusDebug}static callDirFromSupport(e,t){for(var a=0;a<cache.screens.length;a++)void 0!==cache.screens[a].type_screen&&cache.screens[a].type_screen===e&&cache.screens[a].hasOwnProperty(t)&&cache.screens[a][t]()}static isAssistant(){return cache.assistant.isRun}static assistant_add(e){if(void 0===cache.assistant.dataAssistantSupport&&(cache.assistant.dataAssistantSupport=[]),!cache.assistant.dataAssistantSupport.includes(e.key_feedback)){if(cache.assistant.dataAssistantSupport.length>=cache.assistant.max_data){for(let e=1;e<cache.assistant.dataAssistantSupport.length;e++)cache.assistant.dataAssistantSupport[e-1]=cache.assistant.dataAssistantSupport[e];cache.assistant.dataAssistantSupport.pop()}void 0!==e.key_feedback&&cache.assistant.dataAssistantSupport.push(e.key_feedback)}}static assistant_sendFeekError(){return void 0===cache.assistant.dataAssistantSupport&&(cache.assistant.dataAssistantSupport=[]),cache.assistant.dataAssistantSupport.join(";")}static setDebug(e){cache.statusDebug=(!0===e||!1===e)&&e}static markdown_render(e){return void 0!==elearning_render_markdown&&void 0!==e&&null!==elearning_render_markdown?elearning_render_markdown.options.previewRender(e):""}static saveTrace(e){this.getParameterSystem("monitoringPost")&&(this.showTrace()&&void 0!==e.time_send&&(this.showCache()?console.log(e.time_send+"=>",e,cache):console.log(e.time_send+"=>",e)),cache.trace[cache.trace.length]=e)}static showTrace(){return!!this.getParameterSystem("monitoringPostShow")}static showCache(){return!!this.getParameterSystem("monitoringCache")}static removeForm(e){if(""!==e){var t=this.getFormCurrent(),a="";t.hasOwnProperty("getKeyFormAuto")&&(a=t.getKeyFormAuto());var i="";for(var o in cache.form.auto_form)if(cache.form.auto_form[o].hasOwnProperty("callSetHidden")&&cache.form.auto_form[o].hasOwnProperty("getKeyFormAuto")){if(cache.form.auto_form[o].getKeyFormAuto()===e){if(void 0!==cache.form.mapping_dom_react[e]){delete cache.form.auto_form[o];for(var s=cache.form.mapping_dom_react[e],l=0;l<cache.form.opening_forms.length;l++)if(cache.form.opening_forms[l].key===s){cache.form.opening_forms.splice(l,1);break}if(delete cache.form.mapping_dom_react[e],react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,cache.form.opening_forms),document.getElementById("content")),a===e&&cache.form.opening_forms.length>0){if(!cache.form.auto_form[i]||!1!==cache.form.auto_form[i].getInfoA().ofModal)for(const e in cache.form.auto_form)!1===cache.form.auto_form[e].getInfoA().ofModal&&(i=e,o=e);this.setFormCurrent(cache.form.auto_form[i])}}else Application.AppException("#libSupport.removeForm","mapping_dom_react,form_key is undefined","system");return}i=o}}else cache.form.auto_form={},cache.form.opening_forms=[],react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,cache.form.opening_forms),document.getElementById("content"))}static getFormCurrent(){return cache.form.selected_form}static getDataFormForm_obDataForm(){var e=this.getFormCurrent();return void 0!==e&&e.hasOwnProperty("getData")?e.getData(""):{}}static setFormCurrent(e){if(this.hiddenAllForm(),void 0!==e)cache.form.selected_form=e;else for(let t in cache.form.auto_form){cache.form.selected_form=cache.form.auto_form[t];break}cache.form.selected_form.hasOwnProperty("callSetHidden")&&cache.form.selected_form.callSetHidden(""),this.callAllScreenListen()}static getLang(e){return getLang(e)}static addLang(e,t){cache.app_config.lang_data[e]=t}static getAllLang(){return cache.app_config.lang_data}static setAllLang(e){void 0===cache.app_config.lang_data?(cache.app_config.lang_data={},cache.app_config.lang_data[cache.app_config.para.language]=e):cache.app_config.lang_data[cache.app_config.para.language]=e}static getLangWithData(e,t){var a=getLang(e);if(void 0!==t&&void 0!==t.table&&void 0!==t.data){var i=t.data,o=getDataBaseTable(t.table);if(void 0!==o&&null!=o.detail)for(var s=o.detail,l=0;l<s.length;l++){var n=s[l];null!=n.code&&null!=n.mapping&&(a=void 0!==i[n.code]?(a=a.replace("["+n.code+"]",i[n.code])).replace("["+n.mapping+"]",i[n.code]):(a=a.replace("["+n.code+"]","")).replace("["+n.mapping+"]",""))}}return a}static supportFormatDate(e){var t=new Date(parseFloat(e));return t.toLocaleDateString()+" "+t.toLocaleTimeString()}static convertFoOfApp_fo_check(e){var t={};for(var a in e)if(e[a].includes("#")&&e[a].includes(":")){var i=a.substring(a.indexOf(":")+1,a.length);t[i]=i}else t[a]=a;return t}static convertFoOfApp_fo_arr(e){for(var t=[],a=0;a<e.length;a++)if(void 0!==e[a].txcode&&(t[a]=JSON.parse(JSON.stringify(e[a])),e[a].txcode.includes("#")&&e[a].txcode.includes(":"))){var i=e[a].txcode;t[a].txcode=i.substring(i.indexOf(":")+1,i.length)}return t}static setData(e,t){cache.data[e]=t}static addData(e,t){void 0===cache.data[e]&&(cache.data[e]=[]),cache.data[e].unshift(t)}static updateData(e,t,a){if(void 0===a&&(a="AFGHkeyIndexWJ"),void 0!==cache.data[e]){if(void 0!==t[e])for(var i=0;i<cache.data[e].length;i++)if(void 0!==cache.data[e][i][e][a]&&void 0!==t[e][a]&&cache.data[e][i][e][a]===t[e][a])return void(cache.data[e][i]=t)}else cache.data[e]=[]}static deleteData(e,t,a){if(void 0===a&&(a="AFGHkeyIndexWJ"),void 0!==cache.data[e]){if(void 0!==t[e])for(var i=0;i<cache.data[e].length;i++)if(void 0!==cache.data[e][i][e][a]&&void 0!==t[e][a]&&cache.data[e][i][e][a]===t[e][a])return void cache.data[e].splice(i,1)}else cache.data[e]=[]}static addTxFo(e,t){cache.config.fo[e]=t}static BlackList_add(e,t){void 0===cache.config.fo_black_list[e]&&(cache.config.fo_black_list[e]={}),cache.config.fo_black_list[e][t]=t}static BlackList_check(e,t){return void 0===cache.config.fo_black_list[e]||void 0===cache.config.fo_black_list[e][t]}static getTxFo(e){if(void 0!==cache.config.fo[e])return JSON.parse(JSON.stringify(cache.config.fo[e]))}static findData(e,t,a){if(void 0!==cache.data[e]){for(var i=0;i<cache.data[e].length;i++)if(void 0!==cache.data[e][i][e][t]&&cache.data[e][i][e][t]===a)return cache.data[e][i]}else cache.data[e]=[]}static findData_Update(e,t){if(void 0===t&&(t="AFGHkeyIndexWJ"),void 0!==e)for(var a in e)if(void 0!==e[a][t]){void 0===cache.data[a]&&(cache.data[a]=[]);for(var i=0;i<cache.data[a].length;i++)if(void 0!==cache.data[a][i][a][t]&&cache.data[a][i][a][t]===e[a][t])return void(cache.data[a][i]=e)}}static getDataOOPFormServer(e,t){if(void 0!==e){if(void 0===t||""===t){let t={};for(var a in e)"object"===typeof e[a]&&(t=Object.assign(t,e[a]));return t}return e[t]}}static getData(e){return""===e?cache.data:void 0!==cache.data[e]?cache.data[e]:[]}static getRoleCache(){return cache.user.role_cache}static getTimeAddComponent(){return cache.form.time_add_component}static getTimeActionWatting(){return cache.form.button_watting_action}static getDataLimited(e,t,a){return t=parseInt(t),a=parseInt(a),_libQuery__WEBPACK_IMPORTED_MODULE_2__.a.AnalyticsQuery(e,t,a)}static data_cdList(e,t,a){if(void 0!==cache.constData[e]&&void 0!==cache.constData[e][t]){if(a)return Application.cloneJson(cache.constData[e][t]);return cache.constData[e][t].filter(e=>e.c_cdlist.visible)}return[]}static data_buildCdListQuick(e){for(var t={},a=0;a<e.length;a++)if(void 0!==e[a].c_cdlist){var i=e[a].c_cdlist;if(void 0!==i.cdgrp&&void 0!==i.cdname){var o=i.cdgrp,s=i.cdname;void 0===t[o]&&(t[o]={}),void 0===t[o][s]&&(t[o][s]=[]),t[o][s].push(e[a])}}for(var l in t)for(var n in t[l])t[l][n].sort((e,t)=>parseInt(e.c_cdlist.cdidx)-parseInt(t.c_cdlist.cdidx));cache.constData=t}static checkDynamicCondition(data,condition){if(""!==condition.trim())try{let wf=data,user_acc=Application.context_get("user_acc");return eval(condition)}catch(_unused){return!1}return!0}static checkCondition(data,condition){if(""!==condition.trim())try{return eval("let wf="+JSON.stringify(data)+";"+condition)}catch(_unused2){return}}static form_getName(e){if(void 0!==e&&""!==e)for(var t=cache.data.group_menu_role,a=0;a<t.length;a++)if(void 0!==t[a].group_menu&&void 0!==t[a].group_menu.group_menu_function_code&&t[a].group_menu.group_menu_function_code===e)return t[a].group_menu;return{}}static form_addMapping(e,t){cache.form.mapping_dom_react[e]=t}static get_appConfig(){return cache.app_config}static role_menuOfRole(){if(void 0!==cache.data.group_menu){var e=cache.data.group_menu;cache.data.group_menu_role=e}}static role_getAllRoleRight(e){return void 0!==cache.config.role_right&&void 0!==cache.config.role_right[e]?cache.config.role_right[e]:null}static role_getComponent(e,t){return void 0!==cache.config.role_right&&void 0!==cache.config.role_right[e]&&void 0!==cache.config.role_right[e][t]?cache.config.role_right[e][t]:null}static runJs(data,componentCode,js){if(""!==js.trim())try{return eval("var form="+JSON.stringify(data)+";var componentCode='"+componentCode+"';"+js+";form;")}catch(_unused3){return}}static paramStringCaculator(param_str){if(param_str&&""!==param_str.trim())try{return eval(param_str)}catch(_unused4){return}}static checkDynamicConditionNoData(condition){if(""!==condition.trim())try{return eval(condition)}catch(_unused5){return!1}return!0}static condition_checkDynamicNoData(condition){if(""!==condition.trim())try{return eval(condition)}catch(_unused6){return}}static checkHasData(e){return void 0!==cache.data[e]}static getOOP(e,t){if(t.includes(".")){var a=t.split(".");if(void 0!==e)if(2===a.length){if(void 0!==e[a[0]]&&void 0!==e[a[0]][a[1]])return e[a[0]][a[1]]}else if(3===a.length&&void 0!==e[a[0]]&&void 0!==e[a[0]][a[1]]&&void 0!==e[a[0]][a[1]][a[2]])return e[a[0]][a[1]][a[2]]}return""}static getOOP_key(e){if(e.includes(".")){var t=e.split(".");if(t.length>1)return t[1]}return""}static searchTable(e,t){var a=[];if(void 0!==e&&void 0!==t){for(var i=!1,o=0;o<e.length;o++)if(void 0!==e[o].search&&""!==e[o].search.trim()){i=!0;break}if(i){for(var s=0;s<t.length;s++)if(void 0!==t[s])for(var l=0;l<e.length;l++)if(void 0!==e[l].search&&void 0!==e[l].code){var n=e[l].code;if(void 0!==t[s][n]&&""!==e[l].search.trim()&&t[s][n].includes(e[l].search.trim())){a[a.length]=t[s];break}}}else a=t}return a}static ms_start(e,t,a,i,o){cache.master_data[i]={form_code:o,data_key_value:a,table:e,pk:t}}static ms_saveOld(e,t){void 0!==cache.master_data[t]&&(cache.master_data[t].dataOld=e)}static ms_saveNew(e,t){void 0!==cache.master_data[t]&&(cache.master_data[t].dataNew=e)}static ms_getMasterData(e){return cache.master_data[e]}static ms_clearMasterData(e){delete cache.master_data[e]}static getConfigMasterOfComponent(e,t){if(void 0!==cache.config.form_config[e]){var a=cache.config.form_config[e];if(void 0!==a.list_layout)for(var i=a.list_layout,o=0;o<i.length;o++)if(void 0!==i[o].list_view)for(var s=i[o].list_view,l=0;l<s.length;l++)if(void 0!==s[l].list_input)for(var n=s[l].list_input,r=0;r<n.length;r++){var c=n[r];if(void 0!==c.default&&void 0!==c.default.codeHidden&&c.default.codeHidden===t)return c}}}static loadScript(e){var t=document.head,a=document.createElement("script");a.type="text/javascript",a.src=e,t.appendChild(a)}static setConfigComponent(e,t){switch(e){case"config":obj_component_render_config=t;break;case"property":obj_component_render_property=t;break;case"role":obj_component_render_role=t;break;case"validate":obj_component_render_validate=t;break;case"lang":obj_component_render_lang=t}}static getConfigComponent(e){switch(e){case"config":return obj_component_render_config;case"property":return obj_component_render_property;case"role":return obj_component_render_role;case"validate":return obj_component_render_validate;case"lang":return obj_component_render_lang}return null}static parseJson(e){try{return JSON.parse(e)}catch(t){return}}static cloneJson(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return}}static copyJsonObject(e,t){if(void 0!==t&&void 0!==e){var a=this.parseJson(JSON.stringify(t));if(void 0!==a){for(var i in e)a[i]=e[i];return a}}return e}static jsonParser(e){try{return JSON.parse(e)}catch(t){}}static supportReplaceFo(e,t){return e}static analyticsTable(e){return _libDatabaseSmart__WEBPACK_IMPORTED_MODULE_8__.a.analyticsTable(e)}static timeSince(e){var t=Math.floor((new Date-e)/1e3),a=Math.floor(t/31536e3);return a>1?a+" "+getLang("timeSince_y"):(a=Math.floor(t/2592e3))>1?a+" "+getLang("timeSince_m"):(a=Math.floor(t/86400))>1?a+" "+getLang("timeSince_d"):(a=Math.floor(t/3600))>1?a+" "+getLang("timeSince_h"):(a=Math.floor(t/60))>0?a+" "+getLang("timeSince_p"):getLang("timeSince_s_ago")}static confirmStartOnlyOnce(e){modal_confirm=e}static confirmStartCompareOnlyOnce(e){modal_compare=e}static confirmStartOnlyOnceKeyboard(e){modal_keyboard=e}static confirmInfo(e,t,a,i){void 0!==modal_confirm&&modal_confirm.setInfoModal(e,t,a,i)}static compareInfo(e,t,a,i){void 0!==modal_compare&&modal_compare.setInfoModal(e,t,a,i)}static setModalOpenKeyboard(){void 0!==modal_keyboard&&modal_keyboard.setModalOpen()}static modalDynamicFromFromCode(e,t,a){void 0!==modal_dynamic_fromFromCode&&modal_dynamic_fromFromCode.setInfoModal(e,t,a)}static modalDynamicFromClose_Rollback(e){void 0!==modal_dynamic_fromFromCode&&modal_dynamic_fromFromCode.reloadFo(e)}static modalDynamicFromFromCode_close(){void 0!==modal_dynamic_fromFromCode&&modal_dynamic_fromFromCode.modalClose()}static modalDynamicFromFromCode_getRoleBack(){if(void 0!==modal_dynamic_fromFromCode)return modal_dynamic_fromFromCode.getRolBackData()}static modalDynamicFromFromCode_StartOnlyOnce(e){modal_dynamic_fromFromCode=e}static webSocketConnect(){var e=(isMobile_get()?"https"===protocol_get()?"wss":"ws":"https:"===window.location.protocol?"wss":"ws")+"://"+cache.app_config.server.socket+"/"+Application.getSessionFromStore();cache.websocket=new WebSocket(e),cache.websocket.onopen=function(){console.log("websocket onopen"),Application.webSocketDisplayStatus("Open"),Application.webSocketSendMessage("#protectPostStart")},cache.websocket.onmessage=function(e){if("string"===typeof e.data){var t=e.data.substr(0,e.data.indexOf("-")),a=e.data.substr(e.data.indexOf("-")+1);Object(_libRSA__WEBPACK_IMPORTED_MODULE_11__.a)(a,t).then(e=>{try{var t=JSON.parse(e);void 0!==t&&_libClient__WEBPACK_IMPORTED_MODULE_3__.a.fo(t.fo,t.input)}catch(a){console.log(a)}})}else"object"===typeof e.data&&(cache.response_file.buffer_status=!0,cache.response_file.buffer_data=e.data,_libClient__WEBPACK_IMPORTED_MODULE_3__.a.fo([{txcode:"#sys:fo-download-fileData",input:{}}],void 0))},cache.websocket.onerror=function(e){console.log("Websocket onerror"),cache.websocket.close(),Application.AppException("#libSupport.webSocketConnect","","Error! "+e.data)},cache.websocket.onclose=function(){console.log("Websocket closed"),Application.webSocketDisplayStatus("Closed"),setTimeout(()=>{Application.webSocketConnect()},1e3)}}static webSocketDisconnect(){null!==cache.websocket&&(cache.websocket.close(),cache.websocket=null)}static webSocketSendMessage(e){null!==cache.websocket?cache.websocket.send(Object(_libRSA__WEBPACK_IMPORTED_MODULE_11__.b)(e)):Application.AppException("#libSupport.webSocketSendMessage","webSocket is null","val_send:"+e)}static webSocketDisplayStatus(e){cache.websocket.connectStatus=e}static rsa_getPostion(){return cache.rsa.position_default}static rsa_getAlgorithm(){var e=Math.floor(10*Math.random())+"";return void 0!==cache.rsa.algorithm[e]?cache.rsa.algorithm[e]:cache.rsa.algorithm[1]}static rsa_response_getAlgorithm(){var e=Math.floor(10*Math.random());return void 0!==cache.rsa.algorithm_response[e]?cache.rsa.algorithm_response[e]:cache.rsa.algorithm_response[1]}static rsa_setAlgorithm(e){cache.rsa.algorithm=Object.assign(cache.rsa.algorithm,e)}static rsa_getPrivateKey(){return cache.rsa.privateKey}static rsa_setPublicKey(e){cache.rsa.publicKey=e}static rsa_getPublicKey(){return cache.rsa.publicKey}static txBasic_get(){return code_basicTxCode}static txBasic_add(e){if(void 0!==e)for(var t=0;t<e.length;t++){var a=e[t];for(var i in a)for(var o=0;o<a[i].length;o++){var s=a[i][o];if(void 0!==s.content&&void 0!==s.type)if("js"===s.type){if(void 0!==s.contain)switch(s.contain){case"codeLib":Application.txBasic_addCodeLib(s.content,s.fo);break;case"basicTx":Application.txBasic_addDynamicJs(s)}}else Application.loadCssContent(s.content)}}}static txBasic_addDynamicJs(tx_ob){void 0!==tx_ob.content&&void 0!==tx_ob.class&&(code_basicTxCode[tx_ob.class]=eval(tx_ob.content))}static txBasic_addCodeLib(tx_ob,fo_){eval(tx_ob),void 0!==fo_&&""!==fo_&&_libClient__WEBPACK_IMPORTED_MODULE_3__.a.fo([{txcode:fo_,input:{}}],{})}static getCoreTx(){return _tx_coreTx__WEBPACK_IMPORTED_MODULE_5__.a}static checkResponseFile(){return cache.response_file.buffer_status&&cache.response_file.file_name_exist}static getResponseFile(){return cache.response_file}static removeResponseFile(){cache.response_file.file_name_exist=!1,cache.response_file.file_name="",cache.response_file.buffer_status=!1,cache.response_file.buffer_data=""}static setResponseFile_fileName(e){cache.response_file.file_name=e,cache.response_file.file_name_exist=!0}static component_getListCode(e){if("string"!==typeof e)return[];let t=[];var a=new RegExp("@{([^@{}]*)}","g");let i=a.exec(e);for(;i;)t.push({key:i[0],code:i[1]}),i=a.exec(e);return t}static component_propertyIndex(e,t){let a={main:[],position:[]};if(void 0!==e){for(let t=0;t<e.main.length;t++){for(let i in e.main[t]){a.main.push({[i]:{style:[],attr:[],class:""}});for(let o of e.main[t][i].style)a.main[t][i].style.push(o);for(let o of e.main[t][i].attr)a.main[t][i].attr.push(o);a.main[t][i].class=e.main[t][i].class}for(let i in e.position[t]){a.position.push({[i]:{style:[],attr:[],class:""}});for(let o of e.position[t][i].style)a.position[t][i].style.push(o);for(let o of e.position[t][i].attr)a.position[t][i].attr.push(o);a.position[t][i].class=e.position[t][i].class}}for(let e in a)for(let i=0;i<a[e].length;i++){let o=a[e][i],s=o[Object.keys(o)[0]],l=t[e][i],n=l[Object.keys(l)[0]],r={},c={};for(let e of s.style){n.style.some(t=>Object.keys(t)[0]===Object.keys(e)[0])||(r=Object.assign(r,e))}for(let e of n.style){s.style.some(t=>Object.keys(t)[0]===Object.keys(e)[0])||(r=Object.assign(r,e))}for(let e of n.style)for(let t of s.style)Object.keys(t)[0]===Object.keys(e)[0]&&(r="#"!==Object.values(t)[0]?Object.assign(r,t):Object.assign(r,e));o[Object.keys(o)[0]].style=r;for(let e of s.attr){n.attr.some(t=>Object.keys(t)[0]===Object.keys(e)[0])||(c=Object.assign(c,e))}for(let e of n.attr){s.attr.some(t=>Object.keys(t)[0]===Object.keys(e)[0])||(c=Object.assign(c,e))}for(let e of n.attr)for(let t of s.attr)Object.keys(t)[0]===Object.keys(e)[0]&&(c="#"!==Object.values(t)[0]?Object.assign(c,t):Object.assign(c,e));if(o[Object.keys(o)[0]].attr=c,"#"===o[Object.keys(o)[0]].class){let a=t[e][i];o[Object.keys(o)[0]].class=a[Object.keys(a)[0]].class}}}else for(let i in t){let e=t[i];for(let t=0;t<e.length;t++){let o={},s={},l=e[t];for(let e in l){for(let t of l[e].style)o=Object.assign(o,t);for(let t of l[e].attr)s=Object.assign(s,t);a[i].push({[e]:{style:o,attr:s,class:l[e].class}})}}}for(let i in a){let e={};for(let t of a[i])e=Object.assign(e,t);a[i]=e}return a}static loadJs(e){return new Promise(t=>{const a=document.createElement("script");a.type="text/javascript",a.src=e,a.onload=()=>t(),document.head.appendChild(a)})}static loadCss(e){var t=document.createElement("link");t.setAttribute("href",e),t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),document.head.appendChild(t)}static loadCssContent(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)}static getArrayWithRegex(e,t){if("string"!==typeof e)return[];let a=[];var i=new RegExp(t,"g");let o=i.exec(e);for(;o;)a.push({key:o[0],code:o[1],index:o.index}),o=i.exec(e);return a}static getlistCodeContext(e){return this.getArrayWithRegex(e,"\\${([^}]*)}")}static context_get(e){if(void 0!==e){if(!e.includes("."))return cache.context[e];for(var t=e.split("."),a=cache.context,i=0;i<t.length;i++)if(void 0!==a[t[i]]&&(a=a[t[i]]),i===t.length-1)return a}}static contextweb_set(e){cache.contextweb=e}static contextweb_get(){return cache.contextweb}static AppException(e,t,a){Application.isDebug()&&console.log(e+"=="+a+"=>"+t)}static log(e,t){0}static addSript(e,t){var a=document.createElement("script");a.setAttribute("type","text/javascript"),e.includes("://")?a.src=e:Application.checkIsMobi()?a.src="http://"+cache.app_config.config_mobi.app_link+e:a.src=e,a.onload=t,document.head.appendChild(a)}static logObj(e,t){console.log(e,t)}static searchPerfect(e,t){let a=Application.convertStringToEn(e)+" ",i=Application.convertStringToEn(t),o=[];for(let n=0;n<i.length;n++){let e={const_value:t[n],value:i[n],status:!1};o.push(e)}let s=[],l="";for(let n=0;n<a.length;n++){let e=a[n].charCodeAt(0);e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)?l+=a[n]:""!==l&&(s.push(l),l="")}for(let n=0;n<s.length;n++){let e=-1;do{if(e=i.indexOf(s[n],e+1),-1!==e)for(let t=0;t<s[n].length;t++)o[e+t].status=!0}while(-1!==e)}if(0!==o.filter(e=>!0===e.status).length)return o}static convertStringToEn(e){return void 0===e?"":(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e+="").replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0111/g,"d")).replace(/\xc0|\xc1|\u1ea0|\u1ea2|\xc3|\xc2|\u1ea6|\u1ea4|\u1eac|\u1ea8|\u1eaa|\u0102|\u1eb0|\u1eae|\u1eb6|\u1eb2|\u1eb4/g,"A")).replace(/\xc8|\xc9|\u1eb8|\u1eba|\u1ebc|\xca|\u1ec0|\u1ebe|\u1ec6|\u1ec2|\u1ec4/g,"E")).replace(/\xcc|\xcd|\u1eca|\u1ec8|\u0128/g,"I")).replace(/\xd2|\xd3|\u1ecc|\u1ece|\xd5|\xd4|\u1ed2|\u1ed0|\u1ed8|\u1ed4|\u1ed6|\u01a0|\u1edc|\u1eda|\u1ee2|\u1ede|\u1ee0/g,"O")).replace(/\xd9|\xda|\u1ee4|\u1ee6|\u0168|\u01af|\u1eea|\u1ee8|\u1ef0|\u1eec|\u1eee/g,"U")).replace(/\u1ef2|\xdd|\u1ef4|\u1ef6|\u1ef8/g,"Y")).replace(/\u0110/g,"D")).toLowerCase()}static getElementWithRegex(e,t){let a;if(null!==(a=e.exec(t)))return a[1]}static replaceAll(e,t){if(t){let a=new RegExp(e,"g");return t.repalce(a)}return t}static getNodeJson(e,t){if("object"!==typeof e||!t)return;let a=t.split("."),i=e;for(const o of a){if(void 0===i||null===i)return;i=i[o]}return i}static deleteNodeJson(e,t){let a=t.split("."),i=e;const o=a.length-1;for(let s=0;s<a.length;s++)void 0===i&&(i={}),s<o?(i[a[s]]||(i[a[s]]={}),i=i[a[s]]):delete i[a[s]];return e}static setNodeJson(e,t,a){let i=t.split("."),o=e;const s=i.length-1;for(let l=0;l<i.length;l++)void 0===o&&(o={}),l<s?(o[i[l]]||(o[i[l]]={}),o=o[i[l]]):o[i[l]]=a;return e}static checkConditionComponent(e,t){if(!e)return!0;let a=Application.component_getListCode(e),i=e;for(let o of a)if(void 0!==t&&void 0!==o.key&&void 0!==o.code){let e=t[o.code],a="";a="object"===typeof e?JSON.stringify(e):e+"",void 0!==a?i=i.replace(o.key,a):Application.AppException("#ruleVisibility.component_event","component_event is undefined or wrong")}return!0===this.condition_checkDynamicNoData(i)}static getConditionWithData(e,t){if(!e)return!0;let a=Application.component_getListCode(e),i=e;for(let o of a)if(void 0!==t&&void 0!==o.key&&void 0!==o.code){let e=t[o.code],a="";a="object"===typeof e?JSON.stringify(e):e+"",void 0!==a?i=i.replace(o.key,a):Application.AppException("#ruleVisibility.component_event","component_event is undefined or wrong")}return i}static checkHasRoleForm(e){if(";ACT_MAN;CSH_CSH;DPT_CSH;ACT_CSH;CSH_ACT;DPT_ACT;ACT_ACT;CSH_DPT;ACT_DPT;DPT_DPT;".includes(";"+e.replace("FO_","")+";"))return!0;return!0===Application.getRoleCache()[e]}static scheduleJob_getJob_toRun(e){if(void 0!==cache.scheduleJob.job_config[e])return cache.scheduleJob.job_config[e]}static scheduleJob_addTo_Store(e){return void 0!==e&&void 0!==e.scheduleJob&&void 0!==e.scheduleJob.id&&(void 0===cache.scheduleJob&&(cache.scheduleJob={},cache.scheduleJob.job_config={}),cache.scheduleJob.job_config[e.scheduleJob.id]=e,!0)}static convertCondition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=Application.component_getListCode(e),i=e;for(let o of a){let e=this.getNodeJson(t,o.code);null!==e&&void 0!==e||(e=""),i=i.replace(o.key,e)}return i}static persist_mergeObjects(e,t,a){return Object.assign(e,t)}static persist_convertCondition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e,s={},l=Application.getlistCodeContext(o);for(const d of l){let e=Application.context_get(d.code)||"";o=o.replace(d.key,e)}const n=Application.component_getListCode(e),r=n.map(e=>e.code).toString().replace(/,/g,";"),c=[t,a];for(const d of c)if(d){let e=this.getFormAppAuto(d);if(e){let t=e.callDirFromSupport("getAdvanced",{list_component:r,list_view:"",inform:"true",checkError:"false"},{});s=this.persist_mergeObjects(s,t)}}s=this.persist_mergeObjects(s,i);for(let d of n){let e=this.getNodeJson(s,d.code);null!==e&&void 0!==e||(e=""),"object"===typeof e&&(e=JSON.stringify(e)),o=o.replace(d.key,e)}return o}static persist_checkCondition(condition,form_key,form_parent_key){if(!(null===condition||void 0===condition?void 0:condition.trim()))return!0;const new_condition=this.persist_convertCondition(condition,form_key,form_parent_key);if(""!==new_condition.trim())try{return eval(new_condition)}catch(_unused9){return!1}return!1}static persist_setFormError(e,t,a,i){let o=this.getFormAppAuto(e);if(!o)return!1;const s=a?[{info:a,infoComponent:{},key:i||"FORM",type:"form"}]:[];o.showErrorFromServer(s,t)}static persist_JSONParser(e){let t={};try{t=JSON.parse(e)}catch(a){t=void 0}return t}static setLoadingCache(e,t,a){if(!t||!a)return;t&&!cache.loading_cache.component[t]&&(cache.loading_cache.component[t]=0),a&&!cache.loading_cache.form[a]&&(cache.loading_cache.form[a]=0);let i=0;if("START"===e&&(i=1),"END"===e&&(i=-1),t){cache.loading_cache.component[t]+=i;const e=cache.loading_cache.component[t];if(1===e||!e){Application.getFormAppAuto(a).callDirFromSupport("setLoadingAction",{list_component:t,list_view:""},{isLoading:!!e})}}if(a){cache.loading_cache.form[a]+=i;const e=cache.loading_cache.form[a];if(1===e||!e){Application.getFormAppAuto(a).setLoadingAction(!!e)}}}static getLoadingCacheComponent(e){return!!cache.loading_cache.component[e]}static getListSystemKeyboard(){return Application.getData("system_keyboard")}static getDataSystemKeyboardByOs(){const e=/(\+(\+)|[+]*([^+]+))/gm,t=Application.getLangKey();let a;const i=Application.getData("system_keyboard"),o=Application.getMyDevice().osVersion;let s=[];for(let l=0;l<i.length;l++){const n=i[l].system_keyboard;if("Windows"===o){s[l]={},s[l].name=void 0!==JSON.parse(n.name)[t]?JSON.parse(n.name)[t]:"",s[l].key=JSON.parse(n.key).default,s[l].group_id=n.group_id;let i=[];for(;null!==(a=e.exec(JSON.parse(n.key).default));){a.index===e.lastIndex&&e.lastIndex++;let t={title:void 0!==a[3]?a[3].toLocaleUpperCase():a[2].toLocaleUpperCase(),icon:""};i.push(t)}s[l].arr_key=i}}return s}}Application.getLangKey=()=>cache.app_config.para.language,Application.setLangKey=e=>cache.app_config.para.language=e,Application.setLangKey=e=>cache.app_config.para.language=e,Application.markdown_set=e=>{elearning_render_markdown=e},Application.setLangKey=e=>cache.app_config.para.language=e,Application.setLangKey=e=>cache.app_config.para.language=e,Application.templateAdd=(e,t)=>cache.template_config[e]={value:t},Application.getTemplate=e=>cache.template_config[e],Application.template_addToStore=(e,t)=>{cache.template_html[e]=t},Application.template_getFromStore=e=>cache.template_html[e]},function(e,t,a){"use strict";var i=a(0),o=a.n(i);class s extends i.Component{render(){return o.a.createElement("div",{hidden:void 0!==this.props.hidden&&!this.props.hidden,className:"form-group "+this.props.class},o.a.createElement("label",null,this.props.name),o.a.createElement("input",{disabled:this.props.disabled,type:void 0===this.props.typeInput?"text":this.props.typeInput,className:"form-control",value:this.props.value,maxLength:void 0===this.props.sizeInput?1e3:this.props.sizeInput,onChange:e=>{this.props.onChange(e)},placeholder:this.props.placeholder?this.props.placeholder:this.props.name,required:""}))}}t.a=s},function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return l}));function i(e){return window.obManagerTemplate_libManagerTemplate.managerTemplate_getComponent(e)}function o(e){return window.obManagerTemplate_libManagerTemplate.managerTemplate_getForm(e)}function s(){return null}function l(e){return window.obManagerTemplate_libManagerTemplate.managerTemplate_changeSkin(e)}},function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var i=a(1);var o=class{constructor(){this.bo=[];const e=new Date;this.info={d:Object(i.s)(),u:Object(i.A)(),lang:Object(i.u)(),app:Object(i.r)(),uid:Object(i.y)(),my_device:i.g.getMyDevice(),request_time:e.getTime(),protect_request:i.g.getProtect()},i.g.isDebug()&&(this.info.dgu=i.g.isDebug())}setMoreInfo(e){for(let t in e)void 0===this.info[t]&&(this.info[t]=e[t])}setBo(e,t){void 0!==t&&(this.info.key_feedback=t),this.bo=e}encryptTxCodeBo(e,t,a){let i=[];for(let o=0;o<e.length;o++)i[o]=e[o],void 0!==e[o].txcode&&(e[o].form_code=t,""===a&&(e[o].from_action_code=e[o].txcode),e[o].from_action_code=a);return i}getForTxCode(e,t){var a={info:this.info,bo:this.encryptTxCodeBo(this.bo,e,t)},i=JSON.stringify(a);return a.info.checksum=this.checkSum(this.stringToArray(i)),a}getInfo(){return this.info}checkSum(e){for(var t=e.length,a=0,i=0;i<t;i++)a=a+((a<<1)+(a<<4)+(a<<7)+(a<<8)+(a<<24)>>>0)^255&e[i];return a>>>0}stringToArray(e){for(var t=[],a=0;a<e.length;a++){var i=e.charCodeAt(a);i<128?t.push(i):i<2048?t.push(192|i>>6,128|63&i):i<55296||i>=57344?t.push(224|i>>12,128|i>>6&63,128|63&i):(a++,i=65536+((1023&i)<<10|1023&e.charCodeAt(a)),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return this.hasTyped?new Uint8Array(t):t}hasTyped(){if(!("Uint8Array"in window))return!1;try{var e=new window.Uint8Array(10);return e[0]=100,100===e[0]}catch(t){return!1}}},s=a(8),l=a(19);function n(e,t){return new Promise((a,n)=>{var r=new o,c="",d="",h="",_="";void 0!==t&&(void 0!==t.infoA&&(void 0!==t.infoA.title&&(d=t.infoA.title),void 0!==t.infoA.form_code&&(c=t.infoA.form_code)),void 0!==t.componentConfigDefault?(void 0!==t.componentConfigDefault.name&&(_=t.componentConfigDefault.name),void 0===t.componentConfigDefault.code&&void 0===t.componentConfigDefault.codeHidden||(h=t.componentConfigDefault.codeHidden)):void 0!==t.debug_info&&(void 0!==t.debug_info.from_action_code&&(h=t.debug_info.from_action_code),void 0!==t.debug_info.from_action_name&&(_=t.debug_info.from_action_name))),void 0!==t.infoA_parent&&void 0!==t.infoA_parent.form_code&&(c="sysform",h="");let u="";u=void 0!==t.key_feedback?t.key_feedback:i.g.autoUui_key_feedback(),r.setBo(e,u);let g=i.g.getOncePacked();0!==g?(g++,i.g.setOncePacked(g)):g=0,r.setMoreInfo({from_action_code:h,from_action_name:_,form_code:c,form_name:d,oncePacked:g,oncePacked_ID:i.g.autoID()});let m=r.getForTxCode(c,h);var p=new Date;let f={key_feedback:u,data:m,time:p,status:"G\u1eedi",form_code:c,form_name:d,from_action_code:h,from_action_name:_};i.g.isDebug()&&Object(i.h)(f),i.g.isAssistant()&&i.g.assistant_add(f),h&&i.g.getLoadingCacheComponent(h)||(i.g.setLoadingCache("START",h,""),fetch(r.info.u,{method:"POST",body:Object(l.b)(JSON.stringify(m)),headers:{Accept:"text/plain","Content-Type":"text/plain; charset=UTF-8",cookie:"accessToken=1234abc; userId=1234"}}).then(e=>e.text()).then(e=>{var o=e.substr(0,e.indexOf("-"));e=e.substr(e.indexOf("-")+1),Object(l.a)(e,o).then(o=>{try{if(void 0===(e=JSON.parse(o)))return;var l=new Date;Object(i.e)(JSON.stringify(e).length,p.getTime(),l.getTime());let n={key_feedback:u,data:e,time:l,status:"Nh\u1eadn",form_code:c,form_name:d,from_action_code:h,from_action_name:_};i.g.setLoadingCache("END",h,""),i.g.isDebug()&&Object(i.h)(n),i.g.isAssistant()&&i.g.assistant_add(n),s.a.fo(e.fo,t),a(e)}catch(n){console.log(n)}})}).catch(()=>{i.g.setLoadingCache("END",h,""),n(e)}))})}function r(e,t,a){return new Promise((s,n)=>{var r=new o,c=new FormData,d="",h="";void 0!==a&&(void 0!==a.infoA&&void 0!==a.infoA.form_code&&(d=a.infoA.form_code),void 0!==a.componentConfigDefault?void 0!==a.componentConfigDefault.codeHidden&&(h=a.componentConfigDefault.codeHidden):void 0!==a.debug_info&&void 0!==a.debug_info.from_action_code&&(h=a.debug_info.from_action_code));let _={from_action_code:h,form_code:d};r.setMoreInfo(_),c.append("username",i.g.context_get("user_jwebui.user_id")),void 0===t&&(t=""),c.append("new_name_file",Object(l.b)(JSON.stringify(t))),c.append("attachment",e),c.append("info",Object(l.b)(JSON.stringify(r.getInfo()))),fetch(r.info.u+"/upload",{method:"POST",body:c}).then(e=>{let t;switch(e.status){case 200:return e.json();case 401:throw t={statusCode:401,statusText:"ERR_UNAUTHORIZED"},t;case 403:throw t={statusCode:403,statusText:"ERR_FORBIDDEN"},t;case 400:throw t={statusCode:400,statusText:"ERR_BAD_REQUEST"},t;default:throw new Error("Something went wrong")}}).then(e=>{s(e)}).catch(e=>{n(e)})})}},function(e,t,a){"use strict";var i=a(0),o=a.n(i);class s extends i.Component{constructor(e){super(e);var t="code";null!=e.d_key&&(t=e.d_key);var a="title";null!=e.d_name&&(a=e.d_name);var i="T\u1ea1o m\u1edbi";null!=e.has_new_name&&(i=e.has_new_name);var o="new";null!=e.has_new_value&&(o=e.has_new_value),this.state={data:e.data,d_key:t,d_name:a,has_new_name:i,has_new_value:o}}renderOptions(){return this.state.data.map((e,t)=>o.a.createElement("option",{key:t,index:t,value:e[this.state.d_key]},e[this.state.d_name]))}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return o.a.createElement("div",{className:"form-group "+this.props.class,hidden:void 0!==this.props.hidden&&!this.props.hidden},o.a.createElement("label",null,this.props.name),o.a.createElement("div",{className:"select-box"},o.a.createElement("div",{className:"selectbox"},o.a.createElement("select",{style:{height:"32px"},disabled:this.props.disabled,className:"form-control",value:this.props.value,onChange:e=>this.props.onChange(e)},!0===this.props.hasNew&&o.a.createElement("option",{value:this.state.has_new_value},this.state.has_new_name),this.renderOptions()))))}}t.a=s},,function(e,t,a){"use strict";function i(e,t){var a;return null===(a=window.moment(e,t))||void 0===a?void 0:a.toDate().getTime()}function o(e,t){var a;return null===(a=window.moment.utc(e,t))||void 0===a?void 0:a.toDate().getTime()}function s(e,t,a){var i,o;let s=null===(i=window.moment.utc(e,t))||void 0===i?void 0:i.toDate().getTime();return null===(o=window.moment.utc(s))||void 0===o?void 0:o.format(a)}function l(e,t){var a;return null!==e&&void 0!==e?null===(a=window.moment(e))||void 0===a?void 0:a.format(t):""}function n(e,t){var a;return null!==e&&void 0!==e?null===(a=window.moment.utc(e))||void 0===a?void 0:a.format(t):""}function r(e,t){var a;return null!==e&&void 0!==e?null===(a=window.moment(Number(e)))||void 0===a?void 0:a.format(t):""}function c(e,t){var a;return null!==e&&void 0!==e?null===(a=window.moment.utc(Number(e)))||void 0===a?void 0:a.format(t):""}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".";if(Number.isNaN(e)||void 0===e||null===e||""===e)return;let o=e=e.toString(),s="",l=e.lastIndexOf(i);-1!==l&&(o=e.substring(0,l),o=o.replace(/^-0+/,""),o=o.replace(/^0+/,""),s=e.substring(l,e.length),""===o&&(o="0")),o=o.replace(/\D/g,""),s=s.replace(/\D/g,"");let n=`${o}.${Number("0."+s).toFixed(t).split(".")[1]||""}`;o=n.split(".")[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+a),e.includes("-")&&(o="-"+o),s=n.split(".")[1];let r=`${o}${i}${s}`;return""===s&&(r=o),""!==r?r:void 0}function h(e,t){if(!e||!t)return"";let a="",i=0;for(let o=0;o<t.length;o++)"-"===t[o]?a+="-":i<e.length?a+=e[i++]:a+=t[o];return a}a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"g",(function(){return l})),a.d(t,"h",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return c})),a.d(t,"i",(function(){return d})),a.d(t,"f",(function(){return h}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(1),o=a(4);class s{static quickPost(e,t){Object(o.b)(e,t).then(e=>{},e=>{})}static fo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var a={},s=i.g.convertFoOfApp_fo_arr(e),l=0;l<s.length;l++){var n=s[l];if(void 0!==n.txcode){if(!i.g.BlackList_check("tx_fo",n.txcode))return;var r=e[l];void 0!==r.txcode&&void 0===i.g.getTxFo(n.txcode)&&(a[r.txcode]=r.txcode)}}var c="";for(var d in a)""===c?c=d:c+=";"+d;a=i.g.convertFoOfApp_fo_check(a),e=i.g.convertFoOfApp_fo_arr(e),""===c?this.runTx(e,t):Object(o.b)([{txcode:"#sys:bo-load-txFo",input:{list_tx:c}}],t).then(o=>{if(void 0!==o.fo&&o.fo.length>0&&void 0!==o.fo[0].input){var s=o.fo[0].input;if(void 0!==s.txClient)for(var l=0;l<s.txClient.length;l++)void 0!==s.txClient[l].txcode&&void 0!==s.txClient[l].actions&&(delete a[s.txClient[l].txcode],i.g.addTxFo(s.txClient[l].txcode,s.txClient[l]))}var n="";for(var r in a)i.g.BlackList_add("tx_fo",r),n+=""===n?r:";"+r;""!==n?i.g.AppException("#libClient001",n,"system"):this.runTx(e,t)},e=>{})}static createContext(e,t,a,i){return{infoA:t,infoA_parent:a,componentConfigDefault:i,data:e}}static runActionWithContext(e,t,a,o,s){if(void 0!==a&&void 0!==s){var l=this.createContext(t,a,o,s),n=a.key_form+s.codeHidden;i.g.addTxFo(n,{input:{},actions:e,status:"A",txtype:"bo",txcode:n,txname:""}),this.runTx([{txcode:n,input:{}}],l)}}static runFoWithContext(e,t,a,i,o){if(void 0!==a&&void 0!==o){var s={infoA:a,infoA_parent:i,componentConfigDefault:o,data:t};this.fo(e,s)}}static checkFo(e){if(void 0!==e)for(var t=0;t<e.length;t++){var a=e[t];if(void 0!==a.txcode&&!i.g.checkSystemModeLock_bo_fo(a.txcode,void 0))return!1}return!0}static runTx(e,t,a){if(this.checkFo(e)){var o=0,s=!0;void 0!==a&&s&&(o=a.fo_arr_step,e=a.fo_arr,t=a.context);for(var n=o;n<e.length;n++){var r=e[n];if(void 0!==r.txcode){var c={};void 0!==r.input&&(c=r.input);var d=i.g.getTxFo(r.txcode);if(void 0!==d&&d.actions){var h=d.actions,_={},u=[],g=0;void 0!==a&&s&&(_=a.input_fo,g=a.fo_step,u=a.list_bo_new);for(var m=g;m<h.length;m++)if(void 0!==h[m].function){var p=h[m].function.split(".");if(p.length>=2){var f=void 0,v={};if(void 0!==a&&s&&(f=a.val_select,v=a.input_action),void 0===f){var b=null;try{b=new(i.g.txBasic_get()[p[0].trim()])(t,r.input,v,m,n,_,u,e)}catch(M){i.g.AppException("#libClient003",p[0].trim(),"system")}if(null===b||void 0===b)return;if(b.hasOwnProperty(p[1].trim()))if(void 0!==h[m].para){for(var y=h[m].para,D=i.g.supportReplaceFo(i.g.cloneJson(c),{}),C=0;C<y.length;C++){var A=y[C];A.length>0&&"@"===A.substring(0,1)&&(y[C]=l(A.substring(1,A.length),D))}f=b[p[1].trim()].apply(b,Array.prototype.slice.call(y,0))}else f=b[p[1].trim()]();else i.g.BlackList_check("function",h[m].function)&&(i.g.BlackList_add("function",h[m].function),i.g.AppException("#libClient002",h[m].function,"system"));v=b.getInputAction()}if(void 0!==f){if("systemStop"===f)return;f=f.toString()}else f="_default_";if(void 0!==v)for(var k in v)_[k]=v[k];if(void 0!==h[m].request){if(void 0!==f&&void 0!==h[m].request[f]&&void 0!==h[m].request[f].cmd)if("stop"===h[m].request[f].cmd)return;this.buildBoFormAction(u,h[m].request,f,v,void 0,c)}}s=!1}void 0!==d.request&&this.buildBoFormAction(u,void 0,void 0,_,d.request,c),void 0!==u&&u.length>0&&this.quickPost(u,t)}}}}}static buildBoFormAction(e,t,a,i,o,s){var l=void 0;if(void 0===o?(void 0!==a&&void 0!==t[a]&&(l=t[a]),void 0===l&&void 0!==t._default_&&(l=t._default_)):l=o,void 0!==l&&void 0!==l.bo&&l.bo.length>0)for(var n=0;n<l.bo.length;n++){var r=l.bo[n];if(void 0!==r.txcode&&""!==r.txcode.trim()){var c={};for(var d in i)c[d]=i[d];if(void 0!==r.input){var h=r.input;for(var _ in h=this.loopRepaceData(h,s),r.input)c[_]=r.input[_]}e[e.length]={txcode:r.txcode,input:c}}}}static loopRepaceData(e,t){if(void 0!==e&&void 0!==t)for(var a in e)switch(Object.prototype.toString.call(e[a])){case"[object String]":var i=e[a];i.length>0&&"@"===i.substring(0,1)&&(e[a]=n(i.substring(1,i.length),t));break;case"[object Number]":case"[object Boolean]":break;case"[object Array]":if(e[a].length>0)for(var o=0;o<e[a].length;o++)e[a][o]=this.loopRepaceData(e[a][o],t);break;case"[object Object]":e[a]=this.loopRepaceData(e[a],t)}return e}}const l=(e,t)=>{if(!e.includes("."))return t[e];var a=e.split(".");if(a.length>1){for(var i=t,o=0;o<a.length;o++){if(void 0===i[a[o]])return;i=i[a[o]]}return i}},n=(e,t)=>t[e]},function(e,t,a){"use strict";t.a=class{constructor(e,t,a,i,o,s,l,n){this.getInputAction=()=>this.input_action,this.getInput=()=>this.input,this.context=void 0===e?{}:e,this.input=void 0===t?{}:t,this.input_action=void 0===a?{}:a,this.fo_step=i,this.fo_arr_step=o,this.input_fo=s,this.list_bo_new=l,this.fo_arr=n}addPackFo(e,t){void 0!==t&&(this.input_action[e]=t)}buildPackRollBack(){return{fo_step:this.fo_step,fo_arr_step:this.fo_arr_step,context:this.context,input_fo:this.input_fo,input_action:this.input_action,list_bo_new:this.list_bo_new,fo_arr:this.fo_arr}}}},function(e,t,a){"use strict";function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",s=arguments.length>4?arguments[4]:void 0;if(i||"."===a||(i="."),void 0===e||null===e||""===e)return;let l=e=e.toString(),n="",r=e.lastIndexOf(i);if(-1!==r&&(l=e.substring(0,r),l=l.replace(/^-0+/,""),l=l.replace(/^0+/,""),n=e.substring(r,e.length),""===l&&(l="0")),l=l.replace(/\D/g,""),n=n.replace(/\D/g,""),!1===s&&(n=String(n).substring(0,t)),""===n)for(let o=0;o<t;o++)n+="0";let c=o("0."+n,t).toFixed(t),d=`${Number(l)+Number(c.split(".")[0])}.${c.split(".")[1]||""}`;l=d.split(".")[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+a),e.includes("-")&&(l="-"+l),n=d.split(".")[1];let h=`${l}${i}${n}`;return""===n&&(h=l),""!==h?h:void 0}a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));const o=(e,t)=>{if((""+e).includes("e")){var a=(""+e).split("e"),i="";return+a[1]+t>0&&(i="+"),+(Math.round(+a[0]+"e"+i+(+a[1]+t))+"e-"+t)}return+(Math.round(e+"e+"+t)+"e-"+t)};function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",i=e+"";if(t){let e=new RegExp("\\"+t,"g");i=i.replace(e,"")}if(a){let e=new RegExp("\\"+a,"g");i=i.replace(e,".")}let o=Number(i);if(!Number.isNaN(o)&&""!==e)return o}},function(e,t,a){"use strict";a.d(t,"a",(function(){return Dt})),a.d(t,"b",(function(){return Ct})),a.d(t,"c",(function(){return At}));var i=a(0),o=a.n(i),s=a(14),l=a.n(s),n=a(1),r=a(2),c=a(5),d=a(8);a(194),a(195),a(196);class h extends i.Component{constructor(e){super(e),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.updateConnections=(e,t)=>{if(!this.state.Clock_updateConnections){var a=this.connections,i=[];if(t){for(var o=-1,s=0;s<a.length;s++)if(a[s]===e){o=s;break}-1!==o&&a.splice(o,1)}else a.push(e);if(a.length>0)for(var l=0;l<a.length;l++){var n={};n.sourceId=a[l].sourceId+"",n.targetId=a[l].targetId+"",i[i.length]=n}this.flow_layout=i,this.connections=a}},this.newNode=function(e,t,a,i){var o=document.createElement("div");o.className="w",o.id=i;var s='<i class="fa fa-table" aria-hidden="true"></i>&nbsp;'+a.type+"&nbsp&nbsp";if(void 0!==a.dbcoffee_create&&"true"===a.dbcoffee_create&&(s+='<i style="color: red;" class="fa '+this.state.icon_partition_user+'" aria-hidden="true"></i>&nbsp'),void 0!==a.dbcoffee_col1&&""!==a.dbcoffee_col1&&"none"!==a.dbcoffee_col1&&(s+='<i style="color: red;" class="fa '+this.state.icon_partition_lvl+'" aria-hidden="true"></i>&nbsp'),void 0!==a.dbcoffee_col2&&""!==a.dbcoffee_col2&&"none"!==a.dbcoffee_col2&&(s+='<i style="color: red;" class="fa '+this.state.icon_partition_lvl+'" aria-hidden="true"></i>&nbsp'),s+="<br />"+a.title+'<br></br><ul style="padding-inline-start: 10px;">',null!=a.detail)for(var l=0;l<a.detail.length;l++)s+='<li id="'+a.type+a.detail[l].code+'">+&nbsp',null!=a.detail[l].datapk&&"true"===a.detail[l].datapk&&(s+='<i class="fa  '+this.state.icon_datapk+'" aria-hidden="true"></i>&nbsp'),null!=a.detail[l].autoseq&&"true"===a.detail[l].autoseq&&(s+='<i class="fa '+this.state.icon_autoseq+'" aria-hidden="true"></i>&nbsp'),null!=a.detail[l].fileid&&"true"===a.detail[l].fileid&&(s+='<i style="color: red;" class="fa  '+this.state.icon_fileid+'" aria-hidden="true"></i>&nbsp'),s+=a.detail[l].code+"&nbsp;:&nbsp"+a.detail[l].title+"</li>";s+="</ul>",o.innerHTML=s,o.style.left=e+"px",o.style.top=t+"px",this.instance.getContainer().appendChild(o),this.initNode(o),this.all_node_flow[this.all_node_flow.length]=o},this.initNode=function(e){for(var t=e.querySelectorAll("li"),a=0;a<t.length;a++)this.instance.makeSource(t[a],{anchor:"Continuous",connectorStyle:{stroke:"#5c96bc",strokeWidth:2,outlineStroke:"transparent",outlineWidth:4},connectionType:"basic",extract:{action:"the-action"}}),this.instance.makeTarget(t[a],{anchor:"Continuous",dropOptions:{hoverClass:"dragHover"},allowLoopback:!0})},this.createButton=function(e,t,a){for(var i=e,o=t,s=0,l=0;l<i.length;l++){for(var n=0,r=0,c=0;c<o.length;c++)if(i[l].type===o[c].id){n=o[c].left,r=o[c].top;break}0===r&&(r=50*(++s+1)),this.newNode(n,r,i[l],i[l].type)}this.joinConnect(a)},this.resetFlowLayout=function(){this.setState({connections:[]}),this.all_node_flow=[],this.instance.empty("designDataBasecanvas"),this.instance.reset(!0)},this.key_form="designDataBase",this.all_node_flow=[],this.flow_layout=this.props.data.flow_layout,this.connections=[],this.all_id_button=this.props.data.all_id_button,this.node_position=this.props.data.node_position;for(var t=[],a=0;a<this.all_id_button.length;a++)t[a]={},t[a].title=this.all_id_button[a].title,t[a].code=this.all_id_button[a].type;var i=[];i[0]={},i[0].title="D\xf9ng",i[0].code="true",i[1]={},i[1].title="Kh\xf4ng",i[1].code="false";var o=[];o[0]={},o[0].title="Chu\u1ed7i",o[0].code="t_string",o[1]={},o[1].title="Ng\xe0y",o[1].code="t_date",o[2]={},o[2].title="Gi\u1edd",o[2].code="t_time",o[3]={},o[3].title="Ng\xe0y v\xe0 gi\u1edd",o[3].code="t_date_time",o[4]={},o[4].title="S\u1ed1 th\u1eadp ph\xe2n",o[4].code="t_double",o[5]={},o[5].title="S\u1ed1 nguy\xean",o[5].code="t_integer",o[6]={},o[6].title="Tr\u1ea1ng th\xe1i",o[6].code="t_status",o[7]={},o[7].title="H\xecnh",o[7].code="t_img",o[8]={},o[8].title="M\xe3 v\u1ea1ch",o[8].code="t_code",this.state={icon_autoseq:"fa-magic",icon_fileid:"fa-book",icon_datapk:"fa-key",icon_partition_user:"fa-user-circle-o",icon_partition_lvl:"fa-star",Clock_updateConnections:!1,list_true_false:i,list_column_type:o,list_table:t,visibility:"",editTable:{type:"",title:"",detail:[]},editColumns:{code:"",title:"",mapping:"",type:"t_string",autoseq:"false",is_share:"false",is_mater:"false",datapk:"false",fileid:"false"},infoA:{title:"Thi\u1ebft k\u1ebf Database",des:"Y\xeau c\u1ea7u l\xe0m tr\xean Desktop",openOne:"true",ofModal:!1}}}getLayoutNode(){for(var e=[],t=0;t<this.all_node_flow.length;t++){var a={};a.id=this.all_node_flow[t].id,a.left=this.all_node_flow[t].style.left.replace("px",""),a.top=this.all_node_flow[t].style.top.replace("px",""),e.push(a)}return e}componentDidMount(){n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key),this.createButton(this.all_id_button,this.node_position,this.flow_layout)}onClickSaveDataBase(){this.node_position=this.getLayoutNode();var e={};e.node_position=this.node_position,e.all_id_button=this.all_id_button,e.flow_layout=this.flow_layout,d.a.quickPost([{txcode:"#sys:bo-save-database",input:{database:e}}],{})}joinConnect(e){for(var t=e,a=0;a<t.length;a++)this.instance.connect({source:t[a].sourceId,target:t[a].targetId,type:"basic"})}onClickAddTable(){for(var e=this.all_id_button,t=0;t<e.length;t++)if(e[t].type===this.state.editTable.type)return e[t]=this.state.editTable,this.all_id_button=e,void this.autoPaint();e[e.length]=this.state.editTable,this.all_id_button=e,this.autoPaint()}checkHasRelationshipTable(e,t){for(var a=this.all_id_button,i=0;i<a.length;i++)for(var o=a[i].detail,s=0;s<o.length;s++)for(var l=a[i].type+o[s].code,n=0;n<t.length;n++)for(var r=e+t[n].code,c=0;c<this.flow_layout.length;c++){if(this.flow_layout[c].sourceId===l)return!0;if(this.flow_layout[c].sourceId===r)return!0;if(this.flow_layout[c].targetId===l)return!0;if(this.flow_layout[c].targetId===r)return!0}return!1}onClickDeleteTable(){for(var e=this.all_id_button,t=0;t<e.length;t++)if(e[t].type===this.state.editTable.type)return this.checkHasRelationshipTable(this.state.editTable.type,this.state.editTable.detail)?void window.alert(Object(n.t)("flowDatabase_hasrelationship")):(e.splice(t,1),window.alert(Object(n.t)("flowDatabase_deleteTable")),void this.autoPaint())}autoPaint(){this.resetFlowLayout(),this.createButton(this.all_id_button,this.node_position,this.flow_layout)}onClickAddComlumn(){var e=this.state.editTable;if(null!=e.detail){for(var t=0;t<e.detail.length;t++)if(e.detail[t].code===this.state.editColumns.code)return void window.alert(Object(n.t)("flowDatabase_doublekey"));e.detail[e.detail.length]=this.state.editColumns,this.setState({editColumns:{code:"",title:"",mapping:"",type:"t_string",autoseq:"false",datapk:"false",fileid:"false"}}),this.autoPaint()}}onClickDeleteComlumn(){var e=this.state.editTable;if(null!=e.detail)for(var t=0;t<e.detail.length;t++)if(e.detail[t].code===this.state.editColumns.code)return e.detail.splice(t,1),this.autoPaint(),void window.alert(Object(n.t)("flowDatabase_deleteCol"))}onChange_AddTable(e,t){var a=this.state.editTable;a[e]=t.target.value,this.setState({editTable:a})}onChange_AddColumn(e,t){var a=this.state.editColumns;a[e]=t.target.value,this.setState({editColumns:a})}onSelectTableForEdit(e){if("new"!==e.target.value){for(var t=0;t<this.all_id_button.length;t++)if(this.all_id_button[t].type===e.target.value){this.setState({editTable:this.all_id_button[t]});break}}else this.setState({editTable:{type:"",title:"",detail:[]}})}onSelectColumnForEdit(e){if("new"!==e.target.value){for(var t=0;t<this.state.editTable.detail.length;t++)if(this.state.editTable.detail[t].code===e.target.value){var a=this.state.editTable.detail[t];void 0===a.mapping&&(a.mapping=""),this.setState({editColumns:a});break}}else this.setState({editColumns:{code:"",title:"",mapping:"",type:"t_string",autoseq:"false",datapk:"false",fileid:"false"}})}render(){return o.a.createElement("div",{className:"form-style",style:{display:this.state.visibility}},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12 col-lg-12"},o.a.createElement("div",{className:"col-md-12 col-lg-12"},o.a.createElement("div",{className:"prtm-block"},o.a.createElement("div",{className:"prtm-block-title mrgn-b"},o.a.createElement("h3",null,this.state.infoA.title),o.a.createElement("p",null,o.a.createElement("span",{className:"note-box bg-danger"},"Note !"),this.state.infoA.des)),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:e=>this.onClickSaveDataBase()},"L\u01b0u database"),o.a.createElement("div",{className:"jtk-demo-main"},o.a.createElement("div",{className:"jtk-demo-canvas canvas-wide statemachine-demo jtk-surface jtk-surface-nopan",id:"designDataBasecanvas"})),o.a.createElement("div",null,"Qu\u1ea3n l\xfd table",o.a.createElement("br",null),o.a.createElement(c.a,{class:"col-sm-12 col-md-12",name:"Danh s\xe1ch table",data:this.all_id_button,d_key:"type",d_name:"title",hasNew:!0,onChange:e=>this.onSelectTableForEdit(e)}),o.a.createElement(r.a,{name:"T\xean Table",class:"col-sm-12 col-md-6",onChange:e=>this.onChange_AddTable("title",e),value:this.state.editTable.title,disabled:!1}),o.a.createElement(r.a,{name:"ID",class:"col-sm-12 col-md-6",onChange:e=>this.onChange_AddTable("type",e),disabled:!1,value:this.state.editTable.type}),o.a.createElement("br",null),o.a.createElement("div",null,"C\u1ea5u h\xecnh Data Coffee Shop",o.a.createElement("br",null),o.a.createElement(c.a,{name:"L\u01b0u theo ng\u01b0\u1eddi t\u1ea1o",class:"col-sm-12 col-md-4",d_key:"code",d_name:"title",data:[{title:"Ch\u01b0a c\u1ea5u h\xecnh",code:"none"},{title:"\xc1p d\u1ee5ng",code:"true"},{title:"Kh\xf4ng \xe1p d\u1ee5ng",code:"false"}],value:void 0!==this.state.editTable.dbcoffee_create?this.state.editTable.dbcoffee_create:"none",onChange:e=>this.onChange_AddTable("dbcoffee_create",e)}),o.a.createElement(c.a,{name:"L\u01b0u theo c\u1ed9t 1 (kh\xf4ng gi\u1ed1ng c\u1ed9t 2)",hasNew:!0,has_new_name:"Kh\xf4ng d\xf9ng",has_new_value:"none",class:"col-sm-12 col-md-4",d_key:"code",d_name:"title",data:this.state.editTable.detail,value:void 0!==this.state.editTable.dbcoffee_col1?this.state.editTable.dbcoffee_col1:"none",onChange:e=>this.onChange_AddTable("dbcoffee_col1",e)}),o.a.createElement(c.a,{name:"L\u01b0u theo c\u1ed9t 2 (kh\xf4ng gi\u1ed1ng c\u1ed9t 1)",hasNew:!0,has_new_name:"Kh\xf4ng d\xf9ng",has_new_value:"none",class:"col-sm-12 col-md-4",d_key:"code",d_name:"title",data:this.state.editTable.detail,value:void 0!==this.state.editTable.dbcoffee_col2?this.state.editTable.dbcoffee_col2:"none",onChange:e=>this.onChange_AddTable("dbcoffee_col2",e)})),o.a.createElement("br",null),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:()=>this.onClickAddTable()},"L\u01b0u table v\xe0 v\u1ebd l\u1ea1i"),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:()=>this.onClickDeleteTable()},"X\xf3a table")),o.a.createElement("br",null),o.a.createElement("div",null,"Qu\u1ea3n l\xfd columns",o.a.createElement("br",null),o.a.createElement(c.a,{class:"col-sm-12 col-md-12",name:"Danh s\xe1ch column",hasNew:!0,d_key:"code",d_name:"title",data:this.state.editTable.detail,onChange:e=>this.onSelectColumnForEdit(e)}),o.a.createElement(r.a,{name:"ID",class:"col-sm-12 col-md-4",onChange:e=>this.onChange_AddColumn("code",e),value:this.state.editColumns.code}),o.a.createElement(r.a,{name:"ID (\xc1nh x\u1ea1)",class:"col-sm-12 col-md-4",onChange:e=>this.onChange_AddColumn("mapping",e),value:this.state.editColumns.mapping}),o.a.createElement(r.a,{name:"T\xean column",class:"col-sm-12 col-md-4",onChange:e=>this.onChange_AddColumn("title",e),value:this.state.editColumns.title}),o.a.createElement(c.a,{class:"col-sm-12 col-md-2",name:"Lo\u1ea1i column",hasNew:!1,data:this.state.list_column_type,onChange:e=>this.onChange_AddColumn("type",e),value:this.state.editColumns.type}),o.a.createElement(c.a,{class:"col-sm-12 col-md-2",name:"Kh\xf3a ch\xednh",hasNew:!1,data:this.state.list_true_false,onChange:e=>this.onChange_AddColumn("datapk",e),value:this.state.editColumns.datapk}),o.a.createElement(c.a,{class:"col-sm-12 col-md-2",name:"T\xean file",hasNew:!1,data:this.state.list_true_false,onChange:e=>this.onChange_AddColumn("fileid",e),value:this.state.editColumns.fileid}),o.a.createElement(c.a,{class:"col-sm-12 col-md-2",name:"T\u1ef1 t\u0103ng",hasNew:!1,data:this.state.list_true_false,onChange:e=>this.onChange_AddColumn("autoseq",e),value:this.state.editColumns.autoseq}),o.a.createElement(c.a,{class:"col-sm-12 col-md-2",name:"Chia s\u1ebd",hasNew:!1,data:this.state.list_true_false,onChange:e=>this.onChange_AddColumn("is_share",e),value:this.state.editColumns.is_share}),o.a.createElement(c.a,{class:"col-sm-12 col-md-2",name:"Master Data",hasNew:!1,data:this.state.list_true_false,onChange:e=>this.onChange_AddColumn("is_mater",e),value:this.state.editColumns.is_mater}),o.a.createElement("br",null),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:()=>this.onClickAddComlumn()},"Th\xeam c\u1ed9t (s\u1eeda th\xec ch\u1ec9 c\u1ea7n l\u01b0u table)"),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:()=>this.onClickDeleteComlumn()},"X\xf3a c\u1ed9t")))))))}}var _=h,u=a(6),g=a(13),m=a(3);class p extends i.Component{constructor(e){super(e),this.getDataFull=()=>({config:{default:{isBorder:"true"===this.props.isBorder,class:this.props.class||"col-12",title:"true"===String(this.props.isBorder)?this.props.name:""}}});var t={};"cView"===e.inputType&&(t.code=e.code),this.AUTO_ID=n.g.autoID(),this.state={list_group:[],data:n.g.cloneJson(e.list_input),infoView:t}}conVertModeForm(e,t){return t}getListComponent(){let e=this.state.data,t=[],a=0;for(let l of e){var i;l=this.conVertModeForm(this.props.infoA.mode_form,l);const e={btn_of_grid:this.props.btn_of_grid,key:l.default.codeHidden,index:a,default:l.default,visibility:l.visibility,config:l.config,role:l.role,property:l.property,validate:l.validate,lang:l.lang,configAVD:l.configAVD,inputType:l.inputtype,value:l.value,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,infoView:this.state.infoView};let n=null===(i=l.default)||void 0===i?void 0:i.ofgroup,r=t[t.length-1];if(!l.config.onTable)if(n&&"false"!==n&&n===(null===r||void 0===r?void 0:r.groupid))r.list_cpn.push(e);else{var o,s;let a={list_cpn:[],groupid:null===(o=l.default)||void 0===o?void 0:o.ofgroup,class:null===(s=l.default)||void 0===s?void 0:s.class_ofgroup};a.list_cpn.push(e),t.push(a)}a++}return t}componentDidMount(){this.setState({list_group:this.getListComponent()})}render(){const e=Object(m.b)("uView");return o.a.createElement(e,{dataFull:this.getDataFull()},this.state.list_group.map((e,t)=>{if(0===e.list_cpn.length)return null;{const a=e.list_cpn.slice(1),i=a.length>0;return o.a.createElement(g.a,Object.assign({},e.list_cpn[0],{isOfgroupParent:i,ofGroupData:a,key:this.AUTO_ID+t}))}}))}}var f={cView:p};class v extends i.Component{render(){const e=f[this.props.inputType];return o.a.createElement(e,Object.assign({},this.props,{list_view:this.props.list_view}))}}var b=v;class y extends i.Component{constructor(e){super(e),this.changeKeyLanguage=()=>{this.setState({key_lang:n.g.getLangKey()})},this.stateHidden={form_data_full:{}},this.state={ID:n.g.autoID(),key_lang:n.g.getLangKey(),tab_selected:this.props.list_view[0].name,DOM_views_tab:[],DOM_view:[]};for(let t=0;t<this.props.list_view.length;t++){const e=this.props.list_view[t];if("true"===e.isTab){let a={};a.title=e.name,a.id=n.g.autoID(),a.DOM_elm=o.a.createElement(b,{btn_of_grid:this.props.btn_of_grid,key:t,index:t,name:e.name,code:e.code,isTab:e.isTab,isBorder:e.isBorder,class:e.class,inputType:e.inputtype,visibility:e.visibility,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,list_input:e.list_input}),this.state.DOM_views_tab.push(a)}else this.state.DOM_view.push(o.a.createElement(b,{btn_of_grid:this.props.btn_of_grid,key:t,index:t,name:e.name,code:e.code,isTab:e.isTab,isBorder:e.isBorder,class:e.class,inputType:e.inputtype,visibility:e.visibility,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,list_input:e.list_input}))}}UNSAFE_componentWillMount(){this.stateHidden.form_data_full={data:this.getListTabView()}}componentDidMount(){setTimeout(()=>{let e=n.g.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.hasOwnProperty("addLayout")&&e.addLayout(this)},n.g.getTimeAddComponent())}getListTabView(){let e=[];for(const t of this.state.DOM_views_tab)e.push({tabInfo:{title:t.title,id:t.id},DOM_elm:t.DOM_elm});return e}render(){const e=Object(m.b)("uFormTab"),t=Object(m.b)("uLayout");return o.a.createElement(o.a.Fragment,null,this.state.DOM_view.length>0&&o.a.createElement(t,null,this.state.DOM_view),this.state.DOM_views_tab.length>0&&o.a.createElement(e,{dataFull:Object(u.a)(Object(u.a)({},this.stateHidden.form_data_full),{},{isLoadingEnd:this.props.loading_form_end,abs_select:this.onSelectTab})}))}}var D={cLayout:y};class C extends i.Component{render(){const e=D[this.props.inputType];return o.a.createElement(e,Object.assign({},this.props,{list_view:this.props.list_view}))}}var A=C;const k=e=>{var t=e.childNodes,a={inputType:"cHtml"};a.tagHtml=e.tagName,a.tagAtt=N(e),void 0!==a.tagAtt&&void 0!==a.tagAtt.style&&(a.tagAtt.style=M(a.tagAtt.style)),1===e.childNodes.length&&(a.content=e.textContent),e.hasOwnProperty("getAttribute")&&(null!=e.getAttribute("class")?(a.class=e.getAttribute("class"),a.code=e.getAttribute("code")):a.class=""),a.loadScreen=[];for(var i=0;i<t.length;i++)if(t[i]&&void 0!==t[i].tagName)if(t[i].childNodes&&t[i].childNodes.length>0)a.loadScreen[a.loadScreen.length]=k(t[i]);else{var o={};o.inputType=t[i].tagName,o.tagAtt=N(t[i]),void 0!==o.tagAtt&&void 0!==o.tagAtt.style&&(o.tagAtt.style=M(o.tagAtt.style)),a.loadScreen[a.loadScreen.length]=o}return a},M=e=>{var t={};if(void 0!==e){for(var a=e.split(";"),i=0;i<a.length;i++)if(""!==a[i]){var o=a[i].split(":");o.length>0&&(t[x(o[0].trim())]=o[1].trim())}return t}return t},x=e=>{var t=e;if(""!==e&&e.includes("-")){var a=e.split("-");a.length>0&&(t=a[0]+a[1].charAt(0).toUpperCase()+a[1].slice(1))}return t},N=e=>{var t={},a=e.attributes;if(void 0!==a)for(var i=a.length-1;i>=0;i--)t[a[i].name]=a[i].value;return t},w=(e,t,a)=>{if(void 0!==e&&e.length>0)for(var i=0;i<e.length;i++){if(e[i].tagAtt&&void 0!==e[i].tagAtt.code){var o=S(e[i].tagAtt.code,t);if(void 0!==o)for(var s in o)e[i][s]=o[s];e[i].inputType.includes("TABLE")&&(e[i].btn_of_grid=a)}void 0!==e[i].loadScreen&&e[i].loadScreen.length>0&&(e[i].loadScreen=w(e[i].loadScreen,t,a))}return e},S=(e,t)=>{if(void 0!==e)for(var a=0;a<t.length;a++){var i=t[a].list_view;if(void 0!==i)for(var o=0;o<i.length;o++)for(var s=i[o].list_input,l=0;l<s.length;l++)if(void 0!==s[l].default.code&&s[l].default.code===e.trim())return s[l]}};var T=a(59);class E{static async callRule(e,t,a,i,o,s){var l=[];let r=!1;var c={data:a,event:s,infoA:i,infoA_parent:o,configComponent:t};let d=n.g.getFormAppAuto(i.key_form);for(const n of e){const e=new T.a[n.code];e.setConfig(n),O(n,c)&&e.checkUse(c)&&(l[l.length]=e)}r=(null===l||void 0===l?void 0:l.length)>0,d&&r&&d.setLoadingRule(!0);for(const n of l)await n.start(c);return d&&r&&d.setLoadingRule(!1),n.g.isDebug?l.map(e=>e.config):[]}}function O(e,t){if("isOpenFromOther"===t.event)return!0;if(!0===e.isStart&&"isStart"===t.event)return!0;{var a;const i=e.config,o=t.configComponent,s=t.event,l=i.component_event;if(("all"===l||s===l)&&`;${i.component_action.trim()};`.includes(`;${null===(a=o.code)||void 0===a?void 0:a.trim()};`))return!0}return!1}class I extends i.Component{constructor(e){super(e),this.state={time:Date.now()-this.props.time}}componentDidMount(){this.save_interval=setInterval(()=>{var e=this.state.time+6e4;this.setState({time:e})},6e4)}componentWillUnmount(){clearInterval(this.save_interval)}render(){let e=this.state.time,t=new Date(Date.now()-e);return o.a.createElement("span",{className:this.props.class},n.g.timeSince(t))}}var F=I,L=a(4);const j=["All","setCMD","set","get","setAdvanced","getAdvanced","getDataOOP"],R=(e,t)=>{switch(t){case"build_api":!function(e,t){const a={script:e,tutorial:[{value:"Giao di\u1ec7n t\u1ea1o api t\u1ef1 \u0111\u1ed9ng"}]};t.ref_debug.current.handleOpen(e,[{code:"url",value:"/api/exp/exp"},{code:"body",value:"auto"},{code:"type",value:"create",data:["create","search","getinfo","delete"],type:"array"}],a,(e,a,i,o)=>{const{url:s,body:l}=o;let n=s.trim();n=n.trim();let r=t.props.form_code+n.replace(/\//g,"_");var c=l;let d={};d="auto"!==c?JSON.parse(c):t.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}),delete d.errorjwebui_code;const h={learn_api_name:r,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+n,learn_api_data:t.props.form_code,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:"POST",learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(U(d,t.props.form_code)),learn_api_id:r,AFGHkeyIndexWJ:r,AFGHkeyTime:1603872320968,AFGHkeyWorkFlow:"",AFGHTimeWJ:1603872320968,app_code:"o9"};P(e,{BUTTON:{txFO:`[{"txcode":"#sys:fo-create-dataAPI","input":{"list_component":"*","list_view":"","table_code":"${t.props.form_code}","learn_api":"${r}"}}]`},API:h},!0)})}(t,e);break;case"h=f":!function(e){e.callDirFromSupport("setCMD",{list_component:"*;"+JSON.stringify(z(e)).replace(/,/g,";"),list_view:"",inform:"true",checkError:"false"},{visible:!0})}(e);break;case"ai":!function(e){e.callDirFromSupport("toolAutoValue",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{})}(e);break;case"debug":!function(e,t){const a=[{code:"cpn_code",value:"- Select one -",data:z(t),type:"array"},{code:"func_call",value:"ALL",data:j,type:"array"},{code:"condition",value:""}],i={script:e,tutorial:[{value:"Giao di\u1ec7n debug c\xe1c h\xe0m t\xe1c \u0111\u1ed9ng \u0111\u1ebfn component \u0111\u01b0\u1ee3c ch\u1ecdn (code = cpn_code)"}]};t.ref_debug.current.handleOpen(e,a,i,(e,a,i,o)=>{var s,l;const{cpn_code:r,func_call:c,condition:d}=o,h=n.g.cloneJson(null===(s=t.debug_form.component[r])||void 0===s?void 0:s.callDirFromSupport)||[],_=n.g.cloneJson(null===(l=t.debug_form.component[r])||void 0===l?void 0:l.runRuleFunction)||[];P(e,{func_call:h.filter(e=>(e.funciotn_name===c||"ALL"===c)&&(n.g.checkCondition(e,d)||!d)),rule_call:_},!0)})}(t,e);break;case"condition":!function(e,t){var a=prompt("Nh\u1eadp c\xe2u \u0111i\u1ec1u ki\u1ec7n: ","");let i=function(e,t){let a=t,i={};n.g.component_getListCode(t).length>0&&(i=e.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}));return t=n.g.convertCondition(t,i),{old_condition:a,condition:t,data_component:i}}(t,a);P(e,i,!0)}(t,e);break;case"build_getinfo":!function(e,t){const a=[{code:"api_getinfo",value:"/api/exp"},{code:"body_request",value:"{    }"},{code:"body_response",value:"{ }"},{code:"input_key",value:""},{code:"label_key",value:""}],i={script:e,tutorial:[{value:"Giao di\u1ec7n t\u1ea1o rule GetInfo t\u1ef1 \u0111\u1ed9ng"}]};t.ref_debug.current.handleOpen(e,a,i,(e,a,i,o)=>{let{api_getinfo:s,body_request:l,body_response:r,label_key:c,input_key:d}=o;l=JSON.parse(l),r=JSON.parse(r);let h=Object.keys(l).toString().replace(/,/,"_"),_=V(h.split("_")[0],t).config.structable_read.split(".")[0];const u=t.props.form_code;let g=U(l,_);const m=`api_rulefunc_${u}_get_info_${h}`,p={learn_api_name:m,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+s,learn_api_data:m,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:"POST",learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(g),learn_api_id:m,AFGHkeyIndexWJ:m,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime(),app_code:"o9"};let f={};for(const n in r){let e=V(n,t);e?f[e.default.code]=`${m}.${n}`:f[n]=`${m}.${n}`}console.log("body_cpn_result",f);const v={code:"getInfo",config:{component_event:"enter_tab",component_action:V(d,t).default.code,component_result:JSON.stringify(f),isSetCode:"true",data_type:"api",api_id:m,condition:""},isStart:!1,inUse:!0,order:1};let b={info:n.g.cloneJson(t.props.infoA),list_layout:n.g.cloneJson(t.props.conf),react_txt:""};b.info.ruleStrong.push(v),b.list_layout.forEach(e=>{e.list_view.forEach(e=>{let t=e.list_input;t.forEach((e,a)=>{var i,o,s;(null===(i=e.config)||void 0===i||null===(o=i.structable_read)||void 0===o||null===(s=o.split("."))||void 0===s?void 0:s[1])===d&&(e.default.ofgroup=e.default.code,e.default.class="col-sm-6 col-12",e.default.class_ofgroup="col-xl-4 col-lg-4 col-md-5 col-sm-5 offset-xl-2-right offset-lg-2-right offset-md-1-right offset-sm-1-right",t=t.splice(a+1,0,{config:{action:"",structable:`${_}.${c}`,structable_read:`${_}.${c}`,data_default:""},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"jLabel",default:{name:c,code:c,codeHidden:n.g.autoID(),class:"col-6",condition:"",role:"",ofgroup:e.default.code,class_ofgroup:""}}))})})});const y={form_code:u,api_code:m,api_config:p,form_config:b,script:e};console.log("input",y);var D=[{txcode:"#sys:bo-jwebui-tools",input:y}];Object(L.b)(D,{}).then(e=>{console.log(e)})})}(t,e)}};function z(e){return Object.keys(e.debug_form.component)}function P(e,t,a){console.log("==================================================================="),console.log("SCRIPT  => ",e.toUpperCase()),console.log("CONTENT => ",t),console.log("-------------------------------------------------------------------"),a&&n.g.copyToClipboard(JSON.stringify(t))}function U(e,t){let a={};for(const i in e)if(e.hasOwnProperty(i)){const o=e[i];"number"===typeof o&&(a[i.toLocaleLowerCase()]=`MapS.dataN(${t}.${i.toLocaleLowerCase()})`),"string"===typeof o&&(/\d\d\/\d\d\/\d\d\d\d/.test(o)?a[i.toLocaleLowerCase()]=`MapS.dateDDMMYYYY(${t}.${i.toLocaleLowerCase()})`:a[i.toLocaleLowerCase()]=`MapS.dataS(${t}.${i.toLocaleLowerCase()})`),"object"===typeof o&&!1===Array.isArray(o)&&(a[i.toLocaleLowerCase()]=U(o,t)),"object"===typeof o&&!0===Array.isArray(o)&&(a[i.toLocaleLowerCase()]=`MapS.arrayJson(${t}.${i.toLocaleLowerCase()}|${JSON.stringify(U(o[0],i))})`)}return a}function V(e,t){let a;return t.props.conf.forEach(t=>{t.list_view.forEach(t=>{t.list_input.forEach((t,i)=>{var o,s,l;(null===(o=t.config)||void 0===o||null===(s=o.structable_read)||void 0===s||null===(l=s.split("."))||void 0===l?void 0:l[1])===e&&(a=t)})})}),a}class B extends i.Component{constructor(e){super(e),this.handleOpen=(e,t,a,i)=>{let o={script:e,config:t,dataItem:a,funcCallBack:i,dataTool:{}};for(const s of t)o.dataTool[s.code]=s.value||"";this.setState({devTool:o,isOpen:!0})},this.handleClose=()=>{this.setState({isOpen:!1},()=>{const{script:e,config:t,dataItem:a,dataTool:i,funcCallBack:o}=this.state.devTool;o&&o(e,t,a,i)})},this.handleChange=(e,t)=>{let a=this.state.devTool,i=this.state.devTool.config;for(const o of i)o.code===e&&(o.value=t,a.dataTool[e]=t);this.setState({devTool:a})},this.buildDataFullInput=()=>{},this.buildDataFullSelect=()=>{},this.builDataFullCheckbox=()=>{},this.getDataFullModal=()=>({config:{default:{title:"",size:"M"},cmd:{visibility:this.state.isOpen}},abs_Close:this.handleClose}),this.getBtnDatafull=(e,t,a,i)=>({config:{default:{title:e,type:t,class:"",icon:a},cmd:{disable:!1,isLoading:!1}}}),this.builDataFull=(e,t)=>{var a;const i=e.code||"",o=e.value||"",s=e.icon||"",l=e.type||"string",r=e.data||[],c=(null===e||void 0===e||null===(a=e.data_filter)||void 0===a?void 0:a.length)?e.data_filter:r;switch(l){case"string":return{abs_Change:e=>{this.handleChange(i,e.target.value)},config:{default:{placeholder:i,title:i,type:"text",class:"col-6",required:!1,icon:s},cmd:{disable:!1,visible:!0,error:{message:"",type:""},isFocus:!1,isLoading:!1},mode:{textAlign:""}},mode:{isSearch:!1,readOnly:!1},valueTitleHover:i,value:o};case"array":return{abs_Change:e=>{this.handleChange(i,e)},abs_search:e=>{const t=e.target.value;let a=this.state.devTool;for(const o of a.config)o.code===i&&(o.search_value=t,o.data_filter=r.filter(e=>e.includes(t)||!t));this.setState({devTool:a})},config:{default:{search:{placeholder:n.g.getLang("jselect_search")},data_status:n.g.getLang("jselect_no_result"),title:i,type:"",class:"col-6",required:!1},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{moreColumn:!1},column:[]},data:null===c||void 0===c?void 0:c.map(e=>({title:e,value:e,selected:e===o})),input_value:o,search_value:e.search_value||""}}},this.state={devTool:{script:"",config:[],dataItem:{},dataTool:{},funcCallBack:null},isOpen:!1}}render(){const e=this.state.devTool.config,t={string:Object(m.b)("uInput"),array:Object(m.b)("uSelectItem")};let a=Object(m.b)("uModal");const i=Object(m.b)("uForm"),s=Object(m.b)("uLayout"),l=Object(m.b)("uView"),n=Object(m.b)("uButton"),r=[{name:"Accept",color:"primary",icon:"check",key:"",onClick:()=>{const{script:e,config:t,dataItem:a,dataTool:i,funcCallBack:o}=this.state.devTool;o&&o(e,t,a,i)}},{name:"Clear",color:"danger",icon:"delete",onClick:()=>{let e=this.state.devTool;for(const t of e.config)e.dataTool[t.code]="",t.value="";this.setState({devTool:e})}}],c=this.state.devTool.dataItem.tutorial||[],d=this.state.devTool.dataItem.script||"";return o.a.createElement(a,{dataFull:this.getDataFullModal()},o.a.createElement(i,{dataFull:{config:{default:{title:"Developer Tool: "+d}},cmd:{visibility:!0}}},c.map(e=>o.a.createElement("div",{style:{marginTop:"20px",color:"darkgreen"}},o.a.createElement("i",null,e.value))),o.a.createElement(s,null,o.a.createElement(l,{class:"col-12"},e.map(e=>{const a=e.type||"string",i=t[a];return o.a.createElement(i,{dataFull:this.builDataFull(e,this)})}))),o.a.createElement(s,null,o.a.createElement(l,{class:"col-12"},r.map(e=>o.a.createElement(n,{dataFull:Object(u.a)(Object(u.a)({},this.getBtnDatafull(e.name,e.color,e.icon,e.key)),{},{abs_Click:e.onClick})}))))),o.a.createElement("div",{className:"modal-body",ref:"content_modal"}))}}var H=B;class Y extends i.Component{constructor(e){var t;super(e),t=this,this.addDebug=(e,t)=>{e},this.addLayout=e=>{void 0!==e&&this.list_layout.push(e)},this.addComponent=e=>{if(n.g.isDebug())for(const a in this.list_component_debug){let t=this.list_component_debug[a];e.props.default.codeHidden===t.default.codeHidden&&delete this.list_component_debug[a]}if(void 0!==e&&(this.list_component.push(e),this.list_component_max===this.list_component.length&&this.form_blockCheckMaxComponent)){if(this.form_blockCheckMaxComponent=!1,this.list_component.length>0)for(var t=0;t<this.list_component.length;t++)this.list_component[t].hasOwnProperty("checkIsLoading")&&this.list_component[t].hasOwnProperty("getCodeHidden")&&!1===this.list_component[t].checkIsLoading()&&this.list_isLoading++;0===this.list_isLoading&&(this.loading_final=!0),this.formStart()}},this.changeKeyLanguage=()=>{if(this.list_layout.length>0)for(let e=0;e<this.list_layout.length;e++)this.list_layout[e].hasOwnProperty("changeKeyLanguage")&&this.list_layout[e].changeKeyLanguage();if(this.list_component.length>0)for(let e=0;e<this.list_component.length;e++)this.list_component[e].hasOwnProperty("changeKeyLanguage")&&this.list_component[e].changeKeyLanguage();void 0!==this.refs.timeline_ref&&this.refs.timeline_ref.changeKeyLanguage(),"none"!==this.state.hasError&&this.buildValidateForm()},this.forDebug=e=>{if(this.list_component.length>0)for(var t=0;t<this.list_component.length;t++)this.list_component[t].hasOwnProperty("forDebug")&&this.list_component[t].forDebug(e);this.setState({isDebug:e})},this.rule_runIsStart=async()=>{const e=["setFocus"];for(var t=[],a=0;a<this.state.ruleStrong.length;a++){const i=this.state.ruleStrong[a];void 0!==i.isStart&&!1===e.includes(i.code)&&!0!==i.isDidStart&&(t[t.length]=this.state.ruleStrong[a])}if(t.length>0)return E.callRule(t,{},{},this.state.infoA,this.state.infoA_parent,"isStart")},this.ruleDidStart=async()=>{const e=["setFocus"];for(var t=[],a=0;a<this.state.ruleStrong.length;a++){const i=this.state.ruleStrong[a];i&&(void 0!==i.isStart&&!0===e.includes(i.code)||!0===i.isDidStart)&&(t[t.length]=this.state.ruleStrong[a])}if(t.length>0)return E.callRule(t,{},{},this.state.infoA,this.state.infoA_parent,"isStart")},this.setFormValidateFromComponent=(e,t)=>{void 0!==e&&!0===e&&!1===this.formValidate&&(n.g.isDebug(),this.formValidate=e)},this.setFormValidateFromFunctionClient=e=>{void 0!==e&&(!0!==e&&!1!==e||(this.formValidate=e))},this.setCompareroCpn=e=>{this.comprare=[e]},this.getFormValidate=()=>(this.buildValidateForm(),this.formValidate,this.formValidate),this.getValidateForm=()=>{let e=[];for(const t of this.list_component){let a=!1,i="";t.hasOwnProperty("getInfoCheckRun")&&(a=t.getInfoCheckRun().block),t.hasOwnProperty("getInfoErrror")&&(i=t.getInfoErrror()),!0!==a&&i&&e.push(Object.assign({type:"form"},i))}return e},this.runRuleFunctionQueue=async()=>{for(;0!==this.queue_rules.length;){const{configComponent:e,dataComponent:t,infoA_Parent:a,event_code:i}=this.queue_rules.shift();await E.callRule(this.state.ruleStrong,e,t,this.state.infoA,a,i)}},this.runRuleFunction=async(e,t,a,i)=>{if(!0===this.state.is_loading_form||0!==this.queue_rules.length)this.queue_rules.push({configComponent:e,dataComponent:t,infoA_Parent:a,event_code:i});else if(this.state.ruleStrong.length>0){const l=await E.callRule(this.state.ruleStrong,e,t,this.state.infoA,a,i);var o,s;if(n.g.isDebug())(null===(o=this.debug_form.component)||void 0===o||null===(s=o[e.code])||void 0===s?void 0:s.runRuleFunction)||(this.debug_form.component=n.g.setNodeJson(this.debug_form.component,e.code+".runRuleFunction",[])),this.debug_form.component[e.code].runRuleFunction.push({event:i,start_rules:l})}},this.getInfoComponentParent=()=>this.props.componentConfigDefault,this.getInfoA=()=>this.state.infoA,this.putData=(e,t,a)=>{null==this.obDataForm[e]&&(this.obDataForm[e]={}),this.obDataForm[e][t]=a},this.putDataJoin=e=>{for(var t in e)if(void 0!==this.obDataForm[t])for(var a in e[t])this.obDataForm[t][a]=e[t][a];else this.obDataForm[t]=e[t]},this.getDataForm=()=>(!0!==this.is_did_set_data||this.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true"},{}),this.getData("")),this.getDataAll=e=>{var t,a;if(!0!==e)return this.getDataForm();let i=this.getDataForm(),o=null===(t=this.props)||void 0===t||null===(a=t.infoA_parent)||void 0===a?void 0:a.key_form;if(o){let e=n.g.getFormAppAuto(o).getDataAll(!0);i=Object.assign(e,i)}return i},this.getData=e=>void 0!==e&&""!==e.trim()&&null!=this.obDataForm[e]?n.g.cloneJson(this.obDataForm[e]):n.g.cloneJson(this.obDataForm),this.getDataAdvanced=()=>this.callDirFromSupport("getAdvanced",{list_component:"*"},{}),this.putDataAll=e=>{n.g.isDebug()&&console.log("putDataAll===>",n.g.cloneJson(e)),this.obDataForm=e},this.putDataAll_andSet=(e,t)=>{n.g.isDebug()&&console.log("putDataAll_andSet===>",n.g.cloneJson(e)),void 0!==t&&!0===t&&this.clearForm();for(const a in e)if(e.hasOwnProperty(a)){const t=e[a];if("object"===typeof t&&null!==t&&!1===Array.isArray(t)){for(const e in t)if(t.hasOwnProperty(e)){const i=t[e];void 0===this.obDataForm[a]&&(this.obDataForm[a]={}),this.obDataForm[a][e]=i}}else Array.isArray(t)&&(this.obDataForm[a]=t)}this.callDirFromSupport("set",{},n.g.cloneJson(this.obDataForm))},this.clearForm=()=>{this.obDataForm={},this.setState({follow:{hasFollow:!1,removeFollow:!1}}),this.showErrorFromServer(),this.callDirFromSupport("reload",{},this.obDataForm)},this.reload=e=>{void 0===e?this.callDirFromSupport("reload",{},this.obDataForm):this.callDirFromSupport("reload",{},e)},this.clearTimeOut=()=>{this.callDirFromSupport("clearTimeOut",{},this.obDataForm)},this.componentIsLoaded=e=>{this.list_statusIsLoadingFromComponent++,this.list_statusIsLoadingFromComponent===this.list_isLoading&&(this.loading_final=!0,this.formStart())},this.clearError=()=>{this.callDirFromSupport("clearError","",{}),this.showError(!1)},this.callDirOneComponent=(e,t,a)=>{var i={};if(void 0===e)return i;if(this.list_component.length>0)for(var o=0;o<this.list_component.length;o++)if(this.list_component[o].hasOwnProperty("getInfoCheckRun")){var s=this.list_component[o].getInfoCheckRun();if(s.default.code===t&&this.list_component[o].hasOwnProperty(e)){i[s.default.code]=this.list_component[o][e](t,a);break}}},this.callDirFromSupport=(e,t,a)=>{let i=n.g.cloneJson(a);var o={};if(void 0===e)return o;let s=t.list_component||"";s=s.replace(/\w+\([^\\)]+\)/gm,";");if(this.list_component.length>0)for(var l=0;l<this.list_component.length;l++)if(this.list_component[l].hasOwnProperty("getInfoCheckRun")){var r=this.list_component[l].getInfoCheckRun(),c=!1;if(",setCallBuildFormBack,setCallFormBack,clearError,checkValidate,reload,set,getElearning,clearTimeOut,".includes(","+e+",")?c=!0:(void 0!==t.list_view&&""!==t.list_view&&(";"+t.list_view+";").includes(";"+r.view.code+";")&&(c=!0),c||void 0===s||""!==s&&((";"+s+";").includes(";*;")||(";"+s+";").includes(";"+r.default.code+";"))&&(c=!0),c||void 0===t.codeHidden||""!==t.codeHidden&&(";"+t.codeHidden+";").includes(";"+r.default.codeHidden+";")&&(c=!0)),!0===r.block&&"setCMD"!==e&&(c=!1),!c)continue;if(this.list_component[l].hasOwnProperty(e)&&(o[r.default.code]=this.list_component[l][e](n.g.cloneJson(t),i),n.g.isDebug())){var d,h,_=new Error;(null===(d=this.debug_form.component)||void 0===d||null===(h=d[r.default.code])||void 0===h?void 0:h.callDirFromSupport)||(this.debug_form.component=n.g.setNodeJson(this.debug_form.component,r.default.code+".callDirFromSupport",[])),this.debug_form.component[r.default.code].callDirFromSupport.push({funciotn_name:e,function_para:t,data:i,srack:_.stack.toString()})}}else n.g.log("not getInfoCheckRun");return o},this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.isDidSetData=()=>this.is_did_set_data,this.checkMasterData=()=>{var e=n.g.ms_getMasterData(this.key_form);void 0!==e&&d.a.quickPost([{txcode:"#sys:bo-masterdata-loadFollow",input:{master_data_start:e}}],d.a.createContext(this.obDataForm,this.state.infoA,this.state.infoA_parent,{}))},this.readMasterDataInfo=e=>{var t=this.state.follow;t.hasFollow=!0,t.removeFollow=!1,void 0!==e.table&&void 0!==e.data_key_value&&void 0!==this.obDataForm&&void 0!==e.pk&&void 0!==this.obDataForm[e.table]&&void 0!==this.obDataForm[e.table][e.pk]&&this.obDataForm[e.table][e.pk]===e.data_key_value&&(t.hasFollow=!1,t.removeFollow=!0),this.setState({follow:t})},this.showError=(e,t)=>{e?this.setState({hasError:"block"},()=>{window.scroll(0,this.refs.hasError)}):(this.setState({hasError:"none",list_error:[]}),this.list_error_start=[])},this.toggleLoading=e=>{setTimeout(()=>{window.scrollTo(0,0),e?this.setState({status_loading:"none",status_form:"block"}):this.setState({status_loading:"block",status_form:"none"})},2e3)},this.showErrorFromServer=function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.state.list_error;if(void 0!==e)if(e.length>0){i=[];for(var o=0;o<e.length;o++){var s=e[o];let a=n.g.getLang(s.typeError);void 0!==a&&""!==a||(a="warning");let l=!1;"form"===s.type?void 0!==s.code&&""!==s.code?i.push({key:s.key,typeError:a,info:s.info,code:s.code,error_end:l,icon:t.showErrorFromServer_getIcon(s.key)}):i.push({key:s.key,info:s.info,typeError:a,code:"",error_end:l,icon:t.showErrorFromServer_getIcon(s.key)}):"system"===s.type&&n.g.isDebug()&&(void 0!==s.code&&""!==s.code?i.push({key:s.key,info:s.info,typeError:a,code:s.code,error_end:l,icon:t.showErrorFromServer_getIcon(s.key)}):i.push({key:s.key,info:s.info,typeError:a,code:"",error_end:l,icon:t.showErrorFromServer_getIcon(s.key)}))}void 0!==i?void 0!==i[i.length-1]&&(i[i.length-1].error_end=!0):i=[]}else i=[];else i=[];i.length>0&&!1!==a?t.setState({hasError:"block",list_error:i},()=>{document.getElementById("content").scrollTo(0,0)}):t.setState({hasError:"none",list_error:i}),t.list_error_start=e},this.getContext_FormOpenModal=()=>({list_error:this.list_error_start}),this.setStatusToForm_AndRunRule=e=>{for(var t=[],a=0;a<this.state.ruleStrong.length;a++)if(void 0!==this.state.ruleStrong[a].isStatus&&this.state.ruleStrong[a].isStatus===e){let e=n.g.cloneJson(this.state.ruleStrong[a]);e.isStart=!0,t.push(e)}t.length>0&&E.callRule(t,{},{},this.state.infoA,this.state.infoA_parent,"isStart")},this.getNotification=()=>({dataFull:{title:n.g.getLang("error_occurr"),data:this.state.list_error.map((e,t)=>({title:e.key+": "+(n.g.getLang(e.code)||n.g.getLang(e.info)),dataItem:{},time:o.a.createElement(F,{class:"pull-right display-ib",time:Date.now()})}))}}),this.getTitleForm=()=>{var e;return(null===(e=this.props.infoA_parent)||void 0===e?void 0:e.key_form)?this.props.conf[0].name:this.props.infoA.des},this.setLoadingAction=e=>{this.setState({loading_action_flow:e})},this.getLoadingAction=()=>this.state.loading_action_flow,this.setLoadingRule=e=>{e?(this.count_loading++,this.setState({loading_action:e})):(this.count_loading--,this.count_loading||this.setState({loading_action:e}))},this.renderFormContent=()=>{const e=Object(m.b)("uFormNotify");let t="hidden";return!1===this.state.is_loading_form&&(t=""),o.a.createElement(o.a.Fragment,null,this.state.list_error.length>0&&o.a.createElement(e,this.getNotification()),this.state.data.map((e,a)=>o.a.createElement("div",{key:a,style:{visibility:t}},o.a.createElement(A,{index:a,btn_of_grid:this.state.btn_of_grid,name:e.name,des:e.des,lang:e.lang,lang_des:e.lang_des,inputType:e.inputtype,type:e.type,infoA:this.state.infoA,infoA_parent:this.state.infoA_parent,value:e.value,visibility:e.visibility,list_view:e.list_view,loading_form_end:!1===this.state.is_loading_form}))))},this.renderDebug=()=>{const e=Object(m.b)("uButton"),t=Object(m.b)("uForm"),a=Object(m.b)("uLayout"),i=Object(m.b)("uView");if(!n.g.isDebug())return null;const s=[{name:"Command line",color:"primary",icon:"code",key:"",onClick:()=>{var e=prompt("Enter code:","");e&&R(this,e)}},{name:"Debug component",color:"",icon:"adb",key:"",onClick:()=>{R(this,"debug")}},{name:"Clear Cache",color:"",icon:"delete",onClick:()=>{this.debug_form.component={},this.debug_form.rule={}}}];return o.a.createElement(t,{dataFull:{config:{default:{title:"Debug"}},cmd:{visibility:this.state.visibility}}},o.a.createElement(H,{ref:this.ref_debug}),o.a.createElement(a,null,this.props.form_code,o.a.createElement(i,{class:"col-12"},s.map(t=>{return o.a.createElement(e,{key:t.name,dataFull:Object(u.a)(Object(u.a)({},(a=t.name,i=t.color,s=t.icon,t.key,{config:{default:{title:a,type:i,class:"",icon:s},cmd:{disable:!1,isLoading:!1}}})),{},{abs_Click:t.onClick})});var a,i,s}))))},this.key_form=Object(n.c)(),null!=this.props.infoA.openOne&&"true"===this.props.infoA.openOne&&void 0!==this.props.form_code&&(this.key_form=this.props.form_code);var a=[];if(void 0!==this.props.infoA.ruleStrong)for(var i=0;i<this.props.infoA.ruleStrong.length;i++){var s=this.props.infoA.ruleStrong[i];void 0!==s.inUse&&s.inUse&&(a[a.length]=s)}for(let o=0;o<a.length-1;o++)for(let e=o+1;e<a.length;e++)if(a[o].order>a[e].order){let t=n.g.cloneJson(a[o]);a[o]=n.g.cloneJson(a[e]),a[e]=t}this.obDataForm={},void 0!==this.props.data_select&&(this.obDataForm=JSON.parse(JSON.stringify(this.props.data_select))),this.openFromFormOther=!1,void 0!==this.obDataForm.form_status&&"open_from_form_other"===this.obDataForm.form_status&&(this.openFromFormOther=!0),Object(n.d)(this.props.form_code);var l=n.g.cloneJson(e.infoA);l.form_code=this.props.form_code,l.key_form=this.key_form,void 0===this.props.ofModal?l.ofModal=!1:l.ofModal=this.props.ofModal;var r="none",c="";void 0!==e.form_error&&(r="block",c=JSON.stringify(e.form_error)),this.formValidate=!1;var h=n.g.cloneJson(e.conf),_=n.g.role_getAllRoleRight(this.props.infoA.form_code);let g={mode:"",col_text:"",col_input:""};void 0!==this.props.infoA.mode_form&&(g=n.g.cloneJson(this.props.infoA.mode_form)),this.list_component_max=0;var p={},f={},v={};if(void 0!==_){for(var b in _)void 0!==_[b].view?!0!==_[b].view.install&&(p[b]=!1):void 0!==_[b].layout?!0!==_[b].layout.install&&(f[b]=!1):void 0!==_[b].component&&!0!==_[b].component.install&&(v[b]=!1);for(var y=0;y<h.length;y++)if(void 0===h[y].codeHidden||void 0===f[h[y].codeHidden]){if(void 0!==h[y].list_view)for(var D=h[y].list_view,C=0;C<D.length;C++)if(void 0===D[C].codeHidden||void 0===p[D[C].codeHidden]){if(void 0!==D[C].list_input)for(var M=D[C].list_input,x=0;x<M.length;x++)if(void 0!==M[x].default.codeHidden){if(void 0!==v[M[x].default.codeHidden]){M.splice(x,1),x--;continue}void 0!==M[x].default&&(M[x].default.mode_form=g),this.list_component_max++}}else D.splice(C,1),C--}else h.splice(y,1),y--;var N=this.analyticButton(h);this.list_component_max=this.list_component_max-N.length,this.reactTxt=[];var S=Object(n.v)(this.props.form_code);void 0!==S&&(this.reactTxt=(e=>{for(var t=(new DOMParser).parseFromString(e,"text/html"),a=[],i=0;i<t.body.childNodes.length;i++)a[a.length]=k(t.body.childNodes[i]);return a})(S),this.reactTxt=w(this.reactTxt,e.conf,N)),this.state={is_loading_form:!0,data:h,hasError:r,errorInfo:c,ruleStrong:a,btn_of_grid:N,infoA:l,infoA_parent:n.g.cloneJson(e.infoA_parent),visibility:"",status_loading:"block",status_form:"none",list_isLoading:{},follow:{hasFollow:!1,removeFollow:!1},timeline_hidden:!1,list_error:[],isDebug:!1,isOpenModalDebug:!1},this.queue_rules=[],this.list_error_start=[],this.list_component=[],this.list_layout=[],this.list_isLoading=0,this.list_statusIsLoadingFromComponent=0,this.loading_final=!1,this.form_didMount=!1,this.form_blockCheckMaxComponent=!0,this.debug_form={component:{},rule:[]},this.ref_debug=o.a.createRef(),this.list_rule_waiting=[],this.count_loading=0}}buildValidateForm(){let e=this.getValidateForm();this.showErrorFromServer(e)}analyticButton(e){for(var t=[],a=0;a<e.length;a++){var i=e[a].list_view;if(void 0!==i)for(var o=0;o<i.length;o++)for(var s=i[o].list_input,l=0;l<s.length;l++)s[l].inputtype.includes("Button")&&void 0!==s[l].config.onTable&&""!==s[l].config.onTable.trim()&&(t[t.length]=s[l])}return t}putDataSetAdvanced(e,t){void 0!==e&&void 0!==e.code&&(this.obDataForm[e.code]=t)}checkCompareIsLoading(){for(var e in this.list_statusIsLoadingFromComponent)if(void 0===this.list_isLoading[e])return!1;return!0}componentDidMount(){n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key),this.form_didMount=!0,this.formStart()}async formStart(){if(this.list_component_max===this.list_component.length&&this.form_didMount&&this.loading_final&&!this.form_blockCheckMaxComponent&&this.list_statusIsLoadingFromComponent===this.list_isLoading){let e=0;void 0!==this.props.data_select&&"{}"!==JSON.stringify(this.props.data_select)&&(this.putDataAll_andSet(this.props.data_select),e=1e3),setTimeout(async()=>{this.is_did_set_data=!0,await this.rule_runIsStart(),await this.runRuleFunctionQueue(),this.setState({is_loading_form:!1},()=>{this.formDidStart()}),this.toggleLoading(!0)},e)}}async formDidStart(){await this.ruleDidStart(),void 0!==this.props.set_call_form_back&&void 0!==this.state.infoA_parent&&setTimeout(()=>{var e=n.g.getFormAppAuto(this.state.infoA_parent.key_form);void 0!==e&&e.callDirFromSupport("setCallFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{})},n.g.getTimeAddComponent())}showErrorFromServer_getIcon(e){switch(e){case"info":return"fa-info-circle";case"warning":return"fa-bell";case"success":return"fa-check-square-o";case"danger":return"fa-exclamation-triangle";default:return"fa-question"}}render(){const e=Object(m.b)("uForm");let t="hidden",a=n.g.getFormAppAuto(this.props.infoA_parent.key_form);return void 0!==a&&a.callDirFromSupport("setCallBuildFormBack",{key:this.props.set_call_form_back,key_form:this.key_form},{}),!1===this.state.is_loading_form&&(t=""),o.a.createElement(o.a.Fragment,null,this.renderDebug(),o.a.createElement(e,{dataFull:{config:{default:{title:this.getTitleForm()}},cmd:{visibility:this.state.visibility,isLoading:"hidden"===t||!0===this.state.loading_action||!0===this.state.loading_action_flow}}},this.renderFormContent()))}}var Q=Y,G=a(7);const J=["D","M","Y","h","m","s"];function W(e){if(!e)return"";let t=["D","M","Y","h","m","s"];for(let a in t){let i=t[a];e=e.replace(new RegExp(i,"g"),"_")}return e}function q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=!1,o="";if(void 0!==e&&""!==e)if(e.includes("_"))i=!0,o="jMaskInput_WrongFormat";else switch(t){case"date":K(e,a)||(i=!0,o="jMaskInput_WrongFormat")}return{isError:i,message:o}}function K(e,t){let a={};if(void 0===t||null===t||void 0===e||null===e)return{};for(let i in t){let o=t[i];J.includes(o)&&"_"!==e[i]&&(a[o]=a[o]||"",a[o]+=e[i])}if(Number.isNaN(a.D)||(a.D=parseInt(a.D)),Number.isNaN(a.M)||(a.M=parseInt(a.M)),Number.isNaN(a.Y)||(a.Y=parseInt(a.Y)),a.D||a.M||a.Y){const{D:e,M:t,Y:i}=a;if(t<=0||t>12||e<=0||i<=0)return!1;let o=[0,31,28,31,30,31,30,31,31,30,31,30,31];return(i%400===0||i%100!==0&&i%4===0)&&(o[2]=29),e<=o[t]}return!1}var Z=a(12);const X={a:/[a-zA-Z]/,9:/\d/,"*":/./,_:/[a-zA-Z\d]/,".":/./,0:/\d/,z:/[a-zA-Z]/},$={0:{status:!0,reg_remove:/[^\d/]/g},z:{status:!0,reg_remove:/[^a-zA-Z]/g},".":{status:!0,reg_remove:""}},ee={"-":".{100}"},te=e=>X[e],ae=e=>{let t=e[0];return $[t]},ie=(e,t)=>{let a=[];const i=/(\\.|.)/g;let o;for(;null!==(o=i.exec(e));){o.index===i.lastIndex&&i.lastIndex++;const e=o[0],s=1===e.length?"regex":"const";let l={type:s,key:e};"regex"===s?te(e)?(l.reg=te(e),l.value="_"):"date"===t&&/[^/:]/.test(e)?(l.reg=te("9"),l.value=e):(l.value=e,l.type="const"):l.value=e[1],a.push(l)}return a},oe=(e,t)=>{let a="";for(const i of e)a+="date"===t?i.key:i.value;return a},se=(e,t)=>{let a="";for(const i of e)a+=i.key;return a},le=(e,t,a)=>{if(!e||!t||!a)return"";let i="";if(!e)return"";switch(a){case"default":for(const o in t){let a=e[o];if("regex"===t[o].type){if(!1===t[o].reg.test(a))return"";i+=a}}break;case"date":let a=oe(t);i=Object(G.a)(e,a),Object(G.d)(i,a)!==e&&(i="");break;default:i=e}return i||""},ne=(e,t,a)=>{if(!e||!t||!a)return"";let i="";switch(a){case"default":let a=0;for(const s in t)if("regex"===t[s].type){if(!e[a]||!t[s].reg.test(e[a]))return"";i+=e[a],a++}else i+=t[s].value;break;case"date":let o=oe(t);i=Object(G.d)(e,o);break;default:i=e}return i||""},re=(e,t,a,i)=>{let o=le(e,t,a);return(null===i||void 0===i?void 0:i.length)?ne(o,i,a):o},ce=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=e;(null===i||void 0===i?void 0:i.length)&&(o=le(e,i,a));let s=ne(o,t,a);return s},de=()=>["SUN","MON","TUE","WED","THU","FRI","SAT"].map((e,t)=>({title:e,type:"gray"})),he=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getMonth()+1;const t=["January","February","March","April","May","June","July","August","September","October","November","December"];return t.map((t,a)=>({title:t,selected:e-1===a}))},_e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1900,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2100,a=[];if(e<=t)for(let i=e;i<=t;i++)a.push(i);return a},ue=e=>{let t=new Date(e).getMonth()+1,a=[0,31,28,31,30,31,30,31,31,30,31,30,31];(e=>e%400===0||e%100!==0&&e%4===0)(new Date(e).getFullYear())&&a[2]++;let i=[];for(let o=1;o<=a[t];o++)i.push(o);return i},ge=e=>{e||(e=Date.parse(new Date));let t=new Date(e),a=new Date(Object(Z.d)(e,{M:-1})),i=new Date(Object(Z.d)(e,{M:1})),o=Date.parse(a),s=Date.parse(i),l=ue(o),n=ue(e),r=ue(s),c=new Date(t.getFullYear(),t.getMonth(),1),d=new Date(t.getFullYear(),t.getMonth(),n.length),h=l.slice(l.length-c.getDay(),l.length),_=r.slice(0,6-d.getDay()),u=h.map(e=>{let i=String(e),s="gray",l=new Date(o).setDate(e);return e===t.getDate()&&a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear()&&(s="primary"),{title:i,type:s,value:l}}),g=n.map(a=>{let i=String(a),o="",s=new Date(e).setDate(a);return a===t.getDate()&&(o="primary"),{title:i,type:o,value:s}}),m=_.map(e=>{let a=String(e),o="gray",l=new Date(s).setDate(e);return e===t.getDate()&&i.getMonth()===t.getMonth()&&i.getFullYear()===t.getFullYear()&&(o="primary"),{title:a,type:o,value:l}}),p=u.concat(g);return p=p.concat(m),p};class me extends i.Component{constructor(e){super(e),this.BuildPropsDefault=e=>{const{name:t,code:a,mask_format:i}=e,o=e.mask_mode||"default",s=e.data_default||"",l=e.request||!1;return{default:{name:t,code:a,class:e.class||""},config:{data_default:s,mask_format:i,mask_data_format:"",value_type:"all",mask_mode:o},validate:{request:l},lang:{}}},this.getComponentContructor=(e,t)=>{let a=this.buildPropsSmooth(t);return{props_smooth:a,state_smooth:this.buildStateSmooth(a)}},this.buildPropsSmooth=e=>{let t=n.g.cloneJson(e);t.config=e.config;let a=(e=>{let t=e,a=n.g.getlistCodeContext(e);for(const i of a){let e=n.g.context_get(i.code)||"";t=t.replace(i.key,e),"number"===typeof e&&(t=Number(t))}return t})(t.config.data_default);var i;return a=(e=>{let t=e;let a=/libDate_cal\((.*),(.*)\)/gm.exec(t);if(null!==a)try{t=Object(Z.d)(Number(a[1]),JSON.parse(a[2]))}catch(i){}return t})(a),void 0!==a&&null!==a||(a=""),t.config.data_default=a,t.config.mask_format=(i=t.config.mask_format,ee[i]||i),t.config.mask_format=(e=>{for(const t in X){let a,i=new RegExp(`\\${t}{(\\d+)}`,"g");for(;null!==(a=i.exec(e));){a.index===i.lastIndex&&i.lastIndex++;let o="";for(let e=0;e<Number(a[1]);e++)o+=t;e=e.replace(a[0],o)}}return e})(t.config.mask_format),t},this.buildStateSmooth=e=>{const t=e.config;let a=ie(t.mask_format,t.mask_mode),i=ie(t.mask_data_format,t.mask_mode),o=oe(a,t.mask_mode),s=t.mask_mode,l={status:!1,reg_remove:""};if((e=>{var t;if(!e)return!1;let a=e[0],i=new RegExp(a,"g");return!0===(null===(t=ae(a))||void 0===t?void 0:t.status)&&e.match(i).length===e.length})(t.mask_format)){let e=ae(t.mask_format);void 0!==e&&(l.status=e.status,l.reg_remove=e.reg_remove)}const r=o,c=Date.parse(new Date);let d={mounth_data:he(),year_data:_e(),day_data:de(),day_of_mounth_data:ge(c,c),date_view:c};return{value_type:t.value_type||"all",error_input:!1,lang_select:n.g.getLangKey(),component_title:e.default.name||"",CMD:{},value:"",mask_value:"",date_selected_cache:0,mask_mode:s,mask_format:r,mask_regs:a,mask_regs_to:i,mask_placeholder:o,free_style:l,date_picker:d}},this.getInfoErrror=()=>{var e;const{help_mess:t}=this.state;return t?{info:this.getErrorLang(this.state.help_mess),key:(null===(e=this.state.lang)||void 0===e?void 0:e[this.props_smooth.default.name])||this.props_smooth.default.name,infoComponent:this.props_smooth.default}:""},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props_smooth.infoView,default:this.props_smooth.default,layout:this.props_smooth.infoLayout,block:e.block}},this.getDataOOP=(e,t)=>this.data_select,this.getAdvanced=(e,t)=>this.maskInputGet(),this.setAdvanced=(e,t)=>{if(e.codeHidden){if(e.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(void 0!==this.props_smooth.config.data_view)var a="";void 0!==this.props_smooth.config.data_value&&(a=n.g.getOOP(this.data_select,this.props_smooth.config.data_value.trim())+""),this.maskInputSet(a,"enter_tab")}}else e.list_component&&(null!==t&&void 0!==t||(t=""),this.maskInputSet(t,"on_change"))},this.get=()=>this.maskInputGet(),this.set=e=>{this.maskInputSet(e,"on_change")},this.reload=(e,t)=>{const a=this.props_smooth.config;this.data_select={},this.maskInputSet(a.data_default)},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.maskInputSet=(e,t,a,i)=>{const{mask_regs:o,mask_regs_to:s,mask_mode:l}=this.state;let n={end_pos:0,start_pos:0,help_mess:"",mask_value:"",value:e},r=ce(e,o,l,s);"date"===l&&(n.date_picker=(e=>{e||(e=Date.parse(new Date));const t=new Date(e);return{mounth_data:he(t.getMonth()+1),year_data:_e(),day_data:de(),day_of_mounth_data:ge(e),date_view:e}})(e),Number(e)&&(r=ce(Number(e),o,l,[]))),n.mask_value=r,n=Object.assign(n,i),this.setStateLogic(n,()=>{a&&a()})},this.maskInputGet=()=>{const{mask_regs:e,mask_regs_to:t,mask_value:a,mask_mode:i}=this.state;let o="";return this.state.free_style.status?a:(o=re(a,e,i,"date"===i?[]:t),o)},this.maskInputClear=()=>{this.data_select={},this.setStateLogic({end_pos:0,start_pos:0,value:"",mask_value:"",help_mess:""},()=>{})},this.maskInputValidate=()=>{const{mask_value:e}=this.state;let t="",a=this.maskInputGet();return t=e&&!this.maskInputGet()?"jMaskInput_WrongFormat":function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[{title:"@VALUE",value:t},{title:"@NOW",value:Date.parse(new Date)},{title:"@YEAR",value:31536e6.toString()},{title:"@MOUNTH",value:2592e6.toString()},{title:"@DAY",value:864e5.toString()},{title:"@HOURS",value:36e5.toString()},{title:"@MINUTE",value:6e4.toString()},{title:"@SECONDS",value:1e3.toString()}];for(const i of e){let{content:e,mess:t}=i;for(const i of a)e=e.replace(new RegExp(i.title,"g"),i.value);if(!1===n.g.checkDynamicConditionNoData(e))return t}return""}(this.props_smooth.validate.conditions,a),t},this.abs_calendar_changeMonth=e=>{const t=this.maskInputGet()||Date.parse(new Date),a=Object(Z.d)(t,{M:e});this.maskInputSet(a)},this.abs_calendar_submit=e=>{let t=this.state.date_picker.day_of_mounth_data[e].value;this.maskInputSet(t)},this.abs_calendar_chooseYear=e=>{const t=this.maskInputGet()||Date.parse(new Date),a=new Date(t).setFullYear(e);this.maskInputSet(a)},this.abs_calendar_changeYear=e=>{},this.abs_calendar_chooseMonth=e=>{const t=e,a=this.maskInputGet()||Date.parse(new Date),i=new Date(a).setMonth(t);this.maskInputSet(i)},this.abs_calendar_openCalendar=()=>{let e=this.maskInputGet();e&&this.maskInputSet(e,"","",{date_selected_cache:e})},this.abs_calendar_KeyUp=e=>{const t=this.maskInputGet()||Date.parse(new Date);let a,i=this.state.date_selected_cache;switch(e.key){case"ArrowLeft":a=Object(Z.d)(t,{d:-1}),this.maskInputSet(a);break;case"ArrowRight":a=Object(Z.d)(t,{d:1}),this.maskInputSet(a);break;case"ArrowUp":a=Object(Z.d)(t,{d:-7}),this.maskInputSet(a);break;case"ArrowDown":a=Object(Z.d)(t,{d:7}),this.maskInputSet(a);break;case"Enter":a=t,this.maskInputSet(a),this.ref_maskinput.current.abs_CloseCalendar();break;case"Escape":Number(i)!==Number(this.maskInputGet())?this.maskInputSet(i):this.ref_maskinput.current.abs_CloseCalendar()}},this.abs_calendar_today=()=>{const e=Date.parse(new Date);this.maskInputSet(e)},this.onEventKey=e=>{switch(e.key){case"Delete":this.maskInputClear()}this.state.mask_mode},this.onClick=e=>{},this.onBlur=()=>{this.maskInputValidate()&&this.maskInputSet("")},this.setLastPost=e=>{let t=e.target;this.state.start_pos=t.selectionStart,this.state.end_pos=t.selectionEnd},this.setPos=(e,t)=>{this.countInterVal=0,this.interValSetTimeOut&&(clearInterval(this.interValSetTimeOut),this.countInterVal=0),this.interValSetTimeOut=setTimeout(()=>{e.selectionStart=t,e.selectionEnd=t,this.countInterVal+=2},2),this.countInterVal>300&&this.interValSetTimeOut&&clearInterval(this.interValSetTimeOut)},this.onChangeMaskInput=e=>{let{start_pos:t,mask_value:a,mask_regs:i,mask_placeholder:o}=this.state;const s=e.target;let l=s.selectionStart,n=s.value||"";const r=this.state.free_style;if(r.status)return n=n.replace(r.reg_remove,""),n=n.slice(0,i.length),void this.setStateLogic({mask_value:n});let c=n.slice(t,l)||"",d=0,h="",_=n.slice(0,l);for(let u=l;u<o.length;u++)u<l+(o.length-n.length)?_+=o[u]:_+=a[u]||o[u];a=_;for(const u in i){const e=i[u];"regex"===e.type||"const"===e.type&&e.value===c[d]?t<=u&&d<c.length?("const"===e.type&&e.value===c[d]||e.reg.test(c[d])?h+=c[d]||e.value:(h+=e.value,l--),d++):h+=a[u]||o[u]:(h+=e.value,t<=u&&d<c.length&&l++)}h===o&&(h=""),this.setStateLogic({mask_value:h},()=>{this.setPos(s,l)})},this.getErrorLang=e=>{switch(e){case"validateNumMin":return n.g.getLang(e).replace("{count}",this.state.validate.min);case"validateNumMax":return n.g.getLang(e).replace("{count}",this.state.validate.max);case"validateRequest":default:return n.g.getLang(e)}},this.getDataFullLogic=()=>Object(u.a)(Object(u.a)({},this.getConfigTemplate()),{},{abs_Change:this.onChangeMaskInput,abs_Blur:this.onBlur,abs_Click:this.onClick,abs_KeyDown:this.setLastPost,abs_KeyUp:this.onEventKey,abs_MouseUp:this.setLastPost}),this.setCMD=(e,t)=>{const{CMD:a}=this.state;let i=Object.assign(n.g.cloneJson(a),t);if(a.disabled!==i.disabled||a.visible!==i.visible||a.block!==i.block){let e=this.state;e.CMD=i,this.setStateLogic(e)}},this.setStateLogic=(e,t)=>{this.prevStateLogic=n.g.cloneJson(this.state),this.state=Object.assign(this.state,e),t&&t(),this.props.abs_update&&this.props.abs_update()},this.prop_default=this.BuildPropsDefault(e),this.propertyConstructor={},this.data_debug={},this.app_debug=[],this.state={is_lookup:!1,is_error:!1,is_clicked:!1,help_mess:"",lang_select:"",title:"",CMD:{},end_pos:-1,start_pos:0,_type:"",value:"",mask_value:"",mask_format:"",mask_placeholder:"",mask_mode:"default",mask_regs:[],mask_regs_to:[],free_style:{status:!1,reg_remove:""},date_picker:{mounth_data:[],year_data:[],day_data:[],day_of_mounth_data:[],date_view:Date.parse(new Date)},date_selected_cache:0},this.ref_maskinput=o.a.createRef();const t=this.getComponentContructor({},this.prop_default);this.state=Object.assign(this.state,t.state_smooth),this.props_smooth=t.props_smooth}getConfigTemplate(){const{date_picker:e}=this.state;return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{subTitle_isShow:"date"===this.state.mask_mode,subTitle:`(${this.state.mask_placeholder})`,placeholder:this.state.CMD.disabled+""==="true"?" ":se(this.state.mask_regs,this.props_smooth.config.mask_mode),title:this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:this.props_smooth.validate.request,icon:""},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:!0,error:{message:this.state.help_mess,type:""}},mode:{textAlign:"left",letterSpacing:"M"}},valueTitleHover:"true"!==String(this.state.CMD.disabled)?"":this.state.mask_value,value:this.state.mask_value,cmd:{isLock:!1},calendar_data:{value_current:"",today:{title:"Today"},config:{days_title:e.day_data},list_months:e.mounth_data,list_years:{value:new Date(e.date_view).getFullYear()||"",data:e.year_data},list_days:e.day_of_mounth_data},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_today:this.abs_calendar_today,abs_calendar_KeyUp:this.abs_calendar_KeyUp}}}var pe=me;class fe extends i.Component{constructor(e){super(e),this.clickRunNormallyHandler=e=>{this.LOGIC_DATE.setCMD("",{disabled:!0}),this.setState({radio_step_summary:"nor"})},this.clickNumberRunningHandler=e=>{this.LOGIC_DATE.setCMD("",{disabled:!1}),this.setState({radio_step_summary:"num"})},this.onBlurMaskInput=()=>{let{maskNumberRunning:e}=this.state;e.help_mess=q(e.mask_value,e.mode,e.defaultMask).message,this.setState({maskNumberRunning:e})},this.onClickMaskInput=()=>{let{maskNumberRunning:e}=this.state;e.help_mess="",e.error_input=!1,this.setState({maskNumberRunning:e})},this.setLastPosition=e=>{let{maskNumberRunning:t}=this.state;t.start_pos=e.target.selectionStart,t.end_pos=e.target.selectionEnd,this.setState({maskNumberRunning:t})},this.onChangeBatchDate=e=>{this.propsTemplate.stateData.stepSummary.date_time.dataFull=this.LOGIC_DATE.getDataFullLogic();let{maskNumberRunning:t}=this.state,a={mask_value:this.LOGIC_DATE.getDataFullLogic().value,newPosition:0};t.mask_value=a.mask_value;let{date_select:i,date_calculator:o}=this.state;q(a.mask_value,t.mode,t.defaultMask).isError||(i=Object(G.a)(a.mask_value,this.dateFormat),o=Math.round((i-this.state.working_date_long)/1e3/60/60/24),o<0&&(o=0)),this.setState({date_select:i,date_calculator:o,maskNumberRunning:t})},this.checkStepHandler=e=>{e.checked=!e.checked;let t=this.state.O9_job_process_refesh_table_summary,a={S:""};if(t.length>0){t.filter(t=>t.ordinal<e.ordinal).forEach(e=>{a.S+=e.stepname+","})}e.checked&&(a.S+=e.stepname+","),this.callAPI("POST_api_job_check",a).then(e=>{this.refeshForm()})},this.changeKeyLanguage=e=>{let t={title_:n.g.getLang("jobProcess_title"),des_:n.g.getLang("jobProcess_des"),btn_start:n.g.getLang("jobProcess_btnStart"),btn_stop:n.g.getLang("jobProcess_btnStop"),btn_refresh:n.g.getLang("jobProcess_btnRefresh"),tab_summary:n.g.getLang("jobProcess_tabSummary"),tab_step_summary:n.g.getLang("jobProcess_tabStepSummary"),tab_step_details:n.g.getLang("jobProcess_tabStepDetails"),tab_error_details:n.g.getLang("jobProcess_tabErrorDetails"),batch_date:n.g.getLang("jobProcess_batchDate"),progress:n.g.getLang("jobProcess_progress"),run_normally:n.g.getLang("jobProcess_runNormally"),number_running:n.g.getLang("jobProcess_numberRunning"),days:n.g.getLang("jobProcess_days"),stop_at:n.g.getLang("jobProcess_stopAt"),select:n.g.getLang("jobProcess_select"),step_name:n.g.getLang("jobProcess_stepName"),comments:n.g.getLang("jobProcess_comments"),status:n.g.getLang("jobProcess_status"),status_description:n.g.getLang("jobProcess_statusDescription"),percent_started:n.g.getLang("jobProcess_percentStarted"),start_at:n.g.getLang("jobProcess_startAt"),end_at:n.g.getLang("jobProcess_endAt"),threads_created:n.g.getLang("jobProcess_threadsCreated"),threads_running:n.g.getLang("jobProcess_threadsRunning"),threads_compeleted:n.g.getLang("jobProcess_threadsCompeleted"),threads_canceled:n.g.getLang("jobProcess_threadsCanceled"),threads_failed:n.g.getLang("jobProcess_threadsFailed"),threads_id:n.g.getLang("jobProcess_threadsID"),total_threads:n.g.getLang("jobProcess_totalThreads"),total_started:n.g.getLang("jobProcess_totalStarted"),total_duration:n.g.getLang("jobProcess_totalDuration"),total_remaining:n.g.getLang("jobProcess_totalRemaining"),job_name:n.g.getLang("jobProcess_jobName"),read_count:n.g.getLang("jobProcess_readCount"),write_count:n.g.getLang("jobProcess_writeCount"),commit_count:n.g.getLang("jobProcess_commitCount"),read_skip_count:n.g.getLang("jobProcess_readSkipCount"),write_skip_count:n.g.getLang("jobProcess_writeSkipCount"),process_skip_count:n.g.getLang("jobProcess_processSkipCount"),rollback_count:n.g.getLang("jobProcess_rollbackCount"),exit_code:n.g.getLang("jobProcess_exitCode"),exit_message:n.g.getLang("jobProcess_exitMessage")};if(void 0!==e)return t;let a=this.state.infoA;a.title=n.g.getLang("jobProcess_title"),a.des=n.g.getLang("jobProcess_des"),a.lang_form.vi=n.g.getLang("jobProcess_title"),a.lang_form.en=n.g.getLang("jobProcess_title"),this.setState({languages:t,infoA:a})},this.callAPI=(e,t)=>{let a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,t),Object(L.b)(a,{}).then(e=>n.g.foGetData("data",e))},this.componentDidMount=async()=>{n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key),this.LOGIC_DATE.set(this.user_info.workingdate),this.LOGIC_DATE.setCMD("",{disabled:!0}),await this.callAPI("O9_job_process_create_table_summary").then(e=>{this.refeshForm()})},this.reloadTableSummary=async()=>{let e=[];await this.callAPI("O9_job_process_refesh_table_summary").then(t=>{t&&(e=t.O9_job_process_refesh_table_summary,Array.isArray(e)||(e=[]))}),this.setState({O9_job_process_refesh_table_summary:e})},this.refeshForm=async()=>{let e=[],t="";await this.callAPI("O9_job_process_refesh_table_summary").then(t=>{t&&(e=t.O9_job_process_refesh_table_summary,Array.isArray(e)||(e=[]))}),await this.callAPI("O9_job_process_stop_error_mess").then(e=>{e&&(t=e.O9_job_process_stop_error_mess)}),this.setState({O9_job_process_refesh_table_summary:e,O9_job_process_stop_error_mess:t})},this.onClickStop=async()=>{await this.callAPI("O9_job_process_stop").then(e=>{this.setState({is_started:!1})})},this.onClickRefresh=()=>{this.refeshForm(),this.setState({is_started:!1})},this.onClickStart=()=>{this.setState({is_started:!0},()=>{let e=setInterval(()=>{let e=[];this.callAPI("O9_job_process_refesh_table_summary").then(t=>{t&&(e=t.O9_job_process_refesh_table_summary,Array.isArray(e)||(e=[])),this.setState({O9_job_process_refesh_table_summary:e})})},1e3),t=1;"num"===this.state.radio_step_summary&&(t=this.state.date_calculator),this.callAPI("O9_job_process_start",{days:t}).then(t=>{clearInterval(e),this.setState({is_started:!1}),this.refeshForm()})})},this.getProgress=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;for(let a=0;a<e.length;a++){const i=e[a];!0===i.checked&&100===i.percentstarted&&"S"===i.status&&t++}return Math.round(t/e.length*100)},this.onClickRowTableStepSummary=e=>{this.callAPI("O9_job_process_refesh_table_errror",e).then(e=>{let t=[];e&&(t=e.O9_job_process_refesh_table_errror,t&&Array.isArray(t)&&(t=t.filter(e=>void 0!==e[3])),this.setState({O9_job_process_refesh_table_errror:t}))}),this.callAPI("O9_job_process_refesh_table_details",e).then(e=>{let t=[];e&&Array.isArray(e.O9_job_process_refesh_table_details)&&(t=e.O9_job_process_refesh_table_details),this.setState({O9_job_process_refesh_table_details:t})})},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})};let t=this.changeKeyLanguage("start");this.key_form="016002",this.jobProcessForm=Object(m.c)("O9_jobProcess"),this.user_info=n.g.context_get("user_acc"),this.dateFormat=n.g.getParameterSystem("DATE_FORMAT");let a=Object(G.d)(this.user_info.workingdate,this.dateFormat);this.LOGIC_DATE=new pe({abs_update:this.onChangeBatchDate,name:"From",code:"from",mask_format:"DD/MM/YYYY",mask_mode:"date",class:"col-md-3 col-sm-8"}),this.mappingKeyToIndex={buttons:{start:0,stop:1,refresh:2}},this.propsTemplate={stateData:this.getStateData(this.user_info,t)},this.state={maskNumberRunning:{defaultMask:this.dateFormat,mask:W(this.dateFormat),error_input:!1,help_mess:"",start_pos:0,end_pos:0,mask_value:a,value_type:"number",mode:"date"},visibility:"",error_details_data:[],step_details_data:[],step_summary_data:[],languages:t,is_started:!1,tab_active:1,infoA:{lang_form:{vi:n.g.getLang("jobProcess_title"),en:n.g.getLang("jobProcess_title")},title:"Job Process",des:"",openOne:"true",form_code:this.key_form,ofModal:!1},O9_job_process_refesh_table_summary:[],O9_job_process_refesh_table_errror:[],O9_job_process_refesh_table_details:[],radio_step_summary:"nor",date_select:this.user_info.workingdate,date_calculator:0,working_date:a,working_date_long:this.user_info.workingdate}}getStateData(e,t){return{form:{dataFull:{config:{default:{title:"Job Process"}},cmd:{visibility:""}}},listButton:[{dataFull:{config:{default:{title:t.btn_start,icon:"play_circle_outline"},cmd:{disable:!1}}},abs_Click:this.onClickStart},{dataFull:{config:{default:{title:t.btn_stop,icon:"pause_circle_outline"},cmd:{disable:!0}}},abs_Click:this.onClickStop},{dataFull:{config:{default:{title:t.btn_refresh,icon:"autorenew"},cmd:{disable:!1}}},abs_Click:this.onClickRefresh}],tab:[{id:"summary",title:"Summary"},{id:"stepSummary",title:"Step Summary"},{id:"stepDetail",title:"Step Details"},{id:"errorDetail",title:"Error Details"}],summary:{date_batch:{title:"Batch Date",value:Object(G.d)(e.workingdate,this.dateFormat)},percent:{title:"Progress",value:0}},stepSummary:{run_normal:{dataFull:{title:"Run Normally",value:!0,dataItem:{},abs_Click:this.clickRunNormallyHandler}},number_run:{dataFull:{title:"Number Running",value:!1,dataItem:{},abs_Click:this.clickNumberRunningHandler}},date_day:0,date_time:{dataFull:this.LOGIC_DATE.getDataFullLogic()},table_header:this.getTableHeaderConfigStepSummary(),table_data:[],table_config:this.getTableConfigStepSummary()},stepDetail:{table_header:this.getTableHeaderConfigStepDetail(t),table_data:[],table_config:this.getTableConfigStepDetail()},errorDetail:{table_header:this.getTableHeaderConfigErrorDetail(),table_data:[],table_config:this.getTableConfigErrorDetail()}}}getStatusIconStep(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"S"){case"S":return"check_circle";case"F":return"remove_circle";case"N":return"add_circle";case"R":return"trending_up";default:return""}}getStatusColorStep(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"S"){case"S":return"success";case"F":return"danger";case"N":case"R":default:return"info"}}getTableHeaderConfigStepSummary(){return{dataFull:{Header:{data:[{title:"Select",config:{width:"",isFrozen:!1}},{title:"Step Name",config:{width:"",isFrozen:!1}},{title:"Comment",config:{width:"",isFrozen:!1}},{title:"Status",config:{width:"",isFrozen:!1}},{title:"Percent Started",config:{width:"",isFrozen:!1}},{title:"Status Decs",config:{width:"",isFrozen:!1}},{title:"Start At",config:{width:"",isFrozen:!1}},{title:"End At",config:{width:"",isFrozen:!1}},{title:"Threads Created",config:{width:"",isFrozen:!1}},{title:"Threads Running",config:{width:"",isFrozen:!1}},{title:"Threads Completed",config:{width:"",isFrozen:!1}},{title:"Threads Canceled",config:{width:"",isFrozen:!1}},{title:"Threads Failed",config:{width:"",isFrozen:!1}},{title:"Total Threads",config:{width:"",isFrozen:!1}},{title:"Total Started",config:{width:"",isFrozen:!1}},{title:"Total Duration",config:{width:"",isFrozen:!1}},{title:"Total Remaining",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}}}getTableConfigStepSummary(){return[{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnIcon"},{type:"uTableColumnProgressBar"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]}getTableDataStepSummary(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>({data:[{value:e.checked,dataItem:e,abs_Click:this.checkStepHandler},{data:e.stepname},{data:e.comments},{data:[{val:this.getStatusIconStep(e.status),color:this.getStatusColorStep(e.status),title:"warning",class:"-round"}]},{percent:e.percentstarted},{data:e.statusdesc},{data:e.startat},{data:e.endat},{data:e.threadscreated},{data:e.threadsrunning},{data:e.threadscompleted},{data:e.threadscanceled},{data:e.threadsfailed},{data:e.totalthreads},{data:e.totalstarted},{data:e.totalduration},{data:e.totalstarted}],dataItem:e,abs_Click:this.onClickRowTableStepSummary}))}getTableHeaderConfigStepDetail(e){return{dataFull:{Header:{data:[{title:e.job_name,config:{width:"",isFrozen:!1}},{title:e.step_name,config:{width:"",isFrozen:!1}},{title:e.status,config:{width:"",isFrozen:!1}},{title:e.read_count,config:{width:"",isFrozen:!1}},{title:e.write_count,config:{width:"",isFrozen:!1}},{title:e.commit_count,config:{width:"",isFrozen:!1}},{title:e.read_skip_count,config:{width:"",isFrozen:!1}},{title:e.write_skip_count,config:{width:"",isFrozen:!1}},{title:e.process_skip_count,config:{width:"",isFrozen:!1}},{title:e.rollback_count,config:{width:"",isFrozen:!1}},{title:e.exit_code,config:{width:"",isFrozen:!1}},{title:e.exit_message,config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}}}getTableConfigStepDetail(){return[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}getTableDataStepDetail(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>[{data:e.jobname},{data:e.stepname},{data:e.status},{data:e.readcount},{data:e.writecount},{data:e.commitcount},{data:e.readskipcount},{data:e.writeskipcount},{data:e.processskipcount},{data:e.rollbackcount},{data:e.exitcode},{data:e.exitmessage}])}getTableHeaderConfigErrorDetail(){return{dataFull:{Header:{data:[{title:"Thread id",config:{width:"",isFrozen:!1}},{title:"Step name",config:{width:"",isFrozen:!1}},{title:"Status",config:{width:"",isFrozen:!1}},{title:"Status description",config:{width:"",isFrozen:!1}}]},config:{mode:{noHeader:!1}}}}}getTableConfigErrorDetail(){return[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}getTableDataErrorDetail(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null===e?[]:e.map(e=>[{data:e},{data:e},{data:e},{data:e}])}UNSAFE_componentWillUpdate(e,t){var a,i,o;this.propsTemplate.stateData.stepSummary.table_header.dataFull.dataEmpty={isShow:!(null===(a=t.O9_job_process_refesh_table_summary)||void 0===a?void 0:a.length),title:n.g.getLang("header_searchNoResult")},this.propsTemplate.stateData.stepSummary.table_data=this.getTableDataStepSummary(t.O9_job_process_refesh_table_summary),this.propsTemplate.stateData.stepDetail.table_header.dataFull.dataEmpty={isShow:!(null===(i=t.O9_job_process_refesh_table_details)||void 0===i?void 0:i.length),title:n.g.getLang("header_searchNoResult")},this.propsTemplate.stateData.stepDetail.table_data=this.getTableDataStepDetail(t.O9_job_process_refesh_table_details),this.propsTemplate.stateData.errorDetail.table_header.dataFull.dataEmpty={isShow:!(null===(o=t.O9_job_process_refesh_table_errror)||void 0===o?void 0:o.length),title:n.g.getLang("header_searchNoResult")},this.propsTemplate.stateData.errorDetail.table_data=this.getTableDataErrorDetail(t.O9_job_process_refesh_table_errror),this.propsTemplate.stateData.summary.percent.value=this.getProgress(t.O9_job_process_refesh_table_summary),t.radio_step_summary!==this.state.radio_step_summary&&(this.propsTemplate.stateData.stepSummary.run_normal.dataFull.value="nor"===t.radio_step_summary,this.propsTemplate.stateData.stepSummary.number_run.dataFull.value=!this.propsTemplate.stateData.stepSummary.run_normal.dataFull.value,this.propsTemplate.stateData.stepSummary.date_time.dataFull.config.cmd.disable="nor"===t.radio_step_summary),t.is_started!==this.state.is_started&&(this.propsTemplate.stateData.listButton[this.mappingKeyToIndex.buttons.start].dataFull.config.cmd.disable=!!t.is_started,this.propsTemplate.stateData.listButton[this.mappingKeyToIndex.buttons.stop].dataFull.config.cmd.disable=!t.is_started),this.propsTemplate.stateData.stepSummary.date_time.dataFull.value=t.maskNumberRunning.mask_value,this.propsTemplate.stateData.stepSummary.date_time.dataFull.config.cmd.error.message=n.g.getLang(t.maskNumberRunning.help_mess),t.date_calculator!==this.state.date_calculator&&(this.propsTemplate.stateData.stepSummary.date_day=t.date_calculator)}render(){if("none"===this.state.visibility)return null;const e=this.jobProcessForm;return o.a.createElement(e,{stateData:this.propsTemplate.stateData})}}var ve=fe,be=a(10);let ye;class De extends i.Component{constructor(e){super(e),this.handleSelectTabID=e=>{this.setState({menu_select:e})},this.handelSearchInvokeLimit=(e,t)=>{var a;let i=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"",o=this.state.invoke_limit_search_value;o[t]=i,this.setState({invoke_limit_search_value:o})},this.handelSearchApproveLimit=(e,t)=>{var a;let i=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"",o=this.state.approve_limit_search_value;o[t]=i,this.setState({approve_limit_search_value:o})},this.handelChangeSearch=(e,t)=>{var a;let i=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"",o=this.state.Col3_Assignment_Search;switch(o[t]=i,t){case"TBL_USER_CODE":this.stateData.column3.table_left.dataFull.Header.data[2].value_search=i;break;case"TBL_USER_NAME":this.stateData.column3.table_left.dataFull.Header.data[3].value_search=i;break;case"TBR_USER_CODE":this.stateData.column3.table_right.dataFull.Header.data[2].value_search=i;break;case"TBR_USER_NAME":this.stateData.column3.table_right.dataFull.Header.data[3].value_search=i}this.setState({Col3_Assignment_Search:o})},this.handelClearSearch=()=>{},this.getTableHeader=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return t.push({title:"Group",code:"module"}),t.push({title:"Caption",code:"tranname"}),e.forEach(e=>{t.push({title:e,code:e})}),t},this.abs_role_name_copying_select=(e,t,a)=>{this.setState({role_name_copying_selected:e.roleid,column2_role_select:e})},this.abs_Ckeck_invoke_approve_verification=(e,t)=>{this.callAPI("O9_Roles_Invoke_approve_Table_Change_save_approve",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then(e=>{let t=e.O9_Roles_Invoke_approve_Table_Change_save_approve;this.reloadTableWithMenuInvokeApprove(),1===t[0].type?this.showToast("Save",!0):this.showToast("Save",!1)})},this.abs_Ckeck_invoke_approve_operation=(e,t)=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.save){let a=this.state.menu_invoke_aprrove.filter(t=>t.parentid===e.parentid);this.callAPI("O9_Roles_Invoke_approve_Table_Change_save",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then(i=>{let o=i.O9_Roles_Invoke_approve_Table_Change_save;if(this.reloadTableWithMenuInvokeApprove(!0),1===o[0].type){var s=[{txcode:"bo-update-roleBO-JWEBUI",input:{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0,menu_child:a}}];return Object(L.b)(s,{}).then(e=>{this.showToast("Save",!0),this.setState({isLoading:!1})})}this.showToast(o[0].message,!1)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.UNSAFE_componentWillUpdate=(e,t)=>{var a,i,o;let s=t.role_action||{};this.stateData.tab.data=this.stateData.tab.data.map(e=>(e.isShow=e.id===t.menu_select,e)),this.stateData.column3.table_in_role_data=t.table_user_profile_user_in_role.map(e=>({config:{value:!1},data:[{data:e.rolename},{data:e.usrcd},{data:e.usrname}]})),this.stateData.column1.tree_data.tree_data=null===(a=t.menu_invoke_aprrove)||void 0===a?void 0:a.map(e=>({title:e.caption,parent_id:e.parentid,is_open:!1,DOM_elm:null,id:e.cmdid,dataItem:e,abs_click:this.onClickTreeMenuInvokeApprove})),this.stateData.column1.table_up.dataFull.Header.data=t.O9_Roles_InvokeApprove_Table_header.map(e=>({title:e.caption,config:{width:"",isFrozen:!1}})),this.stateData.column1.table_down.dataFull.Header.data=n.g.cloneJson(this.stateData.column1.table_up.dataFull.Header.data),this.stateData.column1.table_down.dataFull.Header.data[1]&&(this.stateData.column1.table_down.dataFull.Header.data[1].title="Self Approve");let l=t.O9_Roles_InvokeApprove_Table_header;this.stateData.column1.table_up_config=l.map((e,t)=>0===t?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:"uTableColumnCheckbox",config:{cmd:{disable:!1===s.save}}}),this.stateData.column1.table_down_config=this.stateData.column1.table_up_config;let r=t.O9_Roles_InvokeApprove_Table_body;this.stateData.column1.table_up_data=[],this.stateData.column1.table_down_data=[];for(let n=0;n<r.length;n++){let e=l.length-1,t=[],a=[];for(let i=0;i<e;i++)0===i&&(t.push({data:r[n+i].rolename}),a.push({data:r[n+i].rolename})),t.push({value:1===r[n+i].invoke,dataItem:r[n+i],abs_Click:this.abs_Ckeck_invoke_approve_operation}),a.push({value:1===r[n+i].approve,dataItem:r[n+i],abs_Click:this.abs_Ckeck_invoke_approve_verification});this.stateData.column1.table_up_data.push(t),this.stateData.column1.table_down_data.push(a),n=n+e-1}if(this.stateData.column2.role_name_adding.dataFull.config.cmd.disable=!0!==t.addAndRemove_btnAddClick,this.stateData.column2.listButton[2].dataFull.config.cmd.disable=!0===t.addAndRemove_btnSaveClick,this.stateData.column2.role_name_copying.dataFull.search_value=t["column2.role_name_copying"],this.stateData.column2.listButton[0].dataFull.config.cmd.visible=!1!==s.save,this.stateData.column2.listButton[2].dataFull.config.cmd.visible=!1!==s.save,this.stateData.column2.listButton[1].dataFull.config.cmd.visible=!1!==s.delete,this.stateData.column3.next.dataFull.config.cmd.disable=!1===s.save,this.stateData.column3.next_all.dataFull.config.cmd.disable=!1===s.save,this.stateData.column3.preview.dataFull.config.cmd.disable=!1===s.save,this.stateData.column3.preview_all.dataFull.config.cmd.disable=!1===s.save,!t.role_name_copying_selected&&t.O9_Roles_Add_and_Remove_Role_Name.length>0)this.setState({role_name_copying_selected:t.O9_Roles_Add_and_Remove_Role_Name[0].roleid});else{var c;this.stateData.column2.role_name_copying.dataFull.input_value=null===(c=t.column2_role_select)||void 0===c?void 0:c.rolename;let e=t.O9_Roles_Add_and_Remove_Role_Name.filter(e=>(e.rolename||"").toLowerCase().includes(t["column2.role_name_copying"].toLowerCase()));this.stateData.column2.role_name_copying.dataFull.data=e.map((e,a)=>{let i=!1;return e.roleid===t.role_name_copying_selected&&(i=!0),{title:e.rolename,value:e,selected:i}})}this.stateData.column2.role_name_adding.dataFull.value=t.role_name_adding_input;let d=this.unCheck_user_assign_table_left,h=this.unCheck_user_assign_table_right;!0===this.unCheck_user_assign_table_left&&(this.unCheck_user_assign_table_left=!1),!0===this.unCheck_user_assign_table_right&&(this.unCheck_user_assign_table_right=!1),this.stateData.column3.table_left_data=t.O9_Roles_User_assignment_table_left.filter(e=>e.usrcd.includes(t.Col3_Assignment_Search.TBL_USER_CODE||"")&&e.usrname.includes(t.Col3_Assignment_Search.TBL_USER_NAME||"")).map((e,t)=>{var a,i,o;return{data:[{data:t+1},{value:!0!==d&&((null===(a=this.stateData.column3.table_left_data[t])||void 0===a||null===(i=a.data)||void 0===i||null===(o=i[1])||void 0===o?void 0:o.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_left,dataItem:{value:e,index:t}},{data:e.usrcd},{data:e.usrname}],config:{value:!1}}}),this.stateData.column3.table_right_data=t.O9_Roles_User_assignment_table_right.filter(e=>e.usrcd.includes(t.Col3_Assignment_Search.TBR_USER_CODE||"")&&e.usrname.includes(t.Col3_Assignment_Search.TBR_USER_NAME||"")).map((e,t)=>{var a,i,o;return{data:[{data:t+1},{value:!0!==h&&((null===(a=this.stateData.column3.table_right_data[t])||void 0===a||null===(i=a.data)||void 0===i||null===(o=i[1])||void 0===o?void 0:o.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_right,dataItem:{value:e,index:t}},{data:e.usrcd},{data:e.usrname}],config:{value:!1}}}),this.stateData.column3.role_choose_left.dataFull.data=[],this.stateData.column3.role_choose_left.dataFull.search_value=t["column3.role_choose_left"],this.stateData.column3.role_choose_left.dataFull.input_value=null===(i=t.column3_role_left_select)||void 0===i?void 0:i.rolename,t.O9_RolesUser_assignment_Role_Name_Left.filter(e=>null!==e.rolename&&e.rolename.toLowerCase().includes(t["column3.role_choose_left"].toLowerCase())).forEach((e,a)=>{let i=!1;(t.column3_role_left_select.roleid===e.roleid||0===a&&void 0===t.column3_role_left_select.roleid)&&(i=!0),this.stateData.column3.role_choose_left.dataFull.data.push({title:e.rolename,value:{id:e.roleid,item:e,type:"left"},selected:i})}),this.stateData.column3.role_choose_right.dataFull.search_value=t["column3.role_choose_right"],this.stateData.column3.role_choose_right.dataFull.input_value=null===(o=t.column3_role_right_select)||void 0===o?void 0:o.rolename;let _=t.O9_RolesUser_assignment_Role_Name_Right.filter(e=>null!==e.rolename&&e.rolename.toLowerCase().includes(t["column3.role_choose_right"].toLowerCase()));this.stateData.column3.role_choose_right.dataFull.data=_.map((e,a)=>{let i=!1;return(t.column3_role_right_select.roleid===e.roleid||0===a&&void 0===t.column3_role_right_select.roleid)&&(i=!0),{title:e.rolename,value:{id:e.roleid,item:e,type:"right"},selected:i}}),this.stateData.column4.listItem=t.O9_Roles_Invoke_limit_menu.map(e=>{let a=!1;return t.Invoke_role_selected===e.roleid&&(a=!0),{dataFull:{title:e.rolename,dataItem:e,selected:a},abs_Click:this.onClickMenuInvokeLimit}}),this.stateData.column4.table.dataFull.Header.data=t.invoke_limit_header.map(e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.invoke_limit_search_value[e.code]||""})),this.stateData.column4.table_config=t.invoke_limit_header.map((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===s.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}),this.stateData.column4.table_data=t.O9_Roles_InvokeLimit_Table.filter(e=>{let a=!0;for(const i in t.invoke_limit_search_value){let o=t.invoke_limit_search_value[i];e[i].toLowerCase().includes(o.toLowerCase())||(a=!1)}return a}).map((e,a)=>t.invoke_limit_header.map((t,i)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:a,index_col:i,abs_Change:this.abs_change_invoke_table,abs_Submit:this.abs_submit_invoke_table}))),this.stateData.column5.listItem=t.O9_Roles_Invoke_limit_menu.map(e=>{let a=!1;return t.Approve_role_selected===e.roleid&&(a=!0),{dataFull:{title:e.rolename,dataItem:e,selected:a},abs_Click:this.onClickMenuApproveLimit}}),this.stateData.column5.table.dataFull.Header.data=t.approve_limit_header.map(e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.approve_limit_search_value[e.code]||""})),this.stateData.column5.table_config=t.approve_limit_header.map((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===s.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}),this.stateData.column5.table_data=t.O9_Roles_ApproveLimit_Table.filter(e=>{let a=!0;for(const i in t.approve_limit_search_value){let o=t.approve_limit_search_value[i];e[i].toLowerCase().includes(o.toLowerCase())||(a=!1)}return a}).map((e,a)=>t.approve_limit_header.map((t,i)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:a,index_col:i,abs_Change:this.abs_change_approve_table,abs_Submit:this.abs_submit_approve_table})))},this.CheckAddRoleName=e=>{let t=e.target.value,a=!1;for(const i of this.stateData.column2.role_name_copying.dataFull.data)if(i.title===t||""===t){a=!0;break}""===t&&(a=!0),this.setState({addAndRemove_btnSaveClick:a,role_name_adding_input:t})},this.abs_Check_role_profile_user_assign_left=e=>{this.onClickAssignLeftRow(e);let t=this.stateData.column3.table_left_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_Check_role_profile_user_assign_right=e=>{let t=this.stateData.column3.table_right_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_CheckAll_left=()=>{let e=this.stateData.column3.table_left.dataFull.Header.data[1],t=0;this.stateData.column3.table_left_data.forEach(()=>{!0===e.data.value?this.stateData.column3.table_left_data[t].data[1].value=!1:this.stateData.column3.table_left_data[t].data[1].value=!0,t++}),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_CheckAll_right=()=>{let e=this.stateData.column3.table_right.dataFull.Header.data[1],t=0;this.stateData.column3.table_right_data.forEach(()=>{!0===e.data.value?this.stateData.column3.table_right_data[t].data[1].value=!1:this.stateData.column3.table_right_data[t].data[1].value=!0,t++}),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_change_approve_table=(e,t,a,i)=>{let o=e.target,{selectionStart:s,value:l}=o,n=this.state.O9_Roles_ApproveLimit_Table;let r=n[t.row_idx][t.header.code],c=l;if(r||(r="0.00"),r.includes(".")&&!l.includes(".")){let e=r.lastIndexOf(".");c=l.substring(0,e)+"."+l.substring(e,l.length),"."===c&&(c="")}let d=r;d=d.replace("-","");let h=l.lastIndexOf(".");var _;void 0!==d&&void 0!==l&&(l.indexOf(".")!==l.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(l.length-(null===(_=d)||void 0===_?void 0:_.length)),1===s?h=1:s>l.lastIndexOf(".")&&(h+=1)));n[t.row_idx][t.header.code]=d,this.setState({O9_Roles_ApproveLimit_Table:n},()=>{setTimeout(()=>{o.setSelectionRange(h,h)},50)})},this.abs_change_invoke_table=(e,t,a,i)=>{let o=e.target,{selectionStart:s,value:l}=o,n=this.state.O9_Roles_InvokeLimit_Table;let r=n[t.row_idx][t.header.code],c=l;if(r||(r="0.00"),r.includes(".")&&!l.includes(".")){let e=r.lastIndexOf(".");c=l.substring(0,e)+"."+l.substring(e,l.length),"."===c&&(c="")}let d=r;d=d.replace("-","");let h=l.lastIndexOf(".");var _;void 0!==d&&void 0!==l&&(l.indexOf(".")!==l.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(l.length-(null===(_=d)||void 0===_?void 0:_.length)),1===s?h=1:s>l.lastIndexOf(".")&&(h+=1)));n[t.row_idx][t.header.code]=d,this.setState({O9_Roles_InvokeLimit_Table:n},()=>{setTimeout(()=>{o.setSelectionRange(h,h)},50)})},this.abs_submit_invoke_table=(e,t,a)=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_InvokeLimit_Table;this.callAPI("O9_Roles_InvokeLimit_Table_Change_save",{roleid:this.state.Invoke_role_selected,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then(a=>{if(1===a.O9_Roles_InvokeLimit_Table_Change_save[0].type){this.showToast("Save",!0);var i=[{txcode:"bo-update-roleFOJWEBUI",input:{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,cmdid:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code]),list_currency:this.state.invoke_limit_currency,list_ccr:t[e.row_idx]}}];return Object(L.b)(i,{}).then(e=>{})}this.showToast("Save",!1)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")})},this.abs_submit_approve_table=(e,t,a)=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_ApproveLimit_Table;this.callAPI("O9_Roles_ApproveLimit_Table_Change_save",{roleid:this.state.O9_Roles_Approve_limit_menu_select.roleid,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then(e=>{1===e.O9_Roles_ApproveLimit_Table_Change_save[0].type&&this.showToast("Save",!0)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")})},this.getRoleAction=(e,t)=>{let a=Object(n.w)(),i={};const o=t.list_layout;for(const n of a)for(const t of o)for(const a of t.list_view)for(const t of a.list_input){let a=t.default.name.toLowerCase();if(!0!==i[a]){var s,l,r;let o=null===(s=e[n])||void 0===s||null===(l=s[t.default.codeHidden])||void 0===l||null===(r=l.component)||void 0===r?void 0:r.install;i[a]=o}}return i},this.getAllRoleAction=()=>Object(L.b)([{txcode:"#sys:bo-load-formRole",input:{form_id:this.key_form}},{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then(e=>{var t=n.g.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var a=n.g.foGetData("loadRoleTask",e)||{};void 0===a&&(a={});let i=this.getRoleAction(a,t);this.setState({role_action:i})}),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.showToast=(e,t)=>{var a={};switch(t){case!0:a={class_:"success",icon:"fa fa-check",title:e+" successfully",time:(new Date).getTime()+"",description:e+" Successfully",data:{},action:{}};break;case!1:a={class_:"error",icon:"fa fa-check",title:e||"Action error!",time:(new Date).getTime()+"",description:e||"Action error!",data:{},action:{}};break;default:a={class_:"error",icon:"fa fa-check",title:e,time:(new Date).getTime()+"",description:e,data:{},action:{}}}n.g.pushNotify("notifyToast",a,{}),n.g.callAllScreenListen()},this.callAPI=(e,t)=>{this.state.isLoading||this.setState({isLoading:!0});var a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,t),Object(L.b)(a,{}).then(t=>n.g.foGetData("data",t)||{[e]:[]}).finally(e=>{this.setState({isLoading:!1})})},this.AddRoleName=()=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.add&&this.state.role_action.save){let e=this.state.role_name_copying_selected,t=this.state.role_name_adding_input;""!==e&&""!==t&&this.callAPI("O9_Roles_User_Add_and_remove_add",{roleid:e,new_name:t}).then(a=>{let i=a.O9_Roles_User_Add_and_remove_add;1===i[0].type?this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then(a=>{let i=a.O9_Roles_Add_and_Remove_Role_Name,o=[{roleid:0,rolename:"All"}],s=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then(e=>{o=o.concat(e.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:o})}),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then(e=>{s=e.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:s})}),this.setState({O9_Roles_Add_and_Remove_Role_Name:i,isAdd_add_and_remove:!1,addAndRemove_btnAddClick:!1,role_name_adding_input:"",addAndRemove_btnSaveClick:!0});let l=-1;for(const e of i)e.rolename===t&&(l=e.roleid);var n=[{txcode:"bo-create-roleJWEBUI",input:{roleID:l,roleName:t,roleCopy:e}}];return Object(L.b)(n,{}).then(e=>{this.showToast("Save",!0)})}):this.showToast(i[0].message,!1)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.onSearch=(e,t)=>{this.setState({[t]:e.target.value})},this.abs_Click_next=()=>{this.onClickAssignLeftToRightArray()},this.abs_Click_next_all=()=>{this.onClickAssignLeftToRightAll()},this.abs_Click_previous=()=>{this.onClickAssignRightToLeftArray()},this.abs_Click_previous_all=()=>{this.onClickAssignRightToLeftAll()},this.onClickAssignLeftToRightAll=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter(t=>0===e.filter(e=>e.usrcd===t.data[1].dataItem.value.usrcd).length).map(e=>e.data[1].dataItem.value),a=this.state.column3_role_right_select.roleid;""!==a&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:a,data:t}).then(e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:a}).then(e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:a,role_user_all:t}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let i=this.stateData.column3.table_left.dataFull.Header.data[1],o=0;this.stateData.column3.table_left_data.forEach(()=>{!0===i.data.value&&(this.stateData.column3.table_left_data[o].data[1].value=!1),o++}),i.data.value=!1},this.onClickAssignRightToLeftAll=()=>{let e=this.stateData.column3.table_right_data.map(e=>e.data[1].dataItem.value),t=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:e}).then(e=>{let a=e.O9_Roles_User_Assignment_left_to_right;1===a[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then(e=>{let a=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:a,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:a}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(a[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let a=this.stateData.column3.table_right.dataFull.Header.data[1],i=0;this.stateData.column3.table_right_data.forEach(()=>{!0===a.data.value&&(this.stateData.column3.table_right_data[i].data[1].value=!1),i++}),a.data.value=!1},this.onClickAssignLeftToRightArray=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter(t=>!0===t.data[1].value&&0===e.filter(e=>e.usrcd===t.data[1].dataItem.value.usrcd).length).map(e=>e.data[1].dataItem.value),a=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_left=!0,""!==a&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:a,data:t}).then(e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:a}).then(e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:a,role_user_all:t}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let i=this.stateData.column3.table_left.dataFull.Header.data[1],o=0;this.stateData.column3.table_left_data.forEach(()=>{!0===i.data.value&&(this.stateData.column3.table_left_data[o].data[1].value=!1),o++}),i.data.value=!1},this.onClickAssignLeftRow=e=>{this.callAPI("user_profile_user_in_role",e.value).then(e=>{var t;let a=(null===e||void 0===e||null===(t=e.user_profile_user_in_role)||void 0===t?void 0:t.data)||[];this.setState({table_user_profile_user_in_role:a})})},this.onClickAssignLeftToRight=e=>{let t=this.state.column3_role_right_select.roleid,a=this.state.O9_Roles_User_assignment_table_right;for(let i=0;i<a.length;i++){if(a[i].usrcd===e.usrcd)return}""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:t,data:[{usrid:e.usrid}]}).then(e=>{let a=e.O9_Roles_User_Assignment_left_to_right;1===a[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then(e=>{let a=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:a,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:a}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):this.showToast(a[0].message,!1)})},this.onClickAssignRightToLeft=e=>{let t=this.refs.ref_assignment_list_role_name_right.value;""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:[{usrid:e.usrid}]}).then(e=>{let a=e.O9_Roles_User_Assignment_left_to_right;1===a[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then(e=>{let a=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:a,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:a}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):this.showToast(a[0].message,!1)})},this.onClickAssignRightToLeftArray=e=>{let t=this.stateData.column3.table_right_data.filter(e=>!0===e.data[1].value).map(e=>e.data[1].dataItem.value),a=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==a&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-a,data:t}).then(e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:a}).then(e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:a,role_user_all:t}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let i=this.stateData.column3.table_right.dataFull.Header.data[1],o=0;this.stateData.column3.table_right_data.forEach(()=>{!0===i.data.value&&(this.stateData.column3.table_right_data[o].data[1].value=!1),o++}),i.data.value=!1},this.onChangeUserAgm=(e,t)=>{switch(e.type){case"left":if(e.id===this.state.column3_role_right_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then(t=>{let a=this.state.O9_RolesUser_assignment_Role_Name_Left.filter(t=>t.roleid===e.id),i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_left:i,column3_role_left_select:a[0]})});break;case"right":if(e.id===this.state.column3_role_left_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then(t=>{let a=this.state.O9_RolesUser_assignment_Role_Name_Right.filter(t=>t.roleid===e.id),i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,column3_role_right_select:a[0]})})}},this.onChangeCurrency=e=>{e||0===e||(e="");let t=(e=String(e)).replace(/,/g,"");return t.length>16&&(t=t.slice(t.length-16,t.length)),Object(be.a)(t,2)},this.getValueCurrency=e=>void 0===e||null===e||""===e?"":Number(e.replace(/,/g,"")),this.saveInvokeTable=()=>{},this.onClickMenuInvokeLimit=e=>{let t=e.dataFull.dataItem;this.callAPI("O9_Roles_InvokeLimit_Table",t).then(e=>{void 0===e&&(e={});let a=e.O9_Roles_InvokeLimit_Table;this.setState({O9_Roles_Invoke_limit_menu_select:t,Invoke_role_selected:t.roleid},()=>{this.reloadTableInvokeLimit(a)})})},this.reloadTableInvokeLimit=e=>{if(e){let t=e.currency||[],a=e.data;for(const e of t)for(let t=0;t<a.length;t++){const i=a[t];i[e]=this.convertCurrency(i[e]),i.index_row=t}this.setState({O9_Roles_InvokeLimit_Table:a,invoke_limit_header:this.getTableHeader(t),invoke_limit_currency:t})}},this.onClickMenuApproveLimit=e=>{e=e.dataFull.dataItem,this.callAPI("O9_Roles_ApproveLimit_Table",e).then(t=>{if(t){let a=t.O9_Roles_ApproveLimit_Table,i=a.currency,o=a.data;for(const e of i)for(let t=0;t<o.length;t++){const a=o[t];a[e]=this.convertCurrency(a[e]),a.index_row=t}this.setState({O9_Roles_ApproveLimit_Table:o,O9_Roles_Approve_limit_menu_select:e,Approve_role_selected:e.roleid,approve_limit_header:this.getTableHeader(i)})}})},this.onClickTreeMenuInvokeApprove=(e,t)=>{t=t.dataItem;let a=this.state.menu_invoke_aprrove;t.isOpen=!t.isOpen;let i=[],o=[];this.callAPI("O9_Roles_InvokeApprove_Table_header",t).then(e=>{i=[{cmdid:"0",caption:"Role Name"},{cmdid:"0",caption:"Self Invoke"}],i=i.concat(e.O9_Roles_InvokeApprove_Table_header),i=i.filter(e=>null!==e.cmdid),this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then(e=>{o=e.O9_Roles_InvokeApprove_Table_body,this.setState({menu_invoke_aprrove:a,O9_Roles_InvokeApprove_Table_body:o,O9_Roles_InvokeApprove_Table_header:i,menu_invoke_aprrove_select:t})})})},this.removeRoleName=()=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.delete){let e=this.state.role_name_copying_selected;""!==e&&this.callAPI("O9_Roles_User_Add_and_remove_delete",{roleid:e}).then(t=>{let a=t.O9_Roles_User_Add_and_remove_delete;if(1===a[0].type){this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then(e=>{let t=e.O9_Roles_Add_and_Remove_Role_Name,a=t[0],i=[{roleid:0,rolename:"All"}],o=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then(e=>{i=i.concat(e.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:i})}),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then(e=>{o=e.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:o})}),this.setState({O9_Roles_Add_and_Remove_Role_Name:t,isAdd_add_and_remove:!1,isDelete_add_and_remove:!1,delete_err:"",role_name_copying_selected:a.roleid,column2_role_select:a})}),this.showToast("Save",!0);var i=[{txcode:"bo-delete-roleJWEBUI",input:{roleID:e}}];return Object(L.b)(i,{}).then(e=>{})}this.showToast(t.O9_Roles_User_Add_and_remove_delete[0].message,!1),this.setState({delete_err:a[0].message||""})})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},ye=Object(m.c)("jwebui_roleProfile"),this.key_form="BO_015003003",this.data_key_form={BO_015003003:{title:"ADM-Roles Profile",col_id:"column1"},BO_015003008:{title:"ADM-Invoke Limit",col_id:"column4"},BO_015003009:{title:"ADM-Approve Limit",col_id:"column5"}},this.state={menu_parent_select:"ADM - Roles Profile",menu_select:this.data_key_form[this.key_form].col_id,"column3.role_choose_right":"","column3.role_choose_left":"","column2.role_name_copying":"",column3_role_left_select:0,role_name_adding_input:"",role_name_copying_selected:"",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,menu_invoke_aprrove:[],O9_Roles_InvokeApprove_Table_header:[],O9_Roles_InvokeApprove_Table_body:[],menu_invoke_aprrove_select:{},O9_Roles_Add_and_Remove_Role_Name:[],O9_Roles_Add_and_Remove_Role_Name_select:"",O9_Roles_User_assignment_table_left:[],O9_Roles_User_assignment_table_right:[],O9_RolesUser_assignment_Role_Name_Left:[],O9_RolesUser_assignment_Role_Name_Right:[],user_assignment_select:"",O9_Roles_Invoke_limit_menu:[],O9_Roles_Invoke_limit_menu_select:{},O9_Roles_Approve_limit_menu:[],O9_Roles_Approve_limit_menu_select:{},O9_Roles_InvokeLimit_Table:[],O9_Roles_ApproveLimit_Table:[],table_user_profile_user_in_role:[],invoke_limit_header:[],approve_limit_header:[],Col3_Assignment_Search:{},invoke_limit_search_value:{},approve_limit_search_value:{}},this.menu_form=[{title:"Roles Profile",child:["Invoke - Aprrove","Add - Remove","User Assignment"]},{title:"Invoke Limit",child:[]},{title:"Approve Limit",child:[]}],this.user_profile=n.g.context_get("user_acc"),this.stateData={form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},cmd:{visibility:""}}},tab:{data:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],abs_select:(e,t)=>{this.setState({menu_select:t})}},column1:{tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},title_table_up:"OPEARTION",table_up:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_up_data:[],table_up_config:[],title_table_down:"VERIFICATION",table_down:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_down_data:[],table_down_config:[]},column4:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchInvokeLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}]},column5:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchApproveLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]},column2:{role_name_adding:{dataFull:{config:{default:{title:"Role Name (for adding)",type:"text",class:"col-sm-5",code_form_component:"role_name_adding"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:e=>{this.CheckAddRoleName(e)}},listButton:[{dataFull:{config:{default:{title:"Add",icon:"add_circle_outline"},cmd:{}}},abs_Click:()=>{this.setState({addAndRemove_btnAddClick:!0})}},{dataFull:{config:{default:{title:"Delete",icon:"highlight_off"},cmd:{}}},abs_Click:this.removeRoleName},{dataFull:{config:{default:{title:"Save",type:"primary",icon:"check_circle_outline"},cmd:{}}},abs_Click:this.AddRoleName}],role_name_copying:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Role Name (for copying or deleting)",type:"text",class:"col-sm-5",code_form_component:"role_name_copying"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:[],input_value:"123",search_value:""},abs_Change:this.abs_role_name_copying_select,abs_search:e=>{this.onSearch(e,"column2.role_name_copying")}}},column3:{table_in_role:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"User Code",config:{width:"",isFrozen:!1}},{title:"User Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_in_role_data:[{data:[{data:"2"},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_in_role_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_left},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:n.g.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_left_data:[{data:[{data:"2"},{value:!1,abs_Click:this.abs_Ckeck},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_right},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:n.g.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_right_data:[{data:[],config:{value:!0}}],table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}async componentDidMount(){n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key),await this.getAllRoleAction(),await this.callAPI("O9_Roles_InvokeApprove_Menu").then(e=>{let{O9_Roles_InvokeApprove_Menu:t}=e||[];this.setState({menu_invoke_aprrove:t})});let e=[],t=[{roleid:0,rolename:"All"}],a=[],i=[],o=[];await this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then(t=>{e=t.O9_Roles_Add_and_Remove_Role_Name}),await this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then(e=>{t=t.concat(e.O9_RolesUser_assignment_Role_Name_Left)}),await this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then(e=>a=e.O9_RolesUser_assignment_Role_Name_Right),t.length>0&&await this.callAPI("O9_Roles_User_assignment_table",{roleid:0}).then(e=>{i=e.O9_Roles_User_assignment_table}),a.length>0&&await this.callAPI("O9_Roles_User_assignment_table",a[0]).then(e=>{o=e.O9_Roles_User_assignment_table}),this.setState({role_left:t[0],column3_role_right_select:a[0],column3_role_left_select:t[0],column2_role_select:e[0],O9_Roles_Add_and_Remove_Role_Name:e,O9_RolesUser_assignment_Role_Name_Left:t,O9_RolesUser_assignment_Role_Name_Right:a,O9_Roles_User_assignment_table_left:i,O9_Roles_User_assignment_table_right:o,O9_Roles_Invoke_limit_menu:e,O9_Roles_Approve_limit_menu:e,isLoading:!1},()=>{})}render(){const e=Object(m.b)("uFormLoading");return o.a.createElement(o.a.Fragment,null,this.state.isLoading?o.a.createElement(e,null):null,o.a.createElement("div",{style:{display:this.state.visibility}},o.a.createElement(ye,{stateData:this.stateData})))}convertCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e||0===e||(e=""),e=String(e);let t=e.replace(/,/g,"");return Object(be.a)(t,2)}reloadTableWithMenuInvokeApprove(e){let t=this.state.menu_invoke_aprrove_select,a=[];this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then(t=>{a=t.O9_Roles_InvokeApprove_Table_body,this.setState({O9_Roles_InvokeApprove_Table_body:a,isLoading:!!e})})}}var Ce=De;let Ae;class ke extends i.Component{constructor(e){super(e),this.handleSelectTabID=e=>{this.setState({menu_select:e})},this.handleSelectRoleTabID=e=>{this.setState({menu_role_select:e})},this.handelClearSearch=()=>{},this.getRoleAction=(e,t)=>{let a=Object(n.w)(),i={};const o=t.list_layout;for(const n of a)for(const t of o)for(const a of t.list_view)for(const t of a.list_input){let a=t.default.name.toLowerCase();if(!0!==i[a]){var s,l,r;let o=null===(s=e[n])||void 0===s||null===(l=s[t.default.codeHidden])||void 0===l||null===(r=l.component)||void 0===r?void 0:r.install;i[a]=o}}return i},this.getAllRoleAction=()=>Object(L.b)([{txcode:"#sys:bo-load-formRole",input:{form_id:this.key_form}},{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then(e=>{var t=n.g.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var a=n.g.foGetData("loadRoleTask",e)||{};void 0===a&&(a={});let i=this.getRoleAction(a,t);this.setState({role_action:i})}),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.showToast=(e,t)=>{var a={};switch(t){case!0:a={class_:"success",icon:"fa fa-check",title:e+" successfully",time:(new Date).getTime()+"",description:e+" Successfully",data:{},action:{}};break;case!1:a={class_:"error",icon:"fa fa-check",title:e+"fail"||!1,time:(new Date).getTime()+"",description:e+"fail"||!1,data:{},action:{}};break;default:a={class_:"error",icon:"fa fa-check",title:e,time:(new Date).getTime()+"",description:e,data:{},action:{}}}n.g.pushNotify("notifyToast",a,{}),n.g.callAllScreenListen()},this.callAPI=(e,t)=>{this.state.isLoading||this.setState({isLoading:!0});var a=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,t),Object(L.b)(a,{}).then(t=>n.g.foGetData("data",t)||{[e]:[]}).finally(e=>{this.setState({isLoading:!1})})},this.onSearchSelect=(e,t,a)=>{switch(t){case"role_user":let{role_user:t}=this.state;switch(a){case"left":t.list_item_left_search=e.target.value,this.setState({role_user:t});break;case"right":t.list_item_right_search=e.target.value,this.setState({role_user:t})}break;case"role_workflow":let{role_workflow:i}=this.state;switch(a){case"left":i.list_item_left_search=e.target.value,this.setState({role_workflow:i});break;case"right":i.list_item_right_search=e.target.value,this.setState({role_workflow:i})}}},this.handleInputRoleViewChange=(e,t)=>{let{role_view:a}=this.state;a[t]=e.target.value,this.setState({role_view:a})},this.onModifyViewRole=()=>{let{role_view:e}=this.state;e.btn_save=!1,e.btn_modify=!0,e.role_name_disable=!1,this.setState({role_view:e})},this.onSaveViewRole=()=>{let{role_view:e}=this.state;e.btn_save=!0,e.btn_modify=!1,e.role_name_disable=!0,this.setState({role_view:e},()=>{this.callAPI("ncbs_role_update",{ncbs_role:e}).then(t=>{t&&t.ncbs_role&&"COMPLETED"===t.ncbs_role.status?this.showToast("Save",!0):(e.btn_save=!1,e.btn_modify=!0,e.role_name_disable=!1,this.setState({role_view:e}),this.showToast("Save",!1))})})},this.handleInputRoleAddChange=(e,t)=>{let{role_add:a}=this.state;a[t]=e.target.value,"role_code"===t&&(a[t]=a[t].toUpperCase()),this.setState({role_add:a})},this.onSaveAddRole=()=>{let{role_add:e}=this.state;e.btn_save=!0,e.role_code_disable=!0,e.role_name_disable=!0,this.setState({role_add:e},()=>{this.callAPI("ncbs_role_add",{ncbs_role_add:e}).then(t=>{t&&t.ncbs_role_add&&"COMPLETED"===t.ncbs_role_add.status?this.showToast("Save",!0):this.showToast("Save",!1),e.btn_save=!1,e.role_code_disable=!1,e.role_name_disable=!1,this.setState({role_add:e})})})},this.onSearch=(e,t)=>{this.page_index=1;let a={paging:{pagingIndex:this.page_index,recordItem:5}},{role:i}=this.state;i.table_search.paging_index=1,this.setState({role:i},()=>{this.callAPI("ncbs_role_search",{search_text:this.state.role.search_text,table_search:a}).then(e=>{if(e&&e.ncbs_role_search){let t=e.ncbs_role_search;i.table_search.result_total=t.total_items,i.table_search.paging_index=1,this.page_index=1,i.table_search.data=this.getDataTableSearch(t.results),this.setState({role:i})}})})},this.pageIndexChangeRoleAdminSearch=(e,t,a)=>{switch(t){case"role_user":let{role_user:t}=this.state;switch(a){case"left":this.page_role_user_left_index=e,t.table_left.data=[],t.table_left.paging_index=e,this.setState({role_user:t},()=>{let e={paging:{pagingIndex:this.page_role_user_left_index,recordItem:10}};"all"===t.item_select_left?this.callAPI("ncbs_role_get_user",{ncbs_user_search:{search_text:""},table_search:e}).then(e=>{t.table_left.result_total=e.ncbs_user_search.total_items,t.table_left.data=e.ncbs_user_search.results,this.setState({role_user:t})}):this.callAPI("ncbs_role_get_user_role",{role_code:t.item_select_left,table_search:e}).then(e=>{t.table_left.result_total=e.ncbs_role_get_user_role.total_items,t.table_left.data=e.ncbs_role_get_user_role.results||[],this.setState({role_user:t})})});break;case"right":this.page_role_user_right_index=e,t.table_right.data=[],t.table_right.paging_index=e,this.setState({role_user:t},()=>{let e={paging:{pagingIndex:this.page_role_user_right_index,recordItem:10}};this.callAPI("ncbs_role_get_user_role",{role_code:t.item_select_right,table_search:e}).then(e=>{t.table_right.result_total=e.ncbs_role_get_user_role.total_items,t.table_right.data=e.ncbs_role_get_user_role.results||[],this.setState({role_user:t})})})}break;case"role_workflow":let{role_workflow:i}=this.state;switch(a){case"left":this.page_role_workflow_left_index=e,i.table_left.data=[],i.table_left.paging_index=e,this.setState({role_workflow:i},()=>{let e={paging:{pagingIndex:this.page_role_workflow_left_index,recordItem:10}};"all"===i.item_select_left?this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{search_text:""},table_search:e}).then(e=>{i.table_left.result_total=e.ncbs_role_get_workflow.total_items,i.table_left.data=e.ncbs_role_get_workflow.results,this.setState({role_workflow:i})}):this.callAPI("ncbs_role_get_workflow_role",{role_code:i.item_select_left,table_search:e}).then(e=>{i.table_left.result_total=e.ncbs_role_get_workflow_role.total_items,i.table_left.data=e.ncbs_role_get_workflow_role.results||[],this.setState({role_workflow:i})})});break;case"right":this.page_role_workflow_right_index=e,i.table_right.data=[],i.table_right.paging_index=e,this.setState({role_workflow:i},()=>{let e={paging:{pagingIndex:this.page_role_workflow_right_index,recordItem:10}};this.callAPI("ncbs_role_get_workflow_role",{role_code:i.item_select_right,table_search:e}).then(e=>{i.table_right.result_total=e.ncbs_role_get_workflow_role.total_items,i.table_right.data=e.ncbs_role_get_workflow_role.results||[],this.setState({role_workflow:i})})})}}},this.pageIndexChangeRoleSearch=e=>{this.page_index=e;let{role:t}=this.state;t.table_search.paging_index=e,this.setState({role:t},()=>{let e={paging:{pagingIndex:this.page_index,recordItem:5}};this.callAPI("ncbs_role_search",{search_text:this.state.role.search_text,table_search:e}).then(e=>{if(e&&e.ncbs_role_search){let a=e.ncbs_role_search;t.table_search.result_total=a.total_items,t.table_search.data=this.getDataTableSearch(a.results),this.setState({role:t})}})})},this.removeItemTable=e=>{let t={title:n.g.getLang("sysConfirmDelTitle"),content:n.g.getLang("sysConfirmDelContent")};n.g.confirmInfo(t,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0}],void 0,t=>{t&&this.callAPI("ncbs_role_delete",{ncbs_role_search:e}).then(e=>{e&&"COMPLETED"===e.ncbs_role_search.status?(this.showToast("Delete",!0),this.onSearch()):this.showToast("Delete",!1)})})},this.handleCheckTable=e=>{let{role_user:t}=this.state;switch(e.type){case"left":for(let a=0;a<t.table_left.data.length;a++){if(t.table_left.data[a].user_code===e.value.user_code){t.table_left.data[a].isCheck=!t.table_left.data[a].isCheck,!0===t.table_left.data[a].isCheck?t.number_item_check_left++:t.number_item_check_left--;break}}break;case"right":for(let a=0;a<t.table_right.data.length;a++){if(t.table_right.data[a].user_code===e.value.user_code){t.table_right.data[a].isCheck=!t.table_right.data[a].isCheck,!0===t.table_right.data[a].isCheck?t.number_item_check_right++:t.number_item_check_right--;break}}}this.setState({role_user:t})},this.handleCheckTableWorkflow=e=>{let{role_workflow:t}=this.state;switch(e.type){case"left":for(let a=0;a<t.table_left.data.length;a++){if(t.table_left.data[a].workflow_id===e.value.workflow_id){t.table_left.data[a].isCheck=!t.table_left.data[a].isCheck,!0===t.table_left.data[a].isCheck?t.number_item_check_left++:t.number_item_check_left--;break}}break;case"right":for(let a=0;a<t.table_right.data.length;a++){if(t.table_right.data[a].workflow_id===e.value.workflow_id){t.table_right.data[a].isCheck=!t.table_right.data[a].isCheck,!0===t.table_right.data[a].isCheck?t.number_item_check_right++:t.number_item_check_right--;break}}}this.setState({role_workflow:t})},this.viewItem=e=>{let{role_view:t}=this.state;t.role_code=e.role_code,t.role_name=e.role_name,t.btn_modify=!1,this.setState({menu_role_select:"role_view",role_view:t})},this.handleRoleSearch=e=>{let{role:t}=this.state;t.search_text=e.target.value,this.setState({role:t})},this.getListItemSelect=e=>{let t=[];for(let a=0;a<e.length;a++){const i=e[a];i.isCheck&&t.push(i)}return t},this.abs_Click_next=()=>{let{role_user:e}=this.state,t=[],a=this.getListItemSelect(e.table_left.data);a.length>0&&(t=this.getDataRoleUserAdd(a,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_add_user",{data_array:t}).then(e=>{e&&e.ncbs_role_add_user&&"COMPLETED"===e.ncbs_role_add_user.status?(this.showToast("Add Role",!0),this.resetTableRoleUser()):this.showToast("Add Role",!1)}):this.showToast("Add Role",!1)},this.abs_Click_next_all=()=>{let{role_user:e}=this.state,t=[];e.table_left.data.length>0&&(t=this.getDataRoleUserAdd(e.table_left.data,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_add_user",{data_array:t}).then(e=>{e&&e.ncbs_role_add_user&&"COMPLETED"===e.ncbs_role_add_user.status?(this.showToast("Add Role",!0),this.resetTableRoleUser()):this.showToast("Add Role",!1)}):this.showToast("Add Role",!1)},this.abs_Click_previous=()=>{let{role_user:e}=this.state,t=[],a=this.getListItemSelect(e.table_right.data);a.length>0&&(t=this.getDataRoleUserAdd(a,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_delete_user",{data_array:t}).then(e=>{e&&e.ncbs_role_delete_user&&"COMPLETED"===e.ncbs_role_delete_user.status?(this.showToast("Delete Role",!0),this.resetTableRoleUser()):this.showToast("Delete Role",!1)}):this.showToast("Delete Role",!1)},this.abs_Click_previous_all=()=>{let{role_user:e}=this.state,t=[];e.table_right.data.length>0&&(t=this.getDataRoleUserAdd(e.table_right.data,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_delete_user",{data_array:t}).then(e=>{e&&e.ncbs_role_delete_user&&"COMPLETED"===e.ncbs_role_delete_user.status?(this.showToast("Delete Role",!0),this.resetTableRoleUser()):this.showToast("Delete Role",!1)}):this.showToast("Delete Role",!1)},this.abs_Click_next_workflow=()=>{let{role_workflow:e}=this.state,t=[],a=this.getListItemSelect(e.table_left.data);a.length>0&&(t=this.getDataRoleWorkflowAdd(a,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_add_workflow",{data_array:t}).then(e=>{e&&e.ncbs_role_add_workflow&&"COMPLETED"===e.ncbs_role_add_workflow.status?(this.showToast("Add Workflow",!0),this.resetTableRoleWorkflow()):this.showToast("Add Workflow",!1)}):this.showToast("Add Workflow",!1)},this.abs_Click_next_all_workflow=()=>{let{role_workflow:e}=this.state,t=[];e.table_left.data.length>0&&(t=this.getDataRoleWorkflowAdd(e.table_left.data,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_add_workflow",{data_array:t}).then(e=>{e&&e.ncbs_role_add_workflow&&"COMPLETED"===e.ncbs_role_add_workflow.status?(this.showToast("Add Workflow",!0),this.resetTableRoleWorkflow()):this.showToast("Add Workflow",!1)}):this.showToast("Add Workflow",!1)},this.abs_Click_previous_workflow=()=>{let{role_workflow:e}=this.state,t=[],a=this.getListItemSelect(e.table_right.data);a.length>0&&(t=this.getDataRoleWorkflowAdd(a,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_delete_workflow",{data_array:t}).then(e=>{e&&e.ncbs_role_delete_workflow&&"COMPLETED"===e.ncbs_role_delete_workflow.status?(this.showToast("Delete Workflow",!0),this.resetTableRoleWorkflow()):this.showToast("Delete Workflow",!1)}):this.showToast("Delete Workflow",!1)},this.abs_Click_previous_all_workflow=()=>{let{role_workflow:e}=this.state,t=[];e.table_right.data.length>0&&(t=this.getDataRoleWorkflowAdd(e.table_right.data,e.item_select_right)),t.length>0?this.callAPI("ncbs_role_delete_workflow",{data_array:t}).then(e=>{e&&e.ncbs_role_delete_workflow&&"COMPLETED"===e.ncbs_role_delete_workflow.status?(this.showToast("Delete Workflow",!0),this.resetTableRoleWorkflow()):this.showToast("Delete Workflow",!1)}):this.showToast("Delete Workflow",!1)},this.onChangeUserAgm=(e,t)=>{let{role_user:a}=this.state;switch(e.type){case"left":if(e.role_code===a.item_select_left)break;a.item_select_left=e.role_code,this.page_role_user_left_index=1;let t={paging:{pagingIndex:this.page_role_user_left_index,recordItem:10}};a.table_left.page_index=1,this.setState({role_user:a},()=>{"all"===a.item_select_left?this.callAPI("ncbs_role_get_user",{ncbs_user_search:{search_text:""},table_search:t}).then(e=>{a.table_left.result_total=e.ncbs_user_search.total_items,a.table_left.data=e.ncbs_user_search.results||[],a.number_item_check_left=0,a.table_left.data.length>0?a.btn_next_all_disable=!1:a.btn_next_all_disable=!0,this.setState({role_user:a})}):this.callAPI("ncbs_role_get_user_role",{role_code:e.role_code,table_search:t}).then(e=>{a.table_left.result_total=e.ncbs_role_get_user_role.total_items,a.table_left.data=e.ncbs_role_get_user_role.results||[],a.table_left.data.length>0?a.btn_next_all_disable=!1:a.btn_next_all_disable=!0,a.number_item_check_left=0,this.setState({role_user:a})})});break;case"right":if(e.role_code===a.item_select_right)break;let i={paging:{pagingIndex:this.page_role_user_right_index,recordItem:10}};this.page_role_user_right_index=1,a.table_right.page_index=1,a.item_select_right=e.role_code,this.setState({role_user:a},()=>{this.callAPI("ncbs_role_get_user_role",{role_code:e.role_code,table_search:i}).then(e=>{a.table_right.result_total=e.ncbs_role_get_user_role.total_items,a.table_right.data=e.ncbs_role_get_user_role.results||[],a.number_item_check_right=0,a.table_right.data.length>0?a.btn_preview_all_disable=!1:a.btn_preview_all_disable=!0,this.setState({role_user:a})})})}},this.onChangeWorkflowAgm=(e,t)=>{let{role_workflow:a}=this.state;switch(e.type){case"left":if(e.role_code===a.item_select_left)break;a.item_select_left=e.role_code,this.page_role_workflow_left_index=1;let t={paging:{pagingIndex:this.page_role_workflow_left_index,recordItem:10}};a.table_left.page_index=1,this.setState({role_workflow:a},()=>{"all"===a.item_select_left?this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{search_text:""},table_search:t}).then(e=>{a.table_left.result_total=e.ncbs_role_get_workflow.total_items,a.table_left.data=e.ncbs_role_get_workflow.results||[],a.number_item_check_left=0,a.table_left.data.length>0?a.btn_next_all_disable=!1:a.btn_next_all_disable=!0,this.setState({role_workflow:a})}):this.callAPI("ncbs_role_get_workflow_role",{role_code:e.role_code,table_search:t}).then(e=>{a.table_left.result_total=e.ncbs_role_get_workflow_role.total_items,a.table_left.data=e.ncbs_role_get_workflow_role.results||[],a.number_item_check_left=0,a.table_left.data.length>0?a.btn_next_all_disable=!1:a.btn_next_all_disable=!0,this.setState({role_workflow:a})})});break;case"right":if(e.role_code===a.item_select_right)break;let i={paging:{pagingIndex:this.page_role_workflow_right_index,recordItem:10}};this.page_role_workflow_right_index=1,a.table_right.page_index=1,a.item_select_right=e.role_code,this.setState({role_workflow:a},()=>{this.callAPI("ncbs_role_get_workflow_role",{role_code:e.role_code,table_search:i}).then(e=>{a.table_right.result_total=e.ncbs_role_get_workflow_role.total_items,a.table_right.data=e.ncbs_role_get_workflow_role.results||[],a.number_item_check_right=0,a.table_right.data.length>0?a.btn_preview_all_disable=!1:a.btn_preview_all_disable=!0,this.setState({role_workflow:a})})})}},this.onChangeCurrency=e=>{e||0===e||(e="");let t=(e=String(e)).replace(/,/g,"");return t.length>16&&(t=t.slice(t.length-16,t.length)),Object(be.a)(t,2)},this.getValueCurrency=e=>void 0===e||null===e||""===e?"":Number(e.replace(/,/g,"")),this.saveInvokeTable=()=>{},Ae=Object(m.c)("ncbs_role_management"),this.key_form="ncbs_role_management",this.data_key_form={ncbs_role_management:{title:"Role Management",col_id:"column1"}},this.page_index=0,this.page_role_user_left_index=0,this.page_role_user_right_index=0,this.page_role_workflow_left_index=0,this.page_role_workflow_right_index=0,this.data_tab_global=[{id:"column1",title:"Role",isShow:!0},{id:"column2",title:"Role-User"},{id:"column3",title:"Role-Workflow"}],this.data_tab_column1=[{id:"role_search",title:"Search",isShow:!0},{id:"role_add",title:"Add"},{id:"role_view",title:"View"}],this.data_role_user_logic=[],this.state={menu_parent_select:"Role Management",menu_select:this.data_key_form[this.key_form].col_id,menu_role_select:"role_search",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,role:{search_text:"",table_search:{paging_index:1,result_total:0,data:[]}},role_add:{role_code:"",role_name:"",btn_save:!1,role_code_disable:!1,role_name_disable:!1},role_view:{role_code:"",role_name:"",btn_modify:!0,btn_save:!0,role_name_disable:!0},role_user:{list_item_left:[],list_item_left_search:"",item_select_left:"all",table_left:{data:[],paging_index:1,result_total:0},table_right:{data:[],paging_index:1,result_total:0},list_item_right:[],list_item_right_search:"",item_select_right:"",number_item_check_left:0,number_item_check_right:0,btn_next_disable:!0,btn_preview_disable:!0,btn_next_all_disable:!0,btn_preview_all_disable:!0},role_workflow:{list_item_left:[],list_item_left_search:"",item_select_left:"all",table_left:{data:[],paging_index:1,result_total:0},table_right:{data:[],paging_index:1,result_total:0},list_item_right:[],list_item_right_search:"",item_select_right:"",number_item_check_left:0,number_item_check_right:0,btn_next_disable:!0,btn_preview_disable:!0,btn_next_all_disable:!1,btn_preview_all_disable:!1}},this.menu_form=[{title:"Role Management",child:["Role","Role-User","Role-Workflow"]}],this.user_profile=n.g.context_get("user_acc"),this.record=[5],this.record_10=[10]}getRecordPageConfig(e){return this.record.map(t=>({number:t,selected:e===t}))}getRecordPage_10Config(e){return this.record_10.map(t=>({number:t,selected:e===t}))}async componentDidMount(){n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key),this.setState({isLoading:!1})}async getDataRoleUser(){let{role_user:e}=this.state;this.page_role_user_left_index=this.page_role_user_right_index=1,e.list_item_left=[{role_code:"all",role_name:"All"}],e.list_item_right=[];e.item_select_left="all",await this.callAPI("ncbs_role_search",{search_text:"",table_search:{paging:{pagingIndex:1,recordItem:100}}}).then(t=>{e.list_item_left=e.list_item_left.concat(t.ncbs_role_search.results),e.list_item_right=t.ncbs_role_search.results,e.item_select_right=t.ncbs_role_search.results[0].role_code});let t={paging:{pagingIndex:1,recordItem:10}};e.list_item_right.length>0&&await this.callAPI("ncbs_role_get_user_role",{role_code:e.item_select_right,table_search:t}).then(t=>{e.table_right.result_total=t.ncbs_role_get_user_role.total_items,e.table_right.paging_index=1,e.table_right.data=t.ncbs_role_get_user_role.results||[],e.table_right.data.length>0?e.btn_preview_all_disable=!1:e.btn_preview_all_disable=!0}),e.list_item_left.length>0&&await this.callAPI("ncbs_role_get_user",{ncbs_user_search:{search_text:""},table_search:t}).then(t=>{e.table_left.result_total=t.ncbs_user_search.total_items,e.table_left.paging_index=1,e.table_left.data=t.ncbs_user_search.results,e.table_left.data.length>0?e.btn_next_all_disable=!1:e.btn_next_all_disable=!0}),this.setState({isLoading:!1,role_user:e})}async getDataRoleWorkflow(){let{role_workflow:e}=this.state;this.page_role_workflow_left_index=this.page_role_workflow_right_index=1,e.list_item_left=[{role_code:"all",role_name:"All"}],e.list_item_right=[];e.item_select_left="all",await this.callAPI("ncbs_role_search",{search_text:"",table_search:{paging:{pagingIndex:1,recordItem:100}}}).then(t=>{e.list_item_left=e.list_item_left.concat(t.ncbs_role_search.results),e.list_item_right=t.ncbs_role_search.results,e.item_select_right=t.ncbs_role_search.results[0].role_code});let t={paging:{pagingIndex:1,recordItem:10}};e.list_item_right.length>0&&await this.callAPI("ncbs_role_get_workflow_role",{role_code:e.item_select_right,table_search:t}).then(t=>{t&&t.ncbs_role_get_workflow_role&&(e.table_right.result_total=t.ncbs_role_get_workflow_role.total_items,e.table_right.paging_index=1,e.table_right.data=t.ncbs_role_get_workflow_role.results||[],e.table_right.data.length>0?e.btn_preview_all_disable=!1:e.btn_preview_all_disable=!0)}),e.list_item_left.length>0&&await this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{search_text:""},table_search:t}).then(t=>{e.table_left.result_total=t.ncbs_role_get_workflow.total_items,e.table_left.paging_index=1,e.table_left.data=t.ncbs_role_get_workflow.results,e.table_left.data.length>0?e.btn_next_all_disable=!1:e.btn_next_all_disable=!0}),this.setState({isLoading:!1,role_workflow:e})}getDataForm(){return{form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},cmd:{visibility:""}}},tab:{data:this.getDataTab(this.data_tab_global,this.state.menu_select),abs_select:(e,t)=>{this.setState({menu_select:t},()=>{"column2"===t?this.getDataRoleUser():"column3"===t&&this.getDataRoleWorkflow()})}},role_search:{search_text:{dataFull:{config:{default:{title:"Search",type:"text",class:"col-sm-4 ",code_form_component:"search_text"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},mode:{isSearch:!0},value:this.state.role.search_text,abs_Change:this.handleRoleSearch,abs_KeyUp:this.enterRoleSearch}},search_button:{dataFull:{config:{default:{title:"Search",icon:"fa-search",type:"primary"}},abs_Click:this.onSearch}},table_search:{dataFull:{Header:{data:[{title:"",config:{width:"50px",isFrozen:!1}},{title:"Role Code",config:{width:"",isFrozen:!1}},{title:"Role Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role.table_search.result_total,paging_index:this.state.role.table_search.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPageConfig(this.record[0]),abs_PagingActive:this.pageRecordChangeRoleSearch,abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_search_config:[{type:"uTableColumnButtonHover",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_search_data:this.state.role.table_search.data},role_add:{role_code:{dataFull:{config:{default:{title:"Role Code",type:"text",class:"col-sm-6 offset-sm-6-right",code_form_component:"role_code"},cmd:{disable:this.state.role_add.role_code_disable,visible:!0,error:{message:"",type:""}}},value:this.state.role_add.role_code,abs_Change:this.handleInputRoleAddChange}},role_name:{dataFull:{config:{default:{title:"Role name",type:"text",class:"col-sm-6 offset-sm-6-right",code_form_component:"role_name"},cmd:{disable:this.state.role_add.role_name_disable,visible:!0,error:{message:"",type:""}}},value:this.state.role_add.role_name,abs_Change:this.handleInputRoleAddChange}},save_button:{dataFull:{config:{default:{title:"Save",icon:"fa-save",type:"primary"},cmd:{disable:this.state.role_add.btn_save}},abs_Click:this.onSaveAddRole}}},role_view:{role_code:{dataFull:{config:{default:{title:"Role Code",type:"text",class:"col-sm-6 offset-sm-6-right",code_form_component:"role_code"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:this.state.role_view.role_code,abs_Change:this.handleInputRoleViewChange}},role_name:{dataFull:{config:{default:{title:"Role Name",type:"text",class:"col-sm-6 offset-sm-6-right",code_form_component:"role_name"},cmd:{disable:this.state.role_view.role_name_disable,visible:!0,error:{message:"",type:""}}},value:this.state.role_view.role_name,abs_Change:this.handleInputRoleViewChange}},save_button:{dataFull:{config:{default:{title:"Save",icon:"fa-save",type:"primary"},cmd:{disable:this.state.role_view.btn_save}},abs_Click:this.onSaveViewRole}},modify_button:{dataFull:{config:{default:{title:"Modify",icon:"fa-pencil-square-o",type:""},cmd:{disable:this.state.role_view.btn_modify}},abs_Click:this.onModifyViewRole}}},column1:{tab:{data:this.getDataTab(this.data_tab_column1,this.state.menu_role_select),abs_select:(e,t)=>{this.setState({menu_role_select:t})}}},column2:{user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"role_choose_left"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:this.getListData(this.state.role_user.list_item_left,this.state.role_user.item_select_left,this.state.role_user.list_item_left_search,"left"),search_value:this.state.role_user.list_item_left_search},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearchSelect(e,"role_user","left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:this.getListData(this.state.role_user.list_item_right,this.state.role_user.item_select_right,this.state.role_user.list_item_right_search,"right"),search_value:this.state.role_user.list_item_right_search},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearchSelect(e,"role_user","right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{disable:this.state.role_user.btn_preview_disable}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{disable:this.state.role_user.btn_preview_all_disable}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{disable:this.state.role_user.btn_next_all_disable}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{disable:this.state.role_user.btn_next_disable}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:n.g.getLang("Search")},mode:{height:"520px",noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role_user.table_left.result_total,paging_index:this.state.role_user.table_left.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPage_10Config(this.record_10[0]),abs_PagingActive:e=>{this.pageIndexChangeRoleAdminSearch(e,"role_user","left")},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_left_data:this.getDataTableRoleUser(this.state.role_user.table_left.data,10*(this.state.role_user.table_left.paging_index-1),"left"),table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{search:{placeholder:n.g.getLang("Search")},mode:{height:"520px",noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role_user.table_right.result_total,paging_index:this.state.role_user.table_right.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPage_10Config(this.record_10[0]),abs_PagingActive:e=>{this.pageIndexChangeRoleAdminSearch(e,"role_user","right")},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_right_data:this.getDataTableRoleUser(this.state.role_user.table_right.data,10*(this.state.role_user.table_right.paging_index-1),"right"),table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]},column3:{user_assignment:{title:"Workflow assignment"},user_in_role:{title:"Workflow in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select workflow group",type:"text",class:"col-md-12",code_form_component:"role_choose_left"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:this.getListData(this.state.role_workflow.list_item_left,this.state.role_workflow.item_select_left,this.state.role_workflow.list_item_left_search,"left"),search_value:this.state.role_workflow.list_item_left_search},abs_Change:this.onChangeWorkflowAgm,abs_search:e=>{this.onSearchSelect(e,"role_workflow","left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:this.getListData(this.state.role_workflow.list_item_right,this.state.role_workflow.item_select_right,this.state.role_workflow.list_item_right_search,"right"),search_value:this.state.role_workflow.list_item_right_search},abs_Change:this.onChangeWorkflowAgm,abs_search:e=>{this.onSearchSelect(e,"role_workflow","right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{disable:this.state.role_workflow.btn_preview_disable}}},abs_Click:this.abs_Click_previous_workflow},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{disable:this.state.role_workflow.btn_preview_all_disable}}},abs_Click:this.abs_Click_previous_all_workflow},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{disable:this.state.role_workflow.btn_next_all_disable}}},abs_Click:this.abs_Click_next_all_workflow},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{disable:this.state.role_workflow.btn_next_disable}}},abs_Click:this.abs_Click_next_workflow},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"Workflow ID",id:"TBL_workflow_id",config:{width:"",isFrozen:!1}},{title:"Workflow Name",id:"TBL_WORKFLOW_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:n.g.getLang("Search")},mode:{height:"520px",noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role_workflow.table_left.result_total,paging_index:this.state.role_workflow.table_left.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPage_10Config(this.record_10[0]),abs_PagingActive:e=>{this.pageIndexChangeRoleAdminSearch(e,"role_workflow","left")},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_left_data:this.getDataTableRoleWorkflow(this.state.role_workflow.table_left.data,10*(this.state.role_workflow.table_left.paging_index-1),"left"),table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"Workflow code",id:"TBR_WORKFLOW_CODE",config:{width:"",isFrozen:!1}},{title:"Work Name",id:"TBR_WORKFLOW_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{search:{placeholder:n.g.getLang("Search")},mode:{height:"520px",noHeader:!1}},uPagination:{number_show:0,result_total:this.state.role_workflow.table_right.result_total,paging_index:this.state.role_workflow.table_right.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPage_10Config(this.record_10[0]),abs_PagingActive:e=>{this.pageIndexChangeRoleAdminSearch(e,"role_workflow","right")},abs_setRecordActive:this.pageRecordChangeRoleSearch}}},table_right_data:this.getDataTableRoleWorkflow(this.state.role_workflow.table_right.data,10*(this.state.role_workflow.table_right.paging_index-1),"right"),table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}UNSAFE_componentWillUpdate(e,t){let{role_user:a}=this.state;t.role_user.number_item_check_left>0?a.btn_next_disable=!1:a.btn_next_disable=!0,t.role_user.number_item_check_right>0?a.btn_preview_disable=!1:a.btn_preview_disable=!0,this.state.role_user.btn_next_disable===a.btn_next_disable&&this.state.role_user.btn_preview_disable===a.btn_preview_disable||this.setState({role_user:a});let{role_workflow:i}=this.state;t.role_workflow.number_item_check_left>0?i.btn_next_disable=!1:i.btn_next_disable=!0,t.role_workflow.number_item_check_right>0?i.btn_preview_disable=!1:i.btn_preview_disable=!0,this.state.role_workflow.btn_next_disable===i.btn_next_disable&&this.state.role_workflow.btn_preview_disable===i.btn_preview_disable||this.setState({role_workflow:i})}getListData(e,t,a,i){let o=e.filter(e=>(e.role_name||"").toLowerCase().includes(a.toLowerCase())),s=[],l=!1;for(let n=0;n<o.length;n++){const e=o[n];let a=!1;e.role_code===t&&(a=!0,l=!0),s.push({title:e.role_name,value:Object(u.a)(Object(u.a)({},e),{},{type:i}),selected:a}),n!==o.length-1||l||(s[0].selected=!0)}return s}getDataTab(e,t){return e.map(e=>(e.id===t?e.isShow=!0:e.isShow=!1,e))}render(){const e=Object(m.b)("uFormLoading");return o.a.createElement(o.a.Fragment,null,this.state.isLoading?o.a.createElement(e,null):null,o.a.createElement("div",{style:{display:this.state.visibility}},o.a.createElement(Ae,{stateData:this.getDataForm()})))}getDataTableSearch(e){return e.map(e=>{let t=[];return t.push({icon_item:"fa-eye",title:"View",dataItem:e,abs_Click:this.viewItem}),t.push({icon_item:"fa-trash-o",title:"Delete",dataItem:e,abs_Click:this.removeItemTable}),{data:[{dataFull:{icon:"three-dot"},data:t},{data:e.role_code},{data:e.role_name}],dataItem:e}})}getDataTableRoleUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;return e.map((e,i)=>({data:[{data:t+i+1},{value:e.isCheck||!1,abs_Click:this.handleCheckTable,dataItem:{value:e,index:i,type:a}},{data:e.user_code},{data:e.user_name}],config:{value:!1}}))}getDataTableRoleWorkflow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;return e.map((e,i)=>({data:[{data:t+i+1},{value:e.isCheck||!1,abs_Click:this.handleCheckTableWorkflow,dataItem:{value:e,index:i,type:a}},{data:e.workflow_id},{data:e.name}],config:{value:!1}}))}getDataRoleUserAdd(e,t){return e.map(e=>({user_code:e.user_code,role_code:t}))}async resetTableRoleUser(){let{role_user:e}=this.state,t={paging:{pagingIndex:1,recordItem:10}};await this.callAPI("ncbs_role_get_user_role",{role_code:e.item_select_right,table_search:t}).then(t=>{e.table_right.result_total=t.ncbs_role_get_user_role.total_items,e.table_right.paging_index=1,e.table_right.data=t.ncbs_role_get_user_role.results||[],e.number_item_check_right=0,e.table_right.data.length>0?e.btn_preview_all_disable=!1:e.btn_preview_all_disable=!0}),"all"===e.item_select_left?await this.callAPI("ncbs_role_get_user",{ncbs_user_search:{search_text:""},table_search:t}).then(t=>{e.table_left.result_total=t.ncbs_user_search.total_items,e.table_left.data=t.ncbs_user_search.results||[],e.number_item_check_left=0,e.table_left.data.length>0?e.btn_next_all_disable=!1:e.btn_next_all_disable=!0}):await this.callAPI("ncbs_role_get_user_role",{role_code:e.item_select_left,table_search:t}).then(t=>{e.table_left.result_total=t.ncbs_role_get_user_role.total_items,e.table_left.data=t.ncbs_role_get_user_role.results||[],e.number_item_check_left=0,e.table_left.data.length>0?e.btn_next_all_disable=!1:e.btn_next_all_disable=!0}),this.setState({isLoading:!1,role_user:e})}getDataRoleWorkflowAdd(e,t){return e.map(e=>({workflow_id:e.workflow_id,role_code:t}))}async resetTableRoleWorkflow(){let{role_workflow:e}=this.state,t={paging:{pagingIndex:1,recordItem:10}};await this.callAPI("ncbs_role_get_workflow_role",{role_code:e.item_select_right,table_search:t}).then(t=>{e.table_right.result_total=t.ncbs_role_get_workflow_role.total_items,e.table_right.paging_index=1,e.table_right.data=t.ncbs_role_get_workflow_role.results||[],e.number_item_check_right=0,e.table_right.data.length>0?e.btn_preview_all_disable=!1:e.btn_preview_all_disable=!0}),"all"===e.item_select_left?await this.callAPI("ncbs_role_get_workflow",{ncbs_role_get_workflow:{search_text:""},table_search:t}).then(t=>{e.table_left.result_total=t.ncbs_role_get_workflow.total_items,e.table_left.data=t.ncbs_role_get_workflow.results||[],e.number_item_check_left=0,e.table_left.data.length>0?e.btn_next_all_disable=!1:e.btn_next_all_disable=!0}):await this.callAPI("ncbs_role_get_workflow_role",{role_code:e.item_select_left,table_search:t}).then(t=>{e.table_left.result_total=t.ncbs_role_get_workflow_role.total_items,e.table_left.data=t.ncbs_role_get_workflow_role.results||[],e.number_item_check_left=0,e.table_left.data.length>0?e.btn_next_all_disable=!1:e.btn_next_all_disable=!0}),this.setState({isLoading:!1,role_workflow:e})}convertCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e||0===e||(e=""),e=String(e);let t=e.replace(/,/g,"");return Object(be.a)(t,2)}}var Me=ke;let xe;class Ne extends i.Component{constructor(e){var t;super(e),t=this,this.handleSelectTabID=e=>{this.setState({menu_select:e})},this.handelSearchInvokeLimit=(e,t)=>{var a;let i=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"",o=this.state.invoke_limit_search_value;o[t]=i,this.setState({invoke_limit_search_value:o})},this.handelSearchApproveLimit=(e,t)=>{var a;let i=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"",o=this.state.approve_limit_search_value;o[t]=i,this.setState({approve_limit_search_value:o})},this.handelChangeSearch=(e,t)=>{var a;let i=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"",o=this.state.Col3_Assignment_Search;switch(o[t]=i,t){case"TBL_USER_CODE":this.stateData.column3.table_left.dataFull.Header.data[2].value_search=i;break;case"TBL_USER_NAME":this.stateData.column3.table_left.dataFull.Header.data[3].value_search=i;break;case"TBR_USER_CODE":this.stateData.column3.table_right.dataFull.Header.data[2].value_search=i;break;case"TBR_USER_NAME":this.stateData.column3.table_right.dataFull.Header.data[3].value_search=i}this.setState({Col3_Assignment_Search:o})},this.handelClearSearch=()=>{},this.getTableHeader=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return t.push({title:"Group",code:"module"}),t.push({title:"Caption",code:"tranname"}),e.forEach(e=>{t.push({title:e,code:e})}),t},this.abs_role_name_copying_select=(e,t,a)=>{this.setState({role_name_copying_selected:e.id,column2_role_select:e})},this.abs_Ckeck_invoke_approve_verification=(e,t)=>{this.callAPI("O9_Roles_Invoke_approve_Table_Change_save_approve",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then(e=>{let t=e.O9_Roles_Invoke_approve_Table_Change_save_approve;this.reloadTableWithMenuInvokeApprove(),1===t[0].type?this.showToast("Save",!0):this.showToast("Save",!1)})},this.abs_Ckeck_invoke_approve_operation=(e,t)=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.save){let a=this.state.menu_invoke_aprrove.filter(t=>t.parentid===e.parentid);this.callAPI("O9_Roles_Invoke_approve_Table_Change_save",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then(i=>{let o=i.O9_Roles_Invoke_approve_Table_Change_save;if(this.reloadTableWithMenuInvokeApprove(!0),1===o[0].type){var s=[{txcode:"bo-update-roleBO-JWEBUI",input:{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0,menu_child:a}}];return Object(L.b)(s,{}).then(e=>{this.showToast("Save",!0),this.setState({isLoading:!1})})}this.showToast(o[0].message,!1)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.UNSAFE_componentWillUpdate=(e,t)=>{var a,i,o,s;let l=t.role_action||{};this.stateData.tab.data=this.stateData.tab.data.map(e=>(e.isShow=e.id===t.menu_select,e)),this.stateData.column3.table_in_role_data=t.table_user_profile_user_in_role.map(e=>({config:{value:!1},data:[{data:e.role_name},{data:e.usr_code},{data:e.usr_name}]})),this.stateData.column1.tree_data.tree_data=null===(a=t.menu_invoke_aprrove)||void 0===a?void 0:a.map(e=>({title:e.caption,parent_id:e.parentid,is_open:!1,DOM_elm:null,id:e.cmdid,dataItem:e,abs_click:this.onClickTreeMenuInvokeApprove})),this.stateData.column1.table_up.dataFull.Header.data=t.O9_Roles_InvokeApprove_Table_header.map(e=>({title:e.caption,config:{width:"",isFrozen:!1}})),this.stateData.column1.table_down.dataFull.Header.data=n.g.cloneJson(this.stateData.column1.table_up.dataFull.Header.data),this.stateData.column1.table_down.dataFull.Header.data[1]&&(this.stateData.column1.table_down.dataFull.Header.data[1].title="Self Approve");let r=t.O9_Roles_InvokeApprove_Table_header;this.stateData.column1.table_up_config=r.map((e,t)=>0===t?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:"uTableColumnCheckbox",config:{cmd:{disable:!1===l.save}}}),this.stateData.column1.table_down_config=this.stateData.column1.table_up_config;let c=t.O9_Roles_InvokeApprove_Table_body;this.stateData.column1.table_up_data=[],this.stateData.column1.table_down_data=[];for(let n=0;n<c.length;n++){let e=r.length-1,t=[],a=[];for(let i=0;i<e;i++)0===i&&(t.push({data:c[n+i].role_name}),a.push({data:c[n+i].role_name})),t.push({value:1===c[n+i].invoke,dataItem:c[n+i],abs_Click:this.abs_Ckeck_invoke_approve_operation}),a.push({value:1===c[n+i].approve,dataItem:c[n+i],abs_Click:this.abs_Ckeck_invoke_approve_verification});this.stateData.column1.table_up_data.push(t),this.stateData.column1.table_down_data.push(a),n=n+e-1}if(this.stateData.column2.role_name_adding.dataFull.config.cmd.disable=!0!==t.addAndRemove_btnAddClick,this.stateData.column2.listButton[2].dataFull.config.cmd.disable=!0===t.addAndRemove_btnSaveClick,this.stateData.column2.role_name_copying.dataFull.search_value=t["column2.role_name_copying"],this.stateData.column2.listButton[0].dataFull.config.cmd.visible=!1!==l.save,this.stateData.column2.listButton[2].dataFull.config.cmd.visible=!1!==l.save,this.stateData.column2.listButton[1].dataFull.config.cmd.visible=!1!==l.delete,this.stateData.column3.next.dataFull.config.cmd.disable=!1===l.save,this.stateData.column3.next_all.dataFull.config.cmd.disable=!1===l.save,this.stateData.column3.preview.dataFull.config.cmd.disable=!1===l.save,this.stateData.column3.preview_all.dataFull.config.cmd.disable=!1===l.save,!t.role_name_copying_selected&&t.O9_Roles_Add_and_Remove_Role_Name.length>0)this.setState({role_name_copying_selected:t.O9_Roles_Add_and_Remove_Role_Name[0].id});else{var d;this.stateData.column2.role_name_copying.dataFull.input_value=null===(d=t.column2_role_select)||void 0===d?void 0:d.role_name;let e=t.O9_Roles_Add_and_Remove_Role_Name.filter(e=>(e.role_name||"").toLowerCase().includes(t["column2.role_name_copying"].toLowerCase()));this.stateData.column2.role_name_copying.dataFull.data=e.map((e,a)=>{let i=!1;return e.id===t.role_name_copying_selected&&(i=!0),{title:e.role_name,value:e,selected:i}})}this.stateData.column2.role_name_adding.dataFull.value=t.role_name_adding_input;let h=this.unCheck_user_assign_table_left,_=this.unCheck_user_assign_table_right;!0===this.unCheck_user_assign_table_left&&(this.unCheck_user_assign_table_left=!1),!0===this.unCheck_user_assign_table_right&&(this.unCheck_user_assign_table_right=!1),this.stateData.column3.table_left_data=null===(i=t.O9_Roles_User_assignment_table_left)||void 0===i?void 0:i.filter(e=>{var a,i;return(null===(a=e.usr_id)||void 0===a?void 0:a.toString().includes(t.Col3_Assignment_Search.TBL_USER_CODE||""))&&(null===(i=e.usr_name)||void 0===i?void 0:i.toString().includes(t.Col3_Assignment_Search.TBL_USER_NAME||""))}).map((e,t)=>{var a,i,o;return{data:[{data:t+1},{value:!0!==h&&((null===(a=this.stateData.column3.table_left_data[t])||void 0===a||null===(i=a.data)||void 0===i||null===(o=i[1])||void 0===o?void 0:o.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_left,dataItem:{value:e,index:t}},{data:e.usrcd},{data:e.usrname}],config:{value:!1}}}),this.stateData.column3.table_right_data=t.O9_Roles_User_assignment_table_right.filter(e=>e.usrcd.includes(t.Col3_Assignment_Search.TBR_USER_CODE||"")&&e.usrname.includes(t.Col3_Assignment_Search.TBR_USER_NAME||"")).map((e,t)=>{var a,i,o;return{data:[{data:t+1},{value:!0!==_&&((null===(a=this.stateData.column3.table_right_data[t])||void 0===a||null===(i=a.data)||void 0===i||null===(o=i[1])||void 0===o?void 0:o.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_right,dataItem:{value:e,index:t}},{data:e.usrcd},{data:e.usrname}],config:{value:!1}}}),this.stateData.column3.role_choose_left.dataFull.data=[],this.stateData.column3.role_choose_left.dataFull.search_value=t["column3.role_choose_left"],this.stateData.column3.role_choose_left.dataFull.input_value=null===(o=t.column3_role_left_select)||void 0===o?void 0:o.role_name,t.O9_RolesUser_assignment_Role_Name_Left.filter(e=>null!==e.role_name&&e.role_name.toLowerCase().includes(t["column3.role_choose_left"].toLowerCase())).forEach((e,a)=>{let i=!1;(t.column3_role_left_select.id===e.id||0===a&&void 0===t.column3_role_left_select.id)&&(i=!0),this.stateData.column3.role_choose_left.dataFull.data.push({title:e.role_name,value:{id:e.id,item:e,type:"left"},selected:i})}),this.stateData.column3.role_choose_right.dataFull.search_value=t["column3.role_choose_right"],this.stateData.column3.role_choose_right.dataFull.input_value=null===(s=t.column3_role_right_select)||void 0===s?void 0:s.role_name;let u=t.O9_RolesUser_assignment_Role_Name_Right.filter(e=>null!==e.role_name&&e.role_name.toLowerCase().includes(t["column3.role_choose_right"].toLowerCase()));this.stateData.column3.role_choose_right.dataFull.data=u.map((e,a)=>{let i=!1;return(t.column3_role_right_select.id===e.id||0===a&&void 0===t.column3_role_right_select.id)&&(i=!0),{title:e.role_name,value:{id:e.id,item:e,type:"right"},selected:i}}),this.stateData.column4.listItem=t.O9_Roles_Invoke_limit_menu.map(e=>{let a=!1;return t.Invoke_role_selected===e.id&&(a=!0),{dataFull:{title:e.role_name,dataItem:e,selected:a},abs_Click:this.onClickMenuInvokeLimit}}),this.stateData.column4.table.dataFull.Header.data=t.invoke_limit_header.map(e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.invoke_limit_search_value[e.code]||""})),this.stateData.column4.table_config=t.invoke_limit_header.map((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===l.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}),this.stateData.column4.table_data=t.O9_Roles_InvokeLimit_Table.filter(e=>{let a=!0;for(const i in t.invoke_limit_search_value){let o=t.invoke_limit_search_value[i];e[i].toLowerCase().includes(o.toLowerCase())||(a=!1)}return a}).map((e,a)=>t.invoke_limit_header.map((t,i)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:a,index_col:i,abs_Change:this.abs_change_invoke_table,abs_Submit:this.abs_submit_invoke_table}))),this.stateData.column5.listItem=t.O9_Roles_Invoke_limit_menu.map(e=>{let a=!1;return t.Approve_role_selected===e.id&&(a=!0),{dataFull:{title:e.role_name,dataItem:e,selected:a},abs_Click:this.onClickMenuApproveLimit}}),this.stateData.column5.table.dataFull.Header.data=t.approve_limit_header.map(e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.approve_limit_search_value[e.code]||""})),this.stateData.column5.table_config=t.approve_limit_header.map((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===l.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}),this.stateData.column5.table_data=t.O9_Roles_ApproveLimit_Table.filter(e=>{let a=!0;for(const i in t.approve_limit_search_value){let o=t.approve_limit_search_value[i];e[i].toLowerCase().includes(o.toLowerCase())||(a=!1)}return a}).map((e,a)=>t.approve_limit_header.map((t,i)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:a,index_col:i,abs_Change:this.abs_change_approve_table,abs_Submit:this.abs_submit_approve_table})))},this.CheckAddRoleName=e=>{let t=e.target.value,a=!1;for(const i of this.stateData.column2.role_name_copying.dataFull.data)if(i.title===t||""===t){a=!0;break}""===t&&(a=!0),this.setState({addAndRemove_btnSaveClick:a,role_name_adding_input:t})},this.abs_Check_role_profile_user_assign_left=e=>{this.onClickAssignLeftRow(e);let t=this.stateData.column3.table_left_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_Check_role_profile_user_assign_right=e=>{let t=this.stateData.column3.table_right_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_CheckAll_left=()=>{let e=this.stateData.column3.table_left.dataFull.Header.data[1],t=0;this.stateData.column3.table_left_data.forEach(()=>{!0===e.data.value?this.stateData.column3.table_left_data[t].data[1].value=!1:this.stateData.column3.table_left_data[t].data[1].value=!0,t++}),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_CheckAll_right=()=>{let e=this.stateData.column3.table_right.dataFull.Header.data[1],t=0;this.stateData.column3.table_right_data.forEach(()=>{!0===e.data.value?this.stateData.column3.table_right_data[t].data[1].value=!1:this.stateData.column3.table_right_data[t].data[1].value=!0,t++}),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_change_approve_table=(e,t,a,i)=>{let o=e.target,{selectionStart:s,value:l}=o,n=this.state.O9_Roles_ApproveLimit_Table;let r=n[t.row_idx][t.header.code],c=l;if(r||(r="0.00"),r.includes(".")&&!l.includes(".")){let e=r.lastIndexOf(".");c=l.substring(0,e)+"."+l.substring(e,l.length),"."===c&&(c="")}let d=r;d=d.replace("-","");let h=l.lastIndexOf(".");var _;void 0!==d&&void 0!==l&&(l.indexOf(".")!==l.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(l.length-(null===(_=d)||void 0===_?void 0:_.length)),1===s?h=1:s>l.lastIndexOf(".")&&(h+=1)));n[t.row_idx][t.header.code]=d,this.setState({O9_Roles_ApproveLimit_Table:n},()=>{setTimeout(()=>{o.setSelectionRange(h,h)},50)})},this.abs_change_invoke_table=(e,t,a,i)=>{let o=e.target,{selectionStart:s,value:l}=o,n=this.state.O9_Roles_InvokeLimit_Table;let r=n[t.row_idx][t.header.code],c=l;if(r||(r="0.00"),r.includes(".")&&!l.includes(".")){let e=r.lastIndexOf(".");c=l.substring(0,e)+"."+l.substring(e,l.length),"."===c&&(c="")}let d=r;d=d.replace("-","");let h=l.lastIndexOf(".");var _;void 0!==d&&void 0!==l&&(l.indexOf(".")!==l.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(l.length-(null===(_=d)||void 0===_?void 0:_.length)),1===s?h=1:s>l.lastIndexOf(".")&&(h+=1)));n[t.row_idx][t.header.code]=d,this.setState({O9_Roles_InvokeLimit_Table:n},()=>{setTimeout(()=>{o.setSelectionRange(h,h)},50)})},this.abs_submit_invoke_table=(e,t,a)=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_InvokeLimit_Table;this.callAPI("O9_Roles_InvokeLimit_Table_Change_save",{roleid:this.state.Invoke_role_selected,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then(a=>{if(1===a.O9_Roles_InvokeLimit_Table_Change_save[0].type){this.showToast("Save",!0);var i=[{txcode:"bo-update-roleFOJWEBUI",input:{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,cmdid:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code]),list_currency:this.state.invoke_limit_currency,list_ccr:t[e.row_idx]}}];return Object(L.b)(i,{}).then(e=>{})}this.showToast("Save",!1)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")})},this.abs_submit_approve_table=(e,t,a)=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_ApproveLimit_Table;this.callAPI("O9_Roles_ApproveLimit_Table_Change_save",{roleid:this.state.O9_Roles_Approve_limit_menu_select.roleid,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then(e=>{1===e.O9_Roles_ApproveLimit_Table_Change_save[0].type&&this.showToast("Save",!0)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")})},this.getRoleAction=(e,t)=>{let a=Object(n.w)(),i={};const o=t.list_layout;for(const n of a)for(const t of o)for(const a of t.list_view)for(const t of a.list_input){let a=t.default.name.toLowerCase();if(!0!==i[a]){var s,l,r;let o=null===(s=e[n])||void 0===s||null===(l=s[t.default.codeHidden])||void 0===l||null===(r=l.component)||void 0===r?void 0:r.install;i[a]=o}}return i},this.getAllRoleAction=()=>Object(L.b)([{txcode:"#sys:bo-load-formRole",input:{form_id:this.key_form}},{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then(e=>{var t=n.g.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var a=n.g.foGetData("loadRoleTask",e)||{};void 0===a&&(a={});let i=this.getRoleAction(a,t);this.setState({role_action:i})}),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.showToast=(e,t)=>{var a={};switch(t){case!0:a={class_:"success",icon:"fa fa-check",title:e+" successfully",time:(new Date).getTime()+"",description:e+" Successfully",data:{},action:{}};break;case!1:a={class_:"error",icon:"fa fa-check",title:e||"Action error!",time:(new Date).getTime()+"",description:e||"Action error!",data:{},action:{}};break;default:a={class_:"error",icon:"fa fa-check",title:e,time:(new Date).getTime()+"",description:e,data:{},action:{}}}n.g.pushNotify("notifyToast",a,{}),n.g.callAllScreenListen()},this.callAPI=function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var o=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return o[0].input=Object.assign(o[0].input,a),Object(L.b)(o,{}).then(e=>n.g.foGetData(i,e)?n.g.foGetData(i,e):{error_data:n.g.foGetData("infoError",e),hasError:!0}).finally(e=>{t.setState({isLoading:!1})})},this.AddRoleName=()=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.add&&this.state.role_action.save){let e=this.state.role_name_copying_selected,t=this.state.role_name_adding_input;""!==e&&""!==t&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_INSERT_USER_ROLE",api_data:{role_name:t,role_template_id:e,user_role_status:"N"}}).then(e=>{if(e&&!e.hasError){let e=[{id:0,role_name:"All"}],t=[],a=[];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_SIMPLE_SEARCH_USER_ROLE",api_data:{page_size:0,page_index:0,search_text:""}}).then(i=>{a=i.items||[],e=e.concat(i.items||[]),t=i.items||[];let o=this.state.role_name_copying_selected,s=this.state.role_name_adding_input;this.setState({O9_Roles_Add_and_Remove_Role_Name:a,isAdd_add_and_remove:!1,addAndRemove_btnAddClick:!1,role_name_adding_input:"",addAndRemove_btnSaveClick:!0,O9_RolesUser_assignment_Role_Name_Left:e,O9_RolesUser_assignment_Role_Name_Right:t,O9_Roles_Invoke_limit_menu:a,O9_Roles_Approve_limit_menu:a});let l=-1;for(const e of a)if(e.role_name===s){l=e.id;break}var n=[{txcode:"bo-create-roleJWEBUI",input:{roleID:l,roleName:s,roleCopy:o}}];return Object(L.b)(n,{}).then(e=>{this.showToast("Save",!0)})})}else this.showToast(e.error_data[0].info,!1)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.onSearch=(e,t)=>{this.setState({[t]:e.target.value})},this.abs_Click_next=()=>{this.onClickAssignLeftToRightArray()},this.abs_Click_next_all=()=>{this.onClickAssignLeftToRightAll()},this.abs_Click_previous=()=>{this.onClickAssignRightToLeftArray()},this.abs_Click_previous_all=()=>{this.onClickAssignRightToLeftAll()},this.onClickAssignLeftToRightAll=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter(t=>0===e.filter(e=>e.usrcd===t.data[1].dataItem.value.usrcd).length).map(e=>e.data[1].dataItem.value),a=this.state.column3_role_right_select.roleid;""!==a&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:a,data:t}).then(e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:a}).then(e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:a,role_user_all:t}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let i=this.stateData.column3.table_left.dataFull.Header.data[1],o=0;this.stateData.column3.table_left_data.forEach(()=>{!0===i.data.value&&(this.stateData.column3.table_left_data[o].data[1].value=!1),o++}),i.data.value=!1},this.onClickAssignRightToLeftAll=()=>{let e=this.stateData.column3.table_right_data.map(e=>e.data[1].dataItem.value),t=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:e}).then(e=>{let a=e.O9_Roles_User_Assignment_left_to_right;1===a[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then(e=>{let a=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:a,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:a}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(a[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let a=this.stateData.column3.table_right.dataFull.Header.data[1],i=0;this.stateData.column3.table_right_data.forEach(()=>{!0===a.data.value&&(this.stateData.column3.table_right_data[i].data[1].value=!1),i++}),a.data.value=!1},this.onClickAssignLeftToRightArray=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter(t=>!0===t.data[1].value&&0===e.filter(e=>e.usrcd===t.data[1].dataItem.value.usrcd).length).map(e=>e.data[1].dataItem.value),a=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_left=!0,""!==a&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:a,data:t}).then(e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:a}).then(e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:a,role_user_all:t}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let i=this.stateData.column3.table_left.dataFull.Header.data[1],o=0;this.stateData.column3.table_left_data.forEach(()=>{!0===i.data.value&&(this.stateData.column3.table_left_data[o].data[1].value=!1),o++}),i.data.value=!1},this.onClickAssignLeftRow=e=>{this.callAPI("user_profile_user_in_role",e.value).then(e=>{var t;let a=(null===e||void 0===e||null===(t=e.user_profile_user_in_role)||void 0===t?void 0:t.data)||[];this.setState({table_user_profile_user_in_role:a})})},this.onClickAssignLeftToRight=e=>{let t=this.state.column3_role_right_select.roleid,a=this.state.O9_Roles_User_assignment_table_right;for(let i=0;i<a.length;i++){if(a[i].usrcd===e.usrcd)return}""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:t,data:[{usrid:e.usrid}]}).then(e=>{let a=e.O9_Roles_User_Assignment_left_to_right;1===a[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then(e=>{let a=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:a,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:a}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):this.showToast(a[0].message,!1)})},this.onClickAssignRightToLeft=e=>{let t=this.refs.ref_assignment_list_role_name_right.value;""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:[{usrid:e.usrid}]}).then(e=>{let a=e.O9_Roles_User_Assignment_left_to_right;1===a[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then(e=>{let a=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:a,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:a}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):this.showToast(a[0].message,!1)})},this.onClickAssignRightToLeftArray=e=>{let t=this.stateData.column3.table_right_data.filter(e=>!0===e.data[1].value).map(e=>e.data[1].dataItem.value),a=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==a&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-a,data:t}).then(e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:a}).then(e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:a,role_user_all:t}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let i=this.stateData.column3.table_right.dataFull.Header.data[1],o=0;this.stateData.column3.table_right_data.forEach(()=>{!0===i.data.value&&(this.stateData.column3.table_right_data[o].data[1].value=!1),o++}),i.data.value=!1},this.onChangeUserAgm=(e,t)=>{switch(e.type){case"left":if(e.id===this.state.column3_role_right_select.id)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then(t=>{let a=this.state.O9_RolesUser_assignment_Role_Name_Left.filter(t=>t.roleid===e.id),i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_left:i,column3_role_left_select:a[0]})});break;case"right":if(e.id===this.state.column3_role_left_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then(t=>{let a=this.state.O9_RolesUser_assignment_Role_Name_Right.filter(t=>t.roleid===e.id),i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,column3_role_right_select:a[0]})})}},this.onChangeCurrency=e=>{e||0===e||(e="");let t=(e=String(e)).replace(/,/g,"");return t.length>16&&(t=t.slice(t.length-16,t.length)),Object(be.a)(t,2)},this.getValueCurrency=e=>void 0===e||null===e||""===e?"":Number(e.replace(/,/g,"")),this.saveInvokeTable=()=>{},this.onClickMenuInvokeLimit=e=>{let t=e.dataFull.dataItem;this.callAPI("O9_Roles_InvokeLimit_Table",t).then(e=>{void 0===e&&(e={});let a=e.O9_Roles_InvokeLimit_Table;this.setState({O9_Roles_Invoke_limit_menu_select:t,Invoke_role_selected:t.roleid},()=>{this.reloadTableInvokeLimit(a)})})},this.reloadTableInvokeLimit=e=>{if(e){let t=e.currency||[],a=e.data;for(const e of t)for(let t=0;t<a.length;t++){const i=a[t];i[e]=this.convertCurrency(i[e]),i.index_row=t}this.setState({O9_Roles_InvokeLimit_Table:a,invoke_limit_header:this.getTableHeader(t),invoke_limit_currency:t})}},this.onClickMenuApproveLimit=e=>{e=e.dataFull.dataItem,this.callAPI("O9_Roles_ApproveLimit_Table",e).then(t=>{if(t){let a=t.O9_Roles_ApproveLimit_Table,i=a.currency,o=a.data;for(const e of i)for(let t=0;t<o.length;t++){const a=o[t];a[e]=this.convertCurrency(a[e]),a.index_row=t}this.setState({O9_Roles_ApproveLimit_Table:o,O9_Roles_Approve_limit_menu_select:e,Approve_role_selected:e.roleid,approve_limit_header:this.getTableHeader(i)})}})},this.onClickTreeMenuInvokeApprove=(e,t)=>{t=t.dataItem;let a=this.state.menu_invoke_aprrove;t.isOpen=!t.isOpen;let i=[],o=[];this.callAPI("O9_Roles_InvokeApprove_Table_header",t).then(e=>{i=[{cmdid:"0",caption:"Role Name"},{cmdid:"0",caption:"Self Invoke"}],i=i.concat(e.O9_Roles_InvokeApprove_Table_header),i=i.filter(e=>null!==e.cmdid),this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then(e=>{o=e.O9_Roles_InvokeApprove_Table_body,this.setState({menu_invoke_aprrove:a,O9_Roles_InvokeApprove_Table_body:o,O9_Roles_InvokeApprove_Table_header:i,menu_invoke_aprrove_select:t})})})},this.removeRoleName=()=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.delete){let e=this.state.role_name_copying_selected;""!==e&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_DELETE_USER_ROLE",api_data:{id:e}}).then(e=>{if(e&&!e.hasError){let e=[{id:0,role_name:"All"}],t=[],a=[];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_SIMPLE_SEARCH_USER_ROLE",api_data:{page_size:0,page_index:0,search_text:""}}).then(i=>{a=i.items||[],e=e.concat(i.items||[]);let o=a[0];t=i.items||[];let s=this.state.role_name_copying_selected;this.setState({O9_Roles_Add_and_Remove_Role_Name:a,isAdd_add_and_remove:!1,isDelete_add_and_remove:!1,delete_err:"",role_name_copying_selected:o.roleid,column2_role_select:o,O9_RolesUser_assignment_Role_Name_Left:e,O9_RolesUser_assignment_Role_Name_Right:t,O9_Roles_Invoke_limit_menu:a,O9_Roles_Approve_limit_menu:a}),this.showToast("Save",!0);var l=[{txcode:"bo-delete-roleJWEBUI",input:{roleID:s}}];return Object(L.b)(l,{}).then(e=>{})})}else this.showToast(e.error_data[0].info,!1),this.setState({delete_err:e.error_data[0].info||""})})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},xe=Object(m.c)("jwebui_roleProfile"),this.key_form="BO_015003003",this.data_key_form={BO_015003003:{title:"ADM-Roles Profile",col_id:"column1"},BO_015003008:{title:"ADM-Invoke Limit",col_id:"column4"},BO_015003009:{title:"ADM-Approve Limit",col_id:"column5"}},this.state={menu_parent_select:"ADM - Roles Profile",menu_select:this.data_key_form[this.key_form].col_id,"column3.role_choose_right":"","column3.role_choose_left":"","column2.role_name_copying":"",column3_role_left_select:0,role_name_adding_input:"",role_name_copying_selected:"",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,menu_invoke_aprrove:[],O9_Roles_InvokeApprove_Table_header:[],O9_Roles_InvokeApprove_Table_body:[],menu_invoke_aprrove_select:{},O9_Roles_Add_and_Remove_Role_Name:[],O9_Roles_Add_and_Remove_Role_Name_select:"",O9_Roles_User_assignment_table_left:[],O9_Roles_User_assignment_table_right:[],O9_RolesUser_assignment_Role_Name_Left:[],O9_RolesUser_assignment_Role_Name_Right:[],user_assignment_select:"",O9_Roles_Invoke_limit_menu:[],O9_Roles_Invoke_limit_menu_select:{},O9_Roles_Approve_limit_menu:[],O9_Roles_Approve_limit_menu_select:{},O9_Roles_InvokeLimit_Table:[],O9_Roles_ApproveLimit_Table:[],table_user_profile_user_in_role:[],invoke_limit_header:[],approve_limit_header:[],Col3_Assignment_Search:{},invoke_limit_search_value:{},approve_limit_search_value:{}},this.menu_form=[{title:"Roles Profile",child:["Invoke - Aprrove","Add - Remove","User Assignment"]},{title:"Invoke Limit",child:[]},{title:"Approve Limit",child:[]}],this.user_profile=n.g.context_get("user_acc"),this.stateData={form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},cmd:{visibility:""}}},tab:{data:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],abs_select:(e,t)=>{this.setState({menu_select:t})}},column1:{tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},title_table_up:"OPEARTION",table_up:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_up_data:[],table_up_config:[],title_table_down:"VERIFICATION",table_down:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_down_data:[],table_down_config:[]},column4:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchInvokeLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}]},column5:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchApproveLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]},column2:{role_name_adding:{dataFull:{config:{default:{title:"Role Name (for adding)",type:"text",class:"col-sm-5",code_form_component:"role_name_adding"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:e=>{this.CheckAddRoleName(e)}},listButton:[{dataFull:{config:{default:{title:"Add",icon:"add_circle_outline"},cmd:{}}},abs_Click:()=>{this.setState({addAndRemove_btnAddClick:!0})}},{dataFull:{config:{default:{title:"Delete",icon:"highlight_off"},cmd:{}}},abs_Click:this.removeRoleName},{dataFull:{config:{default:{title:"Save",type:"primary",icon:"check_circle_outline"},cmd:{}}},abs_Click:this.AddRoleName}],role_name_copying:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Role Name (for copying or deleting)",type:"text",class:"col-sm-5",code_form_component:"role_name_copying"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:[],input_value:"123",search_value:""},abs_Change:this.abs_role_name_copying_select,abs_search:e=>{this.onSearch(e,"column2.role_name_copying")}}},column3:{table_in_role:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"User Code",config:{width:"",isFrozen:!1}},{title:"User Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_in_role_data:[{data:[{data:"2"},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_in_role_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_left},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:n.g.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_left_data:[{data:[{data:"2"},{value:!1,abs_Click:this.abs_Ckeck},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_right},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:n.g.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_right_data:[{data:[],config:{value:!0}}],table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}async componentDidMount(){n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key),await this.getAllRoleAction();let e=[],t=[{id:0,role_name:"All"}],a=[],i=[],o=[];await this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_SIMPLE_SEARCH_USER_ROLE",api_data:{page_size:0,page_index:0,search_text:""}}).then(i=>{e=i.items||[],t=t.concat(i.items||[]),a=i.items||[]}),t.length>0&&await this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:null,usr_id:null}}).then(e=>{i=e.items||[]}),a.length>0&&await this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_ADVANCED_SEARCH_ROLE_OF_USER",api_data:{page_size:0,page_index:0,role_id:a[0].role_id,usr_id:null}}).then(e=>{o=e.items||[]}),this.setState({role_left:t[0],column3_role_right_select:a[0],column3_role_left_select:t[0],column2_role_select:e[0],O9_Roles_Add_and_Remove_Role_Name:e,O9_RolesUser_assignment_Role_Name_Left:t,O9_RolesUser_assignment_Role_Name_Right:a,O9_Roles_User_assignment_table_left:i,O9_Roles_User_assignment_table_right:o,O9_Roles_Invoke_limit_menu:e,O9_Roles_Approve_limit_menu:e,isLoading:!1},()=>{})}render(){const e=Object(m.b)("uFormLoading");return o.a.createElement(o.a.Fragment,null,this.state.isLoading?o.a.createElement(e,null):null,o.a.createElement("div",{style:{display:this.state.visibility}},o.a.createElement(xe,{stateData:this.stateData})))}convertCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e||0===e||(e=""),e=String(e);let t=e.replace(/,/g,"");return Object(be.a)(t,2)}reloadTableWithMenuInvokeApprove(e){let t=this.state.menu_invoke_aprrove_select,a=[];this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then(t=>{a=t.O9_Roles_InvokeApprove_Table_body,this.setState({O9_Roles_InvokeApprove_Table_body:a,isLoading:!!e})})}}var we=Ne;let Se=8;const Te={book_rate:"BK rate",transfer_bid_rate:"TB rate",transfer_ask_rate:"TA rate",cash_ask_rate:"CA rate",cash_bid_big_rate:"CB rate",cs_rate:"CS rate",in_rate:"IN rate",jp_rate:"JP rate"},Ee={book_rate:"Reference rate",transfer_bid_rate:"Buying T/T rate",transfer_ask_rate:"Selling T/T rate",cash_ask_rate:"Selling Note rate",cash_bid_big_rate:"Buying Note rate",cash_bid_small_rate:"Sight bill rate"};class Oe extends i.Component{constructor(e){var t,a;super(e),t=this,this.getTableHeader=()=>{switch(this.TABLE_TYPE){case"KTB":return this.getTableHeaderKTB();default:return this.getTableHeaderDefault()}},this.getTableConfig=()=>{switch(this.TABLE_TYPE){case"KTB":return this.getTableConfigKTB();default:return this.getTableConfigDefault()}},this.onClickViewModify=async()=>{this.getAllRoleAndAction().then(()=>{let{role_action:e}=this.state;e.view_modify?(this.stateData.approve.dataFull.config.cmd.disable=!1,this.stateData.reject.dataFull.config.cmd.disable=!1,this.resetDataTable(),this.setState({isShowHistory:!0})):this.showToast("View_Modify: #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.onClickModify=()=>{this.setState({modify:!this.state.modify}),this.disable=!this.disable},this.getConfigButtonModify=(e,t)=>{let a=(null===t||void 0===t?void 0:t.role_action)||{};return{dataFull:{config:{default:{title:e,type:"",class:"",icon:"fa-pencil-square-o"},cmd:{disable:!this.disable,visible:!1!==a.modify}},dataItem:{test:"321"}},abs_Click:this.onClickModify}},this.getValueEdit=e=>e?e.base_currency_rate+" "+n.g.getLang("foreignExchangeRate_lang_by")+" "+e.user_name:"",this.getStatusEdit=(e,t)=>{if(!0===e){if(!0===this.isModifyLocal&&!0===t)return this.disable}else if(!1===this.isModifyLocal||!0===t)return this.disable;return!0},this.onChangeItemTable=(e,t,a,i)=>{let o=e.target,{selectionStart:s,value:l}=o,n=[],r="-1",c=t.type;t.isLocal?(n=this.state.O9_foreign_exchange_rate_local_table,r=this.O9_foreign_exchange_rate_local_table_logic[a][c]):(n=this.state.O9_foreign_exchange_rate_table,r=this.O9_foreign_exchange_rate_table_logic[a][c]);let d=n[a][c],h=d,_=l;if(h.includes(".")&&!l.includes(".")){let e=h.lastIndexOf(".");_=l.substring(0,e)+"."+l.substring(e,l.length),"."===_&&(_="")}let u=d,g=l.lastIndexOf(".");var m;l.indexOf(".")!==l.lastIndexOf(".")?g=u.length-Se:(u=this.onChangeCurrency(_),u?(g=s-((null===l||void 0===l?void 0:l.length)-(null===(m=u)||void 0===m?void 0:m.length)),1===s?g=1:s>l.lastIndexOf(".")&&(g+=1)):(u="0.00000000",g=1));n[a][c]=u;let{editedItems:p}=this.state,f={currency_code:n[a].currency_code,exchange_rate_type:this.getexchange_rate_type(c),base_currency_rate:u,branch_id_fx:t.isLocal?this.branch_user_id:this.HO_branch_id};r!==u?p=this.pushEditedItem(f):r===u&&(p=this.removeEditedItem(f)),t.isLocal?this.setState({O9_foreign_exchange_rate_local_table:n}):this.setState({O9_foreign_exchange_rate_table:n}),this.setState({editedItems:p},()=>{setTimeout(()=>{o.setSelectionRange(g,g)},50)})},this.handleOpenConfirm=(e,t,a)=>{this.getAllRoleAndAction().then(()=>{let{role_action:t}=this.state;if(t.view_modify){var a;let t={title:n.g.getLang("sysConfirmApproveRejectTitle"),message_save:n.g.getLang("sysConfirmApproveRejectMessage"),content:[{list_component:[{component_name:n.g.getLang("foreignExchangeRate_approve_reject_item_title").replace("@{param1}",null===(a=e.data_change)||void 0===a?void 0:a.user_name).replace("@{param2}",this.getTypeItem(e.type)).replace("@{param3}",e.currency_code),message:{title_before:e.before_value,title_status:n.g.getLang("foreignExchangeRate_lang_to"),title_after:e.after_value}}]}]};n.g.compareInfo(t,[{name:"sysConfirmReject",icon:"",color:"info",val:!1},{name:"sysConfirmApprove",color:"primary",icon:"",val:!0}],void 0,t=>{this.stateData.form.cmd.isLoading=!0,!0===t?this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_APR",api_data:{data_modify:[{currency_code:e.data_change.currency_code,exchange_rate_type:e.data_change.exchange_rate_type,branch_id_fx:e.data_change.branch_id}]}}).then(e=>{e&&!e.hasError?(this.showToast("Approve",!0),this.resetDataTable()):this.showToast("Approve",!1)}):!1===t&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_REJECT",api_data:{data_modify:[{currency_code:e.data_change.currency_code,exchange_rate_type:e.data_change.exchange_rate_type,branch_id_fx:e.data_change.branch_id}]}}).then(e=>{e&&!e.hasError?(this.showToast("Reject",!0),this.resetDataTable()):this.showToast("Reject",!1)}),this.stateData.form.cmd.isLoading=!1,this.setState({isUpdate:!0}),setTimeout(()=>{this.setState({isUpdate:!1})},1e3)})}else this.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.resetDataTable=()=>{switch(this.TABLE_TYPE){case"KTB":this.resetDataTableKTB();break;default:this.resetDataTableDefault()}},this.onClickApproveAll=()=>{this.getAllRoleAndAction().then(()=>{let{role_action:e}=this.state;if(e.view_modify){let e={title:n.g.getLang("sysConfirmApprove"),content:n.g.getLang("sysConfirmApproveAllContent")};n.g.confirmInfo(e,[{name:"sysConfirmCancel",icon:"",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"",val:!0}],void 0,e=>{if(!0===e){this.stateData.form.cmd.isLoading=!0;let e=this.state.table_HO_modify.concat(this.state.table_local_modify);this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_APR",api_data:{data_modify:e}}).then(e=>{e&&!e.hasError?(this.showToast("Approve",!0),this.resetDataTable()):this.showToast("Approve",!1)})}})}else this.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.onClickRejectAll=()=>{this.getAllRoleAndAction().then(()=>{let{role_action:e}=this.state;if(e.view_modify){let e={title:n.g.getLang("sysConfirmReject"),content:n.g.getLang("sysConfirmRejectAllContent")};n.g.confirmInfo(e,[{name:"sysConfirmCancel",icon:"",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"",val:!0}],void 0,e=>{if(!0===e){this.stateData.form.cmd.isLoading=!0;let e=this.state.table_HO_modify.concat(this.state.table_local_modify);this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_REJECT",api_data:{data_modify:e}}).then(e=>{e&&!e.hasError?(this.showToast("Reject",!0),this.resetDataTable()):this.showToast("Reject",!1)})}})}else this.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.pushEditedItem=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.state.editedItems,i=0;for(;i<a.length&&(a[i].currency_code!==e.currency_code||a[i].exchange_rate_type!==e.exchange_rate_type);i++);return i==a.length?a.push(e):a[i]=e,a},this.removeEditedItem=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.state.editedItems,i=0;for(;i<a.length;i++)a[i].currency_code===e.currency_code&&a[i].exchange_rate_type===e.exchange_rate_type&&a.splice(i,1);return a},this.getRoleAction=(e,t)=>{let a=Object(n.w)(),i={};const o=t.list_layout;for(const n of a)for(const t of o)for(const a of t.list_view)for(const t of a.list_input){let a=t.default.name.toLowerCase();if(!0!==i[a]){var s,l,r;let o=null===(s=e[n])||void 0===s||null===(l=s[t.default.codeHidden])||void 0===l||null===(r=l.component)||void 0===r?void 0:r.install;i[a]=o,void 0!==t.default.codeHidden&&(i[a+"_codeHidden"]=t.default.codeHidden)}}return i},this.componentDidMount=()=>{this.getAllRoleAndAction().then(()=>{this.getbranch_idHO()}),n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key)},this.getAllRoleAndAction=()=>Object(L.b)([{txcode:"#sys:bo-load-formRole",input:{form_id:this.key_form}},{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then(e=>{var t=n.g.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var a=n.g.foGetData("loadRoleTask",e)||{};void 0===a&&(a={});let i=this.getRoleAction(a,t);this.setState({role_action:i})}),this.getbranch_idHO=()=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"ADM_GET_HOST_BRANCH_ID"}).then(e=>{e&&(this.HO_branch_id=Number.parseInt(e.branch_id_ho),Number(this.HO_branch_id)&&this.resetDataTable())})},this.changeKeyLanguage=e=>{let t={title_:n.g.getLang("foreignExchangeRate_title"),des_:n.g.getLang("foreignExchangeRate_des"),btn_save:n.g.getLang("foreignExchangeRate_btnSave"),btn_modifiy:n.g.getLang("foreignExchangeRate_btnModify"),tab_base:n.g.getLang("foreignExchangeRate_tabBase"),tab_local:n.g.getLang("foreignExchangeRate_tabLocal"),currency_code:n.g.getLang("foreignExchangeRate_currencyCode"),currency_shortID:n.g.getLang("foreignExchangeRate_currencyShortID"),rate:n.g.getLang("foreignExchangeRate_rate"),last_update:n.g.getLang("foreignExchangeRate_lastUpdate"),last_update_local:n.g.getLang("foreignExchangeRate_lastUpdateLocal")};if(void 0!==e)return t;let a=this.state.infoA;a.title=n.g.getLang("foreignExchangeRate_title"),a.des=n.g.getLang("foreignExchangeRate_des"),a.lang_form.vi=n.g.getLang("foreignExchangeRate_title"),a.lang_form.en=n.g.getLang("foreignExchangeRate_title"),this.setState({languages:t,infoA:a})},this.callAPI=function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var o=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return o[0].input=Object.assign(o[0].input,a),Object(L.b)(o,{}).then(e=>n.g.foGetData(i,e)?n.g.foGetData(i,e):{error_data:n.g.foGetData("infoError",e),hasError:!0}).finally(e=>{t.setState({isLoading:!1})})},this.onChangeCurrency=e=>{e||0===e||(e="");let t=(e=String(e)).replace(/,/g,"");return Object(be.a)(t,Se)},this.getValueCurrency=e=>{let t=e.split(".");return void 0===t[0]&&(t[0]="0"),void 0===t[1]&&(t[1]="0"),t[0]=t[0].replace(/[^\d]/gm,""),t[1]=t[1].replace(/[^\d]/gm,""),Number(t[0]+"."+t[1])},this.getValueCurrencyNumber=e=>void 0===e||null===e||""===e?"":Number(e.toString().replace(/,/g,"")),this.onClickSave=()=>{let e=this.state.editedItems;for(let t of e)t.base_currency_rate=this.getValueCurrencyNumber(t.base_currency_rate);this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_MDF",api_data:{data_modify:e}}).then(e=>{if(e&&!e.hasError)this.showToast("Save",!0),this.resetDataTable(),this.setState({editedItems:[]}),this.setState({is_disable:!0,isUpdate:!0,modify:!1}),this.disable=!0,setTimeout(()=>{this.setState({isUpdate:!1})},1e3);else{let t="Save : ";void 0!==e.infoError&&e.infoError.map(e=>t+="#"+e.key+": "+e.info),this.showToast(t,!1)}})},this.showToast=(e,t)=>{var a={};switch(t){case!0:a={class_:"success",icon:"fa fa-check",title:e+" successfully",time:(new Date).getTime()+"",description:e+" Successfully",data:{},action:{}};break;case!1:a={class_:"error",icon:"fa fa-check",title:e+" error",time:(new Date).getTime()+"",description:e+" error",data:{},action:{}};break;case"error":a={class_:"error",icon:"fa fa-check",title:e,time:(new Date).getTime()+"",description:e,data:{},action:{}}}n.g.pushNotify("notifyToast",a,{}),n.g.callAllScreenListen()},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})};let i=this.changeKeyLanguage("start");this.dateFormat=n.g.getParameterSystem("DATE_FORMAT");let o=n.g.getParameterSystem("015003011_DECIMAL_NUMBER");o&&(Se=Number(o)),this.formRender=Object(m.c)("O9_ForeignExchangeRate"),this.key_form="BO_015003011",this.disable=!0,this.isModifyLocal=!1,void 0!==n.g.getParameterSystem("FX_RATE_MODIFY_LOCAL")&&(this.isModifyLocal=n.g.getParameterSystem("FX_RATE_MODIFY_LOCAL")),this.TABLE_TYPE="",void 0!==n.g.getParameterSystem("FX_RATE_TABLE_TYPE")&&(this.TABLE_TYPE=n.g.getParameterSystem("FX_RATE_TABLE_TYPE")),this.branch_user_id=(null===(a=n.g.context_get("user_acc"))||void 0===a?void 0:a.branch_id)||-1,this.HO_branch_id=-1,this.O9_foreign_exchange_rate_table_logic=[],this.O9_foreign_exchange_rate_local_table_logic=[],this.stateData={form:{config:{default:{title:i.title_,title_sub:""}},cmd:{visibility:"",isLoading:!0}},save_rate:{dataFull:{config:{default:{title:i.btn_save,type:"submit",class:"",icon:"save"},cmd:{disable:!0}},dataItem:{test:"123"}},abs_Click:this.onClickSave},view_modify:{dataFull:{config:{default:{title:"View modify",type:"",class:"",icon:""},cmd:{disable:!1,visible:!1}},dataItem:{test:"123"}},abs_Click:this.onClickViewModify},approve:{dataFull:{config:{default:{title:"Approve (ALL)",type:"",class:"",icon:""},cmd:{disable:!0,visible:!1}},dataItem:{test:"123"}},abs_Click:this.onClickApproveAll},reject:{dataFull:{config:{default:{title:"Reject (All)",type:"",class:"",icon:""},cmd:{disable:!0,visible:!1}},dataItem:{test:"123"}},abs_Click:this.onClickRejectAll},modify_rate:this.getConfigButtonModify(i.btn_modifiy),dateTimeUpdate:{title:i.last_update,date:""},last_update_local:{title:i.last_update_local,date:""},tab:[{title:i.tab_base,id:"1"},{title:i.tab_local,id:"2"}],table:{dataFull:{Header:{data:this.getTableHeader(),config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}},table_config:this.getTableConfig(),table_local:{dataFull:{Header:{data:this.getTableHeader(),config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}},table_local_config:this.getTableConfig(),table_data:this.getConfigTableData([]),table_local_data:[]},this.state={isShowHistory:!1,visibility:"",languages:i,tab_active:1,is_disable:!0,modify:!1,infoA:{lang_form:{vi:n.g.getLang("foreignExchangeRate_title"),en:n.g.getLang("foreignExchangeRate_title")},title:n.g.getLang("foreignExchangeRate_title"),des:n.g.getLang("foreignExchangeRate_title"),openOne:"true",form_code:this.key_form,ofModal:!1},O9_foreign_exchange_rate_table:[],table_HO_modify:[],table_local_modify:[],O9_foreign_exchange_rate_local_table:[],last_update:"",isUpdate:!1,last_update_local:"",editedItems:[],isLoadingDefault:!1}}getTableConfigDefault(){return[{type:"uTableColumnDefault",config:{mode:"left"}},{type:"uTableColumnDefault",config:{mode:"right"}},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"}]}getTableConfigKTB(){return[{type:"uTableColumnDefault",config:{mode:"left"}},{type:"uTableColumnDefault",config:{mode:"right"}},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"}]}getTableHeaderDefault(){return[{title:"Currency code",config:{width:"",isFrozen:!1}},{title:"Short ID",config:{width:"",isFrozen:!1}},{title:"BK rate",config:{width:"",isFrozen:!1}},{title:"TB rate",config:{width:"",isFrozen:!1}},{title:"TA rate",config:{width:"",isFrozen:!1}},{title:"CA rate",config:{width:"",isFrozen:!1}},{title:"CB rate",config:{width:"",isFrozen:!1}},{title:"CS rate",config:{width:"",isFrozen:!1}},{title:"IN rate\t",config:{width:"",isFrozen:!1}},{title:"JP rate",config:{width:"",isFrozen:!1}}]}getTableHeaderKTB(){return[{title:"Currency code",config:{width:"",isFrozen:!1}},{title:"Short ID",config:{width:"",isFrozen:!1}},{title:"Reference rate",config:{width:"",isFrozen:!1}},{title:"Sight bill rate",config:{width:"",isFrozen:!1}},{title:"Buying T/T rate",config:{width:"",isFrozen:!1}},{title:"Selling T/T rate",config:{width:"",isFrozen:!1}},{title:"Buying Note rate",config:{width:"",isFrozen:!1}},{title:"Selling Note rate",config:{width:"",isFrozen:!1}}]}getConfigTableData(e,t,a,i){return e.map((e,o)=>this.getEachDataRowConfig(e,o,t,a,i))}getEachDataRowConfig(e,t,a,i,o){var s,l,n,r,c,d,h,_,u,g,m,p,f,v;switch(this.TABLE_TYPE){case"KTB":return[{data:e.currency_code},{data:e.short_id},{data:e.book_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.book_rate_modify,type:"book_rate",currency_code:e.currency_code,before_value:e.book_rate,after_value:null===(s=e.book_rate_modify)||void 0===s?void 0:s.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.book_rate_modify)}},{data:e.cash_bid_small_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.cash_bid_small_rate_modify,type:"cash_bid_small_rate",currency_code:e.currency_code,before_value:e.cash_bid_small_rate,after_value:null===(l=e.cash_bid_small_rate_modify)||void 0===l?void 0:l.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.cash_bid_small_rate_modify)}},{data:e.transfer_bid_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.transfer_bid_rate_modify,type:"transfer_bid_rate",currency_code:e.currency_code,before_value:e.transfer_bid_rate,after_value:null===(n=e.transfer_bid_rate_modify)||void 0===n?void 0:n.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.transfer_bid_rate_modify)}},{data:e.transfer_ask_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.transfer_ask_rate_modify,type:"transfer_ask_rate",currency_code:e.currency_code,before_value:e.transfer_ask_rate,after_value:null===(r=e.transfer_ask_rate_modify)||void 0===r?void 0:r.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.transfer_ask_rate_modify)}},{data:e.cash_bid_big_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.cash_bid_big_rate_modify,type:"cash_bid_big_rate",currency_code:e.currency_code,before_value:e.cash_bid_big_rate,after_value:null===(c=e.cash_bid_big_rate_modify)||void 0===c?void 0:c.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.cash_bid_big_rate_modify)}},{data:e.cash_ask_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.cash_ask_rate_modify,type:"cash_ask_rate",currency_code:e.currency_code,before_value:e.cash_ask_rate,after_value:null===(d=e.cash_ask_rate_modify)||void 0===d?void 0:d.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.cash_ask_rate_modify)}}];default:return[{data:e.currency_code},{data:e.short_id},{data:e.book_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.book_rate_modify,type:"book_rate",currency_code:e.currency_code,before_value:e.book_rate,after_value:null===(h=e.book_rate_modify)||void 0===h?void 0:h.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.book_rate_modify)}},{data:e.transfer_bid_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.transfer_bid_rate_modify,type:"transfer_bid_rate",currency_code:e.currency_code,before_value:e.transfer_bid_rate,after_value:null===(_=e.transfer_bid_rate_modify)||void 0===_?void 0:_.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.transfer_bid_rate_modify)}},{data:e.transfer_ask_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.transfer_ask_rate_modify,type:"transfer_ask_rate",currency_code:e.currency_code,before_value:e.transfer_ask_rate,after_value:null===(u=e.transfer_ask_rate_modify)||void 0===u?void 0:u.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.transfer_ask_rate_modify)}},{data:e.cash_bid_big_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.cash_bid_big_rate_modify,type:"cash_bid_big_rate",currency_code:e.currency_code,before_value:e.cash_bid_big_rate,after_value:null===(g=e.cash_bid_big_rate_modify)||void 0===g?void 0:g.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.cash_bid_big_rate_modify)}},{data:e.cash_ask_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.cash_ask_rate_modify,type:"cash_ask_rate",currency_code:e.currency_code,before_value:e.cash_ask_rate,after_value:null===(m=e.cash_ask_rate_modify)||void 0===m?void 0:m.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.cash_ask_rate_modify)}},{data:e.cs_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.cs_rate_modify,type:"cs_rate",currency_code:e.currency_code,before_value:e.cs_rate,after_value:null===(p=e.cs_rate_modify)||void 0===p?void 0:p.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.cs_rate_modify)}},{data:e.in_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.in_rate_modify,type:"in_rate",currency_code:e.currency_code,before_value:e.in_rate,after_value:null===(f=e.in_rate_modify)||void 0===f?void 0:f.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.in_rate_modify)}},{data:e.jp_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.jp_rate_modify,type:"jp_rate",currency_code:e.currency_code,before_value:e.jp_rate,after_value:null===(v=e.jp_rate_modify)||void 0===v?void 0:v.base_currency_rate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.jp_rate_modify)}}]}}getTypeItem(e){switch(this.TABLE_TYPE){case"KTB":return Ee[e];default:return Te[e]}}resetDataTableDefault(){let e=[],t=[],a=[];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_VIEW"}).then(i=>{if(i){a=i.data_modify||[];let o=["book_rate","transfer_bid_rate","transfer_ask_rate","cash_ask_rate","cash_bid_big_rate","cm_rate","cs_rate","in_rate","jp_rate"],s=[],l=[],n=[],r=[];for(const e of a)if(!1===this.isModifyLocal||!0===this.isModifyLocal&&this.HO_branch_id===this.branch_user_id){if(e.branch_id===this.HO_branch_id){let t={currency_code:e.currency_code,exchange_rate_type:e.exchange_rate_type,branch_id_fx:e.branch_id};s.push(t),n.push(e)}}else if(this.isModifyLocal&&this.HO_branch_id!==this.branch_user_id&&e.branch_id===this.branch_user_id){let t={currency_code:e.currency_code,exchange_rate_type:e.exchange_rate_type,branch_id_fx:e.branch_id};l.push(t),r.push(e)}this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_id_fx:this.HO_branch_id}}).then(t=>{if(t){e=t.fx_rate_data||[];for(const t of e){for(const e of o)t[e]=this.convertCurrency(t[e]);if(this.HO_branch_id===this.branch_user_id||!1===this.isModifyLocal)for(const e of n)e.currency_code===t.currency_code&&(e.base_currency_rate=this.convertCurrency(e.base_currency_rate),t[this.getCodeFormType(e.exchange_rate_type)+"_modify"]=e)}this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(e)),this.setState({O9_foreign_exchange_rate_table:e})}}),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_id_fx:this.branch_user_id}}).then(e=>{if(e){t=e.fx_rate_data||[];for(const e of t){for(const t of o)e[t]=this.convertCurrency(e[t]);if(this.isModifyLocal&&this.HO_branch_id!==this.branch_user_id)for(const t of r)t.currency_code===e.currency_code&&(t.base_currency_rate=this.convertCurrency(t.base_currency_rate),e[this.getCodeFormType(t.exchange_rate_type)+"_modify"]=t)}this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(t)),this.setState({O9_foreign_exchange_rate_local_table:t})}}),this.setState({table_HO_modify:s,table_local_modify:l}),this.stateData.form.cmd.isLoading=!1,this.setState({isUpdate:!0}),setTimeout(()=>{this.setState({isUpdate:!1})},1e3)}else{let a=["book_rate","transfer_bid_rate","transfer_ask_rate","cash_ask_rate","cash_bid_big_rate","cm_rate","cs_rate","in_rate","jp_rate"];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_id_fx:this.HO_branch_id}}).then(t=>{if(t){e=t.fx_rate_data||[];for(const t of e)for(const e of a)t[e]=this.convertCurrency(t[e]);this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(e)),this.setState({O9_foreign_exchange_rate_table:e})}}),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_id_fx:this.branch_user_id}}).then(e=>{if(e){t=e.fx_rate_data||[];for(const e of t)for(const t of a)e[t]=this.convertCurrency(e[t]);this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(t)),this.setState({O9_foreign_exchange_rate_local_table:t})}}),this.setState({isUpdate:!0}),setTimeout(()=>{this.setState({isUpdate:!1})},1e3)}})}resetDataTableKTB(){let e=[],t=[],a=[];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_APPFXRATE_VIEW"}).then(i=>{if(i){a=i.data_modify||[];let o=["book_rate","cash_bid_small_rate","transfer_bid_rate","transfer_ask_rate","cash_ask_rate","cash_bid_big_rate"],s=[],l=[],n=[],r=[];for(const e of a)if(!1===this.isModifyLocal||!0===this.isModifyLocal&&this.HO_branch_id===this.branch_user_id){if(e.branch_id===this.HO_branch_id){let t={currency_code:e.currency_code,exchange_rate_type:e.exchange_rate_type,branch_id_fx:e.branch_id};s.push(t),n.push(e)}}else if(this.isModifyLocal&&this.HO_branch_id!==this.branch_user_id&&e.branch_id===this.branch_user_id){let t={currency_code:e.currency_code,exchange_rate_type:e.exchange_rate_type,branch_id_fx:e.branch_id};l.push(t),r.push(e)}this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_id_fx:this.HO_branch_id}}).then(t=>{if(t){this.setState({isLoading:!0}),e=t.fx_rate_data||[];for(const t of e){for(const e of o)t[e]=this.convertCurrency(t[e]);if(this.HO_branch_id===this.branch_user_id||!1===this.isModifyLocal)for(const e of n)e.currency_code===t.currency_code&&(e.base_currency_rate=this.convertCurrency(e.base_currency_rate),t[this.getCodeFormType(e.exchange_rate_type)+"_modify"]=e)}this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(e));let a="Invalid date"===Object(G.h)(t.last_update_date,this.dateFormat)?"":Object(G.h)(t.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_table:e,isLoading:!1,last_update:a})}}),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_id_fx:this.branch_user_id}}).then(e=>{if(e){this.setState({isLoading:!0}),t=e.fx_rate_data||[];for(const e of t){for(const t of o)e[t]=this.convertCurrency(e[t]);if(this.isModifyLocal&&this.HO_branch_id!==this.branch_user_id)for(const t of r)t.currency_code===e.currency_code&&(t.base_currency_rate=this.convertCurrency(t.base_currency_rate),e[this.getCodeFormType(t.exchange_rate_type)+"_modify"]=t)}this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(t));let a="Invalid date"===Object(G.h)(e.last_update_date,this.dateFormat)?"":Object(G.h)(e.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_local_table:t,isLoading:!1,last_update_local:a})}}),this.setState({isLoading:!0},()=>{this.setState({table_HO_modify:s,table_local_modify:l},()=>{this.setState({isLoading:!1})})}),this.setState({isUpdate:!0}),setTimeout(()=>{this.setState({isUpdate:!1})},1e3)}else{let a=["book_rate","cash_bid_small_rate","transfer_bid_rate","transfer_ask_rate","cash_ask_rate","cash_bid_big_rate"];this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_id_fx:this.HO_branch_id}}).then(t=>{if(t){e=t.fx_rate_data||[];for(const t of e)for(const e of a)t[e]=this.convertCurrency(t[e]);this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(e));let i="Invalid date"===Object(G.h)(t.last_update_date,this.dateFormat)?"":Object(G.h)(t.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_table:e,last_update:i})}}),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"FX_FXRATE_GETFXRATE",api_data:{branch_id_fx:this.branch_user_id}}).then(e=>{if(e){t=e.fx_rate_data||[];for(const e of t)for(const t of a)e[t]=this.convertCurrency(e[t]);this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(t));let i="Invalid date"===Object(G.h)(e.last_update_date,this.dateFormat)?"":Object(G.h)(e.last_update_date,this.dateFormat);this.setState({O9_foreign_exchange_rate_local_table:t,last_update_local:i})}}),this.setState({isUpdate:!0}),setTimeout(()=>{this.setState({isUpdate:!1})},1e3)}})}getexchange_rate_type(e){let t="";switch(e){case"book_rate":t="BK";break;case"cash_ask_rate":t="CA";break;case"cash_bid_small_rate":t="SB";break;case"cash_bid_big_rate":t="CB";break;case"cm_rate":t="CM";break;case"cs_rate":t="CS";break;case"in_rate":t="IN";break;case"jp_rate":t="JP";break;case"transfer_ask_rate":t="TA";break;case"transfer_bid_rate":t="TB"}return t}getCodeFormType(e){let t="";switch(e){case"BK":t="book_rate";break;case"CA":t="cash_ask_rate";break;case"SB":t="cash_bid_small_rate";break;case"CB":t="cash_bid_big_rate";break;case"CM":t="cm_rate";break;case"CS":t="cs_rate";break;case"IN":t="in_rate";break;case"JP":t="jp_rate";break;case"TA":t="transfer_ask_rate";break;case"TB":t="transfer_bid_rate"}return t}UNSAFE_componentWillUpdate(e,t){var a;let i=t.role_action||{};this.stateData.table.dataFull.dataEmpty={isShow:!(null===(a=t.O9_foreign_exchange_rate_table)||void 0===a?void 0:a.length),title:n.g.getLang("header_searchNoResult")},(!1===this.isModifyLocal||!0===this.isModifyLocal&&this.branch_user_id===this.HO_branch_id||0===this.state.O9_foreign_exchange_rate_table.length&&t.O9_foreign_exchange_rate_table.length>0)&&(this.stateData.table_data=this.getConfigTableData(t.O9_foreign_exchange_rate_table,t.isShowHistory,!1,this.HO_branch_id===this.branch_user_id)),(!0===this.isModifyLocal&&this.branch_user_id!==this.HO_branch_id||0===this.state.O9_foreign_exchange_rate_local_table.length&&t.O9_foreign_exchange_rate_local_table.length>0)&&(this.stateData.table_local_data=this.getConfigTableData(t.O9_foreign_exchange_rate_local_table,t.isShowHistory,!0,this.HO_branch_id!==this.branch_user_id)),this.stateData.modify_rate=this.getConfigButtonModify(this.state.languages.btn_modifiy,t),this.stateData.save_rate.dataFull.config.cmd.disable=this.disable,this.stateData.save_rate.dataFull.config.cmd.visible=!1!==i.save,this.stateData.view_modify.dataFull.config.cmd.visible=!1!==i.view_modify,this.stateData.approve.dataFull.config.cmd.visible=!1!==i.view_modify,this.stateData.reject.dataFull.config.cmd.visible=!1!==i.view_modify,this.stateData.view_modify.dataFull.config.cmd.disable=t.table_HO_modify.length+t.table_local_modify.length===0,this.stateData.approve.dataFull.config.cmd.disable=!(t.table_HO_modify.length+t.table_local_modify.length>0&&t.isShowHistory),this.stateData.reject.dataFull.config.cmd.disable=!(t.table_HO_modify.length+t.table_local_modify.length>0&&t.isShowHistory),this.state.last_update!==t.last_update&&(this.stateData.dateTimeUpdate.date=t.last_update),this.state.last_update_local!==t.last_update_local&&(this.stateData.last_update_local.date=t.last_update_local),this.stateData.form.config.default.title=this.state.languages.title_,this.stateData.save_rate.dataFull.config.default.title=this.state.languages.btn_save,this.stateData.tab[0].title=this.state.languages.tab_base,this.stateData.tab[1].title=this.state.languages.tab_local,t.isLoading!==this.state.isLoading&&(this.stateData.form.cmd.isLoading=t.isLoading)}convertCurrency(e){if(void 0===e||null===e||""===e)return"";let t=Number(e);return Number.isNaN(t)?"":Object(be.a)(t,Se)}render(){const e=this.formRender;return"none"===this.state.visibility?null:o.a.createElement("div",null,o.a.createElement(e,{stateData:this.stateData}))}}var Ie=Oe;let Fe;class Le extends i.Component{constructor(e){var t;super(e),this.changeKeyLanguage=e=>{let t={title_:n.g.getLang("importDataFiles_title"),des_:n.g.getLang("importDataFiles_des"),date_from:n.g.getLang("importDataFiles_dateFrom"),date_to:n.g.getLang("importDataFiles_dateTo"),file_id:n.g.getLang("importDataFiles_id"),date:n.g.getLang("importDataFiles_date"),user_id:n.g.getLang("importDataFiles_userID"),file_name:n.g.getLang("importDataFiles_fileName"),status:n.g.getLang("importDataFiles_status"),processed:n.g.getLang("importDataFiles_processed"),size:n.g.getLang("importDataFiles_size"),lines:n.g.getLang("importDataFiles_lines"),messages:n.g.getLang("importDataFiles_messages"),file_type:n.g.getLang("importDataFiles_fileType"),btn_delete:n.g.getLang("importDataFiles_btnDelete"),btn_save:n.g.getLang("importDataFiles_btnSave"),btn_import:n.g.getLang("importDataFiles_btnImport"),btn_refresh:n.g.getLang("importDataFiles_btnRefresh"),tab_info:n.g.getLang("importDataFiles_tabInfo"),tab_import:n.g.getLang("importDataFiles_tabImport"),file_info:n.g.getLang("importDataFiles_fileInfo")};if(void 0!==e)return t;let a=this.state.infoA;a.title=n.g.getLang("importDataFiles_title"),a.des=n.g.getLang("importDataFiles_des"),a.lang_form.vi=n.g.getLang("importDataFiles_title"),a.lang_form.en=n.g.getLang("importDataFiles_title"),this.setState({languages:t,infoA:a})},this.UNSAFE_componentWillUpdate=(e,t)=>{var a;this.stateData.dateFrom.dataFull.value=t.dateFrom,this.stateData.dateTo.dataFull.value=t.dateTo,t.file_selected.length>0&&(this.stateData.valueDataFile={data:!0===t.save_click?{status:{title:"Status",value:"Imported"},file_name:{title:"File Name",value:t.file_selected[0].name},file_size:{title:"File Size",value:t.file_selected[0].size},url:t.file_selected[0].name}:{status:{title:"Status",value:""},file_name:{title:"File Name",value:t.file_selected[0].name},file_size:{title:"File Size",value:t.file_selected[0].size},url:t.file_selected[0].name}}),t.O9_admin_import_file_table!==this.state.O9_admin_import_file_table&&(this.stateData.table_data_fileimport=t.O9_admin_import_file_table.map(e=>[{type:"uTableColumnDefault",dataFull:{title_parent:"Full Name",data:this.convertCurrency(e.servertime),config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:Object(G.d)(e.idate,this.dateFormat),config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:e.lgname,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:e.name,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnAction",dataFull:{data:-1===e.status?{title:"Error",type:"danger"}:{title:"Success",type:"success"},config:{isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:e.isprocessed,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:this.convertCurrency(e.filesize),config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:e.lineinput,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnHtmlDanger",dataFull:{title_parent:"Email",data:e.msg?e.msg.replace(/\n/gm,"<br/>"):e.msg,config:{mode:"left",isFrozen:!1}}},{type:"uTableColumnDefault",dataFull:{title_parent:"Email",data:e.filetype,config:{mode:"left",isFrozen:!1}}}])),this.stateData.table_fileimport.dataFull.dataEmpty={isShow:!(null===(a=t.O9_admin_import_file_table)||void 0===a?void 0:a.length),title:n.g.getLang("header_searchNoResult")}},this.callAPI=(e,t)=>{var a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,t),Object(L.b)(a,{}).then(e=>n.g.foGetData("data",e))},this.showToast=(e,t)=>{var a={};switch(t){case!0:a={class_:"success",icon:"fa fa-check",title:e+" successfully",time:(new Date).getTime()+"",description:e+" Successfully",data:{},action:{}};break;case!1:a={class_:"error",icon:"fa fa-check",title:e+" error",time:(new Date).getTime()+"",description:e+" error",data:{},action:{}}}n.g.pushNotify("notifyToast",a,{}),n.g.callAllScreenListen()},this.toBase64=e=>new Promise((t,a)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=e=>a(e)}),this.abs_btn_refresh=()=>{let e=Object(G.d)(this.LogicDate_from.get(),this.dateFormat),t=Object(G.d)(this.LogicDate_to.get(),this.dateFormat);this.callAPI("O9_admin_import_file_table",{datefrom:e,dateto:t}).then(e=>{e&&this.setState({O9_admin_import_file_table:e.O9_admin_import_file_table||[]})})},this.abs_btn_import=e=>{var t;let a=e.target.files,i=this.state.file_selected;a.length>0&&(i=a),this.stateData.btnImport.dataFull.config.default.att_content=(null===(t=i)||void 0===t?void 0:t.length)?"":"No file choose",this.setState({file_selected:i,save_click:!1})},this.abs_date_from=e=>{this.stateData.dateFrom.dataFull=this.LogicDate_from.getDataFullLogic(),this.setState({dateFrom:this.stateData.dateFrom.dataFull.value})},this.abs_date_to=e=>{this.stateData.dateTo.dataFull=this.LogicDate_to.getDataFullLogic(),this.setState({dateTo:this.stateData.dateTo.dataFull.value})},this.abs_btn_save=async()=>{let e=this.state.file_selected;e.length>0&&Object(L.a)(e[0],void 0,{infoA:this.state.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then(e=>{e&&7===e.status?this.callAPI("O9_admin_import_file_save",{filename:e.name}).then(e=>{this.showToast("Import",!0)}):this.showToast("Import",!1),setTimeout(()=>{let e=Object(G.d)(this.state.dateFrom,this.dateFormat),t=Object(G.d)(this.state.dateTo,this.dateFormat);this.callAPI("O9_admin_import_file_table",{datefrom:e,dateto:t}).then(e=>{e&&this.setState({O9_admin_import_file_table:e.O9_admin_import_file_table||[]})})},1e3)},e=>{}),this.setState({save_click:!0})},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},Fe=Object(m.c)("O9_ImportDataFile");let a=this.changeKeyLanguage("start");this.user_info=n.g.context_get("user_acc"),this.dateFormat=n.g.getParameterSystem("DATE_FORMAT"),this.LogicDate_from=new pe({abs_update:this.abs_date_from,name:"From",code:"from",mask_format:"DD/MM/YYYY",mask_mode:"date",class:"col-md-6"}),this.LogicDate_to=new pe({abs_update:this.abs_date_to,name:"To",code:"To",mask_format:"DD/MM/YYYY",mask_mode:"date",class:"col-md-6"}),this.key_form="015001005",this.state={visibility:"",working_date_long:this.user_info.workingdate,data:this.props.data||[],languages:a,dateFrom:Object(G.d)(this.user_info.workingdate,this.dateFormat),dateTo:Object(G.d)(this.user_info.workingdate,this.dateFormat),tab_active:1,infoA:{lang_form:{vi:n.g.getLang("importDataFiles_title"),en:n.g.getLang("importDataFiles_title")},title:n.g.getLang("importDataFiles_title"),des:"Data files management",openOne:"true",form_code:this.key_form,ofModal:!1},save_click:!1,file_selected:[],O9_admin_import_file_table:[]},this.stateData={form:{title:n.g.getLang("importDataFiles_title")},table_fileimport:{dataFull:{Header:{data:[{title:"File ID",config:{width:"",isFrozen:!1}},{title:"Date",config:{width:"",isFrozen:!1}},{title:"User ID",config:{width:"",isFrozen:!1}},{title:"File name",config:{width:"",isFrozen:!1}},{title:"Status",config:{width:"",isFrozen:!1}},{title:"Processed",config:{width:"",isFrozen:!1}},{title:"Size",config:{width:"",isFrozen:!1}},{title:"Lines",config:{width:"",isFrozen:!1}},{title:"Messages",config:{width:"",isFrozen:!1}},{title:"File type",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1},height:"300px"}}},table_data_fileimport:[],delete:{dataFull:{config:{default:{title:"Delete",type:"submit",class:"",icon:"delete"},cmd:{visible:!1}}},abs_Click:this.abs_Click},tab_importdata:[{title:"General information",id:"1"},{title:"Import files",id:"2"}],dateFrom:{dataFull:this.LogicDate_from.getDataFullLogic()},dateTo:{dataFull:this.LogicDate_to.getDataFullLogic()},save:{dataFull:{config:{default:{title:"Save",type:"default",class:"",icon:"save"}}},abs_Click:this.abs_btn_save},refresh:{dataFull:{config:{default:{title:"Refresh",type:"submit",class:"",icon:"delete"}}},abs_Click:this.abs_btn_refresh},uPagination:{number_show:2,result_total:500,mode:{noJumpPage:!0},paging_record:[{number:5,selected:!0},{number:10},{number:15},{number:50}]},importFile:{dataFull:{config:{default:{title:"Save",type:"default",class:"col-md-2",icon:"save"}}}},valueDataFile:{data:{status:{title:"Status",value:""},file_name:{title:"File Name",value:"YEN"},file_size:{title:"File Size",value:"6202 Bytes"},url:""}},uForm:{dataFull:{config:{default:{title:"",title_sub:""}},cmd:{visibility:""}}},btnImport:{dataFull:{config:{default:{att_content:(null===(t=this.state.file_selected)||void 0===t?void 0:t.length)?"":"No file choose",title:"Import File"}},abs_Change:this.abs_btn_import}}}}convertCurrency(e){if(void 0===e||null===e||""===e)return"";let t=Number(e);return Number.isNaN(t)?"":t.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}render(){return o.a.createElement("div",{style:{display:this.state.visibility}},o.a.createElement(Fe,{stateData:this.stateData,dataFull:this.state}))}componentDidMount(){n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key),this.LogicDate_from.set(this.user_info.workingdate),this.LogicDate_to.set(this.user_info.workingdate),this.callAPI("O9_admin_import_file_table").then(e=>{e&&this.setState({O9_admin_import_file_table:e.O9_admin_import_file_table||[]})})}}var je=Le;let Re=8;const ze={bk_rate:"BK rate",tb_rate:"TB rate",ta_rate:"TA rate",ca_rate:"CA rate",cb_rate:"CB rate",cs_rate:"CS rate",in_rate:"IN rate",jp_rate:"JP rate"},Pe={bk_rate:"Reference rate",tb_rate:"Buying T/T rate",ta_rate:"Selling T/T rate",ca_rate:"Selling Note rate",cb_rate:"Buying Note rate",sb_rate:"Sight bill rate"};class Ue extends i.Component{constructor(e){var t,a;super(e),t=this,this.getTableHeader=()=>{switch(this.TABLE_TYPE){case"KTB":return this.getTableHeaderKTB();default:return this.getTableHeaderDefault()}},this.getTableConfig=()=>{switch(this.TABLE_TYPE){case"KTB":return this.getTableConfigKTB();default:return this.getTableConfigDefault()}},this.onClickViewModify=async()=>{this.getAllRoleAndAction().then(()=>{let{role_action:e}=this.state;e.view_modify?(this.stateData.approve.dataFull.config.cmd.disable=!1,this.stateData.reject.dataFull.config.cmd.disable=!1,this.resetDataTable(),this.setState({isShowHistory:!0})):this.showToast("View_Modify: #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.onClickModify=()=>{this.setState({modify:!this.state.modify}),this.disable=!this.disable},this.getConfigButtonModify=(e,t)=>{let a=(null===t||void 0===t?void 0:t.role_action)||{};return{dataFull:{config:{default:{title:e,type:"",class:"",icon:"fa-pencil-square-o"},cmd:{disable:!this.disable,visible:!1!==a.modify}},dataItem:{test:"321"}},abs_Click:this.onClickModify}},this.getValueEdit=e=>e?e.bcyrate+" "+n.g.getLang("foreignExchangeRate_lang_by")+" "+e.usrname:"",this.getStatusEdit=(e,t)=>{if(!0===e){if(!0===this.isModifyLocal&&!0===t)return this.disable}else if(!1===this.isModifyLocal||!0===t)return this.disable;return!0},this.onChangeItemTable=(e,t,a,i)=>{let o=e.target,{selectionStart:s,value:l}=o,n=[],r="-1",c=t.type;t.isLocal?(n=this.state.O9_foreign_exchange_rate_local_table,r=this.O9_foreign_exchange_rate_local_table_logic[a][c]):(n=this.state.O9_foreign_exchange_rate_table,r=this.O9_foreign_exchange_rate_table_logic[a][c]);let d=n[a][c],h=d,_=l;if(h.includes(".")&&!l.includes(".")){let e=h.lastIndexOf(".");_=l.substring(0,e)+"."+l.substring(e,l.length),"."===_&&(_="")}let u=d,g=l.lastIndexOf(".");var m;l.indexOf(".")!==l.lastIndexOf(".")?g=u.length-Re:(u=this.onChangeCurrency(_),u?(g=s-((null===l||void 0===l?void 0:l.length)-(null===(m=u)||void 0===m?void 0:m.length)),1===s?g=1:s>l.lastIndexOf(".")&&(g+=1)):(u="0.00000000",g=1));n[a][c]=u;let{editedItems:p}=this.state,f={ccrcd:n[a].ccrcd,rttype:this.getRttype(c),bcyrate:u,branchid:t.isLocal?this.branch_user_id:this.HO_branch_id};r!==u?p=this.pushEditedItem(f):r===u&&(p=this.removeEditedItem(f)),t.isLocal?this.setState({O9_foreign_exchange_rate_local_table:n}):this.setState({O9_foreign_exchange_rate_table:n}),this.setState({editedItems:p},()=>{setTimeout(()=>{o.setSelectionRange(g,g)},50)})},this.handleOpenConfirm=(e,t,a)=>{this.getAllRoleAndAction().then(()=>{let{role_action:t}=this.state;if(t.view_modify){var a;let t={title:n.g.getLang("sysConfirmApproveRejectTitle"),message_save:n.g.getLang("sysConfirmApproveRejectMessage"),content:[{list_component:[{component_name:n.g.getLang("foreignExchangeRate_approve_reject_item_title").replace("@{param1}",null===(a=e.data_change)||void 0===a?void 0:a.usrname).replace("@{param2}",this.getTypeItem(e.type)).replace("@{param3}",e.currency_code),message:{title_before:e.before_value,title_status:n.g.getLang("foreignExchangeRate_lang_to"),title_after:e.after_value}}]}]};n.g.compareInfo(t,[{name:"sysConfirmReject",icon:"",color:"info",val:!1},{name:"sysConfirmApprove",color:"primary",icon:"",val:!0}],void 0,t=>{this.stateData.form.cmd.isLoading=!0,!0===t?this.callAPI("O9_foreign_exchange_rate_table_approve",{data:[Object(u.a)({},e.data_change)]}).then(e=>{e&&e.O9_foreign_exchange_rate_table_approve?(this.showToast("Approve",!0),this.resetDataTable()):this.showToast("Approve",!1)}):!1===t&&this.callAPI("O9_foreign_exchange_rate_table_reject",{data:[Object(u.a)({},e.data_change)]}).then(e=>{e&&e.O9_foreign_exchange_rate_table_reject?(this.showToast("Reject",!0),this.resetDataTable()):this.showToast("Reject",!1)}),this.stateData.form.cmd.isLoading=!1,this.setState({isUpdate:!0}),setTimeout(()=>{this.setState({isUpdate:!1})},1e3)})}else this.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.resetDataTable=()=>{switch(this.TABLE_TYPE){case"KTB":this.resetDataTableKTB();break;default:this.resetDataTableDefault()}},this.onClickApproveAll=()=>{this.getAllRoleAndAction().then(()=>{let{role_action:e}=this.state;if(e.view_modify){let e={title:n.g.getLang("sysConfirmApprove"),content:n.g.getLang("sysConfirmApproveAllContent")};n.g.confirmInfo(e,[{name:"sysConfirmCancel",icon:"",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"",val:!0}],void 0,e=>{if(!0===e){this.stateData.form.cmd.isLoading=!0;let e=this.state.table_HO_modify.concat(this.state.table_local_modify);this.callAPI("O9_foreign_exchange_rate_table_approve",{data:e}).then(e=>{e&&e.O9_foreign_exchange_rate_table_approve?(this.showToast("Approve",!0),this.resetDataTable()):this.showToast("Approve",!1)})}})}else this.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.onClickRejectAll=()=>{this.getAllRoleAndAction().then(()=>{let{role_action:e}=this.state;if(e.view_modify){let e={title:n.g.getLang("sysConfirmReject"),content:n.g.getLang("sysConfirmRejectAllContent")};n.g.confirmInfo(e,[{name:"sysConfirmCancel",icon:"",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"",val:!0}],void 0,e=>{if(!0===e){this.stateData.form.cmd.isLoading=!0;let e=this.state.table_HO_modify.concat(this.state.table_local_modify);this.callAPI("O9_foreign_exchange_rate_table_reject",{data:e}).then(e=>{e&&e.O9_foreign_exchange_rate_table_reject?(this.showToast("Reject",!0),this.resetDataTable()):this.showToast("Reject",!1)})}})}else this.showToast(" #ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.pushEditedItem=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.state.editedItems,i=0;for(;i<a.length&&(a[i].ccrcd!==e.ccrcd||a[i].rttype!==e.rttype);i++);return i==a.length?a.push(e):a[i]=e,a},this.removeEditedItem=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.state.editedItems,i=0;for(;i<a.length;i++)a[i].ccrcd===e.ccrcd&&a[i].rttype===e.rttype&&a.splice(i,1);return a},this.getRoleAction=(e,t)=>{let a=Object(n.w)(),i={};const o=t.list_layout;for(const n of a)for(const t of o)for(const a of t.list_view)for(const t of a.list_input){let a=t.default.name.toLowerCase();if(!0!==i[a]){var s,l,r;let o=null===(s=e[n])||void 0===s||null===(l=s[t.default.codeHidden])||void 0===l||null===(r=l.component)||void 0===r?void 0:r.install;i[a]=o,void 0!==t.default.codeHidden&&(i[a+"_codeHidden"]=t.default.codeHidden)}}return i},this.componentDidMount=()=>{this.getAllRoleAndAction().then(()=>{this.resetDataTable()}),this.loadLastUpdate(),this.loadLastUpdateLocal(),this.getBranchIdHO(),n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key)},this.getAllRoleAndAction=()=>Object(L.b)([{txcode:"#sys:bo-load-formRole",input:{form_id:this.key_form}},{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then(e=>{var t=n.g.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var a=n.g.foGetData("loadRoleTask",e)||{};void 0===a&&(a={});let i=this.getRoleAction(a,t);this.setState({role_action:i})}),this.getBranchIdHO=()=>{this.callAPI("O9_foreign_exchange_rate_get_HO_branch_id").then(e=>{e&&(this.HO_branch_id=Number.parseInt(e))})},this.loadLastUpdate=()=>{this.callAPI("O9_foreign_exchange_rate_last_update").then(e=>{e&&this.setState({last_update:Object(G.d)(Number.parseInt(e),this.dateFormat)})})},this.loadLastUpdateLocal=()=>{this.callAPI("O9_foreign_exchange_rate_last_update_local").then(e=>{e&&(this.stateData.form.cmd.isLoading=!1,this.setState({last_update_local:Object(G.d)(Number.parseInt(e),this.dateFormat)},()=>{}))})},this.changeKeyLanguage=e=>{let t={title_:n.g.getLang("foreignExchangeRate_title"),des_:n.g.getLang("foreignExchangeRate_des"),btn_save:n.g.getLang("foreignExchangeRate_btnSave"),btn_modifiy:n.g.getLang("foreignExchangeRate_btnModify"),tab_base:n.g.getLang("foreignExchangeRate_tabBase"),tab_local:n.g.getLang("foreignExchangeRate_tabLocal"),currency_code:n.g.getLang("foreignExchangeRate_currencyCode"),currency_shortID:n.g.getLang("foreignExchangeRate_currencyShortID"),rate:n.g.getLang("foreignExchangeRate_rate"),last_update:n.g.getLang("foreignExchangeRate_lastUpdate"),last_update_local:n.g.getLang("foreignExchangeRate_lastUpdateLocal")};if(void 0!==e)return t;let a=this.state.infoA;a.title=n.g.getLang("foreignExchangeRate_title"),a.des=n.g.getLang("foreignExchangeRate_des"),a.lang_form.vi=n.g.getLang("foreignExchangeRate_title"),a.lang_form.en=n.g.getLang("foreignExchangeRate_title"),this.setState({languages:t,infoA:a})},this.callAPI=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return i[0].input=Object.assign(i[0].input,t),Object(L.b)(i,a).then(e=>{var t=n.g.foGetData("infoError",e);return void 0!==t?{infoError:t}:n.g.foGetData("data",e)})},this.onChangeCurrency=e=>{e||0===e||(e="");let t=(e=String(e)).replace(/,/g,"");return Object(be.a)(t,Re)},this.getValueCurrency=e=>{let t=e.split(".");return void 0===t[0]&&(t[0]="0"),void 0===t[1]&&(t[1]="0"),t[0]=t[0].replace(/[^\d]/gm,""),t[1]=t[1].replace(/[^\d]/gm,""),Number(t[0]+"."+t[1])},this.getValueCurrencyNumber=e=>void 0===e||null===e||""===e?"":Number(e.toString().replace(/,/g,"")),this.onClickSave=()=>{let e=this.state.editedItems;for(let a of e)a.bcyrate=this.getValueCurrencyNumber(a.bcyrate);let t={infoA:{form_code:this.key_form},componentConfigDefault:{codeHidden:this.state.role_action.save_codeHidden}};this.callAPI("O9_foreign_exchange_rate_table_save",{data:e},t).then(e=>{if(e&&e.O9_foreign_exchange_rate_table_save&&e.O9_foreign_exchange_rate_table_save.ID)this.showToast("Save",!0),this.resetDataTable(),this.setState({editedItems:[]}),this.setState({is_disable:!0,isUpdate:!0,modify:!1}),this.disable=!0,setTimeout(()=>{this.setState({isUpdate:!1})},1e3);else{let t="Save : ";void 0!==e.infoError&&e.infoError.map(e=>t+="#"+e.key+": "+e.info),this.showToast(t,!1)}})},this.showToast=(e,t)=>{var a={};switch(t){case!0:a={class_:"success",icon:"fa fa-check",title:e+" successfully",time:(new Date).getTime()+"",description:e+" Successfully",data:{},action:{}};break;case!1:a={class_:"error",icon:"fa fa-check",title:e+" error",time:(new Date).getTime()+"",description:e+" error",data:{},action:{}};break;case"error":a={class_:"error",icon:"fa fa-check",title:e,time:(new Date).getTime()+"",description:e,data:{},action:{}}}n.g.pushNotify("notifyToast",a,{}),n.g.callAllScreenListen()},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})};let i=this.changeKeyLanguage("start");this.dateFormat=n.g.getParameterSystem("DATE_FORMAT");let o=n.g.getParameterSystem("015003011_DECIMAL_NUMBER");o&&(Re=Number(o)),this.formRender=Object(m.c)("O9_ForeignExchangeRate"),this.key_form="BO_015003011",this.disable=!0,this.isModifyLocal=!1,void 0!==n.g.getParameterSystem("FX_RATE_MODIFY_LOCAL")&&(this.isModifyLocal=n.g.getParameterSystem("FX_RATE_MODIFY_LOCAL")),this.TABLE_TYPE="",void 0!==n.g.getParameterSystem("FX_RATE_TABLE_TYPE")&&(this.TABLE_TYPE=n.g.getParameterSystem("FX_RATE_TABLE_TYPE")),this.branch_user_id=(null===(a=n.g.context_get("user_acc"))||void 0===a?void 0:a.branchid)||-1,this.HO_branch_id=-1,this.O9_foreign_exchange_rate_table_logic=[],this.O9_foreign_exchange_rate_local_table_logic=[],this.stateData={form:{config:{default:{title:i.title_,title_sub:""}},cmd:{visibility:"",isLoading:!0}},save_rate:{dataFull:{config:{default:{title:i.btn_save,type:"submit",class:"",icon:"save"},cmd:{disable:!0}},dataItem:{test:"123"}},abs_Click:this.onClickSave},view_modify:{dataFull:{config:{default:{title:"View modify",type:"",class:"",icon:""},cmd:{disable:!1,visible:!1}},dataItem:{test:"123"}},abs_Click:this.onClickViewModify},approve:{dataFull:{config:{default:{title:"Approve (ALL)",type:"",class:"",icon:""},cmd:{disable:!0,visible:!1}},dataItem:{test:"123"}},abs_Click:this.onClickApproveAll},reject:{dataFull:{config:{default:{title:"Reject (All)",type:"",class:"",icon:""},cmd:{disable:!0,visible:!1}},dataItem:{test:"123"}},abs_Click:this.onClickRejectAll},modify_rate:this.getConfigButtonModify(i.btn_modifiy),dateTimeUpdate:{title:i.last_update,date:""},last_update_local:{title:i.last_update_local,date:""},tab:[{title:i.tab_base,id:"1"},{title:i.tab_local,id:"2"}],table:{dataFull:{Header:{data:this.getTableHeader(),config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}},table_config:this.getTableConfig(),table_local:{dataFull:{Header:{data:this.getTableHeader(),config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}}}},table_local_config:this.getTableConfig(),table_data:this.getConfigTableData([]),table_local_data:[]},this.state={isShowHistory:!1,visibility:"",languages:i,tab_active:1,is_disable:!0,modify:!1,infoA:{lang_form:{vi:n.g.getLang("foreignExchangeRate_title"),en:n.g.getLang("foreignExchangeRate_title")},title:n.g.getLang("foreignExchangeRate_title"),des:n.g.getLang("foreignExchangeRate_title"),openOne:"true",form_code:this.key_form,ofModal:!1},O9_foreign_exchange_rate_table:[],table_HO_modify:[],table_local_modify:[],O9_foreign_exchange_rate_local_table:[],last_update:"",isUpdate:!1,last_update_local:"",editedItems:[],isLoadingDefault:!1}}getTableConfigDefault(){return[{type:"uTableColumnDefault",config:{mode:"left"}},{type:"uTableColumnDefault",config:{mode:"right"}},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"}]}getTableConfigKTB(){return[{type:"uTableColumnDefault",config:{mode:"left"}},{type:"uTableColumnDefault",config:{mode:"right"}},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"},{type:"uTableColumnEditInputWithHistory"}]}getTableHeaderDefault(){return[{title:"Currency code",config:{width:"",isFrozen:!1}},{title:"Short ID",config:{width:"",isFrozen:!1}},{title:"BK rate",config:{width:"",isFrozen:!1}},{title:"TB rate",config:{width:"",isFrozen:!1}},{title:"TA rate",config:{width:"",isFrozen:!1}},{title:"CA rate",config:{width:"",isFrozen:!1}},{title:"CB rate",config:{width:"",isFrozen:!1}},{title:"CS rate",config:{width:"",isFrozen:!1}},{title:"IN rate\t",config:{width:"",isFrozen:!1}},{title:"JP rate",config:{width:"",isFrozen:!1}}]}getTableHeaderKTB(){return[{title:"Currency code",config:{width:"",isFrozen:!1}},{title:"Short ID",config:{width:"",isFrozen:!1}},{title:"Reference rate",config:{width:"",isFrozen:!1}},{title:"Sight bill rate",config:{width:"",isFrozen:!1}},{title:"Buying T/T rate",config:{width:"",isFrozen:!1}},{title:"Selling T/T rate",config:{width:"",isFrozen:!1}},{title:"Buying Note rate",config:{width:"",isFrozen:!1}},{title:"Selling Note rate",config:{width:"",isFrozen:!1}}]}getConfigTableData(e,t,a,i){return e.map((e,o)=>this.getEachDataRowConfig(e,o,t,a,i))}getEachDataRowConfig(e,t,a,i,o){var s,l,n,r,c,d,h,_,u,g,m,p,f,v;switch(this.TABLE_TYPE){case"KTB":return[{data:e.ccrcd},{data:e.shrtid},{data:e.bk_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.bk_rate_modify,type:"bk_rate",currency_code:e.ccrcd,before_value:e.bk_rate,after_value:null===(s=e.bk_rate_modify)||void 0===s?void 0:s.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.bk_rate_modify)}},{data:e.sb_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.sb_rate_modify,type:"sb_rate",currency_code:e.ccrcd,before_value:e.sb_rate,after_value:null===(l=e.sb_rate_modify)||void 0===l?void 0:l.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.sb_rate_modify)}},{data:e.tb_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.tb_rate_modify,type:"tb_rate",currency_code:e.ccrcd,before_value:e.tb_rate,after_value:null===(n=e.tb_rate_modify)||void 0===n?void 0:n.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.tb_rate_modify)}},{data:e.ta_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.ta_rate_modify,type:"ta_rate",currency_code:e.ccrcd,before_value:e.ta_rate,after_value:null===(r=e.ta_rate_modify)||void 0===r?void 0:r.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.ta_rate_modify)}},{data:e.cb_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.cb_rate_modify,type:"cb_rate",currency_code:e.ccrcd,before_value:e.cb_rate,after_value:null===(c=e.cb_rate_modify)||void 0===c?void 0:c.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.cb_rate_modify)}},{data:e.ca_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.ca_rate_modify,type:"ca_rate",currency_code:e.ccrcd,before_value:e.ca_rate,after_value:null===(d=e.ca_rate_modify)||void 0===d?void 0:d.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.ca_rate_modify)}}];default:return[{data:e.ccrcd},{data:e.shrtid},{data:e.bk_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.bk_rate_modify,type:"bk_rate",currency_code:e.ccrcd,before_value:e.bk_rate,after_value:null===(h=e.bk_rate_modify)||void 0===h?void 0:h.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.bk_rate_modify)}},{data:e.tb_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.tb_rate_modify,type:"tb_rate",currency_code:e.ccrcd,before_value:e.tb_rate,after_value:null===(_=e.tb_rate_modify)||void 0===_?void 0:_.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.tb_rate_modify)}},{data:e.ta_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.ta_rate_modify,type:"ta_rate",currency_code:e.ccrcd,before_value:e.ta_rate,after_value:null===(u=e.ta_rate_modify)||void 0===u?void 0:u.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.ta_rate_modify)}},{data:e.ca_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.ca_rate_modify,type:"ca_rate",currency_code:e.ccrcd,before_value:e.ca_rate,after_value:null===(g=e.ca_rate_modify)||void 0===g?void 0:g.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.ca_rate_modify)}},{data:e.cb_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.cb_rate_modify,type:"cb_rate",currency_code:e.ccrcd,before_value:e.cb_rate,after_value:null===(m=e.cb_rate_modify)||void 0===m?void 0:m.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.cb_rate_modify)}},{data:e.cs_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.cs_rate_modify,type:"cs_rate",currency_code:e.ccrcd,before_value:e.cs_rate,after_value:null===(p=e.cs_rate_modify)||void 0===p?void 0:p.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.cs_rate_modify)}},{data:e.in_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.in_rate_modify,type:"in_rate",currency_code:e.ccrcd,before_value:e.in_rate,after_value:null===(f=e.in_rate_modify)||void 0===f?void 0:f.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.in_rate_modify)}},{data:e.jp_rate,isUpdate:this.state.isUpdate,default:{textAlign:"right"},cmd:{disable:this.getStatusEdit(i,o)},dataItem:{isLocal:i,data_change:e.jp_rate_modify,type:"jp_rate",currency_code:e.ccrcd,before_value:e.jp_rate,after_value:null===(v=e.jp_rate_modify)||void 0===v?void 0:v.bcyrate},abs_Change:this.onChangeItemTable,abs_ClickHistory:this.handleOpenConfirm,history:{isShow:a,before_value:this.getValueEdit(e.jp_rate_modify)}}]}}getTypeItem(e){switch(this.TABLE_TYPE){case"KTB":return Pe[e];default:return ze[e]}}resetDataTableDefault(){let e=[],t=[],a=[];this.callAPI("O9_foreign_exchange_rate_table_modify").then(i=>{if(i){a=i.O9_foreign_exchange_rate_table_modify||[];let o=["bk_rate","tb_rate","ta_rate","ca_rate","cb_rate","cm_rate","cs_rate","in_rate","jp_rate"],s=[],l=[];for(const e of a)!1===this.isModifyLocal||!0===this.isModifyLocal&&this.HO_branch_id===this.branch_user_id?e.branchid===this.HO_branch_id&&s.push(e):this.isModifyLocal&&this.HO_branch_id!==this.branch_user_id&&e.branchid===this.branch_user_id&&l.push(e);this.callAPI("O9_foreign_exchange_rate_table").then(t=>{if(t){e=t.O9_foreign_exchange_rate_table||[];for(const t of e){for(const e of o)t[e]=this.convertCurrency(t[e]);if(this.HO_branch_id===this.branch_user_id||!1===this.isModifyLocal)for(const e of s)e.ccrcd===t.ccrcd&&(e.bcyrate=this.convertCurrency(e.bcyrate),t[this.getCodeFormType(e.rttype)+"_modify"]=e)}this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(e)),this.setState({O9_foreign_exchange_rate_table:e})}}),this.callAPI("O9_foreign_exchange_rate_local_table").then(e=>{if(e){t=e.O9_foreign_exchange_rate_local_table||[];for(const e of t){for(const t of o)e[t]=this.convertCurrency(e[t]);if(this.isModifyLocal&&this.HO_branch_id!==this.branch_user_id)for(const t of l)t.ccrcd===e.ccrcd&&(t.bcyrate=this.convertCurrency(t.bcyrate),e[this.getCodeFormType(t.rttype)+"_modify"]=t)}this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(t)),this.setState({O9_foreign_exchange_rate_local_table:t})}}),this.setState({table_HO_modify:s,table_local_modify:l}),this.stateData.form.cmd.isLoading=!1,this.setState({isUpdate:!0}),setTimeout(()=>{this.setState({isUpdate:!1})},1e3)}else{let a=["bk_rate","tb_rate","ta_rate","ca_rate","cb_rate","cm_rate","cs_rate","in_rate","jp_rate"];this.callAPI("O9_foreign_exchange_rate_table").then(t=>{if(t){e=t.O9_foreign_exchange_rate_table||[];for(const t of e)for(const e of a)t[e]=this.convertCurrency(t[e]);this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(e)),this.setState({O9_foreign_exchange_rate_table:e})}}),this.callAPI("O9_foreign_exchange_rate_local_table").then(e=>{if(e){t=e.O9_foreign_exchange_rate_local_table||[];for(const e of t)for(const t of a)e[t]=this.convertCurrency(e[t]);this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(t)),this.setState({O9_foreign_exchange_rate_local_table:t})}}),this.setState({isUpdate:!0}),setTimeout(()=>{this.setState({isUpdate:!1})},1e3)}})}resetDataTableKTB(){let e=[],t=[],a=[],i={infoA:{form_code:this.key_form},componentConfigDefault:{codeHidden:this.state.role_action.save_codeHidden}};this.callAPI("O9_foreign_exchange_rate_table_modify",i).then(i=>{if(i){a=i.O9_foreign_exchange_rate_table_modify||[];let o=["bk_rate","sb_rate","tb_rate","ta_rate","ca_rate","cb_rate"],s=[],l=[];for(const e of a)!1===this.isModifyLocal||!0===this.isModifyLocal&&this.HO_branch_id===this.branch_user_id?e.branchid===this.HO_branch_id&&s.push(e):this.isModifyLocal&&this.HO_branch_id!==this.branch_user_id&&e.branchid===this.branch_user_id&&l.push(e);this.callAPI("O9_foreign_exchange_rate_table").then(t=>{if(t){e=t.O9_foreign_exchange_rate_table||[];for(const t of e){for(const e of o)t[e]=this.convertCurrency(t[e]);if(this.HO_branch_id===this.branch_user_id||!1===this.isModifyLocal)for(const e of s)e.ccrcd===t.ccrcd&&(e.bcyrate=this.convertCurrency(e.bcyrate),t[this.getCodeFormType(e.rttype)+"_modify"]=e)}this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(e)),this.setState({O9_foreign_exchange_rate_table:e})}}),this.callAPI("O9_foreign_exchange_rate_local_table").then(e=>{if(e){t=e.O9_foreign_exchange_rate_local_table||[];for(const e of t){for(const t of o)e[t]=this.convertCurrency(e[t]);if(this.isModifyLocal&&this.HO_branch_id!==this.branch_user_id)for(const t of l)t.ccrcd===e.ccrcd&&(t.bcyrate=this.convertCurrency(t.bcyrate),e[this.getCodeFormType(t.rttype)+"_modify"]=t)}this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(t)),this.setState({O9_foreign_exchange_rate_local_table:t})}}),this.setState({table_HO_modify:s,table_local_modify:l}),this.stateData.form.cmd.isLoading=!1,this.setState({isUpdate:!0}),setTimeout(()=>{this.setState({isUpdate:!1})},1e3)}else{let a=["bk_rate","sb_rate","tb_rate","ta_rate","ca_rate","cb_rate"];this.callAPI("O9_foreign_exchange_rate_table").then(t=>{if(t){e=t.O9_foreign_exchange_rate_table||[];for(const t of e)for(const e of a)t[e]=this.convertCurrency(t[e]);this.O9_foreign_exchange_rate_table_logic=JSON.parse(JSON.stringify(e)),this.setState({O9_foreign_exchange_rate_table:e})}}),this.callAPI("O9_foreign_exchange_rate_local_table").then(e=>{if(e){t=e.O9_foreign_exchange_rate_local_table||[];for(const e of t)for(const t of a)e[t]=this.convertCurrency(e[t]);this.O9_foreign_exchange_rate_local_table_logic=JSON.parse(JSON.stringify(t)),this.setState({O9_foreign_exchange_rate_local_table:t})}}),this.setState({isUpdate:!0}),setTimeout(()=>{this.setState({isUpdate:!1})},1e3)}})}getRttype(e){let t="";switch(e){case"bk_rate":t="BK";break;case"ca_rate":t="CA";break;case"sb_rate":t="SB";break;case"cb_rate":t="CB";break;case"cm_rate":t="CM";break;case"cs_rate":t="CS";break;case"in_rate":t="IN";break;case"jp_rate":t="JP";break;case"ta_rate":t="TA";break;case"tb_rate":t="TB"}return t}getCodeFormType(e){let t="";switch(e){case"BK":t="bk_rate";break;case"CA":t="ca_rate";break;case"SB":t="sb_rate";break;case"CB":t="cb_rate";break;case"CM":t="cm_rate";break;case"CS":t="cs_rate";break;case"IN":t="in_rate";break;case"JP":t="jp_rate";break;case"TA":t="ta_rate";break;case"TB":t="tb_rate"}return t}UNSAFE_componentWillUpdate(e,t){var a;let i=t.role_action||{};this.stateData.table.dataFull.dataEmpty={isShow:!(null===(a=t.O9_foreign_exchange_rate_table)||void 0===a?void 0:a.length),title:n.g.getLang("header_searchNoResult")},(!1===this.isModifyLocal||!0===this.isModifyLocal&&this.branch_user_id===this.HO_branch_id||0===this.state.O9_foreign_exchange_rate_table.length&&t.O9_foreign_exchange_rate_table.length>0)&&(this.stateData.table_data=this.getConfigTableData(t.O9_foreign_exchange_rate_table,t.isShowHistory,!1,this.HO_branch_id===this.branch_user_id)),(!0===this.isModifyLocal&&this.branch_user_id!==this.HO_branch_id||0===this.state.O9_foreign_exchange_rate_local_table.length&&t.O9_foreign_exchange_rate_local_table.length>0)&&(this.stateData.table_local_data=this.getConfigTableData(t.O9_foreign_exchange_rate_local_table,t.isShowHistory,!0,this.HO_branch_id!==this.branch_user_id)),this.stateData.modify_rate=this.getConfigButtonModify(this.state.languages.btn_modifiy,t),this.stateData.save_rate.dataFull.config.cmd.disable=this.disable,this.stateData.save_rate.dataFull.config.cmd.visible=!1!==i.save,this.stateData.view_modify.dataFull.config.cmd.visible=!1!==i.view_modify,this.stateData.approve.dataFull.config.cmd.visible=!1!==i.view_modify,this.stateData.reject.dataFull.config.cmd.visible=!1!==i.view_modify,this.stateData.view_modify.dataFull.config.cmd.disable=t.table_HO_modify.length+t.table_local_modify.length===0,this.stateData.approve.dataFull.config.cmd.disable=!(t.table_HO_modify.length+t.table_local_modify.length>0&&t.isShowHistory),this.stateData.reject.dataFull.config.cmd.disable=!(t.table_HO_modify.length+t.table_local_modify.length>0&&t.isShowHistory),this.state.last_update!==t.last_update&&(this.stateData.dateTimeUpdate.date=t.last_update),this.state.last_update_local!==t.last_update_local&&(this.stateData.last_update_local.date=t.last_update_local),this.stateData.form.config.default.title=this.state.languages.title_,this.stateData.save_rate.dataFull.config.default.title=this.state.languages.btn_save,this.stateData.tab[0].title=this.state.languages.tab_base,this.stateData.tab[1].title=this.state.languages.tab_local}convertCurrency(e){if(void 0===e||null===e||""===e)return"";let t=Number(e);return Number.isNaN(t)?"":Object(be.a)(t,Re)}render(){const e=this.formRender;return"none"===this.state.visibility?null:o.a.createElement("div",null,o.a.createElement(e,{stateData:this.stateData}))}}var Ve=Ue;class Be extends i.Component{constructor(e){super(e),this.dateFormat=n.g.getParameterSystem("DATE_FORMAT"),this.MediaDetail=Object(m.c)("O9_FormMediaDetail"),this.MediaConfig=this.getDefaultConfig(e.data),this.state={}}UNSAFE_componentWillUpdate(e){this.MediaConfig=""}render(){const e=this.MediaDetail,t=this.getDefaultConfig(this.props.data);return o.a.createElement(e,t)}getModalTitle(){let{customerType:e}=this.props.data;switch(e){case"C":return"Customer Information";case"G":return"Group Information";case"L":return"Signature Viewer";default:return""}}getRefTypeData(e){return[{title:"Single customer",value:"C"},{title:"Group of customer",value:"G"},{title:"Customer linkage",value:"L"}].map((t,a)=>Object(u.a)(Object(u.a)({},t),{},{selected:t.value===e}))}getComponentsInfomation(e,t){switch(e){case"C":return[{key:"Customer Code",value:t.CD},{key:"Full Name",value:t.FN},{key:"DOB",value:null!==t.DOB?Object(G.d)(new Date(t.DOB).getTime(),this.dateFormat):null},{key:"Identification",value:t.RID}];case"G":return[{key:"Group Code",value:t.CD},{key:"Group Name",value:t.GN},{key:"Group Type",value:t.GT},{key:"Description",value:t.DESC}];case"L":return[{key:"Linkage Code",value:t.CD},{key:"Master Code",value:t.MC},{key:"Master Name",value:t.MN},{key:"Description",value:t.DESC}];default:return n.g.isDebug()&&console.log('Get Components information !== "C", "G" and "L"'),[]}}getDefaultConfig(e){if(void 0!==e&&void 0!==e.INFO){let t={};return e.INFO.length>0&&(t=e.INFO[0]),{modal:{title:this.getModalTitle(),visibility:!0,abs_Close:this.props.closeModal},data_info:{valueModal:{dataFull:{data:this.getComponentsInfomation(e.customerType,t)}}},stateData:e.MEDIA.map(e=>({img_form:{title:e.FN,link:this.isImage(e.MCS)?"data:image/png;base64,"+e.MCS:"../rs/global/img/file_icon.svg",content:this.isImage(e.MCS)?"":e.MCS,file_type:e.FT},code:{dataFull:{config:{default:{title:"Code",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.CC}},reference_type:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Reference type",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:this.getRefTypeData(e.RT)}},expireDate:{dataFull:{config:{default:{placeholder:this.dateFormat,title:"Expire date",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:null!==e.ED?Object(G.d)(new Date(e.ED).getTime(),this.dateFormat):null}},other:{dataFull:{config:{default:{title:"Other",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.OT}}}))}}}isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(a){}return t}}var He=Be,Ye=a(18);class Qe extends i.Component{constructor(e){var t,a;super(e),t=this,this.absViewModifyExpire=e=>{let{viewModifyTabData:t}=this.state,a=this.logicViewModifyExpiredDate.getDataFullLogic();this.propsTemplate.stateData.expireDate.dataFull=this.logicViewModifyExpiredDate.getDataFullLogic(),t.expireDate=a.value,this.setState({viewModifyTabData:t})},this.absImportExpire=e=>{let{importTabData:t}=this.state,a=this.logicImportExpiredDate.getDataFullLogic();this.propsTemplate.stateData.importDataFile.expireDate.dataFull=this.logicImportExpiredDate.getDataFullLogic(),t.expireDate=a.value,this.setState({importTabData:t})},this.absImportCode=e=>{let{importTabData:t}=this.state,a=this.logicImportCode.getDataFullLogic();t.code=a.value,this.setState({importTabData:t})},this.setRecordActiveApprove=e=>{},this.getDefaultPropsTemplate=function(){var e;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(e=t.stateData)||void 0===e?void 0:e.role_action)&&(a=t.stateData.role_action),{stateData:{form:{title:"CTM-Customer media files",cmd:{isLoading:!0}},noti_system:"System support view for image (png, img..) and pdf only",note_import:"File name must only have alphanumeric characters and no spaces",search:{placeholder:"Search text",value:"",abs_Change:t.changeValueSearch,abs_search:t.onSearch},btn_search:{dataFull:{config:{default:{title:"Search",icon:"fa-search",type:"primary"}},abs_Click:t.onSearch}},tab:{data:t.getTabDataConfig(t.tabIds.search),abs_select:t.clickTabHandler},importDataFile:t.getImportDataFileConfig(),viewModifyTab:{isHasData:!1},table_config:t.getTableConfig(),table_header:t.getHeaderConfig(),table_data:[],img_form:{link:"",title:""},code:{dataFull:{config:{default:{title:"Code",type:"text",class:"col-md-12",code_form_component:"code"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:t.onInputChangeValue},reference_type:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Reference type",type:"text",class:"col-md-12",code_form_component:"reference_type"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:t.getReferenceTypeData(t.referenceTypeData[0].value)},abs_Change:t.onChangeValueSelect},expireDate:{dataFull:t.logicViewModifyExpiredDate.getDataFullLogic()},other:{dataFull:{config:{default:{title:"Other",type:"text",class:"col-md-12",code_form_component:"other"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:t.onInputChangeValue},getInfo:{dataFull:{config:{default:{title:"Get information",type:"default",class:"col-sm-2"}}},abs_Click:t.onClickGetInfo},printVoucher:{dataFull:{config:{default:{title:"Print",type:"default",class:"col-sm-2"},cmd:{disable:!1}}},abs_Click:t.printVoucher},approveBtn:{dataFull:{config:{default:{title:"Approve",type:"default",class:"col-sm-2"},cmd:{disable:!1,visible:a.approve}}},abs_Click:t.onClickApproved},modify:{dataFull:{config:{default:{title:"Modify",type:"default",class:"col-sm-2"},cmd:{disable:!1,visible:a.modify&&a.save}}},abs_Click:t.onClickModify},saveForm:{dataFull:{config:{default:{title:"Save",type:"primary",class:"col-sm-2"},cmd:{disable:!0,visible:a.save&&a.modify}}},abs_Click:t.onClickSave}}}},this.getTabDataConfig=function(e){var a;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=[];return void 0!==(null===(a=t.state)||void 0===a?void 0:a.role_action)&&(i=t.state.role_action),!1!==i.search&&o.push({title:"Search",id:t.tabIds.search}),i.import&&!1!==i.save&&o.push({title:"Import",id:t.tabIds.import}),!1!==i.view&&o.push({title:"View - Modify",id:t.tabIds.viewModify}),void 0===e&&(e=o[0].id),o.map(t=>Object(u.a)(Object(u.a)({},t),{},{isShow:t.id===e}))},this.changeValueSearch=e=>{this.setState({searchText:e.target.value})},this.onSearch=()=>{let e=this.state.searchText;this.callAPI("O9_media_file_table",{search_text:e}).then(e=>{let t=[];e&&(t=e.O9_media_file_table||[]);for(let o of t){var a,i;o.caption=(null===(a=this.OWN_CDLIST.STS[o.caption])||void 0===a?void 0:a.caption)||o.caption,o.reftypect=(null===(i=this.OWN_CDLIST.TYPE[o.reftypect])||void 0===i?void 0:i.caption)||o.reftypect}this.setState({O9_media_file_table:t,page_index:1,invokeSearch:!this.state.invokeSearch},()=>{0===t.length&&this.showToast("Data not found")})})},this.changeKeyLanguage=e=>{let t={title_:n.g.getLang("customerMediaFiles_title"),des_:n.g.getLang("customerMediaFiles_des"),btn_search:n.g.getLang("customerMediaFiles_btnSearch"),btn_view:n.g.getLang("customerMediaFiles_btnView"),btn_modify:n.g.getLang("customerMediaFiles_btnModify"),btn_delete:n.g.getLang("customerMediaFiles_btnDelete"),btn_save:n.g.getLang("customerMediaFiles_btnSave"),btn_import:n.g.getLang("customerMediaFiles_btnImport"),btn_approve:n.g.getLang("customerMediaFiles_btnApprove"),customer_code:n.g.getLang("customerMediaFiles_ctmCode"),customer_type:n.g.getLang("customerMediaFiles_ctmType"),media_name:n.g.getLang("customerMediaFiles_mediaName"),status:n.g.getLang("customerMediaFiles_status"),media_type:n.g.getLang("customerMediaFiles_mediaType"),open_date:n.g.getLang("customerMediaFiles_openDate"),last_date:n.g.getLang("customerMediaFiles_lastDate"),expire_date:n.g.getLang("customerMediaFiles_expireDate"),other:n.g.getLang("customerMediaFiles_other"),code:n.g.getLang("customerMediaFiles_code"),reference_type:n.g.getLang("customerMediaFiles_refType"),get_info:n.g.getLang("customerMediaFiles_getInfo"),customer_info:n.g.getLang("customerMediaFiles_ctmInfo"),full_name:n.g.getLang("customerMediaFiles_fullName"),DOB:n.g.getLang("customerMediaFiles_DOB"),address:n.g.getLang("customerMediaFiles_address"),identification:n.g.getLang("customerMediaFiles_identification")};if(void 0!==e)return t;let a=this.state.infoA;a.title=n.g.getLang("customerMediaFiles_title"),a.des=n.g.getLang("customerMediaFiles_des"),a.lang_form.vi=n.g.getLang("customerMediaFiles_title"),a.lang_form.en=n.g.getLang("customerMediaFiles_title"),this.setState({languages:t,infoA:a})},this.abs_autoCallBackData=()=>{this.setState({record_index:this.state.record_index+5})},this.pushNotification=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a={},i=n.g.getLang(e);a={class_:!0===t?"success":"error",icon:"fa fa-check",title:i,time:(new Date).getTime()+"",description:i,data:{},action:{}},n.g.pushNotify("notifyToast",a,{}),n.g.pushNotify("notifyDefault",a,{}),n.g.callAllScreenListen()},this.handleImageChange=e=>{e.preventDefault();let t=new FileReader,a=e.target.files[0];t.onloadend=()=>{let{importTabData:e}=this.state;e.file=a,e.fileName=a.name,e.fileType=a.type,e.img=t.result,this.setState({importTabData:e,isImported:!0})};let i=n.g.getParameterSystem("MEDIA_UPLOAD_MAX_SIZE")||5;void 0!==a&&null!==a&&a.size/1024/1024<i&&t.readAsDataURL(a)},this.clickTabHandler=(e,t)=>{this.setState({tab_active:t})},this.onClickApproved=(e,t)=>{void 0!==t.MI&&"N"===t.ST&&this.callAPI("O9_media_file_approve_table_aprove",{mediaid:t.MI}).then(e=>{e&&0===e.O9_media_file_approve_table_aprove.r?(this.showToast("Approve ",!0),this.setState({isApprove:!0})):this.showToast(e.O9_media_file_approve_table_aprove.m,"fail")})},this.onClickModify=()=>{this.setState({isClickModify:!0})},this.onClickSave=()=>{if(void 0!==this.state.viewModifyTabData){const e=this.state.viewModifyTabData;let t=null;void 0!==e.expireDate&&(t=Object(G.a)(e.expireDate,this.dateFormat));let a={mediaid:e.mediaid,date:t,other:e.other};this.callAPI("O9_media_save_modify",a).then(e=>{e?(this.showToast("Save",!0),this.setState({isClickModify:!1})):this.showToast("Save",!1)})}},this.onInputChangeValue=(e,t)=>{let a=e.target.value;if(this.state.tab_active===this.tabIds.import){let{importTabData:i}=this.state;if("code"===t&&(a=a.replace(/\D/g,""),a=a.substring(0,11),a===i[t]||""===a))return!1;i[t]=e.target.value,this.setState({importTabData:i})}else{let{viewModifyTabData:e}=this.state;e[t]=a,this.setState({viewModifyTabData:e})}},this.onChangeValueSelect=(e,t,a)=>{if(this.state.tab_active===this.tabIds.import){let{importTabData:t}=this.state;t[a]=e,this.setState({importTabData:t})}else{let{viewModifyTabData:t}=this.state;t[a]=e,this.setState({viewModifyTabData:t})}},this.callAPI=(e,t)=>{this.setState({isLoading:!0});let a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,t),Object(L.b)(a,{}).then(e=>n.g.foGetData("data",e)).finally(e=>{this.setState({isLoading:!1})})},this.onClickGetInfo=(e,t)=>{if(void 0!==t){let e={code:t.CC.replace(/-/g,""),type:t.RT};this.callAPI("O9_media_get_infomation",e).then(t=>{void 0!==t&&void 0!==t.O9_media_get_infomation&&this.setState({O9_media_get_infomation:Object(u.a)(Object(u.a)({},t.O9_media_get_infomation),{},{customerType:e.type})||{},openModal:!0})})}},this.onSaveImportFile=()=>{let{importTabData:e,isImported:t}=this.state;if(t&&""!==e.code){let t={CC:e.code.replace(/-/g,""),CD:this.user_info.workingdate,ED:Object(G.a)(e.expireDate,this.dateFormat),file_name:e.fileName,FT:this.getFileType(e.fileType,e.fileName),RT:e.reference_type,OT:e.other,MD:this.user_info.workingdate};this.propsTemplate.stateData.importDataFile.saveForm.dataFull.config.cmd.disable=!0;let a={infoA:{form_code:this.key_form},componentConfigDefault:{codeHidden:this.state.role_action.save_codeHidden}};Object(L.a)(e.file,e.fileName,a).then(a=>{this.callAPI("O9_media_file_import_save",t).then(t=>{this.propsTemplate.stateData.importDataFile.saveForm.dataFull.config.cmd.disable=!1,t&&t.O9_media_file_import_save&&0===t.O9_media_file_import_save.r?(e=this.getImportTabDataDefault(),this.showToast("Import file",!0),this.setState({isImported:!1,importTabData:e})):(t&&t.O9_media_file_import_save&&t.O9_media_file_import_save.m?this.showToast(t.O9_media_file_import_save.m,!1,!1):this.showToast("Import file",!1),this.setState({render:"render l\u1ea1i"}))}).catch(e=>{n.g.isDebug()&&console.log("err",e),this.showToast("Import file",!1)})},e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#Import file",!1):this.showToast("Import file",!1)})}},this.showToast=function(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={},o=e;switch(t){case!0:a&&(o+=" successfully"),i={class_:"success",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}};break;case!1:a&&(o+=" error"),i={class_:"error",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}};break;case"fail":i={class_:"error",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}};break;case void 0:a&&(o+=""),i={class_:"warning",icon:"fa fa-exclamation",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}}}n.g.pushNotify("notifyToast",i,{}),n.g.pushNotify("notifyDefault",i,{}),n.g.callAllScreenListen()},this.removeItemTable=e=>{let t={title:n.g.getLang("sysConfirmDelTitle"),content:n.g.getLang("sysConfirmDelContent")};n.g.confirmInfo(t,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0}],void 0,t=>{t&&this.callAPI("O9_admin_import_file_table_delete",e).then(e=>{e?(this.showToast("Delete",!0),this.onSearch()):this.showToast("Delete",!1)})})},this.pageIndexChange=e=>{this.setState({page_index:e})},this.pageRecordChange=e=>{this.setState({record_index:this.record[e],page_index:1})},this.getInfoMedia=e=>{this.callAPI("O9_media_file_view_media",e).then(e=>{if(e){let t=e.O9_media_file_view_media,a=null!==t.data.ED?Object(G.d)(new Date(t.data.ED).getTime(),this.dateFormat):"",{viewModifyTabData:i}=this.state;i.mediaid=t.data.MI,i.code=t.data.CC,i.reference_type=t.data.RT,i.expireDate=a,i.other=t.data.OT,i.caption=t.data.ST;let o=e.O9_media_file_view_media;this.setState({tab_active:this.tabIds.viewModify,O9_media_file_view_media:o,viewModifyTabData:i,isClickModify:!1,isApprove:!1})}})},this.closeModal=()=>{this.setState({openModal:!1})},this.printVoucher=()=>{this.callAPI("O9_media_file_print_voucher",{branchid:this.branch_user_id}).then(e=>{if(e&&e.O9_media_file_print_voucher){let t={txbody:Object(u.a)(Object(u.a)(Object(u.a)({},e.O9_media_file_print_voucher.data[0]),this.state.viewModifyTabData),{},{image:this.getImageTemplate(this.state.O9_media_file_view_media.data.MCS)})},a="CC06";void 0!==a&&""!==a&&Object(Ye.b)(a,t,{infoA:{key_form:this.key_form}})}else{let e={txbody:Object(u.a)(Object(u.a)({},this.state.viewModifyTabData),{},{image:this.getImageTemplate(this.state.O9_media_file_view_media.data.MCS)})},t="CC06";void 0!==t&&""!==t&&Object(Ye.b)(t,e,{infoA:{key_form:this.key_form}})}})},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.getRoleAction=(e,t)=>{let a=Object(n.w)(),i={};const o=t.list_layout;for(const n of a)for(const t of o)for(const a of t.list_view)for(const t of a.list_input){let a=t.default.name.toLowerCase();if(!0!==i[a]){var s,l,r;let o=null===(s=e[n])||void 0===s||null===(l=s[t.default.codeHidden])||void 0===l||null===(r=l.component)||void 0===r?void 0:r.install;i[a]=o,void 0!==t.default.codeHidden&&(i[a+"_codeHidden"]=t.default.codeHidden)}}return i};let i=this.changeKeyLanguage("start");this.dateFormat=n.g.getParameterSystem("DATE_FORMAT"),this.customerCdFormat=n.g.getParameterSystem("MASK_CUSTOMERCD"),this.key_form="BO_003005",this.MediaFileForm=Object(m.c)("O9_FormMedia"),this.branch_user_id=(null===(a=n.g.context_get("user_acc"))||void 0===a?void 0:a.branchid)||-1,this.record=[5,10,15,20,50],this.tabIds={search:"1",import:"2",viewModify:"4"},this.prefixImage="data:image/png;base64,",this.referenceTypeData=[{title:"Single customer",value:"C"},{title:"Group of customer",value:"G"},{title:"Customer linkage",value:"L"}],this.user_info=n.g.context_get("user_acc"),this.logicViewModifyExpiredDate=new pe({abs_update:this.absViewModifyExpire,name:"Expire Date",code:"expireDate",mask_format:this.dateFormat,mask_mode:"date",class:"col-md-12"}),this.logicImportExpiredDate=new pe({abs_update:this.absImportExpire,name:"Expire Date",code:"expireDate",mask_format:this.dateFormat,mask_mode:"date",class:"col-md-12"}),this.logicImportCode=new pe({abs_update:this.absImportCode,name:"Code",code:"code",mask_format:this.customerCdFormat,mask_mode:"default",value_type:"number",class:"col-md-12"}),this.propsTemplate=this.getDefaultPropsTemplate(),this.state={isLoading:!0,invokeSearch:!1,isApprove:!1,openModal:!1,searchText:"",visibility:"",data:this.props.data||[],languages:i,tab_active:this.tabIds.search,file:"",infoA:{lang_form:{vi:n.g.getLang("customerMediaFiles_title"),en:n.g.getLang("customerMediaFiles_title")},title:"CTM-Customer media files",des:"CTM-Customer media files",openOne:"true",form_code:this.key_form,ofModal:!1},O9_media_file_table:[],O9_media_file_view_media:void 0,O9_media_get_infomation:void 0,page_index:1,record_index:this.record[0],viewModifyTabData:{mediaid:"",code:"",reference_type:"C",expireDate:"",other:"",caption:""},importTabData:this.getImportTabDataDefault(),isClickModify:!1,isImported:!1},this.isDisableSaveButton=!1}getImportTabDataDefault(){return{file:"",img:"",fileName:"",fileType:"",code:"",reference_type:"C",expireDate:"",other:""}}getImportDataFileConfig(){let e="";return e=void 0!==n.g.getParameterSystem("MEDIA_UPLOAD_FILE_TYPE")?n.g.getParameterSystem("MEDIA_UPLOAD_FILE_TYPE"):".jpg, .jpeg, .gif, .bmp, .png, .pdf, .doc, .docx, .xls, .xlsx, .txt, .text, .mp3, .wav, .avi",{isImported:!1,file:{dataFull:{config:{default:{title:"Choose file",att_content:"No file choose",accept:e}},abs_Change:this.handleImageChange},handleImageChange:this.handleImageChange},img_form:{link:"",title:""},code:{dataFull:this.logicImportCode.getDataFullLogic()},reference_type:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Reference type",type:"text",class:"col-md-12",code_form_component:"reference_type"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:this.getReferenceTypeData(this.referenceTypeData[0].value)},abs_Change:this.onChangeValueSelect},expireDate:{dataFull:this.logicImportExpiredDate.getDataFullLogic()},other:{dataFull:{config:{default:{title:"Other",type:"text",class:"col-md-12",code_form_component:"other"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onInputChangeValue},getInfo:{dataFull:{config:{default:{title:"Get information",type:"default",class:"col-sm-2"}}},abs_Click:this.onClickGetInfo},saveForm:{dataFull:{config:{default:{title:"Save",type:"submit",class:"col-sm-2"},cmd:{disable:!1}}},abs_Click:this.onSaveImportFile}}}getReferenceTypeData(e){return this.referenceTypeData.map((t,a)=>Object(u.a)(Object(u.a)({},t),{},{selected:t.value===e}))}getTableConfig(){return[{type:"uTableColumnButtonHover"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}getHeaderConfig(){return{dataFull:{Header:{data:[{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"Customer code",config:{width:"",isFrozen:!1}},{title:"Customer type",config:{width:"",isFrozen:!1}},{title:"Media name",config:{width:"",isFrozen:!1}},{title:"Status",config:{width:"",isFrozen:!1}},{title:"Media type",config:{width:"",isFrozen:!1}},{title:"Open date",config:{width:"",isFrozen:!1}},{title:"Last date",config:{width:"",isFrozen:!1}},{title:"Expire date",config:{width:"",isFrozen:!1}},{title:"Other",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}},uPagination:{number_show:0,result_total:0,paging_index:1,mode:{noJumpPage:!1},paging_record:this.getRecordPageConfig(this.record[0]),abs_PagingActive:this.pageIndexChange,abs_setRecordActive:this.pageRecordChange}}}}getDataTableConfig(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=(null===(e=this.state)||void 0===e?void 0:e.role_action)||{};return t.map(e=>{let t=[];return a.view&&t.push({icon_item:"fa-eye",title:"View",dataItem:e,abs_Click:this.getInfoMedia}),a.delete&&t.push({icon_item:"fa-trash-o",title:"Delete",dataItem:e,abs_Click:this.removeItemTable}),0===t.length&&t.push({icon_item:"more_horiz",title:""}),{data:[{dataFull:{icon:"three-dot"},data:t},{data:Object(G.f)(e.customercd,this.customerCdFormat),tooltip_copy:{icon:"copy",title:n.g.getLang("btn_copy")},abs_Copy:()=>{n.g.copyToClipboard(e.customercd)}},{data:e.reftypect},{data:e.mdname},{data:e.caption},{data:e.mdtype},{data:Object(G.d)(e.opndt,this.dateFormat)},{data:Object(G.d)(e.lastdt,this.dateFormat)},{data:Object(G.d)(e.expdt,this.dateFormat)},{data:e.other}],dataItem:e}})}UNSAFE_componentWillUpdate(e,t){if(this.propsTemplate.stateData.form.cmd.isLoading=t.isLoading,this.propsTemplate.stateData.table_header.dataFull.dataEmpty={isShow:!0,title:n.g.getLang("header_searchNoResult")},this.propsTemplate.stateData.table_header.dataFull.abs_autoCallBackData=this.abs_autoCallBackData,t.tab_active!==this.state.tab_active)this.propsTemplate.stateData.tab.data=this.getTabDataConfig(t.tab_active);else if(t.record_index!==this.state.record_index||t.page_index!==this.state.page_index||t.invokeSearch!==this.state.invokeSearch){let e=this.getDataPaging(t.O9_media_file_table,t.record_index,t.page_index);this.propsTemplate.stateData.table_data=this.getDataTableConfig(e),this.propsTemplate.stateData.table_header.dataFull.uPagination.result_total=t.O9_media_file_table.length,this.propsTemplate.stateData.table_header.dataFull.uPagination.paging_index=t.page_index,this.propsTemplate.stateData.table_header.dataFull.dataEmpty={isShow:!(null===e||void 0===e?void 0:e.length),title:n.g.getLang("header_searchNoResult")},t.record_index!==this.state.record_index&&(this.propsTemplate.stateData.table_header.dataFull.uPagination.paging_record=this.getRecordPageConfig(t.record_index))}if(t.searchText!==this.state.searchText&&(this.propsTemplate.stateData.search.value=t.searchText),t.isClickModify!==this.state.isClickModify&&(this.propsTemplate.stateData.expireDate.dataFull.config.cmd.disable=!t.isClickModify,this.propsTemplate.stateData.other.dataFull.config.cmd.disable=!t.isClickModify,this.propsTemplate.stateData.saveForm.dataFull.config.cmd.disable=!t.isClickModify,this.propsTemplate.stateData.modify.dataFull.config.cmd.disable=t.isClickModify,this.propsTemplate.stateData.printVoucher.dataFull.config.cmd.disable=!!t.isClickModify),t.isClickModify||(this.propsTemplate.stateData.expireDate.dataFull.config.cmd.disable=!0),t.isImported){let e={CC:t.importTabData.code,RT:t.importTabData.reference_type};this.propsTemplate.stateData.importDataFile.isImported=!0,this.propsTemplate.stateData.importDataFile.file.dataFull.config.default.att_content="",this.propsTemplate.stateData.importDataFile.getInfo.dataFull.dataItem=e,this.propsTemplate.stateData.importDataFile.img_form.link="img"===this.getFileType(t.importTabData.fileType,t.importTabData.fileName)?t.importTabData.img:"../rs/global/img/file_icon.svg",this.propsTemplate.stateData.importDataFile.img_form.content="img"===this.getFileType(t.importTabData.fileType,t.importTabData.fileName)?"":t.importTabData.img.split(",")[1],this.propsTemplate.stateData.importDataFile.img_form.file_type=this.getFileType(t.importTabData.fileType,t.importTabData.fileName),this.propsTemplate.stateData.importDataFile.img_form.title=t.importTabData.fileName}else this.propsTemplate.stateData.importDataFile.isImported=!1,this.propsTemplate.stateData.importDataFile.file.dataFull.config.default.att_content="No file choose";if(void 0!==t.O9_media_file_view_media&&(this.propsTemplate.stateData.viewModifyTab.isHasData=!0,this.propsTemplate.stateData.code.dataFull.value=Object(G.f)(t.viewModifyTabData.code,this.customerCdFormat),this.propsTemplate.stateData.reference_type.dataFull.data=this.getReferenceTypeData(t.viewModifyTabData.reference_type),this.propsTemplate.stateData.expireDate.dataFull.value=t.viewModifyTabData.expireDate,this.propsTemplate.stateData.other.dataFull.value=t.viewModifyTabData.other,this.propsTemplate.stateData.approveBtn.dataFull.config.cmd.disable=!1===t.isApprove?"N"!==t.viewModifyTabData.caption:t.isApprove,this.propsTemplate.stateData.approveBtn.dataFull.dataItem=t.O9_media_file_view_media.data),t.tab_active===this.tabIds.import&&(this.propsTemplate.stateData.importDataFile.code.dataFull.value=t.importTabData.code,this.propsTemplate.stateData.importDataFile.reference_type.dataFull.data=this.getReferenceTypeData(t.importTabData.reference_type),this.propsTemplate.stateData.importDataFile.other.dataFull.value=t.importTabData.other,this.propsTemplate.stateData.importDataFile.expireDate.dataFull.value=t.importTabData.expireDate),t.O9_media_file_view_media!==this.state.O9_media_file_view_media){let e={CC:t.O9_media_file_view_media.data.CC,RT:t.O9_media_file_view_media.data.RT};this.propsTemplate.stateData.img_form.link=this.getImageTemplate(t.O9_media_file_view_media.data.MCS),this.propsTemplate.stateData.img_form.content=t.O9_media_file_view_media.data.MCS,this.propsTemplate.stateData.img_form.file_type=t.O9_media_file_view_media.data.FT,this.propsTemplate.stateData.img_form.title=t.O9_media_file_view_media.data.IH,this.propsTemplate.stateData.getInfo.dataFull.dataItem=e}}getImageTemplate(e){return void 0!==e&&null!==e&&this.isImage(e)?`${this.prefixImage}${e}`:"../rs/global/img/file_icon.svg"}getRecordPageConfig(e){return this.record.map(t=>({number:t,selected:e===t}))}getDataPaging(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=[],o=parseInt(t)*(a-1),s=o+parseInt(t)-1;for(let l=o;l<=s;l++)void 0!==e[l]&&i.push(e[l]);return i}getFileType(e,t){if("application/pdf"===e)return"pdf";if("text/plain"===e)return"text";if(/image.*/.test(e))return"img";let a=t.split(".");return"xlsx"===a[a.length-1]||"xls"===a[a.length-1]?"excel":a[a.length-1]}isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(a){}return t}render(){const e=this.MediaFileForm;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{display:this.state.visibility}},this.state.openModal&&o.a.createElement(He,{data:this.state.O9_media_get_infomation,closeModal:this.closeModal}),o.a.createElement(e,this.propsTemplate)))}componentDidMount(){Object(L.b)([{txcode:"bo-get-cdlistMediaFile",input:{}}],{}).then(e=>{let t=n.g.foGetData("data",e);this.OWN_CDLIST={STS:{},TYPE:{}};for(const a of t)"MEDIASTS"===a.cdname?this.OWN_CDLIST.STS[a.cdid]=a:"CTMTYPE"===a.cdname&&(this.OWN_CDLIST.TYPE[a.cdid]=a);Object(L.b)([{txcode:"#sys:bo-load-formRole",input:{form_id:this.key_form}},{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then(e=>{var t=n.g.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var a=n.g.foGetData("loadRoleTask",e)||{};void 0===a&&(a={});let i=this.getRoleAction(a,t);this.propsTemplate=this.getDefaultPropsTemplate(i),this.propsTemplate.stateData.tab.data=this.getTabDataConfig(void 0,i),this.setState({isLoading:!1,role_action:i},()=>{})})}),n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key)}}var Ge=Qe;class Je extends i.Component{constructor(e){super(e),this.dateFormat=n.g.getParameterSystem("DATE_FORMAT"),this.MediaDetail=Object(m.c)("O9_FormMediaDetail"),this.MediaConfig=this.getDefaultConfig(e.data),this.state={}}UNSAFE_componentWillUpdate(e){this.MediaConfig=""}render(){const e=this.MediaDetail,t=this.getDefaultConfig(this.props.data);return o.a.createElement(e,t)}getModalTitle(){let{customerType:e}=this.props.data;switch(e){case"C":return"Customer Information";case"G":return"Group Information";case"L":return"Signature Viewer";default:return""}}getRefTypeData(e){return[{title:"Single customer",value:"C"},{title:"Group of customer",value:"G"},{title:"Customer linkage",value:"L"}].map((t,a)=>Object(u.a)(Object(u.a)({},t),{},{selected:t.value===e}))}getComponentsInformation(e,t){switch(e){case"C":return[{key:"Customer Code",value:t.data1},{key:"Full Name",value:t.data2},{key:"DOB",value:t.data3},{key:"Identification",value:t.data4}];case"G":return[{key:"Group Code",value:t.data1},{key:"Group Name",value:t.data2},{key:"Group Type",value:t.data3},{key:"Description",value:t.data4}];case"L":return[{key:"Linkage Code",value:t.data1},{key:"Master Code",value:t.data3},{key:"Master Name",value:t.data2},{key:"Description",value:t.data4}];default:return n.g.isDebug()&&console.log('Get Components information !== "C", "G" and "L"'),[]}}getDefaultConfig(e){if(void 0!==e)return{modal:{title:this.getModalTitle(),visibility:!0,abs_Close:this.props.closeModal},data_info:{valueModal:{dataFull:{data:e.info?this.getComponentsInformation(e.customerType,e.info):[]}}},stateData:e.media.map(e=>({img_form:{title:e.media_name,link:this.isImage(e.media_data)?"data:image/png;base64,"+e.media_data:"../rs/global/img/file_icon.svg",content:this.isImage(e.media_data)?"":e.media_data,file_type:e.media_type},code:{dataFull:{config:{default:{title:"Code",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.customer_code}},reference_type:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Reference type",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:this.getRefTypeData(e.reference_type)}},expireDate:{dataFull:{config:{default:{placeholder:this.dateFormat,title:"Expire date",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:e.expire_date||null}},other:{dataFull:{config:{default:{title:"Other",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.other}}}))}}isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(a){}return t}}var We=Je;class qe extends i.Component{constructor(e){var t,a;super(e),t=this,this.absViewModifyExpire=e=>{let{tab_view:t}=this.state,a=this.logicViewModifyExpiredDate.getDataFullLogic();t.expire_date.value=a.value,this.setState({tab_view:t})},this.absImportExpire=e=>{let{tab_import:t}=this.state,a=this.logicImportExpiredDate.getDataFullLogic();t.expire_date.value=a.value,this.setState({tab_import:t})},this.absImportCode=e=>{let{tab_import:t}=this.state,a=this.logicImportCode.getDataFullLogic();t.customer_code.value=a.value,this.setState({tab_import:t})},this.getDefaultPropsTemplate=function(){var e;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(e=t.stateData)||void 0===e?void 0:e.role_action)&&(a=t.stateData.role_action),{stateData:{form:{title:"CTM-Customer media files",cmd:{isLoading:t.state.isLoading}},noti_system:"System support view for image (png, img..) and pdf only",tab_search:{search:{placeholder:"Search text",value:t.state.tab_search.search_text.value,abs_Change:t.changeValueSearch,abs_search:t.onSearch},btn_search:{dataFull:{config:{default:{title:"Search",icon:"fa-search",type:"primary"}},abs_Click:t.onSearch}},table_config:t.getTableConfig(),table_header:t.getHeaderConfig(),table_data:t.getDataTableConfig(t.state.tab_search.table_search.data)},tab:{data:t.getTabDataConfig(),abs_select:t.clickTabHandler},tab_import:Object(u.a)(Object(u.a)({},t.getImportDataFileConfig()),{},{para_import:{note_import:"File name must only have alphanumeric characters and no spaces",isImported:t.state.tab_import.isImported}}),tab_view:{para_view:{isHasData:t.state.tab_view.isHasData},img_form:{link:t.getImageTemplate(t.state.tab_view.data_view.media_data),content:t.state.tab_view.data_view.media_data,title:t.state.tab_view.data_view.media_title,file_type:t.state.tab_view.data_view.media_type},code:{dataFull:{config:{default:{title:"Code",type:"text",class:"col-md-12",code_form_component:"code"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:Object(G.f)(t.state.tab_view.customer_code.value,t.customerCdFormat)},abs_Change:t.onInputChangeValue},reference_type:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Reference type",type:"text",class:"col-md-12",code_form_component:"reference_type"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:t.getReferenceTypeData(t.state.tab_view.reference_type.value||t.referenceTypeData[0].value)},abs_Change:t.onChangeValueSelect},expireDate:{dataFull:t.logicViewModifyExpiredDate.getDataFullLogic()},other:{dataFull:{config:{default:{title:"Other",type:"text",class:"col-md-12",code_form_component:"other"},cmd:{disable:!t.state.isClickModify,visible:!0,error:{message:"",type:""}}},value:t.state.tab_view.other.value},abs_Change:t.onInputChangeValue},getInfo:{dataFull:{config:{default:{title:"Get information",type:"default",class:"col-sm-2"}},dataItem:{tab_select:"tab_view"}},abs_Click:t.onClickGetInfo},printVoucher:{dataFull:{config:{default:{title:"Print",type:"default",class:"col-sm-2"},cmd:{disable:!1,visible:!1}}},abs_Click:t.printVoucher},approveBtn:{dataFull:{config:{default:{title:"Approve",type:"default",class:"col-sm-2"},cmd:{disable:!1===t.state.isApprove?"N"!==t.state.tab_view.data_view.media_status:t.state.isApprove,visible:a.approve}}},abs_Click:t.onClickApproved},modify:{dataFull:{config:{default:{title:"Modify",type:"default",class:"col-sm-2"},cmd:{disable:t.state.isClickModify,visible:a.modify&&a.save}}},abs_Click:t.onClickModify},saveForm:{dataFull:{config:{default:{title:"Save",type:"primary",class:"col-sm-2"},cmd:{disable:!t.state.isClickModify,visible:a.save&&a.modify}}},abs_Click:t.onClickSave}}}}},this.getTabDataConfig=function(e){var a;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=[];return void 0!==(null===(a=t.state)||void 0===a?void 0:a.role_action)&&(i=t.state.role_action),!1!==i.search&&o.push({title:"Search",id:t.tabIds.search}),i.import&&!1!==i.save&&o.push({title:"Import",id:t.tabIds.import}),!1!==i.view&&o.push({title:"View - Modify",id:t.tabIds.viewModify}),t.state.tab_active&&void 0===e&&(e=t.state.tab_active),void 0===e&&(e=o[0].id),o.map(t=>Object(u.a)(Object(u.a)({},t),{},{isShow:t.id===e}))},this.pageRecordChangeRoleSearch=e=>{let{tab_search:t}=this.state;t.table_search.page_size=this.record[e],t.table_search.paging_index=1,this.search_page_index=1,this.setState({tab_search:t},()=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_SEARCH_MEDIA",api_data:{search_text:t.search_text.value,page_size:this.state.tab_search.table_search.page_size,page_index:this.search_page_index-1}}).then(e=>{let a=[];e&&(a=e.items||[]);for(let t of a){var i,o;t.media_status=(null===(i=this.OWN_CDLIST.STS[t.media_status])||void 0===i?void 0:i.caption)||t.media_status,t.reference_type=(null===(o=this.OWN_CDLIST.TYPE[t.reference_type])||void 0===o?void 0:o.caption)||t.reference_type}t.table_search.data=a,t.table_search.result_total=(null===e||void 0===e?void 0:e.total_count)||0,this.setState({tab_search:t},()=>{0===a.length&&this.showToast("Data not found")})})})},this.pageChangeRoleSearch=e=>{this.search_page_index=e;let{tab_search:t}=this.state;t.table_search.paging_index=e;let a=this.state.tab_search.search_text.value;this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_SEARCH_MEDIA",api_data:{search_text:a,page_size:this.state.tab_search.table_search.page_size,page_index:this.search_page_index-1}}).then(e=>{let a=[];e&&(a=e.items||[]);for(let t of a){var i,o;t.media_status=(null===(i=this.OWN_CDLIST.STS[t.media_status])||void 0===i?void 0:i.caption)||t.media_status,t.reference_type=(null===(o=this.OWN_CDLIST.TYPE[t.reference_type])||void 0===o?void 0:o.caption)||t.reference_type}t.table_search.result_total=(null===e||void 0===e?void 0:e.total_count)||0,t.table_search.data=a,this.setState({tab_search:t},()=>{0===a.length&&this.showToast("Data not found")})})},this.changeValueSearch=e=>{let{tab_search:t}=this.state;t.search_text.value=e.target.value,this.setState({tab_search:t})},this.onSearch=()=>{let{tab_search:e}=this.state,t=e.search_text.value;this.search_page_index=1,this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_SEARCH_MEDIA",api_data:{search_text:t,page_size:e.table_search.page_size,page_index:this.search_page_index-1}}).then(t=>{let a=[];t&&(a=t.items||[]);for(let e of a){var i,o;e.media_status=(null===(i=this.OWN_CDLIST.STS[e.media_status])||void 0===i?void 0:i.caption)||e.media_status,e.reference_type=(null===(o=this.OWN_CDLIST.TYPE[e.reference_type])||void 0===o?void 0:o.caption)||e.reference_type}e.table_search.data=a,e.table_search.result_total=(null===t||void 0===t?void 0:t.total_count)||0,e.table_search.page_index=1,this.setState({tab_search:e},()=>{0===a.length&&this.showToast("Data not found")})})},this.changeKeyLanguage=e=>{let t={title_:n.g.getLang("customerMediaFiles_title"),des_:n.g.getLang("customerMediaFiles_des"),btn_search:n.g.getLang("customerMediaFiles_btnSearch"),btn_view:n.g.getLang("customerMediaFiles_btnView"),btn_modify:n.g.getLang("customerMediaFiles_btnModify"),btn_delete:n.g.getLang("customerMediaFiles_btnDelete"),btn_save:n.g.getLang("customerMediaFiles_btnSave"),btn_import:n.g.getLang("customerMediaFiles_btnImport"),btn_approve:n.g.getLang("customerMediaFiles_btnApprove"),customer_code:n.g.getLang("customerMediaFiles_ctmCode"),customer_type:n.g.getLang("customerMediaFiles_ctmType"),media_name:n.g.getLang("customerMediaFiles_mediaName"),status:n.g.getLang("customerMediaFiles_status"),media_type:n.g.getLang("customerMediaFiles_mediaType"),open_date:n.g.getLang("customerMediaFiles_openDate"),last_date:n.g.getLang("customerMediaFiles_lastDate"),expire_date:n.g.getLang("customerMediaFiles_expireDate"),other:n.g.getLang("customerMediaFiles_other"),code:n.g.getLang("customerMediaFiles_code"),reference_type:n.g.getLang("customerMediaFiles_refType"),get_info:n.g.getLang("customerMediaFiles_getInfo"),customer_info:n.g.getLang("customerMediaFiles_ctmInfo"),full_name:n.g.getLang("customerMediaFiles_fullName"),DOB:n.g.getLang("customerMediaFiles_DOB"),address:n.g.getLang("customerMediaFiles_address"),identification:n.g.getLang("customerMediaFiles_identification")};if(void 0!==e)return t;let a=this.state.infoA;a.title=n.g.getLang("customerMediaFiles_title"),a.des=n.g.getLang("customerMediaFiles_des"),a.lang_form.vi=n.g.getLang("customerMediaFiles_title"),a.lang_form.en=n.g.getLang("customerMediaFiles_title"),this.setState({languages:t,infoA:a})},this.abs_autoCallBackData=()=>{this.setState({record_index:this.state.record_index+5})},this.pushNotification=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a={},i=n.g.getLang(e);a={class_:!0===t?"success":"error",icon:"fa fa-check",title:i,time:(new Date).getTime()+"",description:i,data:{},action:{}},n.g.pushNotify("notifyToast",a,{}),n.g.pushNotify("notifyDefault",a,{}),n.g.callAllScreenListen()},this.handleImageChange=e=>{e.preventDefault();let t=new FileReader,a=e.target.files[0];t.onloadend=()=>{let{tab_import:e}=this.state;e.data_import.file=a,e.data_import.fileName=a.name,e.data_import.fileType=a.type,e.data_import.img=t.result,e.isImported=!0,e.data_import.att_content="",e.data_import.link_img="img"===this.getFileType(a.type,a.name)?t.result:"../rs/global/img/file_icon.svg",e.data_import.content_img="img"===this.getFileType(a.type,a.name)?"":t.result.split(",")[1],e.data_import.file_type=this.getFileType(a.type,a.name),e.data_import.title_img=a.name,this.setState({tab_import:e})};let i=n.g.getParameterSystem("MEDIA_UPLOAD_MAX_SIZE")||5;void 0!==a&&null!==a&&a.size/1024/1024<i&&t.readAsDataURL(a)},this.clickTabHandler=(e,t)=>{this.setState({tab_active:t})},this.onClickApproved=(e,t)=>{let{tab_view:a}=this.state;void 0!==a.data_view.id&&"N"===a.data_view.media_status&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_APPROVE_MEDIA",api_data:{id:a.data_view.id}}).then(e=>{e&&!e.hasError?(this.showToast("Approve ",!0),this.setState({isApprove:!0})):this.showToast(e.error_data[0].info,!1,!1)})},this.onClickModify=()=>{this.setState({isClickModify:!0},()=>{this.logicViewModifyExpiredDate.setCMD(void 0,{disabled:!1})})},this.onClickSave=()=>{if(void 0!==this.state.tab_view.isHasData){let{tab_view:e}=this.state,t={media_id:e.data_view.id,expire_date:"Invalid date"===Object(G.b)(e.expire_date.value,this.dateFormat,"YYYY-MM-DDTHH:mm:ss.SSS[Z]")?"":Object(G.b)(e.expire_date.value,this.dateFormat,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),other:e.other.value};this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_UPDATE_MEDIA",api_data:Object(u.a)({},t)}).then(e=>{e&&!e.hasError?(this.showToast("Save",!0),this.setState({isClickModify:!1},()=>{this.logicViewModifyExpiredDate.setCMD(void 0,{disabled:!0})})):this.showToast("Save",!1)})}},this.onInputChangeValue=(e,t)=>{let a=e.target.value;if(this.state.tab_active===this.tabIds.import){let{tab_import:i}=this.state;if("code"===t&&(a=a.replace(/\D/g,""),a=a.substring(0,this.customerCdFormat.length),a===i[t].value||""===a))return!1;i[t].value=e.target.value,this.setState({tab_import:i})}else{let{tab_view:e}=this.state;e[t].value=a,this.setState({tab_view:e})}},this.onChangeValueSelect=(e,t,a)=>{if(this.state.tab_active===this.tabIds.import){let{tab_import:t}=this.state;t[a].value=e,this.setState({tab_import:t})}else{let{tab_view:t}=this.state;t[a].value=e,this.setState({tab_view:t})}},this.callAPI=function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";t.setState({isLoading:!0});var o=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return o[0].input=Object.assign(o[0].input,a),Object(L.b)(o,{}).then(e=>n.g.foGetData(i,e)?n.g.foGetData(i,e):{error_data:n.g.foGetData("infoError",e),hasError:!0}).finally(e=>{t.setState({isLoading:!1})})},this.onClickGetInfo=(e,t)=>{let a={};a="tab_import"===t.tab_select?{customer_code:this.logicImportCode.get(),reference_type:this.state.tab_import.reference_type.value}:{customer_code:this.state.tab_view.customer_code.value,reference_type:this.state.tab_view.reference_type.value},this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_GETINFO_MEDIA",api_data:Object(u.a)({page_size:0,page_index:0},a)}).then(e=>{if(void 0!==e&&void 0!==e.items){let t={};t={media:[...e.items],customerType:a.reference_type}||{},this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_GETINFO2_MEDIA",api_data:Object(u.a)({},a)}).then(e=>{void 0===e||e.hasError||(t.info=e),this.setState({O9_media_get_information:t,openModal:!0})})}})},this.onSaveImportFile=()=>{let{tab_import:e}=this.state;if(e.isImported&&""!==e.customer_code.value){let t={customer_code:e.customer_code.value.replace(/-/g,""),open_date:this.user_info.working_date,expire_date:"Invalid date"===Object(G.b)(e.expire_date.value,this.dateFormat,"YYYY-MM-DDTHH:mm:ss.SSS[Z]")?"":Object(G.b)(e.expire_date.value,this.dateFormat,"YYYY-MM-DDTHH:mm:ss.SSS[Z]"),media_name:e.data_import.fileName,media_type:this.getFileType(e.data_import.fileType,e.data_import.fileName),reference_type:e.reference_type.value,other:e.other.value,last_update_date:this.user_info.working_date,media_status:"N"};e.btn_save.disable=!0,this.setState({tab_import:e});let a={infoA:{form_code:this.key_form},componentConfigDefault:{codeHidden:this.state.role_action.save_codeHidden}};Object(L.a)(e.data_import.file,e.data_import.fileName,a).then(a=>{this.callAPI("media_file_import_save",t).then(t=>{e.btn_save.disable=!1,t.hasError?this.showToast(t.error_data[0].info,!1,!1):(this.showToast("Import file",!0),e.isImported=!1,e.customer_code.value="",this.logicImportCode.set(""),e.reference_type.value="C",e.expire_date.value="",this.logicImportExpiredDate.set(""),e.other.value="",e.data_import={att_content:"No file choose"}),this.setState({tab_import:e})}).catch(e=>{n.g.isDebug()&&console.log("err",e),this.showToast("Import file",!1)})},e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#Import file",!1):this.showToast("Import file",!1)})}else this.showToast("Import file",!1)},this.showToast=function(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={},o=e;switch(t){case!0:a&&(o+=" successfully"),i={class_:"success",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}};break;case!1:a&&(o+=" error"),i={class_:"error",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}};break;case"fail":i={class_:"error",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}};break;case void 0:a&&(o+=""),i={class_:"warning",icon:"fa fa-exclamation",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}}}n.g.pushNotify("notifyToast",i,{}),n.g.pushNotify("notifyDefault",i,{}),n.g.callAllScreenListen()},this.removeItemTable=e=>{let t={title:n.g.getLang("sysConfirmDelTitle"),content:n.g.getLang("sysConfirmDelContent")};n.g.confirmInfo(t,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0}],void 0,t=>{t&&this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_DELETE_MEDIA",api_data:{id:e.id}}).then(e=>{e?(this.showToast("Delete",!0),this.onSearch()):this.showToast("Delete",!1)})})},this.pageIndexChange=e=>{this.setState({page_index:e})},this.pageRecordChange=e=>{this.setState({record_index:this.record[e],page_index:1})},this.getInfoMedia=e=>{this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"SQL_VIEW_MEDIA",api_data:{id:e.id}}).then(e=>{if(e){let t=e,{tab_view:a}=this.state;a.data_view.id=t.id,a.customer_code.value=t.customer_code,a.reference_type.value=t.reference_type,a.expire_date.value=Object(G.h)(t.expire_date,this.dateFormat),this.logicViewModifyExpiredDate.set(Object(G.c)(t.expire_date,"YYYY-MM-DDTHH:mm:ss.SSS[Z]")),a.other.value=t.other,a.data_view.media_type=t.media_type,a.data_view.media_status=t.media_status,a.data_view.media_data=t.media_data,a.data_view.media_title=t.media_name,a.isHasData=!0,this.setState({tab_active:this.tabIds.viewModify,tab_view:a,isClickModify:!1,isApprove:!1})}})},this.closeModal=()=>{this.setState({openModal:!1})},this.printVoucher=()=>{},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.getRoleAction=(e,t)=>{let a=Object(n.w)(),i={};const o=t.list_layout;for(const n of a)for(const t of o)for(const a of t.list_view)for(const t of a.list_input){let a=t.default.name.toLowerCase();if(!0!==i[a]){var s,l,r;let o=null===(s=e[n])||void 0===s||null===(l=s[t.default.codeHidden])||void 0===l||null===(r=l.component)||void 0===r?void 0:r.install;i[a]=o,void 0!==t.default.codeHidden&&(i[a+"_codeHidden"]=t.default.codeHidden)}}return i};let i=this.changeKeyLanguage("start");this.dateFormat=n.g.getParameterSystem("DATE_FORMAT"),this.customerCdFormat=n.g.getParameterSystem("MASK_CUSTOMERCD"),this.key_form="BO_003005",this.MediaFileForm=Object(m.c)("Ncbs_FormMedia"),this.branch_user_id=(null===(a=n.g.context_get("user_acc"))||void 0===a?void 0:a.branchid)||-1,this.search_page_index=1,this.record=[5,10,15,20,50],this.tabIds={search:"tab_search",import:"tab_import",viewModify:"tab_view"},this.prefixImage="data:image/png;base64,",this.referenceTypeData=[{title:"Single customer",value:"C"},{title:"Group of customer",value:"G"},{title:"Customer linkage",value:"L"}],this.user_info=n.g.context_get("user_acc"),this.logicViewModifyExpiredDate=new pe({abs_update:this.absViewModifyExpire,name:"Expire Date",code:"expireDate",mask_format:this.dateFormat,mask_mode:"date",class:"col-md-12"}),this.logicImportExpiredDate=new pe({abs_update:this.absImportExpire,name:"Expire Date",code:"expireDate",mask_format:this.dateFormat,mask_mode:"date",class:"col-md-12"}),this.logicImportCode=new pe({abs_update:this.absImportCode,name:"Code",code:"code",mask_format:this.customerCdFormat,mask_mode:"default",value_type:"number",class:"col-md-12"}),this.state={isLoading:!1,isApprove:!1,openModal:!1,visibility:"",data:this.props.data||[],languages:i,tab_active:this.tabIds.search,file:"",infoA:{lang_form:{vi:n.g.getLang("customerMediaFiles_title"),en:n.g.getLang("customerMediaFiles_title")},title:"CTM-Customer media files",des:"CTM-Customer media files",openOne:"true",form_code:this.key_form,ofModal:!1},O9_media_get_information:void 0,page_index:1,record_index:this.record[0],isClickModify:!1,tab_search:{search_text:{value:""},table_search:{paging_index:1,result_total:0,data:[],page_size:5}},tab_import:{isImported:!1,data_import:{att_content:"No file choose"},customer_code:{value:""},other:{value:""},reference_type:{value:"C"},expire_date:{value:""},btn_save:{disable:!1}},tab_view:{data_view:{att_content:"No file choose"},customer_code:{value:""},other:{value:""},reference_type:{value:"C"},expire_date:{value:""}}},this.isDisableSaveButton=!1}getImportDataFileConfig(){let e="";return e=void 0!==n.g.getParameterSystem("MEDIA_UPLOAD_FILE_TYPE")?n.g.getParameterSystem("MEDIA_UPLOAD_FILE_TYPE"):".jpg, .jpeg, .gif, .bmp, .png, .pdf, .doc, .docx, .xls, .xlsx, .txt, .text, .mp3, .wav, .avi",{file:{dataFull:{config:{default:{title:"Choose file",att_content:this.state.tab_import.data_import.att_content,accept:e}},abs_Change:this.handleImageChange},handleImageChange:this.handleImageChange},img_form:{link:this.state.tab_import.data_import.link_img,title:this.state.tab_import.data_import.title_img,content:this.state.tab_import.data_import.content_img,file_type:this.state.tab_import.data_import.file_type},code:{dataFull:this.logicImportCode.getDataFullLogic()},reference_type:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Reference type",type:"text",class:"col-md-12",code_form_component:"reference_type"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:this.getReferenceTypeData(this.state.tab_import.reference_type.value||this.referenceTypeData[0].value)},abs_Change:this.onChangeValueSelect},expireDate:{dataFull:this.logicImportExpiredDate.getDataFullLogic()},other:{dataFull:{config:{default:{title:"Other",type:"text",class:"col-md-12",code_form_component:"other"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:this.state.tab_import.other.value},abs_Change:this.onInputChangeValue},getInfo:{dataFull:{config:{default:{title:"Get information",type:"default",class:"col-sm-2"}},dataItem:{tab_select:"tab_import"}},abs_Click:this.onClickGetInfo},saveForm:{dataFull:{config:{default:{title:"Save",type:"submit",class:"col-sm-2"},cmd:{disable:this.state.tab_import.btn_save.disable}}},abs_Click:this.onSaveImportFile}}}getReferenceTypeData(e){return this.referenceTypeData.map((t,a)=>Object(u.a)(Object(u.a)({},t),{},{selected:t.value===e}))}getTableConfig(){return[{type:"uTableColumnButtonHover"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}getHeaderConfig(){return{dataFull:{Header:{data:[{title:"",config:{hasCheck:!1,width:"",isFrozen:!1}},{title:"Customer code",config:{width:"",isFrozen:!1}},{title:"Customer type",config:{width:"",isFrozen:!1}},{title:"Media name",config:{width:"",isFrozen:!1}},{title:"Status",config:{width:"",isFrozen:!1}},{title:"Media type",config:{width:"",isFrozen:!1}},{title:"Open date",config:{width:"",isFrozen:!1}},{title:"Last date",config:{width:"",isFrozen:!1}},{title:"Expire date",config:{width:"",isFrozen:!1}},{title:"Other",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1}}},config:{mode:{noHeader:!1}},uPagination:{number_show:0,result_total:this.state.tab_search.table_search.result_total,paging_index:this.state.tab_search.table_search.paging_index,mode:{noJumpPage:!1},paging_record:this.getRecordPageConfig(this.state.tab_search.table_search.page_size),abs_PagingActive:e=>{this.pageChangeRoleSearch(e)},abs_setRecordActive:this.pageRecordChangeRoleSearch}}}}getDataTableConfig(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=(null===(e=this.state)||void 0===e?void 0:e.role_action)||{};return t.map(e=>{let t=[];return a.view&&t.push({icon_item:"fa-eye",title:"View",dataItem:e,abs_Click:this.getInfoMedia}),a.delete&&t.push({icon_item:"fa-trash-o",title:"Delete",dataItem:e,abs_Click:this.removeItemTable}),0===t.length&&t.push({icon_item:"more_horiz",title:""}),{data:[{dataFull:{icon:"three-dot"},data:t},{data:Object(G.f)(e.customer_code,this.customerCdFormat),tooltip_copy:{icon:"copy",title:n.g.getLang("btn_copy")},abs_Copy:()=>{n.g.copyToClipboard(e.customer_code)}},{data:e.reference_type},{data:e.media_name},{data:e.media_status},{data:e.media_type},{data:e.open_date},{data:e.last_update_date},{data:e.expire_date},{data:e.other}],dataItem:e}})}getImageTemplate(e){return void 0!==e&&null!==e&&this.isImage(e)?`${this.prefixImage}${e}`:"../rs/global/img/file_icon.svg"}getRecordPageConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return this.record.map(t=>({number:t,selected:e===t}))}getDataPaging(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=[],o=parseInt(t)*(a-1),s=o+parseInt(t)-1;for(let l=o;l<=s;l++)void 0!==e[l]&&i.push(e[l]);return i}getFileType(e,t){if("application/pdf"===e)return"pdf";if("text/plain"===e)return"text";if(/image.*/.test(e))return"img";let a=t.split(".");return"xlsx"===a[a.length-1]||"xls"===a[a.length-1]?"excel":a[a.length-1]}isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(a){}return t}render(){const e=this.MediaFileForm;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{display:this.state.visibility}},this.state.openModal&&o.a.createElement(We,{data:this.state.O9_media_get_information,closeModal:this.closeModal}),o.a.createElement(e,this.getDefaultPropsTemplate())))}componentDidMount(){this.setState({isLoading:!0}),this.logicViewModifyExpiredDate.setCMD(void 0,{disabled:!0});Object(L.b)([{txcode:"bo-get-cdlistMediaFile",input:{}}],{}).then(e=>{let t=n.g.foGetData("data",e);this.OWN_CDLIST={STS:{},TYPE:{}};for(const a of t)"MEDIASTS"===a.cdname?this.OWN_CDLIST.STS[a.cdid]=a:"CTMTYPE"===a.cdname&&(this.OWN_CDLIST.TYPE[a.cdid]=a);Object(L.b)([{txcode:"#sys:bo-load-formRole",input:{form_id:this.key_form}},{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then(e=>{var t=n.g.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var a=n.g.foGetData("loadRoleTask",e)||{};void 0===a&&(a={});let i=this.getRoleAction(a,t);this.setState({isLoading:!1,role_action:i},()=>{})})}),n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key)}}var Ke=qe;let Ze=void 0;class Xe extends i.Component{constructor(e){super(e),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callAPI=(e,t)=>{var a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,t),Object(L.b)(a,{}).then(e=>n.g.foGetData("data",e))},this.clickLevel1=(e,t)=>{this.callAPI("O9_cash_flow_treeview_lv1_table",{branchid:t.dataItem.id}).then(e=>{if(void 0!==e){let t=e.O9_cash_flow_treeview_lv1_table.data;this.setState({table:t})}})},this.clickLevel2=(e,t)=>{this.callAPI("O9_cash_flow_treeview_lv2_table",{departmentId:t.dataItem.id}).then(e=>{if(void 0!==e){let t=e.O9_cash_flow_treeview_lv2_table.data;this.setState({table:t})}})},this.clickLevel3=(e,t)=>{this.callAPI("O9_cash_flow_treeview_lv3_table",{id:t.dataItem.id}).then(e=>{if(e){let t=e.O9_cash_flow_treeview_lv3_table.data;this.setState({table:t})}})},Ze=Object(m.c)("O9_CashFlow"),this.key_form="BO_011001",this.stateData=this.getDataForm(),this.state={visibility:"",data:this.props.data,infoA:{title:n.g.getLang("011001_title"),des:n.g.getLang("011001_title"),openOne:"true",ofModal:!1},tree_lv1:[],table:[]},this.user_profile=n.g.context_get("user_acc")}async componentDidMount(){n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key),console.log(this.user_profile),await this.callAPI("O9_cash_flow_treeview_lv1").then(async e=>{let t=[];e&&(t=e.O9_cash_flow_treeview_lv1.filter(e=>e.id===this.user_profile.branchid),t[0].tree_lv2=[],await this.callAPI("O9_cash_flow_treeview_lv2").then(async e=>{let a=[];e&&(a=e.O9_cash_flow_treeview_lv2);for(let t=0;t<a.length;t++){let e={O9_cash_flow_treeview_lv2:a[t]};await this.callAPI("O9_cash_flow_treeview_lv3",e).then(e=>{let i=e||{};a[t].tree_lv3=i.O9_cash_flow_treeview_lv3||[]})}t[0].tree_lv2=a,this.setState({tree_lv1:t})}))})}convertCurrency(e){let t=Number(e);return Number.isNaN(t)?e:e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}getDataForm(){return{form:{dataFull:{config:{default:{title:n.g.getLang("011001_title")}},cmd:{visibility:""}}},tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},table:{dataFull:{Header:{data:[{title:"Currency",config:{width:"",isFrozen:!1}},{title:"Opening balance",config:{width:"",isFrozen:!1}},{title:"Internal In",config:{width:"",isFrozen:!1}},{title:"Customer deposit",config:{width:"",isFrozen:!1}},{title:"Total In",config:{width:"",isFrozen:!1}},{title:"Internal Out",config:{width:"",isFrozen:!1}},{title:"Customer withdrawal",config:{width:"",isFrozen:!1}},{title:"Total out",config:{width:"",isFrozen:!1}},{title:"Closing balance",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]}}getTreeData(e){let t=[];return e.forEach(e=>{let a={title:`${e.cd} - ${e.name}`,parent_id:"0",is_open:!1,DOM_elm:null,tree_id:e.id+"lv1",id:e.id+"lv1",dataItem:{id:e.id},abs_click:this.clickLevel1};t.push(a),e.tree_lv2&&e.tree_lv2.forEach(a=>{let i={title:`${a.cd} - ${a.name}`,parent_id:e.id+"lv1",is_open:!1,DOM_elm:null,tree_id:a.id+"lv2",id:a.id+"lv2",dataItem:{id:a.id},abs_click:this.clickLevel2};t.push(i),a.tree_lv3&&a.tree_lv3.forEach(e=>{let i={title:`${e.cd} - ${e.name}`,parent_id:a.id+"lv2",is_open:!1,DOM_elm:null,id:e.id+"lv3",tree_id:e.id+"lv3",dataItem:{id:e.id},abs_click:this.clickLevel3};t.push(i)})})}),t}getTableData(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>[{data:e.ccrcd},{data:this.convertCurrency(e.bday)},{data:this.convertCurrency(e.itnin)},{data:this.convertCurrency(e.ctmcdp)},{data:this.convertCurrency(e["itnin+ctmcdp"])},{data:this.convertCurrency(e.itnout)},{data:this.convertCurrency(e.ctmwdr)},{data:this.convertCurrency(e["itnout+ctmwdr"])},{data:this.convertCurrency(e.eday)}])}UNSAFE_componentWillUpdate(e,t){this.stateData.tree_data.tree_data=this.getTreeData(t.tree_lv1),this.stateData.table_data=this.getTableData(t.table)}render(){return o.a.createElement("div",{style:{display:this.state.visibility}},o.a.createElement(Ze,{stateData:this.stateData}))}}var $e=Xe;let et=void 0;class tt extends i.Component{constructor(e){super(e),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.callAPI=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data_api";var i=[{txcode:"bo-rule-getInfoAPI",input:{learn_api:e}}];return i[0].input=Object.assign(i[0].input,t),Object(L.b)(i,{}).then(e=>n.g.foGetData(a,e))},this.clickLevel1=(e,t)=>{this.setState({isLoading:!0}),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CSH_CASHFLOW_BRANCH",api_data:{branch_id:t.dataItem.id}}).then(e=>{let t=[];void 0!==e&&(t=e.branch_cash_data),this.setState({table:t,isLoading:!1})})},this.clickLevel2=(e,t)=>{this.setState({isLoading:!0}),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CSH_CASHFLOW_DEPARTMENT",api_data:{department_id:t.dataItem.id}}).then(e=>{let t=[];void 0!==e&&(t=e.department_cash_data),this.setState({table:t,isLoading:!1})})},this.clickLevel3=(e,t)=>{this.setState({isLoading:!0}),this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CSH_CASHFLOW_USER",api_data:{user_id_cash_flow:t.dataItem.id}}).then(e=>{let t=[];e&&(t=e.user_cash_data),this.setState({table:t,isLoading:!1})})},et=Object(m.c)("O9_CashFlow"),this.key_form="BO_011001",this.stateData=this.getDataForm(),this.state={visibility:"",data:this.props.data,infoA:{title:n.g.getLang("011001_title"),des:n.g.getLang("011001_title"),openOne:"true",ofModal:!1},isLoading:!1,branchs:[],table:[]},this.user_profile=n.g.context_get("user_acc")}async componentDidMount(){this.setState({isLoading:!0}),n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key),await this.callAPI("ncbsCBS_workflow_execute_new",{workflow_id:"CSH_CASHFLOW_GETINFO",api_data:{user_id_cash_flow:this.user_profile.id}}).then(async e=>{let t=[];e&&(t=e.branchs.filter(e=>e.branch_id===this.user_profile.branch_id)),this.setState({isLoading:!1,branchs:t})})}convertCurrency(e){let t=Number(e);return Number.isNaN(t)?e:e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}getDataForm(){var e;return{form:{dataFull:{config:{default:{title:n.g.getLang("011001_title")}},cmd:{visibility:"",isLoading:(null===(e=this.state)||void 0===e?void 0:e.isLoading)||!1}}},tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},table:{dataFull:{Header:{data:[{title:"Currency",config:{width:"",isFrozen:!1}},{title:"Opening balance",config:{width:"",isFrozen:!1}},{title:"Internal In",config:{width:"",isFrozen:!1}},{title:"Customer deposit",config:{width:"",isFrozen:!1}},{title:"Total In",config:{width:"",isFrozen:!1}},{title:"Internal Out",config:{width:"",isFrozen:!1}},{title:"Customer withdrawal",config:{width:"",isFrozen:!1}},{title:"Total out",config:{width:"",isFrozen:!1}},{title:"Closing balance",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]}}getTreeData(e){let t=[];return e.forEach(e=>{let a={title:`${e.branch_code} - ${e.branch_name}`,parent_id:"0",is_open:!1,DOM_elm:null,tree_id:e.branch_id+"lv1",id:e.branch_id+"lv1",dataItem:{id:e.branch_id},abs_click:this.clickLevel1};t.push(a),e.departments&&e.departments.forEach(a=>{let i={title:`${a.department_code} - ${a.department_name}`,parent_id:e.branch_id+"lv1",is_open:!1,DOM_elm:null,tree_id:a.department_id+"lv2",id:a.department_id+"lv2",dataItem:{id:a.department_id},abs_click:this.clickLevel2};t.push(i),a.cashier_accounts&&a.cashier_accounts.forEach(e=>{let i={title:`${e.user_code} - ${e.login_name}`,parent_id:a.department_id+"lv2",is_open:!1,DOM_elm:null,id:e.user_id+"lv3",tree_id:e.user_id+"lv3",dataItem:{id:e.user_id},abs_click:this.clickLevel3};t.push(i)})})}),t}getTableData(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>[{data:e.currency},{data:this.convertCurrency(e.opening_balance)},{data:this.convertCurrency(e.internal_in)},{data:this.convertCurrency(e.customer_deposit)},{data:this.convertCurrency(e.total_in)},{data:this.convertCurrency(e.internal_out)},{data:this.convertCurrency(e.customer_withdrawal)},{data:this.convertCurrency(e.total_out)},{data:this.convertCurrency(e.closing_balance)}])}UNSAFE_componentWillUpdate(e,t){this.stateData.tree_data.tree_data=this.getTreeData(t.branchs),this.stateData.table_data=this.getTableData(t.table),this.stateData.form.dataFull.cmd.isLoading=t.isLoading}render(){return o.a.createElement("div",{style:{display:this.state.visibility}},o.a.createElement(et,{stateData:this.stateData}))}}var at=tt;let it;class ot extends i.Component{constructor(e){super(e),this.handleSelectTabID=e=>{this.setState({menu_select:e})},this.handelSearchInvokeLimit=(e,t)=>{var a;let i=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"",o=this.state.invoke_limit_search_value;o[t]=i,this.setState({invoke_limit_search_value:o})},this.handelSearchApproveLimit=(e,t)=>{var a;let i=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"",o=this.state.approve_limit_search_value;o[t]=i,this.setState({approve_limit_search_value:o})},this.handelChangeSearch=(e,t)=>{var a;let i=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"",o=this.state.Col3_Assignment_Search;switch(o[t]=i,t){case"TBL_USER_CODE":this.stateData.column3.table_left.dataFull.Header.data[2].value_search=i;break;case"TBL_USER_NAME":this.stateData.column3.table_left.dataFull.Header.data[3].value_search=i;break;case"TBR_USER_CODE":this.stateData.column3.table_right.dataFull.Header.data[2].value_search=i;break;case"TBR_USER_NAME":this.stateData.column3.table_right.dataFull.Header.data[3].value_search=i}this.setState({Col3_Assignment_Search:o})},this.handelClearSearch=()=>{},this.getTableHeader=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return t.push({title:"Group",code:"module"}),t.push({title:"Caption",code:"tranname"}),e.forEach(e=>{t.push({title:e,code:e})}),t},this.abs_role_name_copying_select=(e,t,a)=>{this.setState({role_name_copying_selected:e.roleid,column2_role_select:e})},this.abs_Ckeck_invoke_approve_verification=(e,t)=>{this.callAPI("O9_Roles_Invoke_approve_Table_Change_save_approve",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then(e=>{let t=e.O9_Roles_Invoke_approve_Table_Change_save_approve;this.reloadTableWithMenuInvokeApprove(),1===t[0].type?this.showToast("Save",!0):this.showToast("Save",!1)})},this.abs_Ckeck_invoke_approve_operation=(e,t)=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.save){let a=this.state.menu_invoke_aprrove.filter(t=>t.parentid===e.parentid);this.callAPI("O9_Roles_Invoke_approve_Table_Change_save",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then(i=>{let o=i.O9_Roles_Invoke_approve_Table_Change_save;if(this.reloadTableWithMenuInvokeApprove(!0),1===o[0].type){var s=[{txcode:"bo-update-roleBO-JWEBUI",input:{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0,menu_child:a}}];return Object(L.b)(s,{}).then(e=>{this.showToast("Save",!0),this.setState({isLoading:!1})})}this.showToast(o[0].message,!1)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.UNSAFE_componentWillUpdate=(e,t)=>{var a,i,o;let s=t.role_action||{};this.stateData.tab.data=this.stateData.tab.data.map(e=>(e.isShow=e.id===t.menu_select,e)),this.stateData.column3.table_in_role_data=t.table_user_profile_user_in_role.map(e=>({config:{value:!1},data:[{data:e.rolename},{data:e.usrcd},{data:e.usrname}]})),this.stateData.column1.tree_data.tree_data=null===(a=t.menu_invoke_aprrove)||void 0===a?void 0:a.map(e=>({title:e.caption,parent_id:e.parentid,is_open:!1,DOM_elm:null,id:e.cmdid,dataItem:e,abs_click:this.onClickTreeMenuInvokeApprove})),this.stateData.column1.table_up.dataFull.Header.data=t.O9_Roles_InvokeApprove_Table_header.map(e=>({title:e.caption,config:{width:"",isFrozen:!1}})),this.stateData.column1.table_down.dataFull.Header.data=n.g.cloneJson(this.stateData.column1.table_up.dataFull.Header.data),this.stateData.column1.table_down.dataFull.Header.data[1]&&(this.stateData.column1.table_down.dataFull.Header.data[1].title="Self Approve");let l=t.O9_Roles_InvokeApprove_Table_header;this.stateData.column1.table_up_config=l.map((e,t)=>0===t?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:"uTableColumnCheckbox",config:{cmd:{disable:!1===s.save}}}),this.stateData.column1.table_down_config=this.stateData.column1.table_up_config;let r=t.O9_Roles_InvokeApprove_Table_body;this.stateData.column1.table_up_data=[],this.stateData.column1.table_down_data=[];for(let n=0;n<r.length;n++){let e=l.length-1,t=[],a=[];for(let i=0;i<e;i++)0===i&&(t.push({data:r[n+i].rolename}),a.push({data:r[n+i].rolename})),t.push({value:1===r[n+i].invoke,dataItem:r[n+i],abs_Click:this.abs_Ckeck_invoke_approve_operation}),a.push({value:1===r[n+i].approve,dataItem:r[n+i],abs_Click:this.abs_Ckeck_invoke_approve_verification});this.stateData.column1.table_up_data.push(t),this.stateData.column1.table_down_data.push(a),n=n+e-1}if(this.stateData.column2.role_name_adding.dataFull.config.cmd.disable=!0!==t.addAndRemove_btnAddClick,this.stateData.column2.listButton[2].dataFull.config.cmd.disable=!0===t.addAndRemove_btnSaveClick,this.stateData.column2.role_name_copying.dataFull.search_value=t["column2.role_name_copying"],this.stateData.column2.listButton[0].dataFull.config.cmd.visible=!1!==s.save,this.stateData.column2.listButton[2].dataFull.config.cmd.visible=!1!==s.save,this.stateData.column2.listButton[1].dataFull.config.cmd.visible=!1!==s.delete,this.stateData.column3.next.dataFull.config.cmd.disable=!1===s.save,this.stateData.column3.next_all.dataFull.config.cmd.disable=!1===s.save,this.stateData.column3.preview.dataFull.config.cmd.disable=!1===s.save,this.stateData.column3.preview_all.dataFull.config.cmd.disable=!1===s.save,!t.role_name_copying_selected&&t.O9_Roles_Add_and_Remove_Role_Name.length>0)this.setState({role_name_copying_selected:t.O9_Roles_Add_and_Remove_Role_Name[0].roleid});else{var c;this.stateData.column2.role_name_copying.dataFull.input_value=null===(c=t.column2_role_select)||void 0===c?void 0:c.rolename;let e=t.O9_Roles_Add_and_Remove_Role_Name.filter(e=>(e.rolename||"").toLowerCase().includes(t["column2.role_name_copying"].toLowerCase()));this.stateData.column2.role_name_copying.dataFull.data=e.map((e,a)=>{let i=!1;return e.roleid===t.role_name_copying_selected&&(i=!0),{title:e.rolename,value:e,selected:i}})}this.stateData.column2.role_name_adding.dataFull.value=t.role_name_adding_input;let d=this.unCheck_user_assign_table_left,h=this.unCheck_user_assign_table_right;!0===this.unCheck_user_assign_table_left&&(this.unCheck_user_assign_table_left=!1),!0===this.unCheck_user_assign_table_right&&(this.unCheck_user_assign_table_right=!1),this.stateData.column3.table_left_data=t.O9_Roles_User_assignment_table_left.filter(e=>e.usrcd.includes(t.Col3_Assignment_Search.TBL_USER_CODE||"")&&e.usrname.includes(t.Col3_Assignment_Search.TBL_USER_NAME||"")).map((e,t)=>{var a,i,o;return{data:[{data:t+1},{value:!0!==d&&((null===(a=this.stateData.column3.table_left_data[t])||void 0===a||null===(i=a.data)||void 0===i||null===(o=i[1])||void 0===o?void 0:o.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_left,dataItem:{value:e,index:t}},{data:e.usrcd},{data:e.usrname}],config:{value:!1}}}),this.stateData.column3.table_right_data=t.O9_Roles_User_assignment_table_right.filter(e=>e.usrcd.includes(t.Col3_Assignment_Search.TBR_USER_CODE||"")&&e.usrname.includes(t.Col3_Assignment_Search.TBR_USER_NAME||"")).map((e,t)=>{var a,i,o;return{data:[{data:t+1},{value:!0!==h&&((null===(a=this.stateData.column3.table_right_data[t])||void 0===a||null===(i=a.data)||void 0===i||null===(o=i[1])||void 0===o?void 0:o.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_right,dataItem:{value:e,index:t}},{data:e.usrcd},{data:e.usrname}],config:{value:!1}}}),this.stateData.column3.role_choose_left.dataFull.data=[],this.stateData.column3.role_choose_left.dataFull.search_value=t["column3.role_choose_left"],this.stateData.column3.role_choose_left.dataFull.input_value=null===(i=t.column3_role_left_select)||void 0===i?void 0:i.rolename,t.O9_RolesUser_assignment_Role_Name_Left.filter(e=>null!==e.rolename&&e.rolename.toLowerCase().includes(t["column3.role_choose_left"].toLowerCase())).forEach((e,a)=>{let i=!1;(t.column3_role_left_select.roleid===e.roleid||0===a&&void 0===t.column3_role_left_select.roleid)&&(i=!0),this.stateData.column3.role_choose_left.dataFull.data.push({title:e.rolename,value:{id:e.roleid,item:e,type:"left"},selected:i})}),this.stateData.column3.role_choose_right.dataFull.search_value=t["column3.role_choose_right"],this.stateData.column3.role_choose_right.dataFull.input_value=null===(o=t.column3_role_right_select)||void 0===o?void 0:o.rolename;let _=t.O9_RolesUser_assignment_Role_Name_Right.filter(e=>null!==e.rolename&&e.rolename.toLowerCase().includes(t["column3.role_choose_right"].toLowerCase()));this.stateData.column3.role_choose_right.dataFull.data=_.map((e,a)=>{let i=!1;return(t.column3_role_right_select.roleid===e.roleid||0===a&&void 0===t.column3_role_right_select.roleid)&&(i=!0),{title:e.rolename,value:{id:e.roleid,item:e,type:"right"},selected:i}}),this.stateData.column4.listItem=t.O9_Roles_Invoke_limit_menu.map(e=>{let a=!1;return t.Invoke_role_selected===e.roleid&&(a=!0),{dataFull:{title:e.rolename,dataItem:e,selected:a},abs_Click:this.onClickMenuInvokeLimit}}),this.stateData.column4.table.dataFull.Header.data=t.invoke_limit_header.map(e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.invoke_limit_search_value[e.code]||""})),this.stateData.column4.table_config=t.invoke_limit_header.map((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===s.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}),this.stateData.column4.table_data=t.O9_Roles_InvokeLimit_Table.filter(e=>{let a=!0;for(const i in t.invoke_limit_search_value){let o=t.invoke_limit_search_value[i];e[i].toLowerCase().includes(o.toLowerCase())||(a=!1)}return a}).map((e,a)=>t.invoke_limit_header.map((t,i)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:a,index_col:i,abs_Change:this.abs_change_invoke_table,abs_Submit:this.abs_submit_invoke_table}))),this.stateData.column5.listItem=t.O9_Roles_Invoke_limit_menu.map(e=>{let a=!1;return t.Approve_role_selected===e.roleid&&(a=!0),{dataFull:{title:e.rolename,dataItem:e,selected:a},abs_Click:this.onClickMenuApproveLimit}}),this.stateData.column5.table.dataFull.Header.data=t.approve_limit_header.map(e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.approve_limit_search_value[e.code]||""})),this.stateData.column5.table_config=t.approve_limit_header.map((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===s.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}),this.stateData.column5.table_data=t.O9_Roles_ApproveLimit_Table.filter(e=>{let a=!0;for(const i in t.approve_limit_search_value){let o=t.approve_limit_search_value[i];e[i].toLowerCase().includes(o.toLowerCase())||(a=!1)}return a}).map((e,a)=>t.approve_limit_header.map((t,i)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:a,index_col:i,abs_Change:this.abs_change_approve_table,abs_Submit:this.abs_submit_approve_table})))},this.CheckAddRoleName=e=>{let t=e.target.value,a=!1;for(const i of this.stateData.column2.role_name_copying.dataFull.data)if(i.title===t||""===t){a=!0;break}""===t&&(a=!0),this.setState({addAndRemove_btnSaveClick:a,role_name_adding_input:t})},this.abs_Check_role_profile_user_assign_left=e=>{this.onClickAssignLeftRow(e);let t=this.stateData.column3.table_left_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_Check_role_profile_user_assign_right=e=>{let t=this.stateData.column3.table_right_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_CheckAll_left=()=>{let e=this.stateData.column3.table_left.dataFull.Header.data[1],t=0;this.stateData.column3.table_left_data.forEach(()=>{!0===e.data.value?this.stateData.column3.table_left_data[t].data[1].value=!1:this.stateData.column3.table_left_data[t].data[1].value=!0,t++}),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_CheckAll_right=()=>{let e=this.stateData.column3.table_right.dataFull.Header.data[1],t=0;this.stateData.column3.table_right_data.forEach(()=>{!0===e.data.value?this.stateData.column3.table_right_data[t].data[1].value=!1:this.stateData.column3.table_right_data[t].data[1].value=!0,t++}),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_change_approve_table=(e,t,a,i)=>{let o=e.target,{selectionStart:s,value:l}=o,n=this.state.O9_Roles_ApproveLimit_Table;let r=n[t.row_idx][t.header.code],c=l;if(r||(r="0.00"),r.includes(".")&&!l.includes(".")){let e=r.lastIndexOf(".");c=l.substring(0,e)+"."+l.substring(e,l.length),"."===c&&(c="")}let d=r;d=d.replace("-","");let h=l.lastIndexOf(".");var _;void 0!==d&&void 0!==l&&(l.indexOf(".")!==l.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(l.length-(null===(_=d)||void 0===_?void 0:_.length)),1===s?h=1:s>l.lastIndexOf(".")&&(h+=1)));n[t.row_idx][t.header.code]=d,this.setState({O9_Roles_ApproveLimit_Table:n},()=>{setTimeout(()=>{o.setSelectionRange(h,h)},50)})},this.abs_change_invoke_table=(e,t,a,i)=>{let o=e.target,{selectionStart:s,value:l}=o,n=this.state.O9_Roles_InvokeLimit_Table;let r=n[t.row_idx][t.header.code],c=l;if(r||(r="0.00"),r.includes(".")&&!l.includes(".")){let e=r.lastIndexOf(".");c=l.substring(0,e)+"."+l.substring(e,l.length),"."===c&&(c="")}let d=r;d=d.replace("-","");let h=l.lastIndexOf(".");var _;void 0!==d&&void 0!==l&&(l.indexOf(".")!==l.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(l.length-(null===(_=d)||void 0===_?void 0:_.length)),1===s?h=1:s>l.lastIndexOf(".")&&(h+=1)));n[t.row_idx][t.header.code]=d,this.setState({O9_Roles_InvokeLimit_Table:n},()=>{setTimeout(()=>{o.setSelectionRange(h,h)},50)})},this.abs_submit_invoke_table=(e,t,a)=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_InvokeLimit_Table;this.callAPI("O9_Roles_InvokeLimit_Table_Change_save",{roleid:this.state.Invoke_role_selected,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then(a=>{if(1===a.O9_Roles_InvokeLimit_Table_Change_save[0].type){this.showToast("Save",!0);var i=[{txcode:"bo-update-roleFOJWEBUI",input:{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,cmdid:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code]),list_currency:this.state.invoke_limit_currency,list_ccr:t[e.row_idx]}}];return Object(L.b)(i,{}).then(e=>{})}this.showToast("Save",!1)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")})},this.abs_submit_approve_table=(e,t,a)=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_ApproveLimit_Table;this.callAPI("O9_Roles_ApproveLimit_Table_Change_save",{roleid:this.state.O9_Roles_Approve_limit_menu_select.roleid,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then(e=>{1===e.O9_Roles_ApproveLimit_Table_Change_save[0].type&&this.showToast("Save",!0)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")})},this.getRoleAction=(e,t)=>{let a=Object(n.w)(),i={};const o=t.list_layout;for(const n of a)for(const t of o)for(const a of t.list_view)for(const t of a.list_input){let a=t.default.name.toLowerCase();if(!0!==i[a]){var s,l,r;let o=null===(s=e[n])||void 0===s||null===(l=s[t.default.codeHidden])||void 0===l||null===(r=l.component)||void 0===r?void 0:r.install;i[a]=o}}return i},this.getAllRoleAction=()=>Object(L.b)([{txcode:"#sys:bo-load-formRole",input:{form_id:this.key_form}},{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then(e=>{var t=n.g.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var a=n.g.foGetData("loadRoleTask",e)||{};void 0===a&&(a={});let i=this.getRoleAction(a,t);this.setState({role_action:i})}),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.showToast=(e,t)=>{var a={};switch(t){case!0:a={class_:"success",icon:"fa fa-check",title:e+" successfully",time:(new Date).getTime()+"",description:e+" Successfully",data:{},action:{}};break;case!1:a={class_:"error",icon:"fa fa-check",title:e||"Action error!",time:(new Date).getTime()+"",description:e||"Action error!",data:{},action:{}};break;default:a={class_:"error",icon:"fa fa-check",title:e,time:(new Date).getTime()+"",description:e,data:{},action:{}}}n.g.pushNotify("notifyToast",a,{}),n.g.callAllScreenListen()},this.callAPI=(e,t)=>{this.state.isLoading||this.setState({isLoading:!0});var a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,t),Object(L.b)(a,{}).then(t=>n.g.foGetData("data",t)||{[e]:[]}).finally(e=>{this.setState({isLoading:!1})})},this.AddRoleName=()=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.add&&this.state.role_action.save){let e=this.state.role_name_copying_selected,t=this.state.role_name_adding_input;""!==e&&""!==t&&this.callAPI("O9_Roles_User_Add_and_remove_add",{roleid:e,new_name:t}).then(a=>{let i=a.O9_Roles_User_Add_and_remove_add;1===i[0].type?this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then(a=>{let i=a.O9_Roles_Add_and_Remove_Role_Name,o=[{roleid:0,rolename:"All"}],s=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then(e=>{o=o.concat(e.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:o})}),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then(e=>{s=e.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:s})}),this.setState({O9_Roles_Add_and_Remove_Role_Name:i,isAdd_add_and_remove:!1,addAndRemove_btnAddClick:!1,role_name_adding_input:"",addAndRemove_btnSaveClick:!0});let l=-1;for(const e of i)e.rolename===t&&(l=e.roleid);var n=[{txcode:"bo-create-roleJWEBUI",input:{roleID:l,roleName:t,roleCopy:e}}];return Object(L.b)(n,{}).then(e=>{this.showToast("Save",!0)})}):this.showToast(i[0].message,!1)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.onSearch=(e,t)=>{this.setState({[t]:e.target.value})},this.abs_Click_next=()=>{this.onClickAssignLeftToRightArray()},this.abs_Click_next_all=()=>{this.onClickAssignLeftToRightAll()},this.abs_Click_previous=()=>{this.onClickAssignRightToLeftArray()},this.abs_Click_previous_all=()=>{this.onClickAssignRightToLeftAll()},this.onClickAssignLeftToRightAll=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter(t=>0===e.filter(e=>e.usrcd===t.data[1].dataItem.value.usrcd).length).map(e=>e.data[1].dataItem.value),a=this.state.column3_role_right_select.roleid;""!==a&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:a,data:t}).then(e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:a}).then(e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:a,role_user_all:t}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let i=this.stateData.column3.table_left.dataFull.Header.data[1],o=0;this.stateData.column3.table_left_data.forEach(()=>{!0===i.data.value&&(this.stateData.column3.table_left_data[o].data[1].value=!1),o++}),i.data.value=!1},this.onClickAssignRightToLeftAll=()=>{let e=this.stateData.column3.table_right_data.map(e=>e.data[1].dataItem.value),t=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:e}).then(e=>{let a=e.O9_Roles_User_Assignment_left_to_right;1===a[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then(e=>{let a=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:a,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:a}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(a[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let a=this.stateData.column3.table_right.dataFull.Header.data[1],i=0;this.stateData.column3.table_right_data.forEach(()=>{!0===a.data.value&&(this.stateData.column3.table_right_data[i].data[1].value=!1),i++}),a.data.value=!1},this.onClickAssignLeftToRightArray=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter(t=>!0===t.data[1].value&&0===e.filter(e=>e.usrcd===t.data[1].dataItem.value.usrcd).length).map(e=>e.data[1].dataItem.value),a=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_left=!0,""!==a&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:a,data:t}).then(e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:a}).then(e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:a,role_user_all:t}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let i=this.stateData.column3.table_left.dataFull.Header.data[1],o=0;this.stateData.column3.table_left_data.forEach(()=>{!0===i.data.value&&(this.stateData.column3.table_left_data[o].data[1].value=!1),o++}),i.data.value=!1},this.onClickAssignLeftRow=e=>{this.callAPI("user_profile_user_in_role",e.value).then(e=>{var t;let a=(null===e||void 0===e||null===(t=e.user_profile_user_in_role)||void 0===t?void 0:t.data)||[];this.setState({table_user_profile_user_in_role:a})})},this.onClickAssignLeftToRight=e=>{let t=this.state.column3_role_right_select.roleid,a=this.state.O9_Roles_User_assignment_table_right;for(let i=0;i<a.length;i++){if(a[i].usrcd===e.usrcd)return}""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:t,data:[{usrid:e.usrid}]}).then(e=>{let a=e.O9_Roles_User_Assignment_left_to_right;1===a[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then(e=>{let a=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:a,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:a}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):this.showToast(a[0].message,!1)})},this.onClickAssignRightToLeft=e=>{let t=this.refs.ref_assignment_list_role_name_right.value;""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:[{usrid:e.usrid}]}).then(e=>{let a=e.O9_Roles_User_Assignment_left_to_right;1===a[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then(e=>{let a=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:a,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:a}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):this.showToast(a[0].message,!1)})},this.onClickAssignRightToLeftArray=e=>{let t=this.stateData.column3.table_right_data.filter(e=>!0===e.data[1].value).map(e=>e.data[1].dataItem.value),a=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==a&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-a,data:t}).then(e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:a}).then(e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:a,role_user_all:t}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let i=this.stateData.column3.table_right.dataFull.Header.data[1],o=0;this.stateData.column3.table_right_data.forEach(()=>{!0===i.data.value&&(this.stateData.column3.table_right_data[o].data[1].value=!1),o++}),i.data.value=!1},this.onChangeUserAgm=(e,t)=>{switch(e.type){case"left":if(e.id===this.state.column3_role_right_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then(t=>{let a=this.state.O9_RolesUser_assignment_Role_Name_Left.filter(t=>t.roleid===e.id),i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_left:i,column3_role_left_select:a[0]})});break;case"right":if(e.id===this.state.column3_role_left_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then(t=>{let a=this.state.O9_RolesUser_assignment_Role_Name_Right.filter(t=>t.roleid===e.id),i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,column3_role_right_select:a[0]})})}},this.onChangeCurrency=e=>{e||0===e||(e="");let t=(e=String(e)).replace(/,/g,"");return t.length>16&&(t=t.slice(t.length-16,t.length)),Object(be.a)(t,2)},this.getValueCurrency=e=>void 0===e||null===e||""===e?"":Number(e.replace(/,/g,"")),this.saveInvokeTable=()=>{},this.onClickMenuInvokeLimit=e=>{let t=e.dataFull.dataItem;this.callAPI("O9_Roles_InvokeLimit_Table",t).then(e=>{void 0===e&&(e={});let a=e.O9_Roles_InvokeLimit_Table;this.setState({O9_Roles_Invoke_limit_menu_select:t,Invoke_role_selected:t.roleid},()=>{this.reloadTableInvokeLimit(a)})})},this.reloadTableInvokeLimit=e=>{if(e){let t=e.currency||[],a=e.data;for(const e of t)for(let t=0;t<a.length;t++){const i=a[t];i[e]=this.convertCurrency(i[e]),i.index_row=t}this.setState({O9_Roles_InvokeLimit_Table:a,invoke_limit_header:this.getTableHeader(t),invoke_limit_currency:t})}},this.onClickMenuApproveLimit=e=>{e=e.dataFull.dataItem,this.callAPI("O9_Roles_ApproveLimit_Table",e).then(t=>{if(t){let a=t.O9_Roles_ApproveLimit_Table,i=a.currency,o=a.data;for(const e of i)for(let t=0;t<o.length;t++){const a=o[t];a[e]=this.convertCurrency(a[e]),a.index_row=t}this.setState({O9_Roles_ApproveLimit_Table:o,O9_Roles_Approve_limit_menu_select:e,Approve_role_selected:e.roleid,approve_limit_header:this.getTableHeader(i)})}})},this.onClickTreeMenuInvokeApprove=(e,t)=>{t=t.dataItem;let a=this.state.menu_invoke_aprrove;t.isOpen=!t.isOpen;let i=[],o=[];this.callAPI("O9_Roles_InvokeApprove_Table_header",t).then(e=>{i=[{cmdid:"0",caption:"Role Name"},{cmdid:"0",caption:"Self Invoke"}],i=i.concat(e.O9_Roles_InvokeApprove_Table_header),i=i.filter(e=>null!==e.cmdid),this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then(e=>{o=e.O9_Roles_InvokeApprove_Table_body,this.setState({menu_invoke_aprrove:a,O9_Roles_InvokeApprove_Table_body:o,O9_Roles_InvokeApprove_Table_header:i,menu_invoke_aprrove_select:t})})})},this.removeRoleName=()=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.delete){let e=this.state.role_name_copying_selected;""!==e&&this.callAPI("O9_Roles_User_Add_and_remove_delete",{roleid:e}).then(t=>{let a=t.O9_Roles_User_Add_and_remove_delete;if(1===a[0].type){this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then(e=>{let t=e.O9_Roles_Add_and_Remove_Role_Name,a=t[0],i=[{roleid:0,rolename:"All"}],o=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then(e=>{i=i.concat(e.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:i})}),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then(e=>{o=e.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:o})}),this.setState({O9_Roles_Add_and_Remove_Role_Name:t,isAdd_add_and_remove:!1,isDelete_add_and_remove:!1,delete_err:"",role_name_copying_selected:a.roleid,column2_role_select:a})}),this.showToast("Save",!0);var i=[{txcode:"bo-delete-roleJWEBUI",input:{roleID:e}}];return Object(L.b)(i,{}).then(e=>{})}this.showToast(t.O9_Roles_User_Add_and_remove_delete[0].message,!1),this.setState({delete_err:a[0].message||""})})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},it=Object(m.c)("jwebui_roleProfile"),this.key_form="BO_015003009",this.data_key_form={BO_015003003:{title:"ADM-Roles Profile",col_id:"column1"},BO_015003008:{title:"ADM-Invoke Limit",col_id:"column4"},BO_015003009:{title:"ADM-Approve Limit",col_id:"column5"}},this.state={menu_parent_select:"ADM - Roles Profile",menu_select:this.data_key_form[this.key_form].col_id,"column3.role_choose_right":"","column3.role_choose_left":"","column2.role_name_copying":"",column3_role_left_select:0,role_name_adding_input:"",role_name_copying_selected:"",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,menu_invoke_aprrove:[],O9_Roles_InvokeApprove_Table_header:[],O9_Roles_InvokeApprove_Table_body:[],menu_invoke_aprrove_select:{},O9_Roles_Add_and_Remove_Role_Name:[],O9_Roles_Add_and_Remove_Role_Name_select:"",O9_Roles_User_assignment_table_left:[],O9_Roles_User_assignment_table_right:[],O9_RolesUser_assignment_Role_Name_Left:[],O9_RolesUser_assignment_Role_Name_Right:[],user_assignment_select:"",O9_Roles_Invoke_limit_menu:[],O9_Roles_Invoke_limit_menu_select:{},O9_Roles_Approve_limit_menu:[],O9_Roles_Approve_limit_menu_select:{},O9_Roles_InvokeLimit_Table:[],O9_Roles_ApproveLimit_Table:[],table_user_profile_user_in_role:[],invoke_limit_header:[],approve_limit_header:[],Col3_Assignment_Search:{},invoke_limit_search_value:{},approve_limit_search_value:{}},this.menu_form=[{title:"Roles Profile",child:["Invoke - Aprrove","Add - Remove","User Assignment"]},{title:"Invoke Limit",child:[]},{title:"Approve Limit",child:[]}],this.user_profile=n.g.context_get("user_acc"),this.stateData={form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},cmd:{visibility:""}}},tab:{data:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],abs_select:(e,t)=>{this.setState({menu_select:t})}},column1:{tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},title_table_up:"OPEARTION",table_up:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_up_data:[],table_up_config:[],title_table_down:"VERIFICATION",table_down:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_down_data:[],table_down_config:[]},column4:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchInvokeLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}]},column5:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchApproveLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]},column2:{role_name_adding:{dataFull:{config:{default:{title:"Role Name (for adding)",type:"text",class:"col-sm-5",code_form_component:"role_name_adding"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:e=>{this.CheckAddRoleName(e)}},listButton:[{dataFull:{config:{default:{title:"Add",icon:"add_circle_outline"},cmd:{}}},abs_Click:()=>{this.setState({addAndRemove_btnAddClick:!0})}},{dataFull:{config:{default:{title:"Delete",icon:"highlight_off"},cmd:{}}},abs_Click:this.removeRoleName},{dataFull:{config:{default:{title:"Save",type:"primary",icon:"check_circle_outline"},cmd:{}}},abs_Click:this.AddRoleName}],role_name_copying:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Role Name (for copying or deleting)",type:"text",class:"col-sm-5",code_form_component:"role_name_copying"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:[],input_value:"123",search_value:""},abs_Change:this.abs_role_name_copying_select,abs_search:e=>{this.onSearch(e,"column2.role_name_copying")}}},column3:{table_in_role:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"User Code",config:{width:"",isFrozen:!1}},{title:"User Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_in_role_data:[{data:[{data:"2"},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_in_role_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_left},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:n.g.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_left_data:[{data:[{data:"2"},{value:!1,abs_Click:this.abs_Ckeck},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_right},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:n.g.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_right_data:[{data:[],config:{value:!0}}],table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}async componentDidMount(){n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key),await this.getAllRoleAction(),await this.callAPI("O9_Roles_InvokeApprove_Menu").then(e=>{let{O9_Roles_InvokeApprove_Menu:t}=e||[];this.setState({menu_invoke_aprrove:t})});let e=[],t=[{roleid:0,rolename:"All"}],a=[],i=[],o=[];await this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then(t=>{e=t.O9_Roles_Add_and_Remove_Role_Name}),await this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then(e=>{t=t.concat(e.O9_RolesUser_assignment_Role_Name_Left)}),await this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then(e=>a=e.O9_RolesUser_assignment_Role_Name_Right),t.length>0&&await this.callAPI("O9_Roles_User_assignment_table",{roleid:0}).then(e=>{i=e.O9_Roles_User_assignment_table}),a.length>0&&await this.callAPI("O9_Roles_User_assignment_table",a[0]).then(e=>{o=e.O9_Roles_User_assignment_table}),this.setState({role_left:t[0],column3_role_right_select:a[0],column3_role_left_select:t[0],column2_role_select:e[0],O9_Roles_Add_and_Remove_Role_Name:e,O9_RolesUser_assignment_Role_Name_Left:t,O9_RolesUser_assignment_Role_Name_Right:a,O9_Roles_User_assignment_table_left:i,O9_Roles_User_assignment_table_right:o,O9_Roles_Invoke_limit_menu:e,O9_Roles_Approve_limit_menu:e,isLoading:!1},()=>{})}render(){const e=Object(m.b)("uFormLoading");return o.a.createElement(o.a.Fragment,null,this.state.isLoading?o.a.createElement(e,null):null,o.a.createElement("div",{style:{display:this.state.visibility}},o.a.createElement(it,{stateData:this.stateData})))}convertCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e||0===e||(e=""),e=String(e);let t=e.replace(/,/g,"");return Object(be.a)(t,2)}reloadTableWithMenuInvokeApprove(e){let t=this.state.menu_invoke_aprrove_select,a=[];this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then(t=>{a=t.O9_Roles_InvokeApprove_Table_body,this.setState({O9_Roles_InvokeApprove_Table_body:a,isLoading:!!e})})}}var st=ot;let lt;class nt extends i.Component{constructor(e){super(e),this.handleSelectTabID=e=>{this.setState({menu_select:e})},this.handelSearchInvokeLimit=(e,t)=>{var a;let i=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"",o=this.state.invoke_limit_search_value;o[t]=i,this.setState({invoke_limit_search_value:o})},this.handelSearchApproveLimit=(e,t)=>{var a;let i=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"",o=this.state.approve_limit_search_value;o[t]=i,this.setState({approve_limit_search_value:o})},this.handelChangeSearch=(e,t)=>{var a;let i=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"",o=this.state.Col3_Assignment_Search;switch(o[t]=i,t){case"TBL_USER_CODE":this.stateData.column3.table_left.dataFull.Header.data[2].value_search=i;break;case"TBL_USER_NAME":this.stateData.column3.table_left.dataFull.Header.data[3].value_search=i;break;case"TBR_USER_CODE":this.stateData.column3.table_right.dataFull.Header.data[2].value_search=i;break;case"TBR_USER_NAME":this.stateData.column3.table_right.dataFull.Header.data[3].value_search=i}this.setState({Col3_Assignment_Search:o})},this.handelClearSearch=()=>{},this.getTableHeader=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return t.push({title:"Group",code:"module"}),t.push({title:"Caption",code:"tranname"}),e.forEach(e=>{t.push({title:e,code:e})}),t},this.abs_role_name_copying_select=(e,t,a)=>{this.setState({role_name_copying_selected:e.roleid,column2_role_select:e})},this.abs_Ckeck_invoke_approve_verification=(e,t)=>{this.callAPI("O9_Roles_Invoke_approve_Table_Change_save_approve",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then(e=>{let t=e.O9_Roles_Invoke_approve_Table_Change_save_approve;this.reloadTableWithMenuInvokeApprove(),1===t[0].type?this.showToast("Save",!0):this.showToast("Save",!1)})},this.abs_Ckeck_invoke_approve_operation=(e,t)=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.save){let a=this.state.menu_invoke_aprrove.filter(t=>t.parentid===e.parentid);this.callAPI("O9_Roles_Invoke_approve_Table_Change_save",{roleid:e.roleid,data:[{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0}]}).then(i=>{let o=i.O9_Roles_Invoke_approve_Table_Change_save;if(this.reloadTableWithMenuInvokeApprove(!0),1===o[0].type){var s=[{txcode:"bo-update-roleBO-JWEBUI",input:{roleid:e.roleid,cmdid:e.parentid,cmdiddt:e.cmdiddt,invoke:!1===t?1:0,menu_child:a}}];return Object(L.b)(s,{}).then(e=>{this.showToast("Save",!0),this.setState({isLoading:!1})})}this.showToast(o[0].message,!1)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.UNSAFE_componentWillUpdate=(e,t)=>{var a,i,o;let s=t.role_action||{};this.stateData.tab.data=this.stateData.tab.data.map(e=>(e.isShow=e.id===t.menu_select,e)),this.stateData.column3.table_in_role_data=t.table_user_profile_user_in_role.map(e=>({config:{value:!1},data:[{data:e.rolename},{data:e.usrcd},{data:e.usrname}]})),this.stateData.column1.tree_data.tree_data=null===(a=t.menu_invoke_aprrove)||void 0===a?void 0:a.map(e=>({title:e.caption,parent_id:e.parentid,is_open:!1,DOM_elm:null,id:e.cmdid,dataItem:e,abs_click:this.onClickTreeMenuInvokeApprove})),this.stateData.column1.table_up.dataFull.Header.data=t.O9_Roles_InvokeApprove_Table_header.map(e=>({title:e.caption,config:{width:"",isFrozen:!1}})),this.stateData.column1.table_down.dataFull.Header.data=n.g.cloneJson(this.stateData.column1.table_up.dataFull.Header.data),this.stateData.column1.table_down.dataFull.Header.data[1]&&(this.stateData.column1.table_down.dataFull.Header.data[1].title="Self Approve");let l=t.O9_Roles_InvokeApprove_Table_header;this.stateData.column1.table_up_config=l.map((e,t)=>0===t?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:"uTableColumnCheckbox",config:{cmd:{disable:!1===s.save}}}),this.stateData.column1.table_down_config=this.stateData.column1.table_up_config;let r=t.O9_Roles_InvokeApprove_Table_body;this.stateData.column1.table_up_data=[],this.stateData.column1.table_down_data=[];for(let n=0;n<r.length;n++){let e=l.length-1,t=[],a=[];for(let i=0;i<e;i++)0===i&&(t.push({data:r[n+i].rolename}),a.push({data:r[n+i].rolename})),t.push({value:1===r[n+i].invoke,dataItem:r[n+i],abs_Click:this.abs_Ckeck_invoke_approve_operation}),a.push({value:1===r[n+i].approve,dataItem:r[n+i],abs_Click:this.abs_Ckeck_invoke_approve_verification});this.stateData.column1.table_up_data.push(t),this.stateData.column1.table_down_data.push(a),n=n+e-1}if(this.stateData.column2.role_name_adding.dataFull.config.cmd.disable=!0!==t.addAndRemove_btnAddClick,this.stateData.column2.listButton[2].dataFull.config.cmd.disable=!0===t.addAndRemove_btnSaveClick,this.stateData.column2.role_name_copying.dataFull.search_value=t["column2.role_name_copying"],this.stateData.column2.listButton[0].dataFull.config.cmd.visible=!1!==s.save,this.stateData.column2.listButton[2].dataFull.config.cmd.visible=!1!==s.save,this.stateData.column2.listButton[1].dataFull.config.cmd.visible=!1!==s.delete,this.stateData.column3.next.dataFull.config.cmd.disable=!1===s.save,this.stateData.column3.next_all.dataFull.config.cmd.disable=!1===s.save,this.stateData.column3.preview.dataFull.config.cmd.disable=!1===s.save,this.stateData.column3.preview_all.dataFull.config.cmd.disable=!1===s.save,!t.role_name_copying_selected&&t.O9_Roles_Add_and_Remove_Role_Name.length>0)this.setState({role_name_copying_selected:t.O9_Roles_Add_and_Remove_Role_Name[0].roleid});else{var c;this.stateData.column2.role_name_copying.dataFull.input_value=null===(c=t.column2_role_select)||void 0===c?void 0:c.rolename;let e=t.O9_Roles_Add_and_Remove_Role_Name.filter(e=>(e.rolename||"").toLowerCase().includes(t["column2.role_name_copying"].toLowerCase()));this.stateData.column2.role_name_copying.dataFull.data=e.map((e,a)=>{let i=!1;return e.roleid===t.role_name_copying_selected&&(i=!0),{title:e.rolename,value:e,selected:i}})}this.stateData.column2.role_name_adding.dataFull.value=t.role_name_adding_input;let d=this.unCheck_user_assign_table_left,h=this.unCheck_user_assign_table_right;!0===this.unCheck_user_assign_table_left&&(this.unCheck_user_assign_table_left=!1),!0===this.unCheck_user_assign_table_right&&(this.unCheck_user_assign_table_right=!1),this.stateData.column3.table_left_data=t.O9_Roles_User_assignment_table_left.filter(e=>e.usrcd.includes(t.Col3_Assignment_Search.TBL_USER_CODE||"")&&e.usrname.includes(t.Col3_Assignment_Search.TBL_USER_NAME||"")).map((e,t)=>{var a,i,o;return{data:[{data:t+1},{value:!0!==d&&((null===(a=this.stateData.column3.table_left_data[t])||void 0===a||null===(i=a.data)||void 0===i||null===(o=i[1])||void 0===o?void 0:o.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_left,dataItem:{value:e,index:t}},{data:e.usrcd},{data:e.usrname}],config:{value:!1}}}),this.stateData.column3.table_right_data=t.O9_Roles_User_assignment_table_right.filter(e=>e.usrcd.includes(t.Col3_Assignment_Search.TBR_USER_CODE||"")&&e.usrname.includes(t.Col3_Assignment_Search.TBR_USER_NAME||"")).map((e,t)=>{var a,i,o;return{data:[{data:t+1},{value:!0!==h&&((null===(a=this.stateData.column3.table_right_data[t])||void 0===a||null===(i=a.data)||void 0===i||null===(o=i[1])||void 0===o?void 0:o.value)||!1),abs_Click:this.abs_Check_role_profile_user_assign_right,dataItem:{value:e,index:t}},{data:e.usrcd},{data:e.usrname}],config:{value:!1}}}),this.stateData.column3.role_choose_left.dataFull.data=[],this.stateData.column3.role_choose_left.dataFull.search_value=t["column3.role_choose_left"],this.stateData.column3.role_choose_left.dataFull.input_value=null===(i=t.column3_role_left_select)||void 0===i?void 0:i.rolename,t.O9_RolesUser_assignment_Role_Name_Left.filter(e=>null!==e.rolename&&e.rolename.toLowerCase().includes(t["column3.role_choose_left"].toLowerCase())).forEach((e,a)=>{let i=!1;(t.column3_role_left_select.roleid===e.roleid||0===a&&void 0===t.column3_role_left_select.roleid)&&(i=!0),this.stateData.column3.role_choose_left.dataFull.data.push({title:e.rolename,value:{id:e.roleid,item:e,type:"left"},selected:i})}),this.stateData.column3.role_choose_right.dataFull.search_value=t["column3.role_choose_right"],this.stateData.column3.role_choose_right.dataFull.input_value=null===(o=t.column3_role_right_select)||void 0===o?void 0:o.rolename;let _=t.O9_RolesUser_assignment_Role_Name_Right.filter(e=>null!==e.rolename&&e.rolename.toLowerCase().includes(t["column3.role_choose_right"].toLowerCase()));this.stateData.column3.role_choose_right.dataFull.data=_.map((e,a)=>{let i=!1;return(t.column3_role_right_select.roleid===e.roleid||0===a&&void 0===t.column3_role_right_select.roleid)&&(i=!0),{title:e.rolename,value:{id:e.roleid,item:e,type:"right"},selected:i}}),this.stateData.column4.listItem=t.O9_Roles_Invoke_limit_menu.map(e=>{let a=!1;return t.Invoke_role_selected===e.roleid&&(a=!0),{dataFull:{title:e.rolename,dataItem:e,selected:a},abs_Click:this.onClickMenuInvokeLimit}}),this.stateData.column4.table.dataFull.Header.data=t.invoke_limit_header.map(e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.invoke_limit_search_value[e.code]||""})),this.stateData.column4.table_config=t.invoke_limit_header.map((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===s.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}),this.stateData.column4.table_data=t.O9_Roles_InvokeLimit_Table.filter(e=>{let a=!0;for(const i in t.invoke_limit_search_value){let o=t.invoke_limit_search_value[i];e[i].toLowerCase().includes(o.toLowerCase())||(a=!1)}return a}).map((e,a)=>t.invoke_limit_header.map((t,i)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:a,index_col:i,abs_Change:this.abs_change_invoke_table,abs_Submit:this.abs_submit_invoke_table}))),this.stateData.column5.listItem=t.O9_Roles_Invoke_limit_menu.map(e=>{let a=!1;return t.Approve_role_selected===e.roleid&&(a=!0),{dataFull:{title:e.rolename,dataItem:e,selected:a},abs_Click:this.onClickMenuApproveLimit}}),this.stateData.column5.table.dataFull.Header.data=t.approve_limit_header.map(e=>({id:e.code,title:e.title,config:{width:"",isFrozen:!1},value_search:t.approve_limit_search_value[e.code]||""})),this.stateData.column5.table_config=t.approve_limit_header.map((e,t)=>t<2?{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}:{type:!1===s.save?"uTableColumnDefault":"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}),this.stateData.column5.table_data=t.O9_Roles_ApproveLimit_Table.filter(e=>{let a=!0;for(const i in t.approve_limit_search_value){let o=t.approve_limit_search_value[i];e[i].toLowerCase().includes(o.toLowerCase())||(a=!1)}return a}).map((e,a)=>t.approve_limit_header.map((t,i)=>({hasChange:!1,default:{textAlign:"right"},data:e[t.code],dataItem:{header:t,row_idx:e.index_row,row_data:e},index_row:a,index_col:i,abs_Change:this.abs_change_approve_table,abs_Submit:this.abs_submit_approve_table})))},this.CheckAddRoleName=e=>{let t=e.target.value,a=!1;for(const i of this.stateData.column2.role_name_copying.dataFull.data)if(i.title===t||""===t){a=!0;break}""===t&&(a=!0),this.setState({addAndRemove_btnSaveClick:a,role_name_adding_input:t})},this.abs_Check_role_profile_user_assign_left=e=>{this.onClickAssignLeftRow(e);let t=this.stateData.column3.table_left_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_Check_role_profile_user_assign_right=e=>{let t=this.stateData.column3.table_right_data[e.index].data[1];t.value=!t.value,this.setState({autoReload:!0})},this.abs_CheckAll_left=()=>{let e=this.stateData.column3.table_left.dataFull.Header.data[1],t=0;this.stateData.column3.table_left_data.forEach(()=>{!0===e.data.value?this.stateData.column3.table_left_data[t].data[1].value=!1:this.stateData.column3.table_left_data[t].data[1].value=!0,t++}),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_CheckAll_right=()=>{let e=this.stateData.column3.table_right.dataFull.Header.data[1],t=0;this.stateData.column3.table_right_data.forEach(()=>{!0===e.data.value?this.stateData.column3.table_right_data[t].data[1].value=!1:this.stateData.column3.table_right_data[t].data[1].value=!0,t++}),e.data.value=!e.data.value,this.setState({autoReload:!0})},this.abs_change_approve_table=(e,t,a,i)=>{let o=e.target,{selectionStart:s,value:l}=o,n=this.state.O9_Roles_ApproveLimit_Table;let r=n[t.row_idx][t.header.code],c=l;if(r||(r="0.00"),r.includes(".")&&!l.includes(".")){let e=r.lastIndexOf(".");c=l.substring(0,e)+"."+l.substring(e,l.length),"."===c&&(c="")}let d=r;d=d.replace("-","");let h=l.lastIndexOf(".");var _;void 0!==d&&void 0!==l&&(l.indexOf(".")!==l.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(l.length-(null===(_=d)||void 0===_?void 0:_.length)),1===s?h=1:s>l.lastIndexOf(".")&&(h+=1)));n[t.row_idx][t.header.code]=d,this.setState({O9_Roles_ApproveLimit_Table:n},()=>{setTimeout(()=>{o.setSelectionRange(h,h)},50)})},this.abs_change_invoke_table=(e,t,a,i)=>{let o=e.target,{selectionStart:s,value:l}=o,n=this.state.O9_Roles_InvokeLimit_Table;let r=n[t.row_idx][t.header.code],c=l;if(r||(r="0.00"),r.includes(".")&&!l.includes(".")){let e=r.lastIndexOf(".");c=l.substring(0,e)+"."+l.substring(e,l.length),"."===c&&(c="")}let d=r;d=d.replace("-","");let h=l.lastIndexOf(".");var _;void 0!==d&&void 0!==l&&(l.indexOf(".")!==l.lastIndexOf(".")?h=d.length-2:(d=this.onChangeCurrency(c),h=s-(l.length-(null===(_=d)||void 0===_?void 0:_.length)),1===s?h=1:s>l.lastIndexOf(".")&&(h+=1)));n[t.row_idx][t.header.code]=d,this.setState({O9_Roles_InvokeLimit_Table:n},()=>{setTimeout(()=>{o.setSelectionRange(h,h)},50)})},this.abs_submit_invoke_table=(e,t,a)=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_InvokeLimit_Table;this.callAPI("O9_Roles_InvokeLimit_Table_Change_save",{roleid:this.state.Invoke_role_selected,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then(a=>{if(1===a.O9_Roles_InvokeLimit_Table_Change_save[0].type){this.showToast("Save",!0);var i=[{txcode:"bo-update-roleFOJWEBUI",input:{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,cmdid:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code]),list_currency:this.state.invoke_limit_currency,list_ccr:t[e.row_idx]}}];return Object(L.b)(i,{}).then(e=>{})}this.showToast("Save",!1)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")})},this.abs_submit_approve_table=(e,t,a)=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.save){let t=this.state.O9_Roles_ApproveLimit_Table;this.callAPI("O9_Roles_ApproveLimit_Table_Change_save",{roleid:this.state.O9_Roles_Approve_limit_menu_select.roleid,data:[{roleid:this.state.Invoke_role_selected,txcode:e.row_data.cmdid,ccrcd:e.header.code,amt:this.getValueCurrency(t[e.row_idx][e.header.code])}]}).then(e=>{1===e.O9_Roles_ApproveLimit_Table_Change_save[0].type&&this.showToast("Save",!0)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED")})},this.getRoleAction=(e,t)=>{let a=Object(n.w)(),i={};const o=t.list_layout;for(const n of a)for(const t of o)for(const a of t.list_view)for(const t of a.list_input){let a=t.default.name.toLowerCase();if(!0!==i[a]){var s,l,r;let o=null===(s=e[n])||void 0===s||null===(l=s[t.default.codeHidden])||void 0===l||null===(r=l.component)||void 0===r?void 0:r.install;i[a]=o}}return i},this.getAllRoleAction=()=>Object(L.b)([{txcode:"#sys:bo-load-formRole",input:{form_id:this.key_form}},{txcode:"#sys:bo-load-formId",input:{form_id:this.key_form}}],{}).then(e=>{var t=n.g.foGetData("form_design_detail",e);void 0===t&&(t={list_layout:[]});var a=n.g.foGetData("loadRoleTask",e)||{};void 0===a&&(a={});let i=this.getRoleAction(a,t);this.setState({role_action:i})}),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.showToast=(e,t)=>{var a={};switch(t){case!0:a={class_:"success",icon:"fa fa-check",title:e+" successfully",time:(new Date).getTime()+"",description:e+" Successfully",data:{},action:{}};break;case!1:a={class_:"error",icon:"fa fa-check",title:e||"Action error!",time:(new Date).getTime()+"",description:e||"Action error!",data:{},action:{}};break;default:a={class_:"error",icon:"fa fa-check",title:e,time:(new Date).getTime()+"",description:e,data:{},action:{}}}n.g.pushNotify("notifyToast",a,{}),n.g.callAllScreenListen()},this.callAPI=(e,t)=>{this.state.isLoading||this.setState({isLoading:!0});var a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,t),Object(L.b)(a,{}).then(t=>n.g.foGetData("data",t)||{[e]:[]}).finally(e=>{this.setState({isLoading:!1})})},this.AddRoleName=()=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.add&&this.state.role_action.save){let e=this.state.role_name_copying_selected,t=this.state.role_name_adding_input;""!==e&&""!==t&&this.callAPI("O9_Roles_User_Add_and_remove_add",{roleid:e,new_name:t}).then(a=>{let i=a.O9_Roles_User_Add_and_remove_add;1===i[0].type?this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then(a=>{let i=a.O9_Roles_Add_and_Remove_Role_Name,o=[{roleid:0,rolename:"All"}],s=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then(e=>{o=o.concat(e.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:o})}),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then(e=>{s=e.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:s})}),this.setState({O9_Roles_Add_and_Remove_Role_Name:i,isAdd_add_and_remove:!1,addAndRemove_btnAddClick:!1,role_name_adding_input:"",addAndRemove_btnSaveClick:!0});let l=-1;for(const e of i)e.rolename===t&&(l=e.roleid);var n=[{txcode:"bo-create-roleJWEBUI",input:{roleID:l,roleName:t,roleCopy:e}}];return Object(L.b)(n,{}).then(e=>{this.showToast("Save",!0)})}):this.showToast(i[0].message,!1)})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},this.onSearch=(e,t)=>{this.setState({[t]:e.target.value})},this.abs_Click_next=()=>{this.onClickAssignLeftToRightArray()},this.abs_Click_next_all=()=>{this.onClickAssignLeftToRightAll()},this.abs_Click_previous=()=>{this.onClickAssignRightToLeftArray()},this.abs_Click_previous_all=()=>{this.onClickAssignRightToLeftAll()},this.onClickAssignLeftToRightAll=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter(t=>0===e.filter(e=>e.usrcd===t.data[1].dataItem.value.usrcd).length).map(e=>e.data[1].dataItem.value),a=this.state.column3_role_right_select.roleid;""!==a&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:a,data:t}).then(e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:a}).then(e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:a,role_user_all:t}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let i=this.stateData.column3.table_left.dataFull.Header.data[1],o=0;this.stateData.column3.table_left_data.forEach(()=>{!0===i.data.value&&(this.stateData.column3.table_left_data[o].data[1].value=!1),o++}),i.data.value=!1},this.onClickAssignRightToLeftAll=()=>{let e=this.stateData.column3.table_right_data.map(e=>e.data[1].dataItem.value),t=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:e}).then(e=>{let a=e.O9_Roles_User_Assignment_left_to_right;1===a[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then(e=>{let a=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:a,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:a}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(a[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let a=this.stateData.column3.table_right.dataFull.Header.data[1],i=0;this.stateData.column3.table_right_data.forEach(()=>{!0===a.data.value&&(this.stateData.column3.table_right_data[i].data[1].value=!1),i++}),a.data.value=!1},this.onClickAssignLeftToRightArray=()=>{let e=this.state.O9_Roles_User_assignment_table_right,t=this.stateData.column3.table_left_data.filter(t=>!0===t.data[1].value&&0===e.filter(e=>e.usrcd===t.data[1].dataItem.value.usrcd).length).map(e=>e.data[1].dataItem.value),a=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_left=!0,""!==a&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:a,data:t}).then(e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:a}).then(e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:a,role_user_all:t}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let i=this.stateData.column3.table_left.dataFull.Header.data[1],o=0;this.stateData.column3.table_left_data.forEach(()=>{!0===i.data.value&&(this.stateData.column3.table_left_data[o].data[1].value=!1),o++}),i.data.value=!1},this.onClickAssignLeftRow=e=>{this.callAPI("user_profile_user_in_role",e.value).then(e=>{var t;let a=(null===e||void 0===e||null===(t=e.user_profile_user_in_role)||void 0===t?void 0:t.data)||[];this.setState({table_user_profile_user_in_role:a})})},this.onClickAssignLeftToRight=e=>{let t=this.state.column3_role_right_select.roleid,a=this.state.O9_Roles_User_assignment_table_right;for(let i=0;i<a.length;i++){if(a[i].usrcd===e.usrcd)return}""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:t,data:[{usrid:e.usrid}]}).then(e=>{let a=e.O9_Roles_User_Assignment_left_to_right;1===a[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then(e=>{let a=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:a,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:a}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):this.showToast(a[0].message,!1)})},this.onClickAssignRightToLeft=e=>{let t=this.refs.ref_assignment_list_role_name_right.value;""!==t&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-t,data:[{usrid:e.usrid}]}).then(e=>{let a=e.O9_Roles_User_Assignment_left_to_right;1===a[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:t}).then(e=>{let a=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:a,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:t,role_user_all:a}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):this.showToast(a[0].message,!1)})},this.onClickAssignRightToLeftArray=e=>{let t=this.stateData.column3.table_right_data.filter(e=>!0===e.data[1].value).map(e=>e.data[1].dataItem.value),a=this.state.column3_role_right_select.roleid;this.unCheck_user_assign_table_right=!0,""!==a&&this.callAPI("O9_Roles_User_Assignment_left_to_right",{roleid:-a,data:t}).then(e=>{let t=e.O9_Roles_User_Assignment_left_to_right;1===t[0].type?this.callAPI("O9_Roles_User_assignment_table",{roleid:a}).then(e=>{let t=e.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:t,isLoading:!0});var i=[{txcode:"bo-update-roleUserJwebui",input:{role_id:a,role_user_all:t}}];return Object(L.b)(i,{}).then(e=>{this.setState({isLoading:!1}),this.showToast("Save",!0)})}):(this.showToast(t[0].message,!1),this.setState({jwebuiAutoReload:!0}))});let i=this.stateData.column3.table_right.dataFull.Header.data[1],o=0;this.stateData.column3.table_right_data.forEach(()=>{!0===i.data.value&&(this.stateData.column3.table_right_data[o].data[1].value=!1),o++}),i.data.value=!1},this.onChangeUserAgm=(e,t)=>{switch(e.type){case"left":if(e.id===this.state.column3_role_right_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then(t=>{let a=this.state.O9_RolesUser_assignment_Role_Name_Left.filter(t=>t.roleid===e.id),i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_left:i,column3_role_left_select:a[0]})});break;case"right":if(e.id===this.state.column3_role_left_select.roleid)break;this.callAPI("O9_Roles_User_assignment_table",{roleid:e.id}).then(t=>{let a=this.state.O9_RolesUser_assignment_Role_Name_Right.filter(t=>t.roleid===e.id),i=t.O9_Roles_User_assignment_table;this.setState({O9_Roles_User_assignment_table_right:i,column3_role_right_select:a[0]})})}},this.onChangeCurrency=e=>{e||0===e||(e="");let t=(e=String(e)).replace(/,/g,"");return t.length>16&&(t=t.slice(t.length-16,t.length)),Object(be.a)(t,2)},this.getValueCurrency=e=>void 0===e||null===e||""===e?"":Number(e.replace(/,/g,"")),this.saveInvokeTable=()=>{},this.onClickMenuInvokeLimit=e=>{let t=e.dataFull.dataItem;this.callAPI("O9_Roles_InvokeLimit_Table",t).then(e=>{void 0===e&&(e={});let a=e.O9_Roles_InvokeLimit_Table;this.setState({O9_Roles_Invoke_limit_menu_select:t,Invoke_role_selected:t.roleid},()=>{this.reloadTableInvokeLimit(a)})})},this.reloadTableInvokeLimit=e=>{if(e){let t=e.currency||[],a=e.data;for(const e of t)for(let t=0;t<a.length;t++){const i=a[t];i[e]=this.convertCurrency(i[e]),i.index_row=t}this.setState({O9_Roles_InvokeLimit_Table:a,invoke_limit_header:this.getTableHeader(t),invoke_limit_currency:t})}},this.onClickMenuApproveLimit=e=>{e=e.dataFull.dataItem,this.callAPI("O9_Roles_ApproveLimit_Table",e).then(t=>{if(t){let a=t.O9_Roles_ApproveLimit_Table,i=a.currency,o=a.data;for(const e of i)for(let t=0;t<o.length;t++){const a=o[t];a[e]=this.convertCurrency(a[e]),a.index_row=t}this.setState({O9_Roles_ApproveLimit_Table:o,O9_Roles_Approve_limit_menu_select:e,Approve_role_selected:e.roleid,approve_limit_header:this.getTableHeader(i)})}})},this.onClickTreeMenuInvokeApprove=(e,t)=>{t=t.dataItem;let a=this.state.menu_invoke_aprrove;t.isOpen=!t.isOpen;let i=[],o=[];this.callAPI("O9_Roles_InvokeApprove_Table_header",t).then(e=>{i=[{cmdid:"0",caption:"Role Name"},{cmdid:"0",caption:"Self Invoke"}],i=i.concat(e.O9_Roles_InvokeApprove_Table_header),i=i.filter(e=>null!==e.cmdid),this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then(e=>{o=e.O9_Roles_InvokeApprove_Table_body,this.setState({menu_invoke_aprrove:a,O9_Roles_InvokeApprove_Table_body:o,O9_Roles_InvokeApprove_Table_header:i,menu_invoke_aprrove_select:t})})})},this.removeRoleName=()=>{this.getAllRoleAction().then(()=>{if(this.state.role_action.delete){let e=this.state.role_name_copying_selected;""!==e&&this.callAPI("O9_Roles_User_Add_and_remove_delete",{roleid:e}).then(t=>{let a=t.O9_Roles_User_Add_and_remove_delete;if(1===a[0].type){this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then(e=>{let t=e.O9_Roles_Add_and_Remove_Role_Name,a=t[0],i=[{roleid:0,rolename:"All"}],o=[];this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then(e=>{i=i.concat(e.O9_RolesUser_assignment_Role_Name_Left),this.setState({O9_RolesUser_assignment_Role_Name_Left:i})}),this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then(e=>{o=e.O9_RolesUser_assignment_Role_Name_Right,this.setState({O9_RolesUser_assignment_Role_Name_Right:o})}),this.setState({O9_Roles_Add_and_Remove_Role_Name:t,isAdd_add_and_remove:!1,isDelete_add_and_remove:!1,delete_err:"",role_name_copying_selected:a.roleid,column2_role_select:a})}),this.showToast("Save",!0);var i=[{txcode:"bo-delete-roleJWEBUI",input:{roleID:e}}];return Object(L.b)(i,{}).then(e=>{})}this.showToast(t.O9_Roles_User_Add_and_remove_delete[0].message,!1),this.setState({delete_err:a[0].message||""})})}else this.showToast("#ERR_UNAUTHORIZED: ACTION IS NOT ALLOWED",!1)})},lt=Object(m.c)("jwebui_roleProfile"),this.key_form="BO_015003008",this.data_key_form={BO_015003003:{title:"ADM-Roles Profile",col_id:"column1"},BO_015003008:{title:"ADM-Invoke Limit",col_id:"column4"},BO_015003009:{title:"ADM-Approve Limit",col_id:"column5"}},this.state={menu_parent_select:"ADM - Roles Profile",menu_select:this.data_key_form[this.key_form].col_id,"column3.role_choose_right":"","column3.role_choose_left":"","column2.role_name_copying":"",column3_role_left_select:0,role_name_adding_input:"",role_name_copying_selected:"",isLoading:!0,visibility:"",data:this.props.data,infoA:{title:this.data_key_form[this.key_form].title,des:this.data_key_form[this.key_form].title,openOne:"true",ofModal:!1},addAndRemove_btnSaveClick:!0,menu_invoke_aprrove:[],O9_Roles_InvokeApprove_Table_header:[],O9_Roles_InvokeApprove_Table_body:[],menu_invoke_aprrove_select:{},O9_Roles_Add_and_Remove_Role_Name:[],O9_Roles_Add_and_Remove_Role_Name_select:"",O9_Roles_User_assignment_table_left:[],O9_Roles_User_assignment_table_right:[],O9_RolesUser_assignment_Role_Name_Left:[],O9_RolesUser_assignment_Role_Name_Right:[],user_assignment_select:"",O9_Roles_Invoke_limit_menu:[],O9_Roles_Invoke_limit_menu_select:{},O9_Roles_Approve_limit_menu:[],O9_Roles_Approve_limit_menu_select:{},O9_Roles_InvokeLimit_Table:[],O9_Roles_ApproveLimit_Table:[],table_user_profile_user_in_role:[],invoke_limit_header:[],approve_limit_header:[],Col3_Assignment_Search:{},invoke_limit_search_value:{},approve_limit_search_value:{}},this.menu_form=[{title:"Roles Profile",child:["Invoke - Aprrove","Add - Remove","User Assignment"]},{title:"Invoke Limit",child:[]},{title:"Approve Limit",child:[]}],this.user_profile=n.g.context_get("user_acc"),this.stateData={form:{dataFull:{config:{default:{title:this.data_key_form[this.key_form].title}},cmd:{visibility:""}}},tab:{data:[{id:"column1",title:"Role Profile - Invoke - Approve",isShow:!0},{id:"column2",title:"Role Profile - Add - Remove"},{id:"column3",title:"Role Profile - User - Assignment"},{id:"column4",title:"Invoke Limit"},{id:"column5",title:"Approve Limit"}],abs_select:(e,t)=>{this.setState({menu_select:t})}},column1:{tree_data:{tree_data:[],config:{open_one:!0,is_has_dom:!0,noBorder:!0}},title_table_up:"OPEARTION",table_up:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_up_data:[],table_up_config:[],title_table_down:"VERIFICATION",table_down:{dataFull:{Header:{data:[],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_down_data:[],table_down_config:[]},column4:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchInvokeLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnEditInput",config:{mode:"right",isFrozen:!1}}]},column5:{auto_save:{dataFull:{value:!0,dataItem:{}},abs_Click:this.test},listItem:[],table:{dataFull:{abs_search:this.handelSearchApproveLimit,Header:{data:[],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{mode:{maxHeight:!0,noHeader:!1}}}},table_data:[],table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"right",isFrozen:!1}}]},column2:{role_name_adding:{dataFull:{config:{default:{title:"Role Name (for adding)",type:"text",class:"col-sm-5",code_form_component:"role_name_adding"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:e=>{this.CheckAddRoleName(e)}},listButton:[{dataFull:{config:{default:{title:"Add",icon:"add_circle_outline"},cmd:{}}},abs_Click:()=>{this.setState({addAndRemove_btnAddClick:!0})}},{dataFull:{config:{default:{title:"Delete",icon:"highlight_off"},cmd:{}}},abs_Click:this.removeRoleName},{dataFull:{config:{default:{title:"Save",type:"primary",icon:"check_circle_outline"},cmd:{}}},abs_Click:this.AddRoleName}],role_name_copying:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Role Name (for copying or deleting)",type:"text",class:"col-sm-5",code_form_component:"role_name_copying"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:[],input_value:"123",search_value:""},abs_Change:this.abs_role_name_copying_select,abs_search:e=>{this.onSearch(e,"column2.role_name_copying")}}},column3:{table_in_role:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"User Code",config:{width:"",isFrozen:!1}},{title:"User Name",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_in_role_data:[{data:[{data:"2"},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_in_role_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],user_assignment:{title:"User assignment"},user_in_role:{title:"User in role"},role_choose_left:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select user group",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_left")}},role_choose_right:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:"Select role ",type:"text",class:"col-md-12",code_form_component:"language_default"},cmd:{disable:!1,visible:!0,error:{message:"",type:""}},mode:{noTitle:!1}},data:[],search_value:""},abs_Change:this.onChangeUserAgm,abs_search:e=>{this.onSearch(e,"column3.role_choose_right")}},preview:{dataFull:{config:{default:{title:"",type:"",icon:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous},preview_all:{dataFull:{config:{default:{icondouble:"keyboard_arrow_left"},cmd:{}}},abs_Click:this.abs_Click_previous_all},next_all:{dataFull:{config:{default:{type:"",icondouble:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next_all},next:{dataFull:{config:{default:{type:"",icon:"keyboard_arrow_right"},cmd:{}}},abs_Click:this.abs_Click_next},table_left:{dataFull:{Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_left},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBL_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBL_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,config:{search:{placeholder:n.g.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_left_data:[{data:[{data:"2"},{value:!1,abs_Click:this.abs_Ckeck},{data:"ACT Manager"},{data:"abc@gmail.com"}],config:{value:!1}}],table_left_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_right:{dataFull:{abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"",data:{value:!1,abs_Click:this.abs_CheckAll_right},config:{hasCheck:!0,width:"",isFrozen:!1}},{title:"User code",id:"TBR_USER_CODE",config:{width:"",isFrozen:!1}},{title:"User Name",id:"TBR_USER_NAME",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!0,isFrozenHeader:!0}}},config:{search:{placeholder:n.g.getLang("Search")},mode:{height:"520px",noHeader:!1}}}},table_right_data:[{data:[],config:{value:!0}}],table_right_config:[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnCheckbox"},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}]}}}async componentDidMount(){n.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key),await this.getAllRoleAction(),await this.callAPI("O9_Roles_InvokeApprove_Menu").then(e=>{let{O9_Roles_InvokeApprove_Menu:t}=e||[];this.setState({menu_invoke_aprrove:t})});let e=[],t=[{roleid:0,rolename:"All"}],a=[],i=[],o=[];await this.callAPI("O9_Roles_Add_and_Remove_Role_Name").then(t=>{e=t.O9_Roles_Add_and_Remove_Role_Name}),await this.callAPI("O9_RolesUser_assignment_Role_Name_Left").then(e=>{t=t.concat(e.O9_RolesUser_assignment_Role_Name_Left)}),await this.callAPI("O9_RolesUser_assignment_Role_Name_Right").then(e=>a=e.O9_RolesUser_assignment_Role_Name_Right),t.length>0&&await this.callAPI("O9_Roles_User_assignment_table",{roleid:0}).then(e=>{i=e.O9_Roles_User_assignment_table}),a.length>0&&await this.callAPI("O9_Roles_User_assignment_table",a[0]).then(e=>{o=e.O9_Roles_User_assignment_table}),this.setState({role_left:t[0],column3_role_right_select:a[0],column3_role_left_select:t[0],column2_role_select:e[0],O9_Roles_Add_and_Remove_Role_Name:e,O9_RolesUser_assignment_Role_Name_Left:t,O9_RolesUser_assignment_Role_Name_Right:a,O9_Roles_User_assignment_table_left:i,O9_Roles_User_assignment_table_right:o,O9_Roles_Invoke_limit_menu:e,O9_Roles_Approve_limit_menu:e,isLoading:!1},()=>{})}render(){const e=Object(m.b)("uFormLoading");return o.a.createElement(o.a.Fragment,null,this.state.isLoading?o.a.createElement(e,null):null,o.a.createElement("div",{style:{display:this.state.visibility}},o.a.createElement(lt,{stateData:this.stateData})))}convertCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e||0===e||(e=""),e=String(e);let t=e.replace(/,/g,"");return Object(be.a)(t,2)}reloadTableWithMenuInvokeApprove(e){let t=this.state.menu_invoke_aprrove_select,a=[];this.callAPI("O9_Roles_InvokeApprove_Table_body",t).then(t=>{a=t.O9_Roles_InvokeApprove_Table_body,this.setState({O9_Roles_InvokeApprove_Table_body:a,isLoading:!!e})})}}var rt=nt;const ct=e=>{switch(e.form_code){case"myProfile":return d.a.quickPost([{txcode:"#sys:bo-load-myProfile",input:{}}],{}),!0;case"BO_015003011":return function(){var e=n.g.autoID();"ncbsCbs"===Object(n.r)()?n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement(Ie,{key:e,mapping_key:e}))):n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement(Ve,{key:e,mapping_key:e})))}(),!0;case"016002":return function(){var e=n.g.autoID();n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement(ve,{key:e,mapping_key:e})))}(),!0;case"BO_015003003":return function(){var e=n.g.autoID();"ncbsCbs"===Object(n.r)()?n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement(we,{key:e,mapping_key:e}))):n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement(Ce,{key:e,mapping_key:e})))}(),!0;case"ncbs_role_management":return function(){var e=n.g.autoID();n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement(Me,{key:e,mapping_key:e})))}(),!0;case"015001005":return function(){var e=n.g.autoID();n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement(je,{key:e,mapping_key:e})))}(),!0;case"BO_003005":return function(){let e=n.g.autoID();"ncbsCbs"===Object(n.r)()?n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement(Ke,{key:e,mapping_key:e}))):n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement(Ge,{key:e,mapping_key:e})))}(),!0;case"BO_011001":return function(){let e=n.g.autoID();"ncbsCbs"===Object(n.r)()?n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement(at,{key:e,mapping_key:e}))):n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement($e,{key:e,mapping_key:e})))}(),!0;case"BO_015003009":return function(){var e=n.g.autoID();n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement(st,{key:e,mapping_key:e})))}(),!0;case"BO_015003008":return function(){var e=n.g.autoID();n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement(rt,{key:e,mapping_key:e})))}(),!0;case"mangerFeedback":return d.a.quickPost([{txcode:"#sys:bo-feedback-loadData",input:{}}],{}),!0}return!1};var dt=a(67);let ht={designform:"Design Form",dev:"Developer",o9:"Optimize 9",sys:"System"};class _t extends i.Component{constructor(e){super(e),this.loadDataToState=()=>{let e=this.createListApp(this.allListApp),t=this.createListLangOfApp(this.lang_system_),a=[],i={};return this.allListApp.forEach(e=>{a.push({id:e.app,title:ht[e.app]});const t={title:e.app,btn_save:{dataFull:{config:{default:{title:"Save",type:"primary",class:"",icon:""}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.test3}},table_list_forms:{title:"LIST FORMS",table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table:{dataFull:{Header:{data:[{title:"Form structure",config:{width:"",isFrozen:!1}},{title:"English",config:{width:"",isFrozen:!1}},{title:"Ti\u1ebfng vi\u1ec7t",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:[{data:[{data:"Form"},{data:" Admin User Profile "},{data:" Qu\u1ea3n tr\u1ecb ng\u01b0\u1eddi d\xf9ng"}],config:{value:!1}},{data:[{data:"-- Layout"},{data:"Profile  "},{data:"H\u1ed3 s\u01a1"}],config:{value:!1}},{data:[{data:"---- View"},{data:"Button"},{data:"N\xfat b\u1ea5m"}],config:{value:!1}},{data:[{data:"------- Component"},{data:"Text input"},{data:"\xd4 nh\u1eadp li\u1ec7u"}],config:{value:!1}}]},table_list_lang:{title:"LIST LANG",table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table:{Header:{data:this.getHeaderTableLangDetailConfig(this.lang_system_),config:{mode:{hasSearch:!1}}}},table_data:{data:this.getDataTableLangDetailConfig(this.lang_arr,this.lang_system_)}}};i[e.app]=t}),{form:{dataFull:{config:{default:{title:"Lang Manager Global"}},cmd:{visibility:""}}},form_add:{code:{dataFull:{config:{default:{title:"Code lang",class:"col-md-4 ",required:!0,placeholder:"Code lang",code_form_component:"code"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},name:{dataFull:{config:{default:{title:"Name lang",class:"col-md-4 ",required:!1,placeholder:"Name lang",code_form_component:"name"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},image:{dataFull:{config:{default:{title:"Image",class:"col-md-4 ",required:!1,placeholder:"Image",code_form_component:"image"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},of_app:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No Result",title:"Of App",class:"col-md-4",required:!1,code_form_component:"of_app"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:e,search_value:"",abs_Change:this.onChangeValueSelect_formAdd,abs_search:this.search}},lang_copy:{dataFull:{config:{default:{search:{placeholder:"Lang copy"},data_status:"No Result",title:"Lang copy",class:"col-md-4",required:!1,code_form_component:"lang_copy"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:t,search_value:"",abs_Change:this.onChangeValueSelect_formAdd,abs_search:this.search}},btn_add:{dataFull:{config:{default:{title:"Add",type:"primary",class:"",icon:"",code_form_component:"btn_add"}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.test3}}},tab:{data:a,abs_select:this.test},list_app:i}},this.createListLangOfApp=e=>{let t=[];return e.forEach(e=>{t.push({title:e.view,value:e.key,selected:e.selected})}),t},this.createListApp=e=>{let t=[];return e.forEach(e=>{t.push({title:ht[e.app],value:e.app}),t[0].selected=!0}),t},this.createListFormTable=e=>(this.allListForms.forEach(e=>{}),[]),this.onChangeValue_formAdd=(e,t)=>{let{stateData:a}=this.state;a.form_add[t].dataFull.value=e.target.value,this.setState({stateData:a})},this.onChangeValueSelect_formAdd=(e,t,a)=>{let{stateData:i}=this.state;if(a){for(const t of i.form_add[a].dataFull.data)t.selected=t.value===e;this.setState({stateData:i})}},this.table_input_change=(e,t,a,i)=>{let o=e.target.value;if(0!==i||0===i&&o.length<=2){let e=this.state.stateData;e.table_lang_data.data[a].all_column[i].data=o,e.table_lang_data.data[a].all_column[i].isUpdate=!1,this.updateLanguageSystem(a,this.mappingIndexToKeyLanguage[i.toString()],o),this.setState({stateData:e})}},this.table_input_change_detail=(e,t,a,i)=>{let o=e.target.value,s=this.state.stateData;if(s.table_lang_detail_data.data[a].all_column[i].data=o,s.table_lang_detail_data.data[a].all_column[i].isUpdate=!1,i>1){let e=this.logicState.lang_system[i-2].key;this.logicState.data[a].lang[e]=o}else this.logicState.data[a].key=o;this.setState({stateData:s})},this.clickAddLangButtonHandler=()=>{let e=prompt(this.logicState.languages.alert,"");if(null!=e&&"yes"===e){this.logicState.lang_system.push({key:"",view:"",img:""});let{stateData:e}=this.state;e.table_lang_data.data=this.getDataTableLangConfig(this.logicState.lang_system),this.setState({stateData:e})}},this.clickAddLangDetailHandler=()=>{let e=prompt(this.logicState.languages.alert,"");if(null!=e&&"yes"===e){let e={key:"",lang:{}};this.logicState.data.push(e);let{stateData:t}=this.state,a=this.getEachRowDataLangDetailConfig(e,t.table_lang_detail_data.data.length,this.logicState.lang_system);t.table_lang_detail_data.data.push(a),this.setState({stateData:t})}},this.changeKeyLanguage=e=>{let t={note:n.g.getLang("note"),title_detail:n.g.getLang("langApplication_titleDetail"),title_:n.g.getLang("langApplication_title"),des_:n.g.getLang("langApplication_des"),lang_code:n.g.getLang("langApplication_code"),lang_name:n.g.getLang("langApplication_name"),lang_img:n.g.getLang("langApplication_img"),lowercase:n.g.getLang("langApplication_lowercase"),btn_save:n.g.getLang("langApplication_btnSave"),btn_add:n.g.getLang("langApplication_btnAdd"),btn_save_detail:n.g.getLang("langApplication_btnSaveDetail"),btn_add_detail:n.g.getLang("langApplication_btnAddDetail"),alert:n.g.getLang("langApplication_alert")};if(void 0!==e)return t;let a=this.logicState.infoA;a.title=n.g.getLang("langApplication_title"),a.des=n.g.getLang("langApplication_des"),a.lang_form.vi=n.g.getLang("langApplication_title"),a.lang_form.en=n.g.getLang("langApplication_title"),this.logicState.languages=t,this.logicState.infoA=a,this.changeLanguageTemplate(t)},this.saveLangSystem=()=>{let e=n.g.getConfigUserDefault("");if(void 0!==e){e.list_lang_config=this.logicState.lang_system,d.a.quickPost([{txcode:"#sys:bo-save-langList",input:{content:e}}],{});let{stateData:t}=this.state;t.table_lang_data.data=this.getDataTableLangConfig(this.logicState.lang_system,!0),t.table_lang_detail_header.Header.data=this.getHeaderTableLangDetailConfig(this.logicState.lang_system),t.table_lang_detail_data.data=this.getDataTableLangDetailConfig(this.logicState.data,this.logicState.lang_system),this.setState({stateData:t})}},this.saveLangDetail=()=>{let e=this.logicState.data,t=this.logicState.lang_system,a={};for(let s=0;s<t.length;s++)a[t[s].key]={};for(let s=0;s<e.length;s++)if(void 0!==e[s].lang&&void 0!==e[s].key){let t=e[s].lang,i=e[s].key.trim();for(let e in t)a[e][i]=t[e].trim()}let i=[];for(let s in a)i[i.length]={key:s,content:a[s]};d.a.quickPost([{txcode:"#sys:bo-save-langDetail",input:{lang_detail:i}}],{});let{stateData:o}=this.state;o.table_lang_detail_data.data=this.getDataTableLangDetailConfig(this.logicState.data,this.logicState.lang_system,!0),this.setState({stateData:o})},this.getInfoA=()=>this.logicState.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.key_form="langManagerGlobal",this.DESIGNFORM_CODE_DATABASE="designForm",this.lang_system_=n.g.getConfigUserDefault("list_lang_config"),this.LangManagerGlobalForm=Object(m.c)("langManagerGlobal"),this.allListForms=[],this.allListApp=[];let t=this.props.list_lang_data,a=[];for(let o in t){let e=t[o];for(let t in e){let i=e[t],s=this.checkHasKey(a,t);if(-1!==s){let e=a[s];e.lang[o]=i,a[s]=e}else{let e={key:t,lang:{}};e.lang[o]=i,a[a.length]=e}}}a.sort((function(e,t){return e.key===t.key?0:e.key>t.key?1:-1}));let i=this.changeKeyLanguage("start");this.mappingIndexToKeyLanguage={0:"key",1:"view",2:"img"},this.lang=t,this.languages_=i,this.lang_arr=a,this.logicState={data:a,lang_system:this.lang_system_,infoA:{lang_form:{vi:n.g.getLang("langApplication_title"),en:n.g.getLang("langApplication_title")},title:"Global language management",des:"Qu\u1ea3n l\xfd t\u1ea5t c\u1ea3 ng\xf4n ng\u1eef thu\u1ed9c \u1ee9ng d\u1ee5ng, ng\xf4n ng\u1eef \u0111\xe3 t\u1ea1o kh\xf4ng \u0111\u01b0\u1ee3c x\xf3a!",openOne:"true",form_code:this.key_form,ofModal:!1},check_screen_width:void 0,languages:i},this.state={isReload:!1,visibility:"",stateData:{}}}getDataTableLangConfig(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(t=>({all_column:[{data:t.key,isUpdate:e,dataItem:{},abs_Change:this.table_input_change},{data:t.view,isUpdate:e,dataItem:{},abs_Change:this.table_input_change},{data:t.img||"",isUpdate:e,dataItem:{},abs_Change:this.table_input_change}]}))}getDataTableLangDetailConfig(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((a,i)=>this.getEachRowDataLangDetailConfig(a,i,e,t))}getEachRowDataLangDetailConfig(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,o=[{data:t+1,config:{mode:"center"}},{data:e.key,isUpdate:i,dataItem:{},abs_Change:this.table_input_change_detail}];return a.forEach(t=>{o.push({data:void 0!==e.lang[t.key]?e.lang[t.key]:"",isUpdate:i,dataItem:{},abs_Change:this.table_input_change_detail})}),{all_column:o}}getHeaderTableLangDetailConfig(){let e=[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"Key",config:{width:"",isFrozen:!1}}];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>{e.push({title:t.view,config:{width:"",isFrozen:!1}})}),e}updateLanguageSystem(e,t,a){this.logicState.lang_system[e][t]=a}changeLanguageTemplate(e){let{stateData:t}=this.state;t.form.config.default.title=e.title_,t.form.config.default.title_sub=e.des_,t.layout.dataFull.config.title=e.title_detail,t.save_lang.dataFull.config.default.title=e.btn_save,t.add_lang.dataFull.config.default.title=e.btn_add,t.save_detail.dataFull.config.default.title=e.btn_save_detail,t.add_detail.dataFull.config.default.title=e.btn_add_detail,t.table_lang_header.Header.data[0].title=`${e.lang_code} ${e.lowercase}`,t.table_lang_header.Header.data[1].title=e.lang_name,t.table_lang_header.Header.data[2].title=e.lang_img,this.setState({stateData:t})}checkHasKey(e,t){for(let a=0;a<e.length;a++)if(void 0!==e[a].key&&e[a].key===t)return a;return-1}render(){if("none"===this.state.visibility)return null;const e=this.LangManagerGlobalForm;return o.a.createElement(e,{stateData:this.state.stateData})}componentDidMount(){let{stateData:e}=this.state;n.g.addAppAuto(this.key_form,this,this.logicState.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key),this.allListForms=this.props.list_forms.map(e=>e[this.DESIGNFORM_CODE_DATABASE]),this.allListApp=this.props.list_app,e=this.loadDataToState(),this.setState({stateData:e})}}var ut=_t;let gt={designform:"Design Form",dev:"Developer",o9:"Optimize 9",sys:"System"};class mt extends i.Component{constructor(e){super(e),this.loadDataToState=()=>{let e=this.createListApp(this.allListApp),t=this.createListLangOfApp(this.lang_system_),a=[],i={};return this.allListApp.forEach(e=>{a.push({id:e.app,title:gt[e.app]});const t={title:e.app,btn_save:{dataFull:{config:{default:{title:"Save",type:"primary",class:"",icon:""}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.test3}},table_list_forms:{title:"LIST FORMS",table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table:{dataFull:{Header:{data:[{title:"Form structure",config:{width:"",isFrozen:!1}},{title:"English",config:{width:"",isFrozen:!1}},{title:"Ti\u1ebfng vi\u1ec7t",config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:[{data:[{data:"Form"},{data:" Admin User Profile "},{data:" Qu\u1ea3n tr\u1ecb ng\u01b0\u1eddi d\xf9ng"}],config:{value:!1}},{data:[{data:"-- Layout"},{data:"Profile  "},{data:"H\u1ed3 s\u01a1"}],config:{value:!1}},{data:[{data:"---- View"},{data:"Button"},{data:"N\xfat b\u1ea5m"}],config:{value:!1}},{data:[{data:"------- Component"},{data:"Text input"},{data:"\xd4 nh\u1eadp li\u1ec7u"}],config:{value:!1}}]},table_list_lang:{title:"LIST LANG",table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table:{Header:{data:this.getHeaderTableLangDetailConfig(this.lang_system_),config:{mode:{hasSearch:!1}}}},table_data:{data:this.getDataTableLangDetailConfig(this.lang_arr,this.lang_system_)}}};i[e.app]=t}),{form:{dataFull:{config:{default:{title:"Lang Manager Global"}},cmd:{visibility:""}}},form_add:{code:{dataFull:{config:{default:{title:"Code lang",class:"col-md-4 ",required:!0,placeholder:"Code lang",code_form_component:"code"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},name:{dataFull:{config:{default:{title:"Name lang",class:"col-md-4 ",required:!1,placeholder:"Name lang",code_form_component:"name"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},image:{dataFull:{config:{default:{title:"Image",class:"col-md-4 ",required:!1,placeholder:"Image",code_form_component:"image"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_formAdd}},of_app:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No Result",title:"Of App",class:"col-md-4",required:!1,code_form_component:"of_app"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:e,search_value:"",abs_Change:this.onChangeValueSelect_formAdd,abs_search:this.search}},lang_copy:{dataFull:{config:{default:{search:{placeholder:"Lang copy"},data_status:"No Result",title:"Lang copy",class:"col-md-4",required:!1,code_form_component:"lang_copy"},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:t,search_value:"",abs_Change:this.onChangeValueSelect_formAdd,abs_search:this.search}},btn_add:{dataFull:{config:{default:{title:"Add",type:"primary",class:"",icon:"",code_form_component:"btn_add"}},cmd:{disable:!1,isLoading:!1,isFocus:!1},abs_Click:this.test3}}},tab:{data:a,abs_select:this.test},list_app:i}},this.abs_change=(e,t,a)=>{let i,o=this.state.data_select,s=this.state.input_value;for(let n=0;n<o.length;n++)void 0===o[n].selected&&(o[n].selected=!1),o[n].value===e&&(o[n].selected=!o[n].selected,o[n].selected&&(i=o[n]));for(let n=0;n<s.length;n++){var l;(null===(l=s[n])||void 0===l?void 0:l.value)===e&&s.splice(n,1)}s.push(i),this.setState({input_value:s,data_select:o})},this.click=e=>{},this.table_input_change_detail=(e,t,a,i)=>{let o=this.state.stateData;o.table_search_rows[a][i].data=e.target.value,this.setState({stateData:o})},this.table_select_change_detail=(e,t,a,i,o,s)=>{let{stateData:l}=this.state,n=l.table_search_rows[a][i].data.filter(e=>!0===e.selected);n.length>0&&(n[0].selected=!1);let r=l.table_search_rows[a][i].data.filter((e,t)=>t===s);r.length>0&&(r[0].selected=!0,l.table_search_rows[a][i].value=r[0].title,this.setState({stateData:l}))},this.abs_calendar_changeMonth=e=>{},this.abs_calendar_submit=e=>{},this.abs_calendar_chooseYear=e=>{},this.abs_calendar_changeYear=e=>{},this.abs_calendar_chooseMonth=e=>{},this.abs_calendar_openCalendar=()=>{},this.abs_calendar_changeDay=e=>{},this.abs_calendar_reset=()=>{},this.onChangeValueSelect_formAdd=(e,t,a)=>{let{stateData:i}=this.state;if(a){for(const t of i.form_add[a].dataFull.data)t.selected=t.value===e;this.setState({stateData:i})}},this.getInfoA=()=>this.logicState.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.key_form="activity",this.DESIGNFORM_CODE_DATABASE="designForm",this.ActivityForm=Object(m.c)("activity"),this.logicState={infoA:{lang_form:{vi:n.g.getLang("langApplication_title"),en:n.g.getLang("langApplication_title")},title:"User activity",des:"",openOne:"true",form_code:this.key_form,ofModal:!1},check_screen_width:void 0},this.state={isReload:!1,visibility:"",stateData:{title:{date_from_to:"to"},form:{dataFull:{config:{default:{title:"User Activity Monitoring"}},cmd:{visibility:""}}},app_code:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No Result",title:"App code",class:"col-md-4",required:!0},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},data:[{title:"New",value:"123"},{title:"New acc",value:"1234"},{title:"New aa",value:"12345"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New aaaa",value:"122",selected:!0}],search_value:"",abs_Change:this.abs_change,abs_search:this.search,input_value:[{title:"New aaaa",value:"new_Aa"}]}},user_select:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No Result",title:"User",class:"col-md-4",required:!1},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},data:[{title:"New",value:"123"},{title:"New acc",value:"1234"},{title:"New aa",value:"12345"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New pub",value:"122"},{title:"New aaaa",value:"122",selected:!0}],search_value:"",abs_Change:this.abs_change,abs_search:this.search,input_value:[{title:"New aaaa",value:"new_Aa"}]}},date_form:{dataFull:{config:{default:{subTitle_isShow:!0,subTitle:"(dd/mm/yyyy)",title:"Date,time",class:"col-sm-3 ",required:!0},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{textAlign:"right"}},value:"20/11/2020",timepicker:{hour:"00",time:"00",title:"(24 hours)"},calendar_data:{value_current:"123",today:{title:"Today"},config:{days_title:[{title:"SUN",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"SAT",type:"gray"}]},list_months:[{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September",selected:!0},{title:"September"},{title:"September"}],list_years:{value:2020,data:[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025]},list_days:[{title:"30",type:"gray"},{title:"31",type:"gray"},{title:"1"},{title:"2"},{title:"3"},{title:"4"},{title:"5"},{title:"6"},{title:"7",type:"primary"},{title:"8"},{title:"9"},{title:"10"},{title:"11"},{title:"12"},{title:"13",isDisable:!0},{title:"14"},{title:"15"},{title:"16",isDisable:!0},{title:"17",isDisable:!0},{title:"18",isDisable:!0},{title:"19"},{title:"20",isDisable:!0},{title:"21"},{title:"22"},{title:"23"},{title:"24"},{title:"25"},{title:"26"},{title:"27"},{title:"28"},{title:"29"},{title:"30"},{title:"1",type:"gray"},{title:"2",type:"gray"},{title:"3",type:"gray"}]},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_changeDay:this.abs_calendar_changeDay,abs_calendar_reset:this.abs_calendar_reset,abs_calendar_today:this.abs_calendar_today}},date_to:{dataFull:{config:{default:{subTitle_isShow:!0,subTitle:"(dd/mm/yyyy)",title:"date, time",class:"col-sm-3 ",required:!0},cmd:{disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{textAlign:"right"}},timepicker:{hour:"00",time:"00",title:"(24 hours)"},value:"20/11/2020",calendar_data:{value_current:"123",today:{title:"Today"},config:{days_title:[{title:"SUN",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"MON",type:"gray"},{title:"SAT",type:"gray"}]},list_months:[{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September"},{title:"September",selected:!0},{title:"September"},{title:"September"}],list_years:{value:2020,data:[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025]},list_days:[{title:"30",type:"gray"},{title:"31",type:"gray"},{title:"1"},{title:"2"},{title:"3"},{title:"4"},{title:"5"},{title:"6"},{title:"7",type:"primary"},{title:"8"},{title:"9"},{title:"10"},{title:"11"},{title:"12"},{title:"13",isDisable:!0},{title:"14"},{title:"15"},{title:"16",isDisable:!0},{title:"17",isDisable:!0},{title:"18",isDisable:!0},{title:"19"},{title:"20",isDisable:!0},{title:"21"},{title:"22"},{title:"23"},{title:"24"},{title:"25"},{title:"26"},{title:"27"},{title:"28"},{title:"29"},{title:"30"},{title:"1",type:"gray"},{title:"2",type:"gray"},{title:"3",type:"gray"}]},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_changeDay:this.abs_calendar_changeDay,abs_calendar_reset:this.abs_calendar_reset,abs_calendar_today:this.abs_calendar_today}},btn_search:{dataFull:{config:{default:{title:"Search",type:"primary",icon:"search"}},abs_Click:this.abs_Click}},btn_export:{dataFull:{config:{default:{title:"Export",type:"primary",icon:"open_in_new"}},abs_Click:this.abs_Click}},table_activity:{header:this.getConfigTableSearch(),data:this.getConfigTableSearchRows(),config_row:this.getConfigTableSearchRowsCofig()}}}}getConfigTableSearch(){return{dataFull:{Header:{data:[{title:"Date Time",id:"dt",sort_active:"up",config:{width:""}},{title:"User Code",id:"uc",sort_active:"",config:{width:"",isFrozen:!1}},{title:"Activity",id:"act",sort_active:"",config:{width:"",isFrozen:!1}},{title:"ActionGroup",sort_active:"",id:"ag",config:{width:"",isFrozen:!1}},{title:"Section",sort_active:"",id:"st",config:{width:"",isFrozen:!1}},{title:"App info",sort_active:"",id:"ai",config:{width:"300px",isFrozen:!1}}],config:{mode:{hasSearch:!0,isSort:!0,isFrozenHeader:!0}}},uPagination:{abs_PagingActive:this.pagingActive,abs_setRecordActive:this.abs_setRecordActive,result_total:10,paging_index:1,paging_record:[{number:5,selected:!0},{number:10}]},abs_search:this.search_table,abs_SortUp:this.sort_up,abs_SortDown:this.sort_down}}}getConfigTableSearchRows(){return[[{data:"20-10-2020 09:50:03"},{data:{header:{dataFull:{Header:{data:[{title:"Code",config:{width:""}},{title:"Full Name",config:{width:"",isFrozen:!1}}],config:{}}}},data:[{data:"ac01"},{data:"Le Minh Thanh"}],config_row:[{type:"uTableColumnDefault"},{type:"uTableColumnDefault"}]}},{data:"Login"},{data:"Login/Logout"},{data:{header:{dataFull:{Header:{data:[{title:"Token",config:{width:""}},{title:"IP",config:{width:"",isFrozen:!1}},{title:"WS",config:{width:"",isFrozen:!1}}],config:{}}}},data:[{data:"7b593f7a-bd59-47f3-a263-cf4cd232883c"},{data:"192.168.12.30"},{data:"Chrome- 86.0.4240.193"}],config_row:[{type:"uTableColumnDefault"},{type:"uTableColumnDefault"},{type:"uTableColumnDefault"}]}},{data:{header:{dataFull:{Header:{data:[{title:"App code",config:{width:""}},{title:"API",config:{width:"",isFrozen:!1}},{title:"Request",config:{width:"",isFrozen:!1}},{title:"Response",config:{width:"",isFrozen:!1}}],config:{}}}},data:[{data:"CMS2.0"},{data:"192.168.12.30:8080/api/o9/ctm-create/"},{data:{title:"Copy",icon:"copy",dataItem:{abs:"123"},abs_Click:this.click}},{data:{title:"Copy",icon:"copy",dataItem:{abs:"123"},abs_Click:this.click}}],config_row:[{type:"uTableColumnDefault"},{type:"uTableColumnDefault"},{type:"uTableColumnLink"},{type:"uTableColumnLink"}]}}]]}getConfigTableSearchRowsCofig(){return[{type:"uTableColumnDefault",config:{mode:"center",isFrozen:!1}},{type:"uTableColumnTable"},{type:"uTableColumnDefault"},{type:"uTableColumnDefault"},{type:"uTableColumnTable"},{type:"uTableColumnTable"}]}render(){if("none"===this.state.visibility)return null;const e=this.ActivityForm;return o.a.createElement(e,{stateData:this.state.stateData})}componentDidMount(){n.g.addAppAuto(this.key_form,this,this.logicState.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key)}}var pt=mt;class ft extends i.Component{constructor(e){super(e),this.key_form="test_123987654",this.stateHidden={infoA:{lang_form:{vi:n.g.getLang("test_123987654_title"),en:n.g.getLang("test_123987654_title")},title:n.g.getLang("test_123987654_title"),des:"Form test!",openOne:"true",ofModal:!1},visibility:!1,user_info:{}},this.state={}}componentDidMount(){n.g.addAppAuto(this.key_form,this,this.stateHidden.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key)}render(){const e=Object(m.c)("jwebui_404");return console.log("loadTest_123987654===list_form_ne====",this.props.list_form_ne),console.log("loadTest_123987654===list_app_ne====",this.props.list_app_ne),o.a.createElement("div",null,o.a.createElement(e,{stateData:{form:{cmd:{visible:!0},title:"The webpage you are looking for is not here!"},btn_home:{dataFull:{config:{default:{title:"GO TO HOMEPAGE hehe",type:"",class:""}},abs_Click:this.abs_Click}}}}))}}var vt=ft;class bt extends i.Component{constructor(e){super(e),this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.key_form="myProfile",this.state={visibility:"",infoA:{lang_form:{vi:n.g.getLang("myProfile_title"),en:n.g.getLang("myProfile_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!1},show_toast:"snackbar",check_msg:!1}}componentDidMount(){}render(){return o.a.createElement("div",null,"123")}}var yt=bt;const Dt=(e,t,a,s,l)=>{if(null!=e.form_code&&!n.g.openForm(e.form_code)){if(ct(e))return;switch(e.form_code){case"designForm":d.a.quickPost([{txcode:"#sys:bo-load-designForm",input:{}}],{});break;case"paraServer":d.a.quickPost([{txcode:"#sys:bo-load-allParaServer",input:{}}],{});break;case"flow_bo":d.a.quickPost([{txcode:"#sys:bo-load-allTxBo",input:{}}],{});break;case"flow_fo":d.a.quickPost([{txcode:"#sys:bo-load-allTxFo",input:{}}],{});break;case"designDataBase":!function(){var e=n.g.autoID();n.g.newForm(o.a.createElement(_,{data:Object(n.n)(),key:e,mapping_key:e}))}();break;case"roleMatrix":d.a.quickPost([{txcode:"#sys:bo-load-allRoleSystem",input:{para_data:"role_system"}}],{});break;case"roleUser":d.a.quickPost([{txcode:"#sys:bo-load-roleUser",input:{}}],{});break;case"roleBo":d.a.quickPost([{txcode:"#sys:bo-load-roleBo",input:{}}],{});break;case"myDevice":d.a.quickPost([{txcode:"#sys:bo-load-device",input:{token_webui:Object(n.y)()}}],{});break;case"langApplication":!function(){for(var e=n.g.getConfigUserDefault("list_lang_config"),t="",a=0;a<e.length;a++)t+=""===t?e[a].key:";"+e[a].key;d.a.quickPost([{txcode:"#sys:bo-load-langAll",input:{lang_data:t}}],{})}();break;case"eLearning":Object(L.b)([{txcode:"#sys:bo-load-eLearning",input:{}}],{}).then(e=>{var t=n.g.foGetData("temple_elearning",e),a=n.g.foGetData("data",e),i=n.g.autoID();n.g.newForm(o.a.createElement(dt.default,{temple_elearning:t,data:a,key:i,mapping_key:i}))},e=>{});break;case"langManagerGlobal":!function(){for(var e=n.g.getConfigUserDefault("list_lang_config"),t="",a=0;a<e.length;a++)t+=""===t?e[a].key:";"+e[a].key;Object(L.b)([{txcode:"#designform:bo-designForm-getAll"},{txcode:"#sys:bo-load-langAll",input:{lang_data:t}}],{}).then(t=>{let a=n.g.foGetData("list_form",t),s=n.g.foGetData("list_app",t),l={};e.forEach(e=>{l[e.key]=n.g.foGetData("lang_data_"+e.key,t)});var r=n.g.autoID();n.g.newForm(o.a.createElement(i.Suspense,{key:r,fallback:o.a.createElement("div",null)},o.a.createElement(ut,{list_lang_data:l,list_forms:a,list_app:s,key:r,mapping_key:r})))},e=>{})}();break;case"activity":Object(L.b)([{txcode:"#designform:bo-designForm-getAll"}],{}).then(e=>{let t=n.g.foGetData("list_form",e),a=n.g.foGetData("list_app",e);var s=n.g.autoID();n.g.newForm(o.a.createElement(i.Suspense,{key:s,fallback:o.a.createElement("div",null)},o.a.createElement(pt,{list_forms:t,list_app:a,key:s,mapping_key:s})))},e=>{});break;case"test_123987654":!function(){var e=n.g.autoID();Object(L.b)([{txcode:"#designform:bo-designForm-getAll"}],{}).then(t=>{let a=n.g.foGetData("list_form",t),s=n.g.foGetData("list_app",t);n.g.newForm(o.a.createElement(i.Suspense,{key:e,fallback:o.a.createElement("div",null)},o.a.createElement(vt,{list_form_ne:a,list_app_ne:s,mapping_key:e})))})}();break;default:const r=Object(n.p)(e.form_code);if(void 0===r)Object(L.b)([{txcode:"#sys:bo-load-formRole",input:{form_id:e.form_code}},{txcode:"#sys:bo-load-formId",input:{form_id:e.form_code}}],{}).then(i=>{var o=n.g.foGetData("form_design_detail",i),r=n.g.foGetData("loadRoleTask",i);if(void 0!==r?Object(n.b)(e.form_code,r):Object(n.b)(e.form_code,{}),null!=o){Object(n.a)(e.form_code,o);const i=Object(n.p)(e.form_code),r=xt(e);let c={data_form:"",learnapi_form:"",learnsql_form:"",bo_data_form:"",lazy_load:Object(n.l)(e.form_code)};void 0!==r.data&&(c.data_form=r.data),void 0!==r.learnapi&&(c.learnapi_form=r.learnapi),void 0!==r.learnsql&&(c.learnsql_form=r.learnsql),void 0!==r.bodata&&(c.bo_data_form=r.bodata),kt(c,e.form_code,i,r,void 0,t,a,s,l)}},e=>{});else{const i=xt(e);let o={data_form:"",learnapi_form:"",learnsql_form:"",bo_data_form:"",lazy_load:Object(n.l)(e.form_code)};void 0!==i.data&&(o.data_form=i.data),void 0!==i.learnapi&&(o.learnapi_form=i.learnapi),void 0!==i.learnsql&&(o.learnsql_form=i.learnsql),void 0!==i.bodata&&(o.bo_data_form=i.bodata),kt(o,e.form_code,r,i,void 0,t,a,s,l)}}}},Ct=(e,t,a,i,s,r)=>{void 0===a&&(a={});var c=Object(n.p)(e);if(void 0===c)Object(L.b)([{txcode:"#sys:bo-load-formRole",input:{form_id:e}},{txcode:"#sys:bo-load-formId",input:{form_id:e}}],{}).then(c=>{var d=n.g.foGetData("form_design_detail",c),h=n.g.foGetData("loadRoleTask",c);if(void 0!==h&&Object(n.b)(e,h),void 0!==d){Object(n.a)(e,d);const c=Object(n.p)(e),h=Object(n.q)(e);let _={data_form:"",learnapi_form:"",learnsql_form:"",bo_data_form:"",lazy_load:Object(n.l)(e)};void 0!==h.data&&(_.data_form=h.data),void 0!==h.learnapi&&(_.learnapi_form=h.learnapi),void 0!==h.learnsql&&(_.learnsql_form=h.learnsql),void 0!==h.bodata&&(_.bo_data_form=h.bodata),""===_.data_form&&""===_.learnapi_form&&""===_.learnsql_form&&""===_.bo_data_form&&"{}"===JSON.stringify(_.lazy_load)?void 0===t?l.a.render(o.a.createElement(Q,{key:Object(n.c)(),form_code:e,conf:c,infoA:h}),t):l.a.render(o.a.createElement(Q,{key:Object(n.c)(),form_code:e,infoA_parent:a,ofModal:!0,set_call_form_back:s,componentConfigDefault:i,conf:c,infoA:h}),t):kt(_,e,c,h,t,a,i,s,r)}},e=>{});else{const d=Object(n.q)(e);let h={data_form:"",learnapi_form:"",learnsql_form:"",bo_data_form:"",lazy_load:Object(n.l)(e)};void 0!==d.data&&(h.data_form=d.data),void 0!==d.learnapi&&(h.learnapi_form=d.learnapi),void 0!==d.learnsql&&(h.learnsql_form=d.learnsql),void 0!==d.bodata&&(h.bo_data_form=d.bodata),""===h.data_form&&""===h.learnapi_form&&""===h.learnsql_form&&""===h.bo_data_form&&"{}"===JSON.stringify(h.lazy_load)?void 0===t?l.a.render(o.a.createElement(Q,{key:Object(n.c)(),form_code:e,conf:c,infoA:d}),t):l.a.render(o.a.createElement(Q,{key:Object(n.c)(),form_code:e,infoA_parent:a,ofModal:!0,set_call_form_back:s,componentConfigDefault:i,conf:c,infoA:d}),t):kt(h,e,c,d,t,a,i,s,r)}},At=(e,t,a,i,s,r)=>{switch(e){case"ncbs_role_management":return function(e){var t=n.g.autoID();l.a.render(o.a.createElement(yt,{key:t,mapping_key:t}),e)}(t),!0}};function kt(e,t,a,i,s,r,c,d,h){var _=[];void 0!==e.data_form&&(_=e.data_form.split(";"));for(var u={},g=0;g<_.length;g++)void 0===u[_[g]]&&""!==_[g]&&(u[_[g]]=_[g]);var m="";for(var p in u)n.g.checkHasData(p)||(""===m?m=p:m+=";"+p);var f="";if(""!==e.learnapi_form){var v=[];void 0!==e.learnapi_form&&(v=e.learnapi_form.split(";"));for(var b={},y=0;y<v.length;y++)""!==v[y].trim()&&(b[v[y].trim()]="one");for(var D in b)f+=""===f?D:";"+D}var C="";if(""!==e.learnsql_form){var A=[];void 0!==e.learnsql_form&&(A=e.learnsql_form.split(";"));for(var k={},M=0;M<A.length;M++)""!==A[M].trim()&&(k[A[M].trim()]="one");for(var x in k)C+=""===C?x:";"+x}if(void 0===e.bo_data_form&&(e.bo_data_form=""),void 0===e.lazy_load&&(e.lazy_load={}),e.data_form=m,e.learnapi_form=f,e.learnsql_form=C,""===e.data_form&&""===e.learnsql_form&&""===e.learnapi_form&&""===e.bo_data_form&&"{}"===JSON.stringify(e.lazy_load)){var N=n.g.autoID();void 0===s?n.g.newForm(o.a.createElement(Q,{key:N,mapping_key:N,data_select:h,form_code:t,conf:a,infoA:i,set_call_form_back:d,infoA_parent:r,componentConfigDefault:c,ofModal:!1})):l.a.render(o.a.createElement(Q,{key:N,mapping_key:N,data_select:h,form_code:t,set_call_form_back:d,infoA_parent:r,componentConfigDefault:c,ofModal:!0,conf:a,infoA:i}),s)}else""===e.bo_data_form?Mt(t,a,i,s,r,c,d,h,e):Object(L.b)([{txcode:e.bo_data_form,input:{}}],{}).then(o=>{Mt(t,a,i,s,r,c,d,h,e)},e=>{})}function Mt(e,t,a,i,s,r,c,d,h){void 0!==h&&(""==h.data_form&&delete h.data_form,""==h.learnapi_form&&delete h.learnapi_form,""==h.learnsql_form&&delete h.learnsql_form,""==h.bo_data_form&&delete h.bo_data_form,void 0!==h.lazy_load&&(0===h.lazy_load.c_cdlist.length&&delete h.lazy_load.c_cdlist,0===Object.keys(h.lazy_load).length&&delete h.lazy_load)),Object(L.b)([{txcode:"#sys:bo-load-data",input:{table_code:h.data_form,request_data:h,data_select:d}},{txcode:"#sys:bo-load-dataLazy",input:{request_data:h}}],{}).then(h=>{let _=n.g.foGetData("data_select_result",h);if(void 0===d&&(d={}),void 0!==_)for(var u in _)d[u]=_[u];var g=n.g.autoID();void 0===i?n.g.newForm(o.a.createElement(Q,{key:g,mapping_key:g,form_error:h.form_error,data_select:d,form_code:e,conf:t,infoA:a,set_call_form_back:c,infoA_parent:s,componentConfigDefault:r,ofModal:!1})):l.a.render(o.a.createElement(Q,{key:g,mapping_key:g,form_error:h.form_error,data_select:d,set_call_form_back:c,form_code:e,infoA_parent:s,componentConfigDefault:r,ofModal:!0,conf:t,infoA:a}),i)},e=>{})}const xt=e=>null!=e.form_code?Object(n.q)(e.form_code):[]},function(e,t,a){"use strict";function i(e,t){if(void 0!==t&&void 0!==e){switch(t.trim()){case"dd/mm/yyyy":return function(e){let t=e.split("/");if(t.length>=3){let e=new Date(`${t[2]}/${t[1]}/${t[0]}`);if(void 0!==e&&null!=e)return e.getTime()}return null}(e)}}return null}function o(e,t){if(void 0!==e&&void 0!==t){let a=new Date(e),i=t.trim();if(null!=a)switch(i){case"ISOString":return a.toISOString()}}return null}function s(e,t){return window.moment(e).format(t)}function l(e,t,a,i){var o,s;Number(e)?e=Number(e):e=Number(i?null===(o=window.moment.utc(e,a))||void 0===o?void 0:o.toDate().getTime():null===(s=window.moment(e,a))||void 0===s?void 0:s.toDate().getTime());var l=window.moment(e);for(const n in t)if(t.hasOwnProperty(n)){const e=t[n];l=window.moment(l.add(e,n))}return l.valueOf()}a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return n}));class n{}n.getFullYear=e=>new Date(Number(e)).getFullYear()},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(55);class l extends i.Component{constructor(){super(...arguments),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}}}render(){return o.a.createElement("div",{style:{color:"red"}},"Nothing! ",this.props.inputType," is undefined. Contact admin, pls!")}}var n=l,r=a(1);class c extends i.Component{render(){const e=s.a[this.props.inputType];return void 0!==e?(r.g.isDebug()&&(this.props.default.name+=` (${this.props.default.code})`),o.a.createElement(e,Object.assign({},this.props,{key:this.props.index,index:this.props.index,config:this.props.config}))):o.a.createElement(n,{inputType:this.props.inputType})}}t.a=c},,function(e,t,a){"use strict";var i=a(0),o=a.n(i);class s extends i.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};try{t.txFoActions=void 0!==e?JSON.stringify(JSON.parse(e),null,4):JSON.stringify([{function:"",status:"A",para:[]}],null,4)}catch(a){t.txFoActions=JSON.stringify([{function:"",status:"A",para:[]}],null,4)}return t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}onBlur(e,t){var a=this.state.data;if("txFoActions"===e)try{var i=JSON.parse(t.target.value);a[e]=JSON.stringify(i,null,4)}catch(o){alert(o)}this.setState({data:a})}render(){return o.a.createElement("div",{hidden:!this.props.hidden,className:"form-group col-sm-12 col-md-12"},o.a.createElement("label",null,"Actions"),o.a.createElement("textarea",{className:"form-control",rows:"12",onChange:e=>{this.onChange("txFoActions",e)},value:this.state.data.txFoActions,onBlur:e=>{this.onBlur("txFoActions",e)},placeholder:"txFoActions"}))}}t.a=s},function(e,t,a){"use strict";var i=a(0),o=a.n(i);class s extends i.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};try{t.txFo=void 0!==e?JSON.stringify(JSON.parse(e),null,4):JSON.stringify([{txcode:"",input:{}}],null,4)}catch(a){t.txFo=JSON.stringify([{txcode:"",input:{}}],null,4)}return t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}onBlur(e,t){var a=this.state.data;if("txFo"===e)try{var i=JSON.parse(t.target.value);a[e]=JSON.stringify(i,null,4)}catch(o){alert(o)}this.setState({data:a})}render(){return o.a.createElement("div",{hidden:!this.props.hidden,className:"form-group col-sm-12 col-md-12"},o.a.createElement("label",null,"Actions"),o.a.createElement("textarea",{className:"form-control",rows:"12",onChange:e=>{this.onChange("txFo",e)},value:this.state.data.txFo,onBlur:e=>{this.onBlur("txFo",e)},placeholder:"txFo"}))}}t.a=s},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(3);class l extends i.Component{render(){const e=Object(s.b)("uTableColumnDefault");return o.a.createElement(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:null===this.props.data||""===this.props.data?"--":"object"===typeof this.props.data?JSON.stringify(this.props.data):String(this.props.data),config:{mode:"left"}}})}}t.a=l},function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return n}));var i=a(4),o=a(8),s=a(1);function l(e,t,a){Object(i.b)([{txcode:"#sys:bo-load-templePrint",input:{templates:null===e||void 0===e?void 0:e.replace("n*","")}}],{}).then(i=>{let l=s.g.foGetData("list_templates",i),n={templates:l,ob_data:t,node_print:e,form:a.infoA.key_form};void 0!==l&&o.a.fo([{txcode:"#sys:fo-print-voucher",input:{ob_config:n}}],n)},e=>{})}function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,l={};a||(a={}),o||(o={}),l=Object.assign(l,o),l=Object.assign(l,a);let n=[];e.split(",").forEach(e=>{void 0===s.g.template_getFromStore(e)&&n.push(e)}),Object(i.b)([{txcode:"#sys:bo-load-templePrint",input:Object.assign(l,{templates:n.join(",")})}],{}).then(e=>{let a=s.g.foGetData("list_templates",e),i=s.g.foGetData("ob_data",e);void 0!==a&&a.forEach(e=>{s.g.template_addToStore(e.id,e)}),t(i)},e=>{})}},function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return n}));var i=a(1);function o(e){return function(e){var t=new window.JSEncrypt({default_key_size:2048});t.setPublicKey(i.g.rsa_getPublicKey());var a="",o=e;for(;o.length>0;){for(var s="",l=0,n=0;o.length>n;){var r=o.charCodeAt(n);if(r<128?l++:l+=r>127&&r<2048?2:3,l>=245)break;s+=o[n],n++}o=o.substring(n,o.length);let e="";e=t.encrypt(s),a+=""===a?e:"@@@"+e}return a}(e)}function s(e){for(var t=window.atob(e),a=t.length,i=new Uint8Array(a),o=0;o<a;o++)i[o]=t.charCodeAt(o);return i.buffer}async function l(e){let t=e.substring(13,21)+e.substring(5,13),a=e.substring(0,5)+e.substring(21,e.length),i=s(t);const o=s("uOmGXtXNkLHf9Q6ftmkFxaPPE5mBuAooP34HqWlXLY4"),l=await crypto.subtle.importKey("raw",o,{name:"AES-GCM",iv:i},!1,["decrypt"]);return await async function(e,t,a){const i=atob(t),o=new Uint8Array(i.match(/[\s\S]/g).map(e=>e.charCodeAt(0))),s=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:a},e,o);return(new TextDecoder).decode(s)}(l,a,i)}async function n(e,t){switch(t){case"@!#!@#@":return function(e){var t=window.CryptoJS;t.pad.NoPadding={pad:function(){},unpad:function(){}};var a=t.enc.Hex.parse("253D3FB468A0E24677C28A624BE0F939"),i=t.enc.Hex.parse("00000000000000000000000000000000");let o=t.AES.decrypt(e.toString(),a,{iv:i}).toString(t.enc.Utf8);o=o.split("").filter(e=>0!==e.charCodeAt()).join("");try{JSON.parse(o.replace(/[\n\r ]/g,""))}catch(s){console.log("error====>",s)}return o}(e);case"$%^&*()_":return await l(e);default:return function(e,t){for(var a=i.g.getKeyX(t),o="",s=0;s<e.length;s++)o+=String.fromCharCode(e.codePointAt(s)^a);return o}(e,t)}}},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(1),l=a(8),n=a(3);const r={btn_delete:{color:"danger",icon:"fa-trash-o"},btn_view:{color:"info",icon:"fa-eye"},btn_select:{color:"primary",icon:"fa-check"},btn_print:{color:"base",icon:"fa-print"},view:{color:"info",icon:"fa-eye"},delete:{color:"danger",icon:"fa-trash-o"}};class c extends i.Component{constructor(e){super(e),this.onClickButton=async e=>{var t,a,i,o;if(!0===((null===(t=this.props)||void 0===t||null===(a=t.tableContext)||void 0===a||null===(i=a.state)||void 0===i?void 0:i.CMD)||{}).disabled&&!0!==(null===(o=this.props)||void 0===o?void 0:o.isButtonSystem))return;let n=e.default,r=e.config;var c=s.g.getFormAppAuto(this.props.infoA.key_form);if(await c.runRuleFunction(n,JSON.parse(this.row_data),this.props.infoA_parent,"on_click"),void 0!==r.useAction)if("true"===r.useAction){var d=s.g.parseJson(r.txFoActions);void 0!==d?l.a.runActionWithContext(d,JSON.parse(this.row_data),this.props.infoA,this.props.infoA_parent,n):s.g.AppException("#cColumnAction.onClick","config_fo is undefined")}else if(void 0!==r.txFo){var h=s.g.parseJson(r.txFo);void 0!==h?l.a.runFoWithContext(h,JSON.parse(this.row_data),this.props.infoA,this.props.infoA_parent,n):s.g.AppException("#cColumnAction.onClick","Error Json is undefined")}else s.g.AppException("#cColumnAction.onClick","txFo is undefined");else s.g.AppException("#cColumnAction.onClick","useAction is undefined");s.g.isDebug()&&s.g.copyToClipboard(r.txFo)},this.row_data={},this.state={lang_select:this.props.lang_select,data:this.callBuildColumn(!0)}}callBuildColumn(e){this.row_data=JSON.stringify(this.props.value);let t=this.props.data.filter(e=>s.g.checkDynamicCondition(this.props.value,e.default.condition));if(void 0!==e&&e)return t;this.setState({data:t})}onClick(e,t){}componentDidUpdate(e){this.props.lang_select!==e.lang_select&&this.setState({lang_select:this.props.lang_select}),this.props.value===e.value&&this.props.data===e.data||this.callBuildColumn()}getIcon(e){var t,a;return(null===(t=r[e.default.code])||void 0===t?void 0:t.icon)?null===(a=r[e.default.code])||void 0===a?void 0:a.icon:e.config.icon?e.config.icon:""}render(){var e;const t=Object(n.b)("uTableColumnButtonHover");return 0===(null===(e=this.state.data)||void 0===e?void 0:e.length)?o.a.createElement("td",{style:{boxShadow:"inset 0 -1px 0 #cbd6e2, inset 1px 0 0 #cbd6e2, inset 0px 0 0 #ecf0f4 !important"}}):o.a.createElement(t,{title_parent:"title",dataFull:{icon:"more_vert",data:[...this.state.data].map(e=>({icon_item:this.getIcon(e),title:e.default.name,dataItem:e,abs_Click:this.onClickButton}))}})}}t.a=c},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(1);class l extends i.Component{constructor(e){super(e),this.state={title:this.props.title,html:this.callBuildColumn(!0)}}componentDidUpdate(e){this.props.value===e.value&&this.props.data===e.data&&this.props.title===e.title||this.callBuildColumn()}callBuildColumn(e){var t="",a="",i=this.props.data;if(this.data_copy=JSON.stringify(this.props.value),void 0!==this.props.config){if(void 0!==this.props.config.data&&void 0!==this.props.config.data[this.props.data]){var l=this.props.config.data[this.props.data];l.color&&(t=l.color),l.icon_img&&(a=l.icon_img)}if(void 0!==this.props.config.cdname&&void 0!==this.props.config.cdgrp&&""!==this.props.config.cdname&&""!==this.props.config.cdgrp){let e=s.g.data_cdList(this.props.config.cdgrp,this.props.config.cdname)||[];for(var n=0;n<e.length;n++){var r=e[n];if(void 0!==r.c_cdlist.cdid&&r.c_cdlist.cdid===i){i=r.c_cdlist.caption;break}}}}let c=null;if(a.includes("data:image/png;base64")||a.includes("http")&&a.includes("//")?c=o.a.createElement("img",{src:a,alt:this.props.title,title:i}):a.includes("fa-")&&(c=o.a.createElement("i",{className:"fa "+a,"aria-hidden":"true",style:{color:t},title:i})),void 0!==e&&e)return c;this.setState({title:this.props.title,html:c})}render(){return o.a.createElement("td",{"data-title":this.state.title,className:"text-center",style:{textAlign:"center"}},this.state.html)}}t.a=l},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(3);class l extends i.Component{getNumber(e){return 0===e||e?Number.isNaN(Number(e))?"--":String(Number(e)):"--"}render(){const e=Object(s.b)("uTableColumnDefault");return o.a.createElement(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:this.getNumber(this.props.data),config:{mode:"right"}}})}}t.a=l},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(3);class l extends i.Component{isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(a){}return t}getImageTemplate(e){return void 0!==e&&null!==e&&this.isImage(e)?"data:image/png;base64,"+e:"../rs/global/img/file_icon.svg"}render(){const e=Object(s.b)("uTableColumnImg");return o.a.createElement(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,src:this.getImageTemplate(this.props.data)}})}}t.a=l},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(3),l=a(7),n=a(1);class r extends i.Component{constructor(e){var t;super(e),this.convertMaskToValue=e=>(String(e).startsWith("$")&&String(e).endsWith("$")&&(e=n.g.getParameterSystem(e.replace(/\$/g,""))),this.isDate?this.props.data||0===this.props.data?"utc"===this.props.config.mask_mode_time?l.e(this.props.data,e):l.d(this.props.data,e):"":l.f(this.props.data,e));let a=this.props.config.mask;this.isDate=a.includes("DD")&&a.includes("MM")&&a.includes("YY")||!0===(null===(t=this.props.config)||void 0===t?void 0:t.isDate)}render(){const e=Object(s.b)("uTableColumnDefault");return o.a.createElement(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:this.convertMaskToValue(this.props.config.mask)||"--",config:{mode:this.isDate?"center":"left"},tooltip_copy:{icon:"copy",title:n.g.getLang("btn_copy")},abs_Copy:()=>{n.g.copyToClipboard(this.isDate?this.convertMaskToValue(this.props.config.mask):this.props.data)}}})}}t.a=r},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(1),l=a(3),n=a(7);class r extends i.Component{constructor(e){super(e),this.decimal_length=s.g.getNodeJson(this.props,"config.decimal_length")||s.g.getNodeJson(this.props,"config.decimal")}checkConfigColor(e){if(0!==e&&!e)return"--";let t=this.decimal_length;return 0===t||t||(t=2),t=Number(t)||0,e=Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t),Object(n.i)(e,t)}render(){const e=Object(l.b)("uTableColumnDefault");return o.a.createElement(e,{dataFull:{title_parent:this.props.title_parent,data:this.checkConfigColor(this.props.data),config:{mode:"right"},tooltip_copy:{icon:"copy",title:s.g.getLang("btn_copy")},abs_Copy:()=>{s.g.copyToClipboard(this.props.data)}}})}}t.a=r},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(1),l=a(3);class n extends i.Component{constructor(){super(...arguments),this.onChange=e=>{const t=this.props.tableContext.props;s.g.getFormAppAuto(t.infoA.key_form).runRuleFunction(t.default,{value:e,rown_data:this.props.rowData},t.infoA_parent,"checked")}}render(){var e,t,a;const i=(null===(e=this.props)||void 0===e||null===(t=e.tableContext)||void 0===t||null===(a=t.state)||void 0===a?void 0:a.CMD)||{};let s=Object(l.b)("uTableColumnCheckbox");return o.a.createElement(s,{dataFull:{title_parent:this.props.title_parent,value:!!this.props.data,config:{cmd:{disable:!0===i.disabled}},abs_Click:(e,t)=>{this.onChange(!t)}}})}}t.a=n},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(3);const l={Normal:"active",Draft:"default",Editing:"warning","Require NRC change":"success",Close:"danger",Block:"purple"};class n extends i.Component{constructor(e){super(e),this.getDataTemplate=()=>{const e=String(this.props.data);return this.config[e]?{title:this.config[e].lang,type:this.config[e].type}:{title:this.props.data,type:l[this.props.data]}},this.config=this.props.config}render(){const e=Object(s.b)("uTableColumnAction");return o.a.createElement(e,{dataFull:{title_parent:this.props.title_parent,data:this.getDataTemplate(),config:{isFrozen:!1}}})}}t.a=n},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(3),l=a(1);class n extends i.Component{constructor(e){var t,a;super(e),this.getCaptionLang=e=>{const t=this.CDLIST_BUILD[e]||{};let a=(null===t||void 0===t?void 0:t.mcaption)||{},i=(null===t||void 0===t?void 0:t.caption)||"";return a[l.g.getLangKey()]||i};const i=(null===(t=e.config)||void 0===t?void 0:t.cdgrp)||"",o=(null===(a=e.config)||void 0===a?void 0:a.cdname)||"",s=l.g.data_cdList(i,o,!0);this.CDLIST_BUILD={};for(const l of s){let e=l.c_cdlist.mcaption||{},t=l.c_cdlist.caption||"";this.CDLIST_BUILD[l.c_cdlist.cdid]=l.c_cdlist={mcaption:e,caption:t}}}render(){const e=Object(s.b)("uTableColumnDefault");return o.a.createElement(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:null===this.props.data?"":this.getCaptionLang(this.props.data),config:{mode:"number"===typeof this.props.data?"right":"left"}}})}}t.a=n},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(3),l=a(1);class n extends i.Component{constructor(e){var t,a;super(e),this.getCaptionLang=e=>{const t=this.CDLIST_BUILD[e]||{};let a=(null===t||void 0===t?void 0:t.mcaption)||{},i=(null===t||void 0===t?void 0:t.caption)||"";return a[l.g.getLangKey()]||i},this.abs_Change=(e,t,a,i,o,s)=>{let{data_view:l,value_select:n,item_select:r}=this.state,c=l.filter(e=>!0===e.selected);c.length>0&&(c[0].selected=!1);let d=l.filter((e,t)=>t===s);d.length>0&&(d[0].selected=!0,n=r=d[0].value,this.setState({data_view:l,value_select:n,item_select:r},()=>{this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:this.state.value_select})}))};const i=(null===(t=e.config)||void 0===t?void 0:t.cdgrp)||"",o=(null===(a=e.config)||void 0===a?void 0:a.cdname)||"";this.C_CDLISTS=l.g.data_cdList(i,o,!0),this.CDLIST_BUILD={};for(const s of this.C_CDLISTS){let t=s.c_cdlist.mcaption||{},a=s.c_cdlist.caption||"",i=s.c_cdlist.cdid;this.CDLIST_BUILD[s.c_cdlist.cdid]=s.c_cdlist={mcaption:t,caption:a,cdid:i},s.selected=s.c_cdlist.cdid===e.data}this.state={data_view:this.C_CDLISTS,item_select:e.data,value_select:this.getCaptionLang(e.data),isUpdate:!1}}componentDidUpdate(e){if(void 0!==e.data&&void 0!==this.props.data&&this.props.data!==e.data){let e=!1,{item_select:t,value_select:a}=this.state;this.props.data!==t&&(t=this.props.data,a=this.getCaptionLang(this.props.data),e=!0),this.setState({item_select:t,value_select:a,isUpdate:e})}}render(){var e,t;const a=Object(s.b)("uTableColumnEditSelect");return o.a.createElement(a,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,value:this.state.value_select,data:null===(e=this.state.data_view)||void 0===e?void 0:e.map((e,t)=>(e.title=this.getCaptionLang(e.c_cdlist.cdid),e.value=e.c_cdlist.cdid,e)),config:{mode:"number"===typeof this.props.data?"right":"left"},isUpdate:this.state.isUpdate,cmd:{disable:"true"===String(null===(t=this.props.cmd)||void 0===t?void 0:t.disabled)},abs_Change:this.abs_Change}})}}t.a=n},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(3);class l extends i.Component{getStringHtml(){return this.props.data.replace(/\n/gm,"<br/>")}render(){const e=Object(s.b)("uTableColumnHtmlDanger");return o.a.createElement(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:null===this.props.data||""===this.props.data?"--":this.getStringHtml()}})}}t.a=l},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(3);const l={number:/[^\d/]/g,string:/[^a-zA-Z ]/g,free_style:/[^a-zA-Z\d]/g};class n extends i.Component{constructor(e){super(e),this.setLastPost=e=>{let t=e.target;this.state.start_pos=t.selectionStart,this.state.end_pos=t.selectionEnd},this.setPos=(e,t)=>{e.selectionStart=t,e.selectionEnd=t},this.handleChangeValue=(e,t,a,i)=>{const o=e.target;let s=o.selectionStart,n=o.value||"";l[this.props.config.columnEditType]&&(n=n.replace(l[this.props.config.columnEditType],"")),this.setState({valueChange:n},()=>{this.setPos(o,s)})},this.handleSubmit=(e,t,a)=>{let{valueChange:i}=this.state;"number"===this.props.config.columnEditType&&(this.props.config.minValue&&parseFloat(i)<parseFloat(this.props.config.minValue)&&(i=""),this.props.config.maxValue&&parseFloat(i)>parseFloat(this.props.config.maxValue)&&(i="")),this.setState({valueLogicDefault:i,valueChange:i},()=>{this.props.abs_TableChange({index_row:this.props.index_row,code_col:this.props.code_col,value_change:this.state.valueChange})})},this.handleCancel=(e,t,a)=>{this.setState({valueChange:this.state.valueLogicDefault})},this.state={valueLogicDefault:this.props.data,valueChange:this.props.data,isUpdate:!1,end_pos:-1,start_pos:0}}componentDidUpdate(e){if(void 0!==e.data&&void 0!==this.props.data&&this.props.data!==e.data){let e=!1,{valueLogicDefault:t,valueChange:a}=this.state;this.props.data!==a&&(a=this.props.data,t=this.props.data,e=!0),this.setState({valueLogicDefault:t,valueChange:a,isUpdate:e})}}render(){const e=Object(s.b)("uTableColumnEditInput");return o.a.createElement(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:this.state.valueChange,isUpdate:this.state.isUpdate,abs_Change:this.handleChangeValue,abs_Submit:this.handleSubmit,abs_Cancel:this.handleCancel,abs_KeyDown:this.setLastPost,cmd:{disable:"true"===String(this.props.cmd.disabled)}}})}}t.a=n},function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return c}));var i=a(8),o={ctrlKey:{188:{fo:[{txcode:"#sys:fo-open-modal-keyboard",input:{}}],context:{}},191:{fo:[{txcode:"#sys:fo-assistant-sendError",input:{}}],context:{}},190:{fo:[{txcode:"#sys:fo-keyboard-openDebug",input:{}}],context:{}},113:{fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:"build_license"}}],context:{}},114:{fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:"BO_012003"}}],context:{}},117:{fo:[{txcode:"fo-open-latestTransaction",input:{}}],context:{}}},ctrlKey_altKey:{},altKey:{},119:{fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:"BO_013001"}}],context:{}},113:{fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:"build_license"}}],context:{}},118:{fo:[{txcode:"#sys:fo-keyboard-openForm",input:{form_code:"BO_011001"}}],context:{}}},s=0;class l{static startKeyboard(e){document.addEventListener("keyup",n)}}function n(e){16===e.keyCode?s++:s=0,e.ctrlKey&&e.altKey&&17!==e.keyCode&&18!==e.keyCode&&d("altKey_ctrlKey",e.keyCode),e.ctrlKey&&e.shiftKey&&17!==e.keyCode&&16!==e.keyCode&&d("shiftKey_ctrlKey",e.keyCode),e.shiftKey&&e.altKey&&16!==e.keyCode&&18!==e.keyCode?d("shiftKey_altKey",e.keyCode):e.ctrlKey&&17!==e.keyCode?d("ctrlKey",e.keyCode):e.altKey&&18!==e.keyCode?d("altKey",e.keyCode):e.shiftKey&&16!==e.keyCode?d("shiftKey",e.keyCode):2===s?d("double",e.keyCode):113!==e.keyCode&&115!==e.keyCode&&117!==e.keyCode&&118!==e.keyCode&&119!==e.keyCode&&120!==e.keyCode||d("",e.keyCode)}function r(e){o=e}function c(){return o}function d(e,t){void 0!==o&&(""!==e?void 0!==o[e]&&void 0!==o[e][t]&&void 0!==o[e][t].fo&&i.a.fo(o[e][t].fo,{context:o[e][t].context}):void 0!==o[t]&&void 0!==o[t].fo&&i.a.fo(o[t].fo,{context:o[t].context}))}},function(e,t,a){"use strict";a.r(t);var i=a(0),o=a.n(i),s=a(3),l=a(1);class n extends i.Component{constructor(e){super(e),this.getData=()=>{let{CCP_Default_Config_progress_bar:e}=this.state;return{structable:e.collection_method.dataFull.value,structable_read:e.read_data.dataFull.value,data_default:e.data_default.dataFull.value,total:e.total.dataFull.value,color:e.color.dataFull.value}},this.loadDataToState=()=>({collection_method:{dataFull:{config:{default:{title:l.g.getLang("designForm_jProgressBar_structable"),class:"col-md-12 ",required:!1,placeholder:l.g.getLang("designForm_jProgressBar_structable"),helper:l.g.getLang("designForm_jProgressBar_structable_helper"),code_form_component:"collection_method"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.data.structable,abs_Change:this.onChangeValue}},read_data:{dataFull:{config:{default:{title:l.g.getLang("designForm_jProgressBar_structable_read"),class:"col-md-12 ",required:!1,placeholder:l.g.getLang("designForm_jProgressBar_structable_read"),helper:l.g.getLang("designForm_jProgressBar_structable_read_helper"),code_form_component:"read_data"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.data.structable_read,abs_Change:this.onChangeValue}},data_default:{dataFull:{config:{default:{title:l.g.getLang("designForm_jProgressBar_data_default"),class:"col-md-12 ",required:!1,placeholder:l.g.getLang("designForm_jProgressBar_data_default"),helper:l.g.getLang("designForm_jProgressBar_data_default_helper"),code_form_component:"data_default"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.data.data_default,abs_Change:this.onChangeValue}},color:{dataFull:{config:{default:{title:l.g.getLang("designForm_jProgressBar_color"),class:"col-md-6 ",required:!1,placeholder:l.g.getLang("designForm_jProgressBar_color"),helper:l.g.getLang("designForm_jProgressBar_color_helper"),code_form_component:"color"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.data.color,abs_Change:this.onChangeValue}},total:{dataFull:{config:{default:{title:l.g.getLang("designForm_jProgressBar_total"),class:"col-md-6 ",required:!1,placeholder:l.g.getLang("designForm_jProgressBar_total"),helper:l.g.getLang("designForm_jProgressBar_total_helper"),code_form_component:"total"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.data.total,abs_Change:this.onChangeValue}}}),this.componentDidMount=()=>{this.setState({CCP_Default_Config_progress_bar:this.loadDataToState()})},this.onChangeValue=(e,t)=>{let{CCP_Default_Config_progress_bar:a}=this.state;a[t].dataFull.value=e.target.value,this.setState({CCP_Default_Config_progress_bar:a})},this.CCP_Default_Config_chart=Object(s.c)("CCP_Default_Config_progressBar"),this.data=this.readConfig(this.props.configComponent.configItem.config),this.state={CCP_Default_Config_progress_bar:{}}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.structable?t.structable=e.structable:t.structable="",null!=e.structable_read?t.structable_read=e.structable_read:t.structable_read="",null!=e.data_default?t.data_default=e.data_default:t.data_default="",null!=e.total?t.total=e.total:t.total="",null!=e.color?t.color=e.color:t.color="primary",t}render(){const e=this.CCP_Default_Config_chart;return o.a.createElement(e,{stateData:this.state.CCP_Default_Config_chart})}}t.default=n},function(e,t,a){"use strict";a.r(t);var i=a(0),o=a.n(i),s=a(3);class l extends i.Component{constructor(e){super(e),this.getData=()=>{let{CCP_Default_Validate_config:e}=this.state;return{request:e.is_required.dataFull.value,min:e.min_words.dataFull.value,max:e.max_words.dataFull.value,regex_format:e.structure_regex.dataFull.value,validate_html:this.data.validate_html}},this.loadDataToState=()=>({is_required:{dataFull:{value:this.data.request,title:"Is Required",class:"col-md-12",config:{cmd:{visible:!1,disable:!1,error:{message:"",type:""}}},abs_Click:this.onClickValue}},min_words:{dataFull:{config:{default:{title:"Min words",class:"col-md-6 ",required:!1,placeholder:"Min words",helper:"Min words",code_form_component:"min_words"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.data.min,abs_Change:this.onChangeValue}},max_words:{dataFull:{config:{default:{title:"Max words",class:"col-md-6 ",required:!1,placeholder:"Max words",helper:"Max words",code_form_component:"max_words"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.data.max,abs_Change:this.onChangeValue}},structure_regex:{dataFull:{config:{default:{title:"Structure regex",class:"col-md-6 ",required:!1,placeholder:"Structure regex",helper:"Structure regex",code_form_component:"structure_regex"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.data.regex_format,abs_Change:this.onChangeValue}}}),this.componentDidMount=()=>{this.setState({CCP_Default_Validate_config:this.loadDataToState()})},this.onChangeValue=(e,t)=>{let{CCP_Default_Validate_config:a}=this.state;a[t].dataFull.value=e.target.value,this.setState({CCP_Default_Validate_config:a})},this.onClickValue=()=>{let{CCP_Default_Validate_config:e}=this.state;e.is_required.dataFull.value=!e.is_required.dataFull.value,this.setState({CCP_Default_Validate_config:e})},this.CCP_Default_Validate_textInput=Object(s.c)("CCP_Default_Validate_chart"),this.DESIGNFORM_CODE_TOOL_ITEMS="designToolItem",this.data=this.readConfig(this.props.configComponent.configItem.validate),this.state={CCP_Default_Validate_config:{}}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min?t.min=e.min:t.min="",null!=e.max?t.max=e.max:t.max="",null!=e.regex_format?t.regex_format=e.regex_format:t.regex_format="",void 0!==e.validate_html?t.validate_html=e.validate_html:t.validate_html="true",t}render(){const e=this.CCP_Default_Validate_textInput;return o.a.createElement(e,{stateData:this.state.CCP_Default_Validate_config})}}t.default=l},function(e,t,a){"use strict";a.r(t);var i=a(0),o=a.n(i),s=a(1),l=a(3);class n extends i.Component{constructor(e){super(e),this.getData=()=>{let e={};return this.lang_system.forEach(t=>{const a=this.state.CCP_Default_Lang_config.list_lang_inputs.find(e=>e.dataFull.config.default.code_form_component===t.key);e[t.key]=a.dataFull.value}),e},this.loadDataToState=()=>({title:"Component name (languages)",helper:"Component name (languages)",list_lang_inputs:this.lang_system.map(e=>({dataFull:{config:{default:{title:e.view,class:"col-md-6 ",required:!1,placeholder:e.view,helper_description:"abc",code_form_component:e.key},cmd:{isHelper:!1,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.data[e.key],abs_Change:this.onChangeValue}}))}),this.componentDidMount=()=>{this.setState({CCP_Default_Lang_config:this.loadDataToState()})},this.onChangeValue=(e,t)=>{let{CCP_Default_Lang_config:a}=this.state;a.list_lang_inputs.find(e=>e.dataFull.config.default.code_form_component===t).dataFull.value=e.target.value,this.setState({CCP_Default_Lang_config:a})},this.CCP_Default_Lang_textInput=Object(l.c)("CCP_Default_Lang_chart"),this.DESIGNFORM_CODE_TOOL_ITEMS="designToolItem",this.lang_system=s.g.getConfigUserDefault("list_lang_config"),this.data=this.readConfig(this.props.configComponent.configItem.lang),this.state={CCP_Default_Lang_config:{}}}readConfig(e){var t={};return void 0===e&&(e={}),this.lang_system.forEach(a=>{null!=e[a.key]?t[a.key]=e[a.key]:t[a.key]=""}),t}render(){const e=this.CCP_Default_Lang_textInput;return o.a.createElement(e,{stateData:this.state.CCP_Default_Lang_config})}}t.default=n},function(e,t,a){"use strict";a.r(t);var i=a(0),o=a.n(i),s=a(3);class l extends i.Component{constructor(e){super(e),this.getData=()=>({}),this.loadDataToState=()=>({is_danger:{dataFull:{config:{default:{search:{placeholder:"Search"},helper:"Danger",data_status:"No Result",title:"Danger",class:"col-md-6",required:!1,code_form_component:"is_danger"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:"Yes",value:"true",selected:"true"===this.data.danger},{title:"No",value:"false",selected:"false"===this.data.danger}],search_value:"",abs_Change:this.onChangeValueSelect,abs_search:this.search}},is_warning:{dataFull:{config:{default:{search:{placeholder:"Search"},helper:"Warning",data_status:"No Result",title:"Warning",class:"col-md-6",required:!1,code_form_component:"is_warning"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:"Yes",value:"true",selected:"true"===this.data.warning},{title:"No",value:"false",selected:"false"===this.data.warning}],search_value:"",abs_Change:this.onChangeValueSelect,abs_search:this.search}}}),this.componentDidMount=()=>{},this.onChangeValueSelect=(e,t,a)=>{let{CCP_Default_Essence_config:i}=this.state;if(a){for(const t of i[a].dataFull.data)t.selected=t.value===e;this.setState({CCP_Default_Essence_config:i})}},this.CCP_Default_Essence_textInput=Object(s.c)("CCP_Default_Essence_chart"),this.DESIGNFORM_CODE_TOOL_ITEMS="designToolItem",this.data=this.readConfig(this.props.configComponent.configItem.property),this.state={CCP_Default_Essence_config:{}}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.danger?t.danger=e.danger:t.danger="false",null!=e.warning?t.warning=e.warning:t.warning="false",t}render(){const e=this.CCP_Default_Essence_textInput;return o.a.createElement(e,{stateData:this.state.CCP_Default_Essence_config})}}t.default=l},function(e,t,a){"use strict";a.r(t);var i=a(0),o=a.n(i);class s extends i.Component{render(){let e=o.a.lazy(()=>a(199)("./"+this.props.template_select+"/"+this.props.screen_working));return o.a.createElement(i.Suspense,{fallback:o.a.createElement("div",null,"Loading...")},o.a.createElement(e,null))}}t.default=s},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(3);class l extends i.Component{render(){const e=Object(s.b)("uTableColumnProgressBar");return o.a.createElement(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,percent:this.props.data?parseInt(this.props.data):0,config:{mode:"left"}}})}}t.a=l},function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(3);class l extends i.Component{getStatusIconStep(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"S"){case"S":return"check_circle";case"F":return"remove_circle";case"N":return"add_circle";case"R":return"trending_up";default:return""}}getStatusColorStep(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"S"){case"S":return"success";case"F":return"danger";case"N":case"R":default:return"info"}}render(){const e=Object(s.b)("uTableColumnIcon");return o.a.createElement(e,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:[{val:this.getStatusIconStep(this.props.data),color:this.getStatusColorStep(this.props.data),title:"warning",class:"-round"}],config:{mode:"left"}}})}}t.a=l},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return checkConditions}));const checkConditions=(data,condition)=>{if(""!==condition.trim())try{return eval("let wf="+JSON.stringify(data)+";"+condition)}catch(_unused){return!1}return!0},checkConditionsNoContext=condition=>{if(""!==condition.trim())try{return eval(condition)}catch(_unused2){return!1}return!0};class libConditions{}},,,,,,,,,,,,function(e,t,a){"use strict";var i=a(17),o=a(21),s=a(22),l=a(23),n=a(24),r=a(25),c=a(26),d=a(28),h=a(29),_=a(38),u=a(39),g=a(27),m=a(30);const p={columnInputEdit:a(31).a,ColumnString:i.a,ColumnStatus:o.a,ColumnNumber:s.a,columnImg:l.a,columnMask:n.a,columnCurrency:r.a,ColumnDefault:i.a,ColumnCheckbox:c.a,ColumnCdlist:d.a,ColumnProgressBar:_.a,ColumnIcon:u.a,ColumnStatusTitle:g.a,ColumnHtmlDanger:m.a,ColumnSelectEdit:h.a};t.a=p},function(e,t,a){"use strict";var i=a(17),o=a(21),s=a(22),l=a(23),n=a(24),r=a(0),c=a.n(r),d=a(1),h=a(3);class _ extends r.Component{render(){let e=this.props.data||{},t=d.g.getLangKey();e=this.props.data[t];const a=Object(h.b)("uTableColumnDefault");return c.a.createElement(a,{title:this.props.title,dataFull:{title_parent:this.props.title_parent,data:e,config:{mode:"number"===typeof this.props.data?"right":"left"}}})}}var u=_,g=a(25),m=a(26),p=a(27),f=a(28),v=a(29),b=a(30),y=a(31);const D={ColumnString:i.a,ColumnDefault:i.a,ColumnStatus:o.a,ColumnNumber:s.a,columnImg:l.a,columnMask:n.a,columnLang:u,columnCurrency:g.a,ColumnCheckbox:m.a,ColumnStatusTitle:p.a,ColumnCdlist:f.a,ColumnHtmlDanger:b.a,columnInputEdit:y.a,ColumnSelectEdit:v.a};t.a=D},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));class i{constructor(e){this.setPassword=e=>(this.rebuildPassword(e),this.pwd_display),this.getPasswordDecode=()=>this.decodePassword(this.pwd_encode),this.getPasswordDisplay=()=>this.pwd_display,this.props=e,this.pwd_encode="",this.pwd_display=""}rebuildPassword(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=String(e);let t=0,a=this.decodePassword(this.pwd_encode),i="";for(const o of e)"\u2022"===o?(i+=a[t]||"",t++):i+=o;this.pwd_encode=this.encodePassword(i),this.pwd_display=e.replace(/./g,"\u2022")}encodePassword(e){let t="";for(let a of e){let e=a.charCodeAt(0);t+=String.fromCharCode(2*e)}return t}decodePassword(e){let t="";for(let a of e){let e=a.charCodeAt(0);t+=String.fromCharCode(e/2)}return t}}},function(e,t,a){"use strict";var i=a(6),o=a(0),s=a.n(o),l=a(1),n=a(2),r=a(5),c=a(15),d=a(16);class h extends o.Component{constructor(e){super(e),this.getValue=()=>{var e=this.state.data;if(void 0!==this.refs.txFo){var t=this.refs.txFo.getValue();void 0!==t.txFo&&(e.txFo=t.txFo)}if(void 0!==this.refs.txFoAction){var a=this.refs.txFoAction.getValue();void 0!==a.txFoActions&&(e.txFoActions=a.txFoActions)}return e},this.state={data:this.readConfig(this.props.data),private_key_config:l.g.autoID()}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.txFoActions?t.txFoActions=e.txFoActions:t.txFoActions="",null!=e.txFo?t.txFo=e.txFo:t.txFo="",null!=e.useAction?t.useAction=e.useAction:t.useAction="true",void 0!==e.is_upperCase?t.is_upperCase=e.is_upperCase:t.is_upperCase="false",void 0!==e.action?t.action=e.action:t.action="",void 0!==e.structable?t.structable=e.structable:t.structable="",void 0!==e.structable_read?t.structable_read=e.structable_read:t.structable_read="",void 0!==e.data_default?t.data_default=e.data_default:t.data_default="",void 0!==e.isLookup?t.isLookup=e.isLookup:t.isLookup="false",void 0!==e.callform?t.callform=e.callform:t.callform="",void 0!==e.callform_detail?t.callform_detail=e.callform_detail:t.callform_detail="",void 0!==e.callform_detail_mode?t.callform_detail_mode=e.callform_detail_mode:t.callform_detail_mode="modal",void 0!==e.data_view?t.data_view=e.data_view:t.data_view="",void 0!==e.data_value?t.data_value=e.data_value:t.data_value="",void 0!==e.is_password?t.is_password=e.is_password:t.is_password="false",void 0!==e.is_upper?t.is_upper=e.is_upper:t.is_upper="false",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"is_password",value:this.state.data.is_password,data:[{title:"false",code:"false"},{title:"true",code:"true"}],onChange:e=>this.onChange_Value("is_password",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"In hoa t\u1ea5t c\u1ea3 k\xfd t\u1ef1",value:this.state.data.is_upperCase,data:[{title:"false",code:"false"},{title:"true",code:"true"}],onChange:e=>this.onChange_Value("is_upperCase",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"D\xf9ng lookup",value:this.state.data.isLookup,data:[{title:"Kh\xf4ng d\xf9ng",code:"false"},{title:"D\xf9ng lookup",code:"true"}],onChange:e=>this.onChange_Value("isLookup",e)}),"true"===this.state.data.isLookup&&s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"L\u1ea5y data t\u1eeb form",value:this.state.data.callform,onChange:e=>this.onChange_Value("callform",e)}),"true"===this.state.data.isLookup&&s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"OOP gi\xe1 tr\u1ecb",value:this.state.data.data_value,onChange:e=>this.onChange_Value("data_value",e)}),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-8 col-sm-8 col-md-8"},s.a.createElement("h3",{className:"panel-title text-capitalize"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse"},"H\xe0nh \u0111\u1ed9ng"))),s.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse"},s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"}))))),s.a.createElement("div",{id:this.state.private_key_config+"_function",className:"collapse"},s.a.createElement("div",{className:"panel-body"},s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"H\xe0nh \u0111\u1ed9ng click",value:this.state.data.useAction,data:[{title:"G\u1ecdi tx fo",code:"false"},{title:"G\xf5 nhanh",code:"true"}],onChange:e=>this.onChange_Value("useAction",e)}),s.a.createElement(d.a,{ref:"txFo",hidden:"false"===this.state.data.useAction,data:this.state.data.txFo}),s.a.createElement(c.a,{hidden:"true"===this.state.data.useAction,ref:"txFoAction",data:this.state.data.txFoActions}))))))}}var _=h;class u extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min&&(t.min=e.min),null!=e.max&&(t.max=e.max),null!=e.regex_format&&(t.regex_format=e.regex_format),void 0!==e.validate_html?t.validate_html=e.validate_html:t.validate_html="true",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"T\xean x\xe1c nh\u1eadn"),s.a.createElement("th",null,"D\u1eef li\u1ec7u"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"B\u1eaft bu\u1ed9c nh\u1eadp"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Cho ph\xe9p nh\u1eadp th\u1ebb html"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.validate_html&&this.state.data.validate_html,onChange:e=>{var t=this.state.data;t.validate_html=e.target.checked,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng nh\u1ecf h\u01a1n"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.min=parseFloat(e.target.value):void 0!==t.min&&delete t.min,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng v\u01b0\u1ee3t qu\xe1"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max=parseFloat(e.target.value):void 0!==t.max&&delete t.max,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"C\u1ea5u tr\xfac regex"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.regex_format?this.state.data.regex_format:"",type:"text",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.regex_format=e.target.value:t.regex_format="",this.setState({data:t})}}))))))))}}var g=u,m=a(57);class p extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var f=p,v=a(3),b=a(14),y=a.n(b);class D extends o.Component{constructor(e){super(e),this.modalClose=()=>{y.a.render(s.a.createElement("div",null),this.refs.content_modal),this.setState({show:"none"},()=>{void 0!==this.props.abs_CloseModal&&this.props.abs_CloseModal()})},this.getElementContentModal=()=>this.refs.content_modal,this.getDatafull=()=>({config:{default:{title:this.props.modal_title||"",size:"M"},cmd:{visibility:"block"===this.state.show}},abs_Close:this.modalClose}),this.state={show:"none",class:"modal_webui",renderFormChildDone:!1},this.title="",this.props.info_component&&(this.title=this.props.info_component.name),this.ref_modal=Object(o.createRef)()}componentDidUpdate(e){var t,a;this.props.show!==e.show&&setTimeout(()=>{"none"===this.props.show?this.setState({show:"none"}):this.setState({show:"block"})},300),this.props.renderFormChildDone!==e.renderFormChildDone&&setTimeout(()=>{this.setState({renderFormChildDone:this.props.renderFormChildDone})},300),(null===(t=this.ref_modal)||void 0===t||null===(a=t.current)||void 0===a?void 0:a.abs_Focus)&&"block"===this.state.show&&setTimeout(()=>{this.ref_modal.current.abs_Focus()},100)}render(){let e=Object(v.b)("uModal");const t=Object(v.b)("uForm");return s.a.createElement(e,{dataFull:this.getDatafull(),ref:this.ref_modal},s.a.createElement("div",{className:"modal-body",ref:"content_modal"}),"none"!==this.props.show&&!1===this.props.renderFormChildDone&&s.a.createElement(t,{dataFull:{config:{default:{title:""}},cmd:{visibility:"none"!==this.props.show&&!1===this.props.renderFormChildDone,isLoading:!0}}}))}}var C=D,A=a(11);const k={txFOActions:"",txFo:"",useAction:"true",is_upperCase:"false",action:"",structable:"",structable_read:"",data_default:"",isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"",data_view:"",data_value:"",is_password:"false"};var M=class{constructor(e,t,a){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=e=>{this.property.cmd.disabled=e},this.getCMD_enable=()=>this.property.cmd.disabled,this.getConfig=()=>{let e=this.property.config,t=Object(i.a)({},k);for(let a in t)e[a]&&(""!==e[a]&&""===e[a]||(t[a]=e[a]));return t||{}},this.getDefault=()=>this.property.default,this.property={inputType:e,config:a,default:t,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}},x=a(8),N=a(13),w=a(54);class S extends o.Component{constructor(e){var t,a,o,n;super(e),this.setLoadingAction=(e,t)=>{const a=(null===t||void 0===t?void 0:t.isLoading)||!1;this.setState({isLoading:a})},this.getUInputConfig=()=>({code:this.props_smooth.default.code,dataFull:{abs_ClickIcon:()=>{this.modalToggle()},abs_Change:e=>this.handleChange(e),abs_Blur:e=>this.onBlur(),abs_KeyUp:this.onKeyUp,config:{default:{placeholder:"true"===String(this.state.CMD.disabled)?" ":"",title:this.props_smooth.default.name,type:(this.props_smooth.config.is_password,"text"),class:this.props_smooth.default.class,required:this.props_smooth.validate.request,icon:!0===this.state.isLookup?"search":""},cmd:{disable:this.state.CMD.disabled+""==="true",visible:this.state.CMD.visible+""!=="false",error:{message:this.renderMess(this.state.help_mess),type:""},isFocus:this.state.isFocus,isLoading:this.state.isLoading},mode:{textAlign:""}},mode:{autoWrap:"true"!==this.props_smooth.config.is_password&&!this.state.isLookup&&"true"!==String(this.props.config.isSearch),isSearch:"true"===String(this.props.config.isSearch),readOnly:!1},valueTitleHover:"true"===this.props_smooth.config.is_password||this.state.CMD.disabled+""!=="true"?"":this.LOGIC_PASSWORD.getPasswordDecode(),value:"true"===this.props_smooth.config.is_password?this.LOGIC_PASSWORD.getPasswordDisplay():this.LOGIC_PASSWORD.getPasswordDecode()}}),this.convertStringWithContext=e=>{let t=l.g.getlistCodeContext(e);for(let a=0;a<t.length;a++){const i=t[a];let o=l.g.context_get(i.code);void 0!==o&&(e=e.replace(i.key,o))}return e},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props_smooth.infoView,default:this.props_smooth.default,layout:this.props_smooth.infoLayout,block:e.block}},this.setCMD=(e,t)=>{const{CMD:a}=this.state;let i=Object.assign(l.g.cloneJson(a),t);a.disabled===i.disabled&&a.visible===i.visible&&a.block===i.block||this.setState({CMD:i})},this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setCallBuildFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.getFormConfig=e=>s.a.createElement(_,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(f,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(g,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(m.a,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.closeModal=(e,t)=>{this.refs.b_modal.modalClose()},this.clearCacheCompare=()=>{let{compare_info:e}=this.state;e.cache_value=void 0,e.is_change_value=!1,this.setState({compare_info:e})},this.set=(e,t)=>{this.clearError(),this.clearCacheCompare();let a=l.g.getFormAppAuto(this.props_smooth.infoA.key_form);if(void 0!==t&&null!==t){if(void 0!==this.props_smooth.config.structable_read&&this.props_smooth.config.structable_read.includes(".")){let e=this.props_smooth.config.structable_read.split(".");if(e.length>0&&void 0!==t[e[0]]&&null!==t[e[0]]&&(this.data_debug.data_cpn=t[e[0]][e[1]],void 0!==t[e[0]][e[1]]&&null!==t[e[0]][e[1]])){let{compare_info:i}=this.state;return t[e[0]][e[1]]!==i.cache_value?i.cache_value=t[e[0]][e[1]]:i.is_change_value=!1,void this.setState({value:t[e[0]][e[1]],compare_info:i},()=>{void 0!==a&&a.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"on_change")})}}this.setState({value:this.props_smooth.config.data_default},()=>{void 0!==a&&a.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"on_change")})}},this.getAdvanced=(e,t)=>this.LOGIC_PASSWORD.getPasswordDecode(),this.getDataOOP=(e,t)=>this.data_select,this.toolAutoValue=()=>{let{max:e}=this.state.validate;if(Number.isInteger(e)&&0!==e||(e=500),"false"===String(this.state.CMD.disabled)||"false"===String(this.state.CMD.visible)){let t=this.props_smooth.default.name+Math.round(1e3*Math.random());Number(e)<t.length&&(t="1"),this.setState({value:t,data_view:t})}},this.setAdvanced=(e,t)=>{if(e.codeHidden){if(e.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){let e="";void 0!==this.props_smooth.config.data_view&&(e=": "+l.g.getOOP(this.data_select,this.props_smooth.config.data_view.trim()));let t="";void 0!==this.props_smooth.config.data_value&&(t=l.g.getOOP(this.data_select,this.props_smooth.config.data_value.trim())+""),this.setState({value:t,data_view:e},async()=>{let e=l.g.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==e&&await e.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"enter_tab"),this.setFocus()})}}else if(e.list_component){const{list_component:a}=e,{code:i}=this.props_smooth.default;if(void 0!==t&&null!==t||(t=""),a){if(a.split(";").includes(i)){let a=e.component_action||"";this.setState({value:t},()=>{let e=l.g.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==e&&(a.split(";").includes(i)||e.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"enter_tab"))})}}}this.clearError()},this.get=(e,t)=>{let a=this.props_smooth.config.structable;if(a.includes("|")){let t=a.split("|");for(let a=0;a<t.length;a++)this.readData(t[a],e.inform)}else this.readData(a,e.inform)},this.checkValidate=()=>{let e="",t=this.state.value;if(void 0===t||null===t)return!1;t=t.toString().trim();let{min:a,max:i,request:o,regex_format:s,validate_html:n}=this.state.validate;if(Number.isInteger(a)&&a>t.length&&(e="validateStringMin"),Number.isInteger(i)&&0!==i?(i<t.length||i<encodeURI(this.LOGIC_PASSWORD.getPasswordDecode()).split(/%..|./).length-1)&&(e="validateStringMax"):i=500,o&&""===t.trim()&&(e="validateRequest"),s&&""!==t){new RegExp(s,"gm").test(t)||(e="validateFormat")}if(void 0===n||"true"===n){/<\/?[a-z][\s\S]*>/g.test(t)&&(e="validateHtml")}if(""!==e){let t=l.g.getFormAppAuto(this.props_smooth.infoA.key_form);return void 0!==t&&t.setFormValidateFromComponent(!0,this.props_smooth.default),this.state.help_mess=e,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:e}),!0}return this.setState({help_css:"",help_icon:"",help_mess:""}),!1},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.data_select={},this.setState({value:this.props_smooth.config.data_default},()=>{let e=l.g.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==e&&e.runRuleFunction(this.props_smooth.default,this.data_select,this.props_smooth.infoA_parent,"reload")})},this.setDataDefault=()=>{this.data_select={},this.setState({value:this.props_smooth.config.data_default})},this.getInfoCompare=(e,t)=>{let{lang_compare:a,compare_info:i,isCompare:o}=this.state;if(o){let e=a[this.state.lang_select];if(i.is_change_value){let t=e.replace("{value_old}","");return t=t.replace("{value_new}",""),{is_change_value:i.is_change_value,compareInfo:{component_code:this.props_smooth.default.code,component_name:this.props_smooth.default.name,message:{title_before:i.cache_value,title_status:t,title_after:i.change_value}}}}}return{}},this.modalToggle=e=>{e||this.buildFormChild(),!0!==this.state.CMD.disabled&&(void 0===e?this.setState({show_modal:l.g.autoID()}):e&&(this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})))},this.eventEnter=()=>{if(void 0!==this.props_smooth.config.useAction)if("true"===this.props_smooth.config.useAction){let e=l.g.parseJson(this.props_smooth.config.txFoActions);void 0!==e?x.a.runActionWithContext(e,{},this.props_smooth.infoA,this.props_smooth.infoA_parent,this.props_smooth.default):l.g.AppException("#CTEXTINPUT.onKeyDown","config_fo is undefined")}else if(void 0!==this.props_smooth.config.txFo){let e=l.g.parseJson(this.props_smooth.config.txFo);void 0!==e?x.a.runFoWithContext(e,{},this.props_smooth.infoA,this.props_smooth.infoA_parent,this.props_smooth.default):l.g.AppException("#CTEXTINPUT.onKeyDown","Error Json is undefined")}else l.g.AppException("#CTEXTINPUT.onKeyDown","txFo is undefined");else l.g.AppException("#CTEXTINPUT.onKeyDown","useAction is undefined");l.g.getFormAppAuto(this.props_smooth.infoA.key_form).runRuleFunction(this.props_smooth.default,{},this.props_smooth.infoA_parent,"tab_enter")},this.onKeyUp=e=>{if("Enter"===e.key){this.hasEnter=!0,this.eventEnter(),l.g.getFormAppAuto(this.props_smooth.infoA.key_form).runRuleFunction(this.props_smooth.default,{},this.props_smooth.infoA_parent,"enter")}},this.onBlur=()=>{if(this.hasEnter=!0,!1===this.checkValidate()){let e=l.g.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==e&&"true"!==String(this.props.config.isSearch)&&e.runRuleFunction(this.props_smooth.default,{},this.props_smooth.infoA_parent,"enter_tab")}},this.onFocus=e=>{e.target.select()},this.checkDisable=()=>{let e=this.props_smooth.config.is_disabled;return"true"===e||!0===e},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props_smooth.default.name;return{info:this.renderMess(this.state.help_mess),key:e||this.props.default.name,infoComponent:this.props_smooth.default}}return""},this.renderDebug=()=>{if(l.g.isDebug()){this.props_smooth.config.structable=this.props_smooth.config.structable||"";let e=this.props_smooth.config.structable.split(".")[1],t=this.data_debug.data_cpn;return null===t&&(t="NULL"),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{color:"#f17316"}},`DATA-> |${e}|:|${t}|`))}},this.renderMess=e=>{switch(e){case"validateStringMin":return l.g.getLang(e).replace("{count}",this.state.validate.min);case"validateStringMax":return l.g.getLang(e).replace("{count}",this.state.validate.max);case"validateRequest":case"validateFormat":default:return l.g.getLang(e)}},this.setFocus=()=>{var e,t;(null===(e=this.myRef)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.ref_myInput)&&this.myRef.current.ref_myInput.focus()},this.abs_CloseModal=()=>{this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})},this.renderFormChildDone=!1,this.LOGIC_PASSWORD=new w.a,this.propertyConstructor=new M(e.inputType,e.default,e.config),this.props_smooth=Object(i.a)({},this.props),(null===(t=this.props_smooth)||void 0===t||null===(a=t.validate)||void 0===a?void 0:a.max)&&(this.props_smooth.validate.max=Number(null===(o=this.props_smooth)||void 0===o||null===(n=o.validate)||void 0===n?void 0:n.max)),this.props_smooth.config=this.propertyConstructor.getConfig(),this.props_smooth.default=this.propertyConstructor.getDefault(),this._enterTimeout=void 0,this.data_default="",void 0!==this.props_smooth.config.data_default&&(this.props_smooth.config.data_default=this.convertStringWithContext(this.props_smooth.config.data_default),this.data_default=this.props_smooth.config.data_default);let r=this.props_smooth.validate;void 0===r&&(r={});let c="true"===this.props_smooth.config.isLookup,d="true"===String(this.props_smooth.validate.is_compare);this.callform_detail="",this.callform="",this.data_select={};let h={},u={};void 0!==this.props_smooth.lang&&(h=void 0!==this.props_smooth.lang.title?this.props_smooth.lang.title:this.props_smooth.lang,void 0!==this.props_smooth.lang.lang_compare&&(u=this.props_smooth.lang.lang_compare));let p={mode:"",col_text:"",col_input:""};void 0!==e.infoA.mode_form&&(p=e.infoA.mode_form);let v={parent:"",child:""},b={class:""},y=void 0!==this.props_smooth.ofgroup&&""!==this.props_smooth.ofgroup&&"false"!==this.props_smooth.ofgroup,D=void 0!==e.infoA.mode_form&&"1"===e.infoA.mode_form.mode,C=!!this.props_smooth.ofgroup_child;if(D)if(C)v={parent:"",child:void 0!==this.props_smooth.default.class&&""!==this.props_smooth.default.class?this.props_smooth.default.class:void 0!==this.props_smooth.css_default.class&&""!==this.props_smooth.css_default.class?this.props_smooth.css_default.class:"col-sm-4"};else if(y){let e=4/(this.props_smooth.ofgroup_data.length+1);b={class:"col-sm-"+parseInt(e<0?1:e)},v={parent:void 0!==this.props_smooth.default.class&&""!==this.props_smooth.default.class?this.props_smooth.default.class:"col-sm-6",child:""}}else v={parent:void 0!==this.props_smooth.default.class&&""!==this.props_smooth.default.class?this.props_smooth.default.class:"col-sm-6",child:""};else v=C?{parent:"",child:this.props_smooth.default.class+" jwebui-ofgroup"}:y?0===this.props_smooth.ofgroup_data.length?{parent:this.props_smooth.default.class,child:""}:{parent:this.props_smooth.default.class_ofgroup,child:this.props_smooth.default.class+" jwebui-ofgroup-fisrt"}:{parent:this.props_smooth.default.class,child:""};this.state={isCompare:d,compare_info:{cache_value:void 0,is_change_value:!1,change_value:void 0},value:this.data_default,value_old:"",lang_compare:u,lang:h,lang_select:l.g.getLangKey(),validate:r,isLookup:c,data_view:"",show_modal:"none",show_modal_detail:"none",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:this.propertyConstructor.getCMD(),check_upper_case:this.props_smooth.config.is_upperCase,config_mode:p,class_config:v,css_default:b,isFocus:!1,isLoading:!1,renderFormChildDone:!1,id_component:l.g.autoID()},this.data_debug={},this.myRef=s.a.createRef(),this.LOGIC_PASSWORD.setPassword(this.data_default)}buildPaging(e,t){let a=[],i=1;if(e>0)for(let o=0;o<e;o+=parseInt(t.paging_record))a[a.length]=i,i++;else a[a.length]=1;return a}componentDidUpdate(e){void 0===this.state.value&&this.setState({value:""}),e.value!==this.state.value&&this.state.value!==this.LOGIC_PASSWORD.getPasswordDisplay()&&(this.LOGIC_PASSWORD.setPassword(this.state.value),this.setState({value:this.LOGIC_PASSWORD.getPasswordDisplay()}))}buildFormChild(){if(this.state.isLookup&&this.props_smooth.config.callform&&""!==this.props_smooth.config.callform.trim()){let e=l.g.cloneJson(this.props_smooth.infoA);e.componentParent=this.props_smooth.default,Object(A.b)(this.props_smooth.config.callform,this.refs.b_modal.getElementContentModal(),e,this.props_smooth.default,"callform;"+this.state.id_component)}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props_smooth.infoA.key_form,this)},l.g.getTimeAddComponent())}readData(e,t){if(e.includes(".")){let a=e.split(".");const i=this.LOGIC_PASSWORD.getPasswordDecode().trim();void 0===t||"true"===t?l.g.putData(a[0],a[1],i,this.props_smooth.infoA):"false"===t?l.g.putDataGB(a[0],a[1],i):l.g.putDataGB(a[0],a[1],"")}}handleChange(e){if(e.target.value.includes("\n"))return;if(this.state.isLoading)return;let{compare_info:t}=this.state;t.cache_value!==e.target.value?(t.change_value=e.target.value,t.is_change_value=!0):t.is_change_value=!1;let a=e.target.value,i=Number(this.props_smooth.validate.max)||0;a.length>i+100||("true"===this.state.check_upper_case?a=a.toUpperCase():"-"===this.state.check_upper_case&&(a=a.toLowerCase()),"true"===String(this.props.config.isSearch)&&(void 0===this._enterTimeout?this._enterTimeout=setTimeout(()=>{if(!0!==this.hasEnter){this.eventEnter(),l.g.getFormAppAuto(this.props_smooth.infoA.key_form).runRuleFunction(this.props_smooth.default,{},this.props_smooth.infoA_parent,"enter"),this.hasEnter=!0}else this.hasEnter=!1},1e3):(clearTimeout(this._enterTimeout),this._enterTimeout=setTimeout(()=>{if(!0!==this.hasEnter){this.eventEnter(),l.g.getFormAppAuto(this.props_smooth.infoA.key_form).runRuleFunction(this.props_smooth.default,{},this.props_smooth.infoA_parent,"enter"),this.hasEnter=!0}else this.hasEnter=!1},1e3))),this.LOGIC_PASSWORD.setPassword(a),this.setState({value:a,compare_info:t}))}openDetail(){if(""!==this.callform_detail&&void 0!==this.props_smooth.infoA){let e=l.g.getFormAppAuto(this.callform_detail);if(void 0!==e)return void("modal"===this.props_smooth.config.callform_detail_mode?(e.putDataAll_andSet(this.data_select),this.setState({show_modal_detail:l.g.autoID()})):(e.putDataAll_andSet(this.data_select),l.g.openForm(this.callform_detail)))}Object(A.a)({form_code:this.props_smooth.config.callform_detail},this.props_smooth.infoA,this.props_smooth.default,"callform_detail",this.data_select)}listenHandlerUser(e){this.setState({value_old:e}),void 0===this.data_select&&(this.data_select={}),this.data_select.new_value=e;let t=l.g.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props_smooth.default,this.state.value,this.props_smooth.infoA_parent,"on_change")}render(){const e=Object(v.b)("uInput");if(this.state.CMD.visible+""==="false")return null;const t=Object(v.b)("uOfGroup");return this.props.isOfgroupParent?s.a.createElement(t,{class:this.props.default.class_ofgroup},s.a.createElement(s.a.Fragment,null,s.a.createElement(e,Object.assign({ref:this.myRef},this.getUInputConfig())),this.state.isLookup&&s.a.createElement(C,{modal_title:l.g.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal}),this.state.isLookup&&s.a.createElement(C,{info_component:this.props.default,show:this.state.show_modal_detail,infoA_call_form:this.state.infoA_call_form,ref:"b_modal_detail",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})),this.props.ofGroupData.map(e=>s.a.createElement(N.a,Object.assign({},e,{isOfgroupParent:!1})))):s.a.createElement(s.a.Fragment,null,s.a.createElement(e,Object.assign({ref:this.myRef},this.getUInputConfig())),this.state.isLookup&&s.a.createElement(C,{modal_title:l.g.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal}),this.state.isLookup&&s.a.createElement(C,{info_component:this.props.default,show:this.state.show_modal_detail,infoA_call_form:this.state.infoA_call_form,ref:"b_modal_detail",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal}))}}var T=S;class E extends o.Component{async _onChange(e,t){void 0!==this.props.onChange&&this.props.onChange(t)}render(){return s.a.createElement("div",{className:"form-group "+this.props.class},s.a.createElement("label",null,this.props.name),s.a.createElement("textarea",{className:"form-control",rows:this.props.rows?this.props.rows:9,value:this.props.value,onChange:e=>{this._onChange(this.props,e)},placeholder:this.props.name,required:""}))}}var O=E;class I extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.structable?t.structable=e.structable:t.structable="",null!=e.structable_read?t.structable_read=e.structable_read:t.structable_read="",null!=e.data_default?t.data_default=e.data_default:t.data_default="",null!=e.isjson?t.isjson=e.isjson:t.isjson="false",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},"C\u1ea5u h\xecnh chuy\xean text area:",s.a.createElement("br",null),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"\u0110\u1ecbnh d\u1ea1ng json",value:this.state.data.isjson,data:[{title:"Kh\xf4ng d\xf9ng",code:"false"},{title:"D\xf9ng",code:!0}],onChange:e=>this.onChange_Value("isjson",e)}),s.a.createElement(O,{class:"col-sm-12 col-md-12",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}))}}var F=I;class L extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var j=L;const R={},z={},P={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class U{}U.get=()=>({main:R,position:z,cmd:P}),U.getCmd=()=>P,U.getValueCmd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return void 0!==e.infoA.form_code&&(t=l.g.role_getComponent(e.infoA.form_code,e.default.codeHidden)||{},t=t.role||{}),t};var V=U;const B={title:"Example Schema",type:"object",properties:{array:{type:"array",items:{type:"number"}},boolean:{type:"boolean"},number:{type:"number"}},required:[]},H=["tree","form","view","code","text"];class Y extends o.Component{constructor(e){super(e),this.getUTextareaConfig=()=>(B.title=this.props.default.name,{config:{default:{title:this.props.default.name,class:this.props.default.class,rows:10,isJson:"true"===this.props.config.isjson,required:"true"===this.props.validate.request},cmd:{disable:this.state.CMD.disabled+""==="true",visible:this.state.CMD.visible+""!=="false"},error:{message:l.g.getLang(this.state.help_mess),type:""!==this.state.help_mess?"danger":""},mode:{}},data:[],value:this.state.value,tooltip_copy:{icon:"copy",title:l.g.getLang("btn_copy")},abs_Copy:()=>{l.g.copyToClipboard(this.state.value)},json_config:"true"===this.props.config.isjson?{schema:this.state.schema,mode:this.state.mode,indentation:4,modes:this.state.CMD.disabled+""==="true"?[]:H,text:this.state.value||"{}",onChangeText:this.onChangeText,onModeChange:this.onModeChange}:{}}),this.onChangeText=e=>{this.setState({value:e})},this.onModeChange=e=>{this.setState({mode:e})},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.setCMD=(e,t)=>{const{CMD:a}=this.state;let i=Object.assign(l.g.cloneJson(a),t);for(let o in i)"true"===i[o]&&(i[o]=!0),"false"===i[o]&&(i[o]=!1);this.setState({CMD:i},()=>{i.disabled+""==="true"?this.setState({mode:"view"}):this.setState({mode:"tree"})})},this.getFormConfig=e=>s.a.createElement(F,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(j,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.callDir=()=>this,this.setAdvanced=(e,t)=>{try{t||(t=JSON.stringify(JSON.parse(this.data_default),null,4))}catch(a){t=this.data_default}if(void 0!==this.props.config.isjson&&"true"===this.props.config.isjson)try{t=JSON.stringify(JSON.parse(t),null,4)}catch(a){}this.setState({value:t})},this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var a=this.props.config.structable_read.split(".");if(a.length>0&&void 0!==t[a[0]]&&void 0!==t[a[0]][a[1]]){if(void 0!==this.props.config.isjson)if("true"===this.props.config.isjson)try{"object"===typeof t[a[0]][a[1]]?this.setState({value:JSON.stringify(t[a[0]][a[1]],null,4)}):this.setState({value:JSON.stringify(JSON.parse(t[a[0]][a[1]]),null,4)})}catch(i){}else this.setState({value:t[a[0]][a[1]]});else this.setState({value:t[a[0]][a[1]]});return}}let e="";if(this.data_default&&(e=this.data_default,void 0!==this.props.config.isjson&&"true"===this.props.config.isjson))try{e=JSON.stringify(JSON.parse(e),null,4)}catch(i){}this.setState({value:e})}},this.get=(e,t)=>{let a=this.props.config.structable;if(a.includes("|")){let t=a.split("|");for(let a=0;a<t.length;a++)this.readData(t[a],e.inform)}else this.readData(a,e.inform)},this.reload=(e,t)=>{if(void 0!==this.props.config.isjson)if("true"===this.props.config.isjson)try{this.setState({value:JSON.stringify(JSON.parse(this.data_default),null,4)})}catch(a){}else this.setState({value:this.data_default});else this.setState({value:this.data_default})},this.onBlur=e=>{if(!this.checkValidate()&&void 0!==this.props.config.isjson&&"true"===this.props.config.isjson)try{this.setState({value:JSON.stringify(JSON.parse(e.target.value),null,4)})}catch(t){alert(t)}},this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var t=this.props.lang;void 0===t&&(t={});let a={mode:"",col_text:"",col_input:""};void 0!==e.infoA.mode_form&&(a=e.infoA.mode_form);let i={parent:"",child:""},o={class:""},n=void 0!==this.props.ofgroup&&""!==this.props.ofgroup&&"false"!==this.props.ofgroup,r=void 0!==e.infoA.mode_form&&"1"===e.infoA.mode_form.mode,c=!!this.props.ofgroup_child;if(r)if(c)i={parent:"",child:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:void 0!==this.props.css_default.class&&""!==this.props.css_default.class?this.props.css_default.class:"col-sm-4"};else if(n){let e="col-sm-"+parseInt(10/(this.props.ofgroup_data.length+1));o={class:e},i={parent:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:e,child:""}}else i={parent:"col-sm-6",child:""};else i=c?{parent:"",child:this.props.default.class+" jwebui-ofgroup"}:n?0===this.props.ofgroup_data.length?{parent:this.props.default.class,child:""}:{parent:this.props.default.class_ofgroup,child:this.props.default.class+" jwebui-ofgroup-fisrt"}:{parent:this.props.default.class,child:""};let d=this.data_default;if(void 0!==this.props.config.isjson&&"true"===this.props.config.isjson)try{d=JSON.stringify(JSON.parse(d))}catch(_){}let h=V.getValueCmd(this.props);this.state={value:d,lang:t,lang_select:l.g.getLangKey(),help_css:"",help_icon:"",help_mess:"",CMD:V.getValueCmd(this.props),config_mode:a,class_config:i,css_default:o,schema:B,mode:h.disabled+""==="true"?"view":"tree"},this.handleChange=this.handleChange.bind(this)}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}readData(e,t){if(e.includes(".")){var a=e.split(".");void 0===t||"true"===t?l.g.putData(a[0],a[1],this.state.value,this.props.infoA):"false"===t?l.g.putDataGB(a[0],a[1],this.state.value):l.g.putDataGB(a[0],a[1],"")}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}handleChange(e){this.setState({value:e.target.value})}checkValidate(){let e="",t=this.state.value.trim();if("true"===this.props.validate.request&&""===t&&(e="validateRequest"),""!==e){let t=l.g.getFormAppAuto(this.props.infoA.key_form);return void 0!==t&&t.setFormValidateFromComponent(!0,this.props.default),this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:e}),!0}return this.setState({help_css:"",help_icon:"",help_mess:""}),!1}render(){const e=Object(v.b)("uTextArea"),t=Object(v.b)("uOfGroup");return this.props.isOfgroupParent?s.a.createElement(t,{class:this.props.default.class_ofgroup},s.a.createElement(e,{dataFull:Object(i.a)(Object(i.a)({},this.getUTextareaConfig()),{},{abs_Change:this.handleChange,abs_Blur:this.onBlur})}),this.props.ofGroupData.map(e=>s.a.createElement(N.a,Object.assign({},e,{isOfgroupParent:!1})))):s.a.createElement(e,{dataFull:Object(i.a)(Object(i.a)({},this.getUTextareaConfig()),{},{abs_Change:this.handleChange,abs_Blur:this.onBlur})})}}var Q=Y;class G extends o.Component{constructor(e){super(e),this.getValue=()=>{var e=this.state.data;if(void 0!==this.refs.txFo){var t=this.refs.txFo.getValue();void 0!==t.txFo&&(e.txFo=t.txFo)}if(void 0!==this.refs.txFoAction){var a=this.refs.txFoAction.getValue();void 0!==a.txFoActions&&(e.txFoActions=a.txFoActions)}return e};var t=this.readConfig(this.props.data),a=this.changDataSchemaToDataSelect(),i=[];if(a.length>0&&void 0!==t.tableMasterData&&""!==t.tableMasterData){var o=this.changDataSchemaTo_privateKeyTableMasterData(t.tableMasterData,t);void 0!==o.data_schema_pk&&(i=o.data_schema_pk)}this.state={data:t,data_schema:a,data_schema_pk:i,private_key_config:l.g.autoID()}}changDataSchemaToDataSelect(){for(var e=Object(l.n)().all_id_button,t=[{title:"Ch\u01b0a ch\u1ecdn",code:""}],a=0;a<e.length;a++)t[t.length]={title:e[a].title,code:e[a].type};return t.sort((function(e,t){var a=e.title.toUpperCase(),i=t.title.toUpperCase();return a<i?-1:a>i?1:0})),t}changDataSchemaTo_privateKeyTableMasterData(e,t){var a=Object(l.n)(),i=[],o="";if(void 0!==a&&void 0!==a.all_id_button)for(var s=a.all_id_button,n=0;n<s.length;n++){var r=s[n];if(void 0!==r.type&&void 0!==r.detail&&""!==r.type.trim()&&r.type.trim()===e){for(var c=0;c<r.detail.length;c++){var d=r.detail[c];void 0!==d.datapk&&"true"===d.datapk&&(""===o&&(o=d.code),i[i.length]={title:d.title,code:d.code})}break}}var h=t;return h.privateKeyTableMasterData=o,{data_schema_pk:i,data:h}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.action?t.action=e.action:t.action="",null!=e.txFoActions?t.txFoActions=e.txFoActions:t.txFoActions="",null!=e.txFo?t.txFo=e.txFo:t.txFo="",null!=e.useAction?t.useAction=e.useAction:t.useAction="true",null!=e.icon?t.icon=e.icon:t.icon="fa-floppy-o",null!=e.color?t.color=e.color:t.color="info",null!=e.onTable?t.onTable=e.onTable:t.onTable="",null!=e.isMasterData?t.isMasterData=e.isMasterData:t.isMasterData="false",null!=e.tableMasterData?t.tableMasterData=e.tableMasterData:t.tableMasterData="",null!=e.privateKeyTableMasterData?t.privateKeyTableMasterData=e.privateKeyTableMasterData:t.privateKeyTableMasterData="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;if(a[e]=t.target.value,"tableMasterData"===e){var i=this.changDataSchemaTo_privateKeyTableMasterData(t.target.value,a);this.setState({data_schema_pk:i.data_schema_pk,data:i.data})}else this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"Thu\u1ed9c grid",value:this.state.data.onTable,onChange:e=>this.onChange_Value("onTable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"Icon",value:this.state.data.icon,onChange:e=>this.onChange_Value("icon",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"Color",value:this.state.data.color,onChange:e=>this.onChange_Value("color",e)}),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-8 col-sm-8 col-md-8"},s.a.createElement("h3",{className:"panel-title text-capitalize"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse"},"H\xe0nh \u0111\u1ed9ng"))),s.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse"},s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"}))))),s.a.createElement("div",{id:this.state.private_key_config+"_function",className:"collapse"},s.a.createElement("div",{className:"panel-body"},s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"H\xe0nh \u0111\u1ed9ng click",value:this.state.data.useAction,data:[{title:"G\u1ecdi tx fo",code:"false"},{title:"G\xf5 nhanh",code:"true"}],onChange:e=>this.onChange_Value("useAction",e)}),s.a.createElement(d.a,{ref:"txFo",hidden:"false"===this.state.data.useAction,data:this.state.data.txFo}),s.a.createElement(c.a,{hidden:"true"===this.state.data.useAction,ref:"txFoAction",data:this.state.data.txFoActions}))))),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-8 col-sm-8 col-md-8"},s.a.createElement("h3",{className:"panel-title text-capitalize"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_master",className:"pull-left","data-toggle":"collapse"},"Master data"))),s.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_master",className:"pull-right","data-toggle":"collapse"}," ",s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"})," ")))),s.a.createElement("div",{id:this.state.private_key_config+"_master",className:"collapse"},s.a.createElement("div",{className:"panel-body"},s.a.createElement(r.a,{className:"col-sm-12 col-md-12",name:"L\xe0 master data",value:this.state.data.isMasterData,data:[{title:"Kh\xf4ng",code:"false"},{title:"\u0110\xfang",code:"true"}],onChange:e=>this.onChange_Value("isMasterData",e)}),"true"===this.state.data.isMasterData&&s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u",value:this.state.data.tableMasterData,data:this.state.data_schema,onChange:e=>this.onChange_Value("tableMasterData",e)}),"true"===this.state.data.isMasterData&&s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Kh\xf3a ch\xednh",value:this.state.data.privateKeyTableMasterData,data:this.state.data_schema_pk,onChange:e=>this.onChange_Value("privateKeyTableMasterData",e)}))))))}}var J=G;class W extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var q=W;class K extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var Z=K;class X extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Kh\xf4ng",t[0].code="false",t[1]={},t[1].title="D\xf9ng",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.danger?t.danger=e.danger:t.danger="",null!=e.warning?t.warning=e.warning:t.warning="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Danger",data:this.state.list_true_false,value:this.state.data.danger,hasNew:!1,onChange:e=>this.onChange_Value("danger",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Warning",data:this.state.list_true_false,value:this.state.data.warning,hasNew:!1,onChange:e=>this.onChange_Value("warning",e)}))}}var $=X;var ee=class{constructor(e,t,a){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=e=>{this.property.cmd.disabled=e},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}},te=a(4);class ae extends o.Component{constructor(e){if(super(e),this.modalToggle=e=>{void 0===e?this.setState({show_modal:l.g.autoID()}):e&&this.setState({show_modal:"none"})},this.setDataOOP=(e,t)=>{this.setState({dataOOP:t},()=>{l.g.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,t,this.props.infoA_parent,"update")})},this.getDataOOP=(e,t)=>{const{list_component:a}=e,{code:i}=this.props.default;if(a){if(a.split(";").includes(i))return this.state.dataOOP}},this.setCMD=(e,t)=>{if(void 0!==e&&void 0!==t){const a=e.list_component;if(a&&a.includes(this.props.default.code)){this.propertyConstructor.setCMD(t);let{dataFull:e}=this.state;e.config.cmd.disable="true"===String(this.propertyConstructor.getCMD_disable()),e.config.cmd.visible=this.propertyConstructor.getCMD_visible(),this.setState({dataFull:e})}}},this.getInfoCheckRun=()=>{let e=this.propertyConstructor.getCMD();return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getFormConfig=e=>s.a.createElement(J,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(Z,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormProperty=e=>s.a.createElement($,{data:e,ref:e=>l.g.setConfigComponent("property",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(q,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.changeKeyLanguage=()=>{this.state.lang_default?this.setState({lang:l.g.getLang(this.props.default.code),lang_select:l.g.getLangKey()}):this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.get=(e,t)=>{void 0!==this.props.config.uploadfile&&"true"===this.props.config.uploadfile.active&&l.g.putData(this.props.default.code,"uploadFile",this.uploadfile_result,this.props.infoA)},this.runFO=(e,t)=>{t.action&&x.a.runActionWithContext(t.action,{},this.props.infoA,this.props.infoA_parent,this.props.default),t.txFo&&x.a.runFoWithContext(t.txFo,{},this.props.infoA,this.props.infoA_parent,this.props.default)},this.setLoadingAction=(e,t)=>{const a=(null===t||void 0===t?void 0:t.isLoading)||!1;let i=this.state.dataFull;i.config.cmd.isLoading=a,i.config.cmd.disable=a||"true"===String(this.propertyConstructor.getCMD_disable()),this.setState({dataFull:i})},this.fileSelectHandler=e=>{},this.clearTimeOut=()=>{clearTimeout(this.timer),this.timer=null},this.reload=()=>{this.setState({test:"",isLoading:!1})},this.set=()=>{this.setState({test:""})},this.showToast=function(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={},o=e;switch(t){case!0:a&&(o+=" successfully"),i={class_:"success",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}};break;case!1:a&&(o+=" error"),i={class_:"error",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}}}l.g.pushNotify("notifyToast",i,{}),l.g.pushNotify("notifyDefault",i,{}),l.g.callAllScreenListen()},this.propertyConstructor=new ee(e.inputType,e.default,e.config),this.timer=void 0,this.uploadfile_result={},this.disabled=!1,void 0!==this.props.infoA.form_code){var t=l.g.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=t&&void 0!==t.role&&(void 0!==t.role.disabled&&(!0===t.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==t.role.visible&&(!0===t.role.visible?this.propertyConstructor.setCMD_visible(e.visibility&&!0):this.propertyConstructor.setCMD_visible(e.visibility&&!1)))}var a=this.props.lang;void 0===a&&(a={});let i={color:this.props.config.color,icon:this.props.config.icon},o={btn_remove:{color:"danger",icon:"fa-trash-o"},btn_save:{color:"success",icon:"fa-save"},btn_add:{color:"primary",icon:"fa-plus"},btn_modified:{color:"warning",icon:"fa-pencil-square-o"},btn_update:{color:"warning",icon:"fa-cloud-upload"},btn_cancel:{color:"default",icon:"fa-ban"},btn_clear:{color:"default",icon:"fa-times"},btn_import:{color:"primary",icon:"fa-upload"},btn_export:{color:"primary",icon:"fa-download"},btn_accept:{color:"primary",icon:"fa-check"},btn_apply:{color:"primary",icon:"fa-check"},btn_search:{color:"primary",icon:"fa-search"},btn_copy:{color:"primary",icon:"fa-files-o"},btn_print:{color:"base",icon:"fa-print"},btn_printVoucher:{color:"base",icon:"fa-file-text-o"}},n=!1;void 0!==o[this.props.default.code]&&(i=o[this.props.default.code],a=l.g.getLang(this.props.default.code),n=!0);var r=!1;void 0!==this.props.config.isLookup&&"true"===this.props.config.isLookup&&(r=!0),this.state={lang:a,lang_select:l.g.getLangKey(),lang_default:n,dataOOP:{},count:1,config_btn:i,show_modal:"none",isLookup:r,dataFull:{config:{default:{title:this.props.default.name,type:this.props.config.color,class:this.props.default.class,icon:this.props.config.icon},cmd:{disable:"true"===String(this.propertyConstructor.getCMD_disable()),isLoading:!1}}}},this.time_last_click=0}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}componentDidMount(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let e=l.g.cloneJson(this.props.infoA);e.componentParent=this.props.default,Object(A.b)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),e,this.props.default,"callform")}setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}onClick(){void 0!==this.timer&&null!==this.timer||(this.timer=setTimeout(()=>{clearTimeout(this.timer),this.timer=null},3e3),void 0!==this.props.config.uploadfile&&"true"===this.props.config.uploadfile.active?this.refs.uploadfile_hidden.click():this.this_redirect())}this_redirect(){if(this.propertyConstructor.getCMD_visible())if(void 0!==this.props.config.useAction)if("true"===this.props.config.useAction){var e=l.g.parseJson(this.props.config.txFoActions);void 0!==e?x.a.runActionWithContext(e,{},this.props.infoA,this.props.infoA_parent,this.props.default):l.g.AppException("#CBUTTON.onClick","config_fo is undefined")}else if(void 0!==this.props.config.txFo){var t=l.g.parseJson(this.props.config.txFo);void 0!==t?x.a.runFoWithContext(t,{},this.props.infoA,this.props.infoA_parent,this.props.default):l.g.AppException("#CBUTTON.onClick","Error Json is undefined")}else l.g.AppException("#CBUTTON.onClick","txFo is undefined");else l.g.AppException("#CBUTTON.onClick","useAction is undefined");else alert(l.g.getLang("#sysDontLoveMe"));var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_click"),l.g.isDebug()&&l.g.copyToClipboard(JSON.stringify(this.props.config.txFo))}render(){var e,t;const a=Object(v.b)("uButton");if("false"===this.state.dataFull.config.cmd.visible)return null;const o=Object(v.b)("uOfGroup");return this.props.isOfgroupParent?s.a.createElement(o,{class:this.props.default.class_ofgroup},s.a.createElement(s.a.Fragment,null,"true"===(null===(e=this.props.config.uploadfile)||void 0===e?void 0:e.active)&&s.a.createElement("input",{type:"file",ref:"uploadfile_hidden",accept:void 0!==this.props.config.uploadfile&&this.props.config.uploadfile.filetype,onChange:e=>{void 0!==this.refs.uploadfile_hidden&&(this.refs.uploadfile_hidden.files.length>0?Object(te.a)(this.refs.uploadfile_hidden.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then(e=>{this.uploadfile_result=e,this.this_redirect()},e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#",!1):this.showToast("buttonNotSelectFile",!1)}):this.showToast("buttonNotSelectFile",!1))},hidden:!0}),s.a.createElement(a,{dataFull:Object(i.a)(Object(i.a)({},this.state.dataFull),{},{abs_Click:(e,t)=>{this.onClick()}})})),this.props.ofGroupData.map(e=>s.a.createElement(N.a,Object.assign({},e,{isOfgroupParent:!1})))):s.a.createElement(s.a.Fragment,null,"true"===(null===(t=this.props.config.uploadfile)||void 0===t?void 0:t.active)&&s.a.createElement("input",{type:"file",ref:"uploadfile_hidden",accept:void 0!==this.props.config.uploadfile&&this.props.config.uploadfile.filetype,onChange:e=>{void 0!==this.refs.uploadfile_hidden&&(this.refs.uploadfile_hidden.files.length>0?Object(te.a)(this.refs.uploadfile_hidden.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then(e=>{this.uploadfile_result=e,this.this_redirect()},e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#",!1):this.showToast("buttonNotSelectFile",!1)}):this.showToast("buttonNotSelectFile",!1))},hidden:!0}),s.a.createElement(a,{dataFull:Object(i.a)(Object(i.a)({},this.state.dataFull),{},{abs_Click:(e,t)=>{this.onClick()}})}))}}var ie=ae,oe=a(53),se=a(20);class le extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.structable?t.structable=e.structable:t.structable="",null!=e.query_data?t.query_data=e.query_data:t.query_data="",null!=e.paging_record?t.paging_record=e.paging_record:t.paging_record="5",null!=e.columns?t.columns=JSON.stringify(JSON.parse(e.columns),null,4):t.columns=JSON.stringify([{code:"table.name",title:"T\xean",inputtype:"ColumnString",config:{}}],null,4),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}onBlur(e,t){var a=this.state.data;try{var i=JSON.parse(t.target.value);a[e]=JSON.stringify(i,null,4)}catch(o){alert(o)}this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{className:"col-sm-12 col-md-11",name:"Query data",value:this.state.data.query_data,placeholder:"select * from group_menu",onChange:e=>this.onChange_Value("query_data",e)}),s.a.createElement("button",{onClick:()=>{var e=l.g.getDataLimited(this.state.data.query_data,0,1e3);l.g.log(e,"Check")}},"Check"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"C\u1ea5u h\xecnh c\u1ed9t (JSON)"),s.a.createElement("textarea",{className:"form-control",rows:"12",onChange:e=>{this.onChange_Value("columns",e)},value:this.state.data.columns,onBlur:e=>{this.onBlur("columns",e)}})),s.a.createElement(n.a,{className:"col-sm-12 col-md-12",name:"Data m\u1ed7i trang",value:this.state.data.paging_record,onChange:e=>this.onChange_Value("paging_record",e)}),s.a.createElement(n.a,{className:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}))}}var ne=le;class re extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];void 0!==this.props.config&&void 0!==this.props.config.columns&&(t=JSON.parse(this.props.config.columns)),this.state={data:this.joinTableColumnAndLang(l.g.getConfigUserDefault("list_lang_config"),t),columns:t,lang_system:l.g.getConfigUserDefault("list_lang_config")}}joinTableColumnAndLang(e,t){var a=t;void 0===a&&(a=[]);var i=this.props.data;void 0===i&&(i={});for(var o={},s=0;s<a.length;s++)for(var l=0;l<e.length;l++)if(void 0!==a[s].title){var n=e[l].key;void 0===i[n]&&(i[n]={}),void 0===o[n]&&(o[n]={});var r=a[s].title.trim();void 0===i[n][r]?o[n][r]=r:o[n][r]=i[n][r]}return o}componentDidUpdate(e){if(this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.data!==e.data){var t=[];void 0!==this.props.config&&void 0!==this.props.config.columns&&(t=JSON.parse(this.props.config.columns)),this.setState({data:this.joinTableColumnAndLang(this.state.lang_system,t)})}}render(){return s.a.createElement("div",{className:"col-md-12 col-lg-12"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("div",{className:"no-more-tables"},s.a.createElement("table",{className:"table table-bordered table-middle"},s.a.createElement("tbody",null,this.state.columns.map((e,t)=>s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.title),s.a.createElement("td",null,this.state.lang_system.map((t,a)=>s.a.createElement(n.a,{key:a,class:"col-sm-12 col-md-12",name:t.view,value:this.state.data[t.key][e.title],onChange:a=>{var i=this.state.data;void 0===i[t.key]&&(i[t.key]={}),i[t.key][e.title]=a.target.value,this.setState({data:i})}}))))))))))}}var ce=re;const de={},he={},_e={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class ue{}ue.get=()=>({main:de,position:he,cmd:_e}),ue.getCmd=()=>_e,ue.getValueCmd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return void 0!==e.infoA.form_code&&(t=l.g.role_getComponent(e.infoA.form_code,e.default.codeHidden)||{},t=t.role||{}),t};var ge=ue,me=a(7);class pe extends o.Component{constructor(e){super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.getFormConfig=e=>s.a.createElement(ne,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(ce,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.callDir=()=>this,this.setCMD=(e,t)=>{const{CMD:a}=this.state;let i=Object.assign(l.g.cloneJson(a),t);for(let o in i)"true"===i[o]&&(i[o]=!0),"false"===i[o]&&(i[o]=!1);this.setState({CMD:i})},this.set=(e,t)=>{},this.reload=(e,t)=>{this.dataGlobal=l.g.getDataLimited(this.state.config_table.query_data,0,999999999);let a={data:this.dataGlobal.data.slice(0,this.state.config_table.paging_record)||[],total:this.dataGlobal.total},i=[],o=0;void 0!==a.total&&(o=a.total);let s=this.buildPaging(o,this.state.config_table);void 0!==a.data&&(i=a.data),this.setState({columnSearchValue:{},dataFilter:this.dataGlobal.data,data:i,paging:s,page_index:1,total_record:o})},this.get=(e,t)=>{if(null!==e&&void 0!==e&&e.list_component&&(";"+e.list_component+";").includes(";"+this.props.default.code+";")){let t=this.props.config.structable;if(t.includes("|")){let a=t.split("|");for(let t=0;t<a.length;t++)this.readData(a[t],e.inform)}else this.readData(t,e.inform)}},this.abs_getDataLimited=function(e,t){let a={data:this.state.dataFilter.slice(e,e+t)||[],total:this.state.dataFilter.length},i=a.data;if(!0===this.state.hasCheck)for(let l=0;l<i.length;l++)i[l].hasCheck__=!1;let o=1;void 0!==a.total&&(o=a.total);let s=this.buildPaging(o,this.state.config_table);this.setState({data:i,total_record:o,paging:s})},this.recordChangeHandler=e=>{let t=this.state.config_table;t.paging_record=this.state.paging_record[e];let a=this.buildPaging(this.state.total_record,t);this.setState({paging:a,page_index:1,selectedRecordIndex:e,config_table:t},()=>{this.abs_getDataLimited(0,this.state.paging_record[e])})},this.abs_PagingActive=e=>{let t=(e-1)*this.state.config_table.paging_record,a=this.state.config_table.paging_record;this.setState({page_index:e},()=>{this.abs_getDataLimited(t,a)})},this.getHeaderConfig=e=>{let t=[];return!0===e&&t.push({title:"",config:{width:"20px",isFrozen:!1}}),t=t.concat(this.state.columns.map(e=>{var t,a;return{title:(null===(t=this.state.lang)||void 0===t||null===(a=t[this.state.lang_select])||void 0===a?void 0:a[e.title])||e.title,id:e.code,config:{width:"",isFrozen:!1},value_search:this.state.columnSearchValue[e.code]}})),t},this.handelClearSearch=()=>{let e=this.state.columnSearchValue;for(const s in e)e[s]="";let t=this.dataGlobal.data,a=t.slice(0,this.state.config_table.paging_record),i=t.length,o=this.buildPaging(i,this.state.config_table);this.setState({data:a,dataFilter:t,paging:o,page_index:1,total_record:i,columnSearchValue:e})},this.getCaptionLang=(e,t,a)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${t}_${a}`]&&(this.CACHE_CDLIST[`${t}_${a}`]=l.g.data_cdList(t,a,!0));let i={};for(const l of this.CACHE_CDLIST[`${t}_${a}`]){let e=l.c_cdlist.mcaption||{},t=l.c_cdlist.caption||"";i[l.c_cdlist.cdid]=l.c_cdlist={mcaption:e,caption:t}}const o=i[e]||{};let s=(null===o||void 0===o?void 0:o.mcaption)||{},n=(null===o||void 0===o?void 0:o.caption)||"";return s[l.g.getLangKey()]||n},this.handelChangeSearch=(e,t)=>{var a;let i=this.state.columnSearchValue;i[t]=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"";let o=this.dataGlobal.data.filter(e=>{let t=!0;for(const o in i){let s=l.g.getOOP(e,o);const n=this.cols_config[o];if("columnMask"===n.inputtype){var a;let e=n.config.mask;(e.includes("DD")&&e.includes("MM")&&e.includes("YY")||!0===(null===(a=n.config)||void 0===a?void 0:a.isDate))&&(s=me.d(s,e))}if("ColumnCdlist"===n.inputtype){let{cdgrp:e,cdname:t}=n.config;s=this.getCaptionLang(s,e,t)}!1===String(s).toLowerCase().includes(i[o].toLowerCase())&&(t=!1)}return t}),s=o.slice(0,this.state.config_table.paging_record),n=o.length,r=this.buildPaging(n,this.state.config_table);this.setState({data:s,dataFilter:o,paging:r,page_index:1,total_record:n,columnSearchValue:i})},this.abs_autoCallBackData=()=>{let e=this.state.paging_record;e[this.state.selectedRecordIndex]+=5,this.setState({paging_record:e},()=>{this.recordChangeHandler(0)})},this.handleClickTableRow=e=>{};let t=[5,10,15,20,50];if(void 0!==this.props.config.paging_record){let e=this.props.config.paging_record.split(",");e.length>1&&(t=e)}let a={paging_record:t[0],query_data:this.props.config.query_data};this.dataGlobal=l.g.getDataLimited(a.query_data,0,999999999)||{};let i={data:[],total:0};"false"!==this.props.config.isLoadDataStart&&(i={data:this.dataGlobal.data.slice(0,a.paging_record)||[],total:this.dataGlobal.total}),void 0===i&&(i={});let o=0;void 0!==i.total&&(o=i.total);let n=this.buildPaging(o,a),r=[];void 0!==i.data&&(r=i.data);let c=[],d=e.default.code.trim();if(void 0!==e.btn_of_grid&&""!==d)for(let s=0;s<e.btn_of_grid.length;s++){d===e.btn_of_grid[s].config.onTable.trim()&&(c[c.length]=e.btn_of_grid[s])}let h=this.props.lang;void 0===h&&(h={}),this.state={dataFilter:this.dataGlobal.data,data:r,lang:h,lang_select:l.g.getLangKey(),paging:n,total_record:o,paging_record:t,selectedRecordIndex:0,page_index:1,STT:!1,hasCheck:!1,columns:void 0===this.props.config.columns?[]:JSON.parse(this.props.config.columns),action:c,config_table:a,CMD:ge.getValueCmd(this.props),columnSearchValue:{}},this.cols_config={};for(const s of this.state.columns)this.cols_config[s.code]=s}buildPaging(e,t){let a=[],i=1;if(e>0)for(let o=0;o<e;o+=parseInt(t.paging_record))a[a.length]=i,i++;else a[a.length]=1;return a}pageIndexChange(e){this.setState({page_index:e.target.value}),this.abs_getDataLimited((parseInt(e.target.value)-1)*this.state.config_table.paging_record,this.state.config_table.paging_record)}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({columns:JSON.parse(this.props.config.columns)}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}readData(e,t){if(e.includes(".")){let a=e.split(".");void 0===t||"true"===t?l.g.putData(a[0],a[1],this.state.value,this.props.infoA):"false"===t?l.g.putDataGB(a[0],a[1],this.state.value):l.g.putDataGB(a[0],a[1],"")}}checkAll(e){if(this.state.hasCheck){let t=this.state.data;for(let a=0;a<t.length;a++)t[a].hasCheck__=e.target.checked;this.setState({checkAll:e.target.checked,data:t})}}render(){var e,t,a;let i=this.state.action.length>0,o=this.getHeaderConfig(i);const n=Object(v.b)("uTable"),r=Object(v.b)("uTableBodyRow");return"false"===String(this.state.CMD.visible)?null:s.a.createElement(n,{dataFull:{abs_autoCallBackData:this.abs_autoCallBackData,abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:o,config:{mode:{hasSearch:!0}}},dataEmpty:{isShow:!(null===(e=this.state)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length),title:l.g.getLang("header_searchNoResult")},config:{search:{placeholder:l.g.getLang("Search")},mode:{modeTitle:"center",isFrozenHeader:!1}},uPagination:{config:{show:l.g.getLang("cTable_Paging_show"),in:l.g.getLang("cTable_Paging_in"),jump_to_page:l.g.getLang("cTable_Paging_jump_to_page"),results:l.g.getLang("cTable_Paging_results")},mode:{paging_min:"MIN"===(null===(a=this.props.config)||void 0===a?void 0:a.paging_mode)},result_total:this.state.total_record,abs_PagingActive:this.abs_PagingActive,abs_setRecordActive:this.recordChangeHandler,paging_index:this.state.page_index,paging_record:this.state.paging_record.map((e,t)=>({number:e,selected:t===this.state.selectedRecordIndex}))}}},this.state.data.map((e,t)=>s.a.createElement(r,{abs_Click:this.handleClickTableRow,key:t},!0===i&&s.a.createElement(se.a,{tableContext:this,key:t,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,data:this.state.action,value:e,title:"Action"}),this.state.columns.map((t,a)=>{var i,o;let n=oe.a[t.inputtype];return void 0===n&&(n=oe.a.ColumnDefault),s.a.createElement(n,{tableContext:this,title_parent:t.title,rowData:e,key:a,title:(null===(i=this.state.lang)||void 0===i||null===(o=i[this.state.lang_select])||void 0===o?void 0:o[t.title])||t.title,config:t.config,data:l.g.getOOP(e,t.code),value:e})}))))}}var fe=pe;const ve={structable:"table.col",structable_read:"table.col",data_default:"",format:"#,###.00",decimal_length:2},be=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(i.a)({},ve);for(let a in t)void 0!==e[a]&&(""!==t[a]&&""===e[a]||(t[a]=e[a]));return t||{}},ye={request:!1,min:0,max:void 0,max_length:void 0};class De extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){return be(e)}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"prtm-full-block inner-acccordians"},s.a.createElement("div",{className:"panel panel-inverse mrgn-b-none"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-7 col-sm-7 col-md-8 col-lg-8"},s.a.createElement("h4",{className:"text-capitalize mrgn-all-none"},"\u0110\u1ecbnh d\u1ea1ng ki\u1ec3u hi\u1ec3n th\u1ecb")," "),s.a.createElement("div",{className:"col-xs-5 col-sm-5 col-md-4 col-lg-4"},s.a.createElement("div",{className:"tab-icon pull-right"},s.a.createElement("div",{"data-toggle":"collapse","data-target":"#type_currency","aria-expanded":"true",style:{cursor:"pointer"}}," ",s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"})," "))))),s.a.createElement("div",{id:"type_currency",className:"collapse","aria-expanded":"true"},s.a.createElement("div",{className:"pad-all-md"},s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"\u0110\u1ecbnh d\u1ea1ng d\u1ea5u",value:this.state.data.format,data:[{title:"#_______________1235",code:"#"},{title:"#.00____________1234.56",code:"#.00"},{title:"#,###.00________1,234.56",code:"#,###.00"},{title:"#.###,00________1.234,56",code:"#.###,00"},{title:"#,###___________1,234",code:"#,###"},{title:"#.###___________1.234",code:"#.###"}],onChange:e=>this.onChange_Value("format",e)}),!1===["#","#.###","#,###"].includes(this.state.data.format)&&s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ch\u1eef s\u1ed1 th\u1eadp ph\xe2n",value:this.state.data.decimal_length,onChange:e=>this.onChange_Value("decimal_length",e)})))))))}}var Ce=De;class Ae extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(i.a)({},ye);for(let a in t)e[a]&&(""!==t[a]&&""===e[a]||(t[a]=e[a]));return t||{}}(e)}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"T\xean x\xe1c nh\u1eadn"),s.a.createElement("th",null,"D\u1eef li\u1ec7u"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"B\u1eaft bu\u1ed9c nh\u1eadp"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Kh\xf4ng nh\u1ecf h\u01a1n"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.min=parseFloat(e.target.value):void 0!==t.min&&delete t.min,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Kh\xf4ng v\u01b0\u1ee3t qu\xe1"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max=parseFloat(e.target.value):void 0!==t.max&&delete t.max,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"\u0110\u1ed9 d\xe0i t\u1ed1i \u0111a"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.max_length?this.state.data.max_length:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max_length=parseFloat(e.target.value):void 0!==t.max_length&&delete t.max_length,this.setState({data:t})}}))))))))}}var ke=Ae;class Me extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var xe=Me;class Ne extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var we=Ne,Se=a(10);class Te extends o.Component{constructor(e){super(e),this.getFormConfig=e=>s.a.createElement(Ce,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(we,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(ke,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(xe,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponent:this.props.default}}return""},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.setAdvanced=(e,t)=>{this.setValue(t)},this.set=(e,t)=>{let a=l.g.getNodeJson(t,this.props.config.structable_read);this.setValue(a,!0)},this.getAdvanced=(e,t)=>this.getValue(),this.get=(e,t)=>{var a=this.props.config.structable.split("|");let i=this.getValue();for(const s of a){var o=s.split(".");switch(e.inform){case"false":l.g.putDataGB(o[0],o[1],i);break;default:l.g.putData(o[0],o[1],i,this.props.infoA)}}},this.checkValidate=()=>{let e=!1,t=this.getValue();const{request:a,max:i,min:o,max_length:s}=this.props_smooth.validate;if(void 0!==t&&""!==t||"true"!==a.toString()){if(void 0!==t){let a=this.state.value.replace(/\D/g,"");a.length>Number(s)&&Number(s)>0&&encodeURI(a).split(/%..|./).length-1>Number(s)?(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"jCurrency_maxLength"})):t>Number(i)&&null!==i&&void 0!==i&&""!==i?(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"validateNumMax"})):t<Number(o)&&null!==o&&void 0!==o&&""!==o&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"validateNumMin"}))}}else e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"validateRequest"});if(e){var n=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==n&&n.setFormValidateFromComponent(!0,this.props.default)}else this.setState({help_css:"",help_icon:"",help_mess:""});return e},this.reload=(e,t)=>{this.setValue(this.props_smooth.config.data_default)},this.setCMD=(e,t)=>{const{CMD:a}=this.state;let i=Object.assign(l.g.cloneJson(a),t);for(let o in i){let e=i[o];"false"===e&&(i[o]=!1),"true"===e&&(i[o]=!0)}this.setState({CMD:i})},this.onBlur=async()=>{void 0!==this.state.value&&!this.state.value.includes("-.")&&0!==Number(this.state.value)||""===this.state.value||await this.setValue(0),!1===this.checkValidate()&&!0===this.state.isChange&&(this.setState({isChange:!1}),this.onRunRule("enter_tab")),this.onFocus=!1},this.onChange=e=>{let t=e.target;const{selectionStart:a,value:i}=t,{decimal_char:o,int_char:s,decimal_length:l}=this,n=this.state.value;let r=i;if(r.includes("-")&&!1===this.isNegative)return void this.setState({value:n},()=>{t.setSelectionRange(0,0)});if(n.includes(o)&&!i.includes(o)&&o){let e=n.lastIndexOf(o);r=i.substring(0,e)+o+i.substring(e,i.length),r===o&&(r="")}let c=n,d=i.lastIndexOf(o);i.indexOf(o)!==i.lastIndexOf(o)&&o?d=c.length-l:(c=Object(Se.a)(r,l,s,o)||"",d=a-(i.length-c.length),1===a?d=1:a>i.lastIndexOf(o)&&(d+=1));let h=c.replace(/\D/g,"");const _=this.props_smooth.validate.max_length;h.length>Number(_)&&Number(_)>0&&(c=n),this.setState({value:c,isChange:!0},()=>{t.setSelectionRange(d,d)})},this.renderMess=e=>{switch(e){case"validateNumMin":return l.g.getLang(e).replace("{count}",this.props_smooth.validate.min);case"validateNumMax":return l.g.getLang(e).replace("{count}",this.props_smooth.validate.max);case"validateRequest":return l.g.getLang(e);case"jCurrency_maxLength":return l.g.getLang(e).replace("@{max_length}",this.props_smooth.validate.max_length);default:return l.g.getLang(e)}},this.props_smooth=this.getConfigSmooth(this.props),this.int_char="",this.decimal_char="",this.decimal_length=0,this.decimal_char="",this.decimal_length=0,this.isNegative=!1,(void 0===Object(Se.b)(this.props_smooth.validate.min)||Object(Se.b)(this.props_smooth.validate.min)<0)&&(this.isNegative=!0),this.state={help_css:"",help_icon:"",help_mess:"",value:"",CMD:{},isChange:!1},this.onFocus=!1,this.data_debug={}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent()),this.setValue(this.props_smooth.config.data_default)}onRunRule(e){var t=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}getConfigSmooth(e){let t=l.g.cloneJson(e);return t.config=be(t.config),t.validate.max_length||(t.validate.max_length=16),t}getValue(){return Object(Se.b)(this.state.value,this.int_char,this.decimal_char)}setValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props_smooth.config.data_default,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.isNegative;e+="";const{decimal_char:a,int_char:i,decimal_length:o}=this;let s=Object(Se.a)(e,o,i,a);(void 0===s||s.includes("-")&&!1===t)&&(s=""),0===Number(s)&&""!==s&&(s=Object(Se.a)(0,o,i,a)),this.setState({value:s,help_css:"",help_icon:"",help_mess:""},()=>{this.onRunRule("on_change")})}renderDebug(){if(l.g.isDebug()){void 0===this.data_debug&&(this.data_debug={});let e=(this.props.config.structable||"").split(".")[1],t=this.data_debug.data_cpn;return null===t&&(t="NULL"),void 0===this.props.config.cdlist&&(this.props.config.cdlist={}),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{color:"#f17316"}},`DATA-> |${e}|:|${t}|`))}}render(){if(!1===this.state.CMD.visible)return null;const e=Object(v.b)("uInput");return s.a.createElement(e,{dataFull:Object(i.a)(Object(i.a)({},this.getConfigTemplate()),{},{abs_Change:this.onChange,abs_Blur:this.onBlur})})}getConfigTemplate(){return{config:{default:{title:this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:this.props_smooth.validate.request},cmd:{disable:this.state.CMD.disabled+""==="true",visible:!0,error:{message:this.renderMess(this.state.help_mess),type:""}},mode:{textAlign:"right"}},mode:{readOnly:"true"===String(this.props.config.readOnly)},value:this.state.value}}}var Ee=Te;class Oe extends o.Component{constructor(e){super(e),this.onChange=e=>{this.setState({[e.target.name]:e.target.value},()=>{const e=this.state.cdgrp;this.data_cdname[e].length>=1&&""===this.state.cdname&&this.setState({cdname:this.data_cdname[this.state.cdgrp][0]})})},this.get=()=>{let e=`select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='${this.state.cdgrp}'`;return""!==this.state.cdname&&(e+=`&&wf.c_cdlist.cdname==='${this.state.cdname}'`),e+=" orderby c_cdlist.cdidx",{query:e,cdgrp:this.state.cdgrp,cdname:this.state.cdname}},this.renderSelect=(e,t)=>{if(e&&t)return s.a.createElement("div",{className:"form-group col-sm-12 col-md-6"},s.a.createElement("label",null,e),s.a.createElement("select",{name:e,required:"",className:"form-control",value:this.state[e],style:{cursor:"pointer"},onChange:e=>this.onChange(e)},t.map((e,t)=>s.a.createElement("option",{value:e,key:t},e))))};let t=this.props.cdlist||{};if(this.data_cdlist=l.g.getData("c_cdlist"),this.data_cdname={},this.data_cdgrp=[],this.data_cdlist)for(let a=0;a<this.data_cdlist.length;a++){const e=this.data_cdlist[a].c_cdlist;void 0===this.data_cdname[e.cdgrp]&&(this.data_cdname[e.cdgrp]=[],this.data_cdgrp.push(e.cdgrp)),!1===this.data_cdname[e.cdgrp].includes(e.cdname)&&this.data_cdname[e.cdgrp].push(e.cdname)}this.data_cdgrp.sort();for(let a in this.data_cdname)this.data_cdname[a].sort();this.state={cdgrp:t.cdgrp||this.data_cdgrp[0]||"",cdname:t.cdname||this.data_cdgrp[0]||""}}render(){return s.a.createElement("div",{hidden:void 0!==this.props.hidden&&!this.props.hidden,className:"form-group "+this.props.class},s.a.createElement("div",{className:"row"},this.renderSelect("cdgrp",this.data_cdgrp),this.renderSelect("cdname",this.data_cdname[this.state.cdgrp])))}}var Ie=Oe;const Fe={structable:"",structable_read:"",cdlist:{},data_default:"",data_mode:"query",query_data:"",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',col_format:"@c_cdlist.caption",json_data:'[\n        {\n            "c_cdlist": {\n                "cdid": null,\n                "caption": "val_1"\n            }\n        },\n        {\n            "c_cdlist": {\n                "cdid": "id_2",\n                "caption": "val_2"\n            }\n        }\n        ,\n        {\n            "c_cdlist": {\n                "cdid": "id_3",\n                "caption": "val_3"\n            }\n        }\n    ]',key_selected:"c_cdlist.cdid",useAction:"false",isAutoDefault:"true",isLabel:"false",isHasDataNull:"false"},Le=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(i.a)({},Fe);for(let a in t)e[a]&&(""!==t[a]&&""===e[a]||(t[a]=e[a]));return t||{}},je={ui:{},data:{}};class Re extends o.Component{constructor(e){super(e),this.onChange_Value=(e,t)=>{var a=this.state.data;a[e]=t.target.value,this.setState({data:a})},this.getValue=()=>{let e=this.state.data;return"cdlist"===this.state.data.data_mode&&(e.cdlist=this.refs.ref_designCdlist.get(),e.query_data=e.cdlist.query),e},this.renderHeader=e=>s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-7 col-sm-7 col-md-8 col-lg-8"},s.a.createElement("h4",{className:"text-capitalize mrgn-all-none"},e)," "),s.a.createElement("div",{className:"col-xs-5 col-sm-5 col-md-4 col-lg-4"},s.a.createElement("div",{className:"tab-icon pull-right"},s.a.createElement("div",{"data-toggle":"collapse","data-target":"#"+e+this.state.ID,"aria-expanded":"true",style:{cursor:"pointer"}}," ",s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"})," "))))),this.renderDefault=()=>s.a.createElement(s.a.Fragment,null,s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp data (get)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c \u0111\u1ecdc data (set)",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)})),this.renderDatabase=()=>s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"prtm-full-block inner-acccordians"},s.a.createElement("div",{className:"panel panel-inverse mrgn-b-none"},this.renderHeader("Kho d\u1eef li\u1ec7u"),s.a.createElement("div",{id:"Kho d\u1eef li\u1ec7u"+this.state.ID,className:"collapse","aria-expanded":"true"},s.a.createElement("div",{className:"pad-all-md"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Lo\u1ea1i d\u1eef li\u1ec7u",value:this.state.data.data_mode,data:[{title:"Query",code:"query"},{title:"CDLIST",code:"cdlist"}],onChange:e=>this.onChange_Value("data_mode",e)}),"cdlist"===this.state.data.data_mode&&s.a.createElement(Ie,{cdlist:this.state.data.cdlist,class:"col-sm-12 col-md-12",name:"CDList",ref:"ref_designCdlist"}),"query"===this.state.data.data_mode&&s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Query l\u1ea5y d\u1eef li\u1ec7u",value:this.state.data.query_data,onChange:e=>this.onChange_Value("query_data",e)}),s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12 form-group",style:{marginBottom:"2rem"}},s.a.createElement("label",null,"D\u1eef li\u1ec7u json",s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true",style:{cursor:"pointer",marginLeft:"10px"},onClick:()=>{let e=this.state.data;e.json_data="[]",this.setState({data:e})}}))),s.a.createElement("textarea",{className:"form-control",rows:"10",value:this.state.data.json_data,onChange:e=>{this.onChange("json_data",e)},onBlur:e=>{this.onBlur("json_data",e)},placeholder:"[]"}))))))),this.renderUIFormat=()=>s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"prtm-full-block inner-acccordians"},s.a.createElement("div",{className:"panel panel-inverse mrgn-b-none"},this.renderHeader("Giao di\u1ec7n"),s.a.createElement("div",{id:"Giao di\u1ec7n"+this.state.ID,className:"collapse","aria-expanded":"true"},s.a.createElement("div",{className:"pad-all-md"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"\u0110\u1ecbnh d\u1ea1ng b\u1ea3ng",value:this.state.data.is_multi_col,data:[{title:"\u0110a c\u1ed9t",code:"true"},{title:"M\u1ed9t c\u1ed9t",code:"false"}],onChange:e=>this.onChange_Value("is_multi_col",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"H\xecnh th\u1ee9c ch\u1ecdn",value:this.state.data.is_multi_select,data:[{title:"Ch\u1ecdn nhi\u1ec1u",code:"true"},{title:"Ch\u1ecdn m\u1ed9t",code:"false"}],onChange:e=>this.onChange_Value("is_multi_select",e)}),"false"===this.state.data.is_multi_col?s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"C\u1ea5u h\xecnh m\u1ed9t c\u1ed9t",value:this.state.data.col_format,onChange:e=>this.onChange_Value("col_format",e)}):s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},"C\u1ea5u h\xecnh \u0111a c\u1ed9t",s.a.createElement("textarea",{className:"form-control",rows:"10",value:this.state.data.table_format,onChange:e=>{this.onChange("table_format",e)},onBlur:e=>{this.onBlur("table_format",e)},placeholder:"table_format"})),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"C\xe1ch d\u1eef hi\u1ec3n th\u1ecb d\u1eef li\u1ec7u \u0111\xe3 ch\u1ecdn",value:this.state.data.selected_view_format,onChange:e=>this.onChange_Value("selected_view_format",e)})))))),this.renderAction=()=>s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"panel panel-inverse"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-8 col-sm-8 col-md-8"},s.a.createElement("h3",{className:"panel-title text-capitalize"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse"},"H\xe0nh \u0111\u1ed9ng"))),s.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse"},s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"}))))),s.a.createElement("div",{id:this.state.private_key_config+"_function",className:"collapse"},s.a.createElement("div",{className:"panel-body"},s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"H\xe0nh \u0111\u1ed9ng click",value:this.state.data.useAction,data:[{title:"G\u1ecdi tx fo",code:"false"},{title:"G\xf5 nhanh",code:"true"}],onChange:e=>this.onChange_Value("useAction",e)}),s.a.createElement(d.a,{ref:"txFo",hidden:"false"===this.state.data.useAction,data:this.state.data.txFo}),s.a.createElement(c.a,{hidden:"true"===this.state.data.useAction,ref:"txFoAction",data:this.state.data.txFoActions}))))),this.state={data:Le(this.props.data),ID:l.g.autoID()}}onChange(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a,errorJson:!1})}onBlur(e,t){var a=this.state.data,i=!1;try{var o=JSON.parse(t.target.value);a[e]=JSON.stringify(o,null,4)}catch(s){i=!0,alert(s)}this.setState({data:a,errorJson:i})}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},this.renderDefault(),s.a.createElement(n.a,{class:"col-sm-12 col-md-8",name:"C\u1ea5u h\xecnh l\u1ea5y d\u1eef li\u1ec7u (*)",value:this.state.data.get_data_format,onChange:e=>this.onChange_Value("get_data_format",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Kh\xf3a t\xecm ki\u1ebfm d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c ch\u1ecdn \u1edf jSelect (*)",value:this.state.data.key_selected,onChange:e=>this.onChange_Value("key_selected",e)}),this.renderDatabase(),this.renderUIFormat(),s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"Auto default",value:this.state.data.isAutoDefault,data:[{title:"D\xf9ng",code:"true"},{title:"Kh\xf4ng d\xf9ng",code:"false"}],onChange:e=>this.onChange_Value("isAutoDefault",e)}))}}var ze=Re;class Pe extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"T\xean x\xe1c nh\u1eadn"),s.a.createElement("th",null,"D\u1eef li\u1ec7u"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"B\u1eaft bu\u1ed9c nh\u1eadp"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))))))))}}var Ue=Pe;class Ve extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.renderDicionaryTable=(e,t)=>s.a.createElement("div",{className:"tab-pane fade active in"},s.a.createElement("div",{className:"inner-acccordians"},s.a.createElement("div",{className:"collapse in"},s.a.createElement("div",null,void 0!==e&&e.length>0&&e.map((e,a)=>s.a.createElement("div",{className:"panel panel-default",key:a},s.a.createElement("div",{className:"panel-heading pos-relative pad-all-md",id:"heading-3"},s.a.createElement("h4",{className:"panel-title"},s.a.createElement("a",{className:"accordion-toggle collapsed show","data-toggle":"collapse","data-parent":"#accordion",href:"#collapseNine"+a+t},s.a.createElement("span",null,e)))),s.a.createElement("div",{id:"collapseNine"+a+t,className:"panel-collapse collapse",role:"tabpanel","aria-labelledby":"heading-3"},s.a.createElement("div",{className:"panel-body"},this.state.lang_system.map((a,i)=>s.a.createElement("div",{key:i},s.a.createElement(n.a,{key:i,class:"col-sm-12 col-md-12",name:a.view,value:void 0!==this.state.data[t][a.key]?this.state.data[t][a.key][e]:a.key,onChange:i=>{var o=this.state.data;o[t][a.key][e]=i.target.value,this.setState({data:o})}})))))))))));var t=[];if(void 0!==this.props.config&&void 0!==this.props.default.name){let e=this.props.default.name;""!==e&&t.push(e)}this.state={lang_system:l.g.getConfigUserDefault("list_lang_config"),data:{ui:this.joinTableColumnAndLang(l.g.getConfigUserDefault("list_lang_config"),t,"ui")},title:t}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}joinTableColumnAndLang(e,t,a){var i=t;void 0===i&&(i=[]);var o=this.props.data;void 0===o&&(o={});var s={};for(let n=0;n<i.length;n++){let t=i[n];if(void 0!==t)for(let i=0;i<e.length;i++){let n=e[i].key;void 0===s[n]&&(s[n]={}),void 0===o[a]&&(o[a]={}),void 0===o[a][n]&&(o[a][n]={});var l=t.trim();void 0===o[a][n][l]?s[n][l]=l:s[n][l]=o[a][n][l]}}return s}render(){return s.a.createElement("div",{className:"line-slide-tab"},s.a.createElement("ul",{className:"nav nav-tabs"},s.a.createElement("li",null,s.a.createElement("a",{"data-toggle":"tab",href:"#tab1","aria-expanded":"true"},"UI")),s.a.createElement("li",null,s.a.createElement("a",{"data-toggle":"tab",href:"#tab3","aria-expanded":"true"},"table"))),s.a.createElement("div",{className:"tab-content pad-all-lg"},s.a.createElement("div",{id:"tab1",className:"tab-pane fade in active"},this.renderDicionaryTable(this.state.title,"ui"))))}}var Be=Ve;class He extends o.Component{constructor(e){super(e),this.onChange=(e,t)=>{let a=this.state.value;if(!1===e)a[t.target.name]=t.target.value;else{for(var i=t.target.options,o=[],s=0;s<i.length;s++)i[s].selected&&o.push(i[s].value);a[t.target.name]=o}this.setState({value:a})},this.get=()=>{let e=this.state.value;for(let t in e)e[t]=e[t].toString();return e},this.convertValueArray=e=>{for(let t in e){let a=e[t];"false"!==a&&"true"!==a&&(a=a.split(","),e[t]=a)}return e},this.isMutiSelect=e=>{let t=e.value;return 2!==t.length||!t.includes("true")||!t.includes("false")};let t=[];for(let a in this.props.cmd){let e=this.props.cmd[a];t.push({title:a,value:e})}this.state={cmd:t||[],value:this.convertValueArray(this.props.value)||{}}}render(){return s.a.createElement("div",{className:"form-group "+this.props.class,onKeyDown:this.onKeyDown},this.state.cmd.map(e=>{let t=this.isMutiSelect(e);return s.a.createElement("div",{className:"col-sm-12 col-md-6",key:e.title},e.title,s.a.createElement("div",{className:"selectbox-wrap mrgn-b-lg"},s.a.createElement("div",{className:t?"":"selectbox"},s.a.createElement("select",{className:"form-control",name:e.title,multiple:t,onChange:e=>this.onChange(t,e),value:t?this.state.value[e.title]:this.state.value[e.title].toString()},e.value.map(e=>s.a.createElement("option",{key:e,value:e},e))))))}))}}var Ye=He;const Qe={structable:"",structable_read:"",cdlist:{},data_default:"",data_mode:"query",query_data:"",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n            {\n                "title": "Name",\n                "code": "col.col_name"\n            },\n            {\n                "title": "ID",\n                "code": "col.col_id"\n            }\n        ]',col_format:"@c_cdlist.caption",json_data:'[\n            {\n                "col": {\n                    "col_name": "val_1",\n                    "col_id": "val_2"\n                }\n            },\n            {\n                "col": {\n                    "col_name": "val_3",\n                    "col_id": "val_4"\n                }\n            }\n        ]',key_selected:"c_cdlist.cdid",useAction:"false",isAutoDefault:"true",isLabel:"false",isHasDataNull:"false"};var Ge=class{constructor(e,t,a){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=e=>{this.property.cmd.disabled=e},this.getCMD_enable=()=>this.property.cmd.disabled,this.getConfig=()=>{let e=this.property.config,t=Object(i.a)({},Qe);for(let a in t)e[a]&&(""!==e[a]&&""===e[a]||(t[a]=e[a]));return t||{}},this.getDefault=()=>this.property.default,this.property={inputType:e,config:a,default:t,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class Je extends o.Component{constructor(e){super(e),this.getValue=()=>this.refs.RefDesignRole.get(),this.cmd=Ge.getCmd(),this.state={cmd:this.cmd,data:this.readConfig(this.props.data)},this.keyComponent=l.g.autoID()}readConfig(e){var t={};void 0===e&&(e={});for(let a in this.cmd)t[a]=e[a]||"";return t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement(Ye,{key:this.keyComponent,class:"col-sm-12 col-md-12",cmd:this.state.cmd,value:this.state.data,ref:"RefDesignRole"})}}var We=Je;const qe={c_cdlist:{cdid:"select_null",caption:"All"}},Ke=e=>{for(let t=0;t<e.length;t++)e[t].key_jselect=t;return e},Ze=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;switch(a){case"ArrowDown":e<t&&(e+=1);break;case"ArrowUp":e>0&&(e-=1)}return e<0&&(e=0),e>=t&&(e=t-1),e},Xe=(e,t)=>(e.split(" ").forEach(a=>{if("@"===a[0]){let i=a.substring(1),o=l.g.getOOP(t,i);if("c_cdlist.caption"===i){let e=l.g.getOOP(t,"c_cdlist.mcaption");(null===e||void 0===e?void 0:e[l.g.getLangKey()])&&(o=null===e||void 0===e?void 0:e[l.g.getLangKey()])}e=e.replace(a,o)}}),e),$e=(e,t,a)=>{if(void 0===e||void 0===t||void 0===a)return[];if(null===t||null===a)return[];if(""===e||""===a)return[];let i=(e+"").split(";"),o=[];return t.forEach((e,t)=>{let s=l.g.getOOP(e,a)+"";null!==s&&void 0!==s&&i.includes(s+"")&&o.push(t)}),o},et=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a="";for(let i=0;i<t.length;i++){const o=t[i].code||"";a+=l.g.getOOP(e,o)}return a},tt=(e,t,a)=>{let i="";for(let o=0;o<e.length;o++){o>0&&(i+=";");const s=e[o];i=l.g.getOOP(t[s],a)}return i};class at extends o.Component{constructor(){super(...arguments),this.convertMaskToValue=(e,t)=>{let a=t.mask;return this.isDate=a.includes("DD")&&a.includes("MM")&&a.includes("YY")||!0===(null===t||void 0===t?void 0:t.isDate),String(a).startsWith("$")&&String(a).endsWith("$")&&(a=l.g.getParameterSystem(a.replace(/\$/g,""))),this.isDate?e?me.d(e,a):"":me.f(e,a)},this.getValue=(e,t)=>this.convertMaskToValue(e,t)||""}}var it=at;class ot extends o.Component{constructor(){super(...arguments),this.getValue=e=>e}}var st={columnDefault:ot,columnMask:it};class lt extends o.Component{constructor(e){var t;super(e),t=this,this.convertStringWithContext=e=>{let t=l.g.getlistCodeContext(e);for(let a=0;a<t.length;a++){const i=t[a];let o=l.g.context_get(i.code);void 0!==o&&(e=e.replace(i.key,o))}return e},this.getConfigSmooth=e=>{let t=l.g.cloneJson(e);return t.config=Le(t.config),t.config.data_default=this.convertStringWithContext(t.config.data_default),t.config.json_data=this.convertStringWithContext(t.config.json_data),t},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(ze,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(We,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(Ue,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(Be,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.isRunRule=(e,t)=>{if(!e)return!1;return e.split(";").includes(t)},this.setCMD=(e,t)=>{const{CMD:a}=this.state;let i=Object.assign(l.g.cloneJson(a),t);a.disabled===i.disabled&&a.visible===i.visible&&a.block===i.block||this.setState({CMD:i})},this.toolAutoValue=()=>{const{datas:e}=this.state;let t=e.length>1?[1]:[0];"false"!==String(this.state.CMD.disabled)&&"false"!==String(this.state.CMD.visible)||this.setSelected(t)},this.set=async(e,t)=>{this.data_debug.data_form=t;const{structable_read:a,key_selected:i}=this.config,{datas:o}=this.state;let s="",l=[];if(t&&a){let e=a.split(".");if(2===e.length){if(!t[e[0]]||void 0===t[e[0]][e[1]])return void this.setSelectedDefault();if(s=t[e[0]][e[1]],this.data_debug.data_cpn=s,this.last_selected_data=s,l=$e(s,o,i),0!==l.length){let{compare_info:a}=this.state;return t[e[0]][e[1]]!==a.cache_value?a.cache_value=this.getSelectedView(l):a.is_change_value=!1,await this.setSelected(l),this.setState({val_select_tmp:s,compare_info:a}),void this.onRunRule("update")}}}void 0===this.data_debug.data_cpn&&(this.data_debug.data_cpn="undefined"),this.setState({list_selected:[],val_select_tmp:s,selected_view:"",help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"jSelect_NotFindValue"})},this.setAdvanced=async(e,t)=>{let a=e.component_action||"";const{code:i}=this.props.default;let o=a.split(";").includes(i);if(void 0!==t&&""!==t){var s,l;const{key_selected:e}=this.config,{datas:a}=this.state;let i=[];i=$e(t,a,e);const n=(null===(s=i)||void 0===s?void 0:s.toString())!==(null===(l=this.state.list_selected)||void 0===l?void 0:l.toString());if(0!==i.length)await this.setSelected(i),n&&!o&&this.onRunRule("enter_tab");else{let e=[0];0!==e.length&&(await this.setSelected(e),n&&!o&&this.onRunRule("enter_tab"))}}else{let e=[0];0!==e.length&&(await this.setSelected(e),o||this.onRunRule("enter_tab"))}},this.getAdvanced=e=>{const{list_component:t}=e,{code:a}=this.props_smooth.default;if(this.isRunRule(t,a)){const{list_selected:e,datas:t,get_data_format:a,structable:i}=this.state;let o=tt(e,t,a);if(2===i.split(".").length)return o}},this.getInfoErrror=()=>{if(""!==this.state.help_mess&&!0===this.checkValidate()&&"jSelect_NotFindValue"!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.renderMess(this.state.help_mess),key:e,infoComponent:this.props.default}}return""},this.setDataGB=async(e,t)=>{const{datas:a,key_selected:i,list_selected:o,selected_view:s}=this.state,{json_data:n}=this.props_smooth.config;t=l.g.parseJson(n).concat(t)||[],t=Ke(t);let r=l.g.getOOP(a[o[0]],i);this.setState({datas:t,datas_view:t,list_selected:o,selected_view:s},()=>{let e=this.state.val_select_tmp||r,t=$e(e,this.state.datas,i);e&&0!==t.length?(this.state.val_select_tmp="",this.setSelected(t)):this.setSelected([0])})},this.get=(e,t)=>{var a=this.props_smooth.config.structable;if(a.includes("|"))for(var i=a.split("|"),o=0;o<i.length;o++)this.readData(i[o],e.inform);else this.readData(a,e.inform)},this.getAdvanced=(e,t)=>{const{list_selected:a,datas:i,get_data_format:o}=this.state;return tt(a,i,o)},this.checkValidate=()=>{var e=!1,t=this.state.list_selected;if(void 0!==t&&void 0!==this.state.validate.request&&!e&&this.state.validate.request){const{list_selected:a,datas:i,get_data_format:o}=this.state;let s=tt(a,i,o);0!==t.length&&null!==s&&""!==s||(e=!0,this.state.help_mess="validateRequest",this.setState({help_css:" has-warning ",help_icon:"glyphicon-warning-sign",help_mess:"validateRequest"}))}if(e){var a=l.g.getFormAppAuto(this.props_smooth.infoA.key_form);void 0!==a&&a.setFormValidateFromComponent(!0,this.props.default)}else this.clearError();return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setSelectedDefault(),this.setState({search_input:"",datas_view:this.state.datas})},this.setDataDefault=()=>{this.setSelectedDefault()},this.onEvent=e=>{switch(e){case"closeTable":this.setState({isOpen:!1});break;case"openTable":!1===this.state.isOpen&&this.setState({isOpen:!0})}},this.onSelectedRow=async(e,t)=>{const{is_multi_select:a,list_selected:i}=this.state;let o=[t];if(a){o=i;let e=o.indexOf(t);e>-1?o.splice(e,1):o.push(t)}await this.setSelected(o,t,!0),await this.checkValidate(),await this.onRunRule("enter_tab")},this.onRunRule=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"on_change";var a=l.g.getFormAppAuto(t.props_smooth.infoA.key_form);void 0!==a&&a.runRuleFunction(t.props_smooth.default,{},t.props_smooth.infoA_parent,e)},this.setSelectedDefault=async()=>{const{datas:e,data_default:t}=this.state,{key_selected:a}=this.config;let i=$e(t,e,a);0===i.length&&e.length>0&&"false"!==this.props_smooth.config.isAutoDefault&&(i=[0],this.state.search_input=""),await this.setSelected(i),this.onRunRule("enter_tab")},this.setSelected=(e,t,a)=>{let i=this.getSelectedView(e),{compare_info:o}=this.state;o.cache_value!==i?(o.change_value=i,o.is_change_value=!0):o.is_change_value=!1;let s=this.state.val_select_tmp;a&&(s=""),this.setState({list_selected:e,selected_view:i,pos_row:t,isOpen:!1,val_select_tmp:s,compare_info:o},()=>{this.clearError(),this.onRunRule()})},this.getSelectedView=e=>{const{selected_view_format:t,datas:a}=this.state;let i="";for(let o=0;o<e.length;o++){o>0&&(i+=";");let s=a[e[o]],l=Xe(t,s);if(this.state.is_multi_col){let e=this.state.table_format[this.props.config.index_view_value||0],t=st[e.inputtype];void 0===t&&(t=st.columnDefault),i+=(new t).getValue(l,e.config)}else i+=l}return i},this.onChangeSearch=e=>{const{datas:t,table_format:a,is_multi_col:i,col_format:o,compare_info:s}=this.state;let n=e.target.value,r=t,c=l.g.getArrayWithRegex(o,"@([^\\s]*)");""!==n&&(r=t.filter(e=>{let t="";return t=et(e,!0===i?a:c),l.g.searchPerfect(n,t)})),this.setState({search_input:n,datas_view:r,pos_row:-1,compare_info:s})},this.onKeyBoard=e=>{const{pos_row:t,datas_view:a}=this.state;switch(e.key){case"ArrowDown":this.setState({pos_row:Ze(t,a.length,"ArrowDown")},()=>{this.refs.table_jselect&&this.refs.table_jselect.focus()});break;case"ArrowUp":this.setState({pos_row:Ze(t,a.length,"ArrowUp")},()=>{this.refs.table_jselect&&this.refs.table_jselect.focus()});break;case"Enter":a[t]&&this.onSelectedRow(a[t].key_jselect);break;case"Delete":this.setSelected([],-1);break;case"Backspace":break;default:this.refs.search_jselect&&this.refs.search_jselect.focus()}},this.getDataOOP=(e,t)=>0===this.state.list_selected.length?void 0:this.state.datas[this.state.list_selected[0]],this.onBlur=()=>{this.checkValidate()},this.getOptionConfig=e=>e.map((e,t)=>{if(this.state.is_multi_col){return{data:this.state.table_format.map(t=>{let a=st[t.inputtype];return void 0===a&&(a=st.columnDefault),(new a).getValue(l.g.getOOP(e,t.code),t.config)}),value:e.key_jselect,selected:this.state.list_selected.includes(e.key_jselect)}}return{title:Xe(this.props_smooth.config.col_format,e),value:e.key_jselect,selected:this.state.list_selected.includes(e.key_jselect)}}),this.abs_Change=async(e,t)=>{await this.onSelectedRow(e,e),this.checkValidate()},this.getInfoCompare=(e,t)=>{let{lang_compare:a,compare_info:i,isCompare:o}=this.state;if(o){let e=a[this.state.lang_select];if(i.is_change_value){let t=e.replace("{value_old}","");return t=t.replace("{value_new}",""),{is_change_value:i.is_change_value,compareInfo:{component_code:this.props_smooth.default.code,component_name:this.props_smooth.default.name,message:{title_before:i.cache_value,title_status:t,title_after:i.change_value}}}}}return{}},this.clearCacheCompare=()=>{let{compare_info:e}=this.state;e.cache_value=void 0,e.is_change_value=!1,this.setState({compare_info:e})},this.renderThisComponent=()=>{const e=Object(v.b)("uSelectItem");if("true"===String(this.props.config.isLabel)){const e=Object(v.b)("uLabel");return s.a.createElement(e,{dataFull:{config:{default:{title:this.getSelectedView(this.state.list_selected)||"",class:this.props_smooth.default.class},cmd:{visible:"true"===String(this.state.CMD.visible)}}}})}return s.a.createElement(e,{dataFull:Object(i.a)(Object(i.a)({},this.getConfigTemplate()),{},{abs_Change:this.abs_Change,abs_search:this.onChangeSearch})})},this.renderMess=e=>{switch(e){case"validateNumMin":return l.g.getLang(e).replace("{count}",this.state.validate.min);case"validateNumMax":return l.g.getLang(e).replace("{count}",this.state.validate.max);case"validateRequest":return l.g.getLang(e);case"jSelect_NotFindValue":return l.g.isDebug()?l.g.getLang(e):"";default:return l.g.getLang(e)}},this.propertyConstructor=new Ge(e.inputType,e.default,e.config),this.props_smooth=this.getConfigSmooth(this.props);const{config:a,lang:o}=this.props_smooth;this.config=Le(a),this.lang=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t in je)void 0===e[t]&&(e[t]={});return e}(o);const{table_format:n,is_multi_col:r,is_multi_select:c,selected_view_format:d,get_data_format:h,col_format:_,key_selected:u,structable:g,structable_read:m}=this.config;this.data_default="",void 0!==this.props_smooth.config.data_default&&(this.data_default=this.props_smooth.config.data_default);var p=this.props_smooth.validate;void 0===p&&(p={}),this.callform_detail="",this.callform="";let f="true"===String(this.props_smooth.validate.is_compare),b={},y={};void 0!==this.props_smooth.lang&&(b=void 0!==this.props_smooth.lang.title?this.props_smooth.lang.title:this.props_smooth.lang,void 0!==this.props_smooth.lang.lang_compare&&(y=this.props_smooth.lang.lang_compare));let D={mode:"",col_text:"",col_input:""};void 0!==e.infoA.mode_form&&(D=e.infoA.mode_form);let C=(e=>{if(!e)return[];if(void 0!==e.data_mode){let i=[];const{query_data:o,json_data:s}=e;if("cdlist"===e.data_mode){var t="",a="";void 0!==e.cdlist&&void 0!==e.cdlist.cdgrp&&void 0!==e.cdlist.cdname&&(t=e.cdlist.cdgrp,a=e.cdlist.cdname),i=l.g.data_cdList(t,a)||[]}else i=l.g.getDataLimited(o,0,99999)||[],i=i.data||[];let n=l.g.parseJson(s).concat(i)||[];return"true"===e.isHasDataNull&&n.unshift(qe),n=Ke(n),n||[]}return[]})(this.config);this.state={isCompare:f,structable:g,structable_read:m,data_default:this.data_default,value:this.data_default,compare_info:{cache_value:void 0,is_change_value:!1},val_select_tmp:"",lang_compare:y,lang:b,lang_select:l.g.getLangKey(),validate:p,infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",datas:C,datas_view:C,is_multi_col:"false"!==r,table_format:("false"===r?n:l.g.parseJson(n))||[],col_format:_,get_data_format:h,key_selected:u,selected_view:"",selected_view_format:d,list_selected:[],pos_row:-1,search_input:"",isOpen:!1,is_multi_select:"false"!==c,CMD:this.propertyConstructor.getCMD(),config_mode:D,class_config:{parent:"",child:""},css_default:{class:""},max_item_length:50},this.data_debug={}}UNSAFE_componentWillMount(){this.data_view_template=this.getOptionConfig(this.state.datas_view)}componentDidMount(){this.setSelectedDefault(),setTimeout(()=>{l.g.FromAddComponent(this.props_smooth.infoA.key_form,this)},l.g.getTimeAddComponent())}UNSAFE_componentWillUpdate(e,t){this.state.datas_view===t.datas_view&&this.state.lang_select===t.lang_select||(this.data_view_template=this.getOptionConfig(t.datas_view))}componentDidUpdate(e){}readData(e,t){const{list_selected:a,datas:i,get_data_format:o}=this.state;let s=tt(a,i,o);""!==this.state.help_mess&&(s=null);let n=e.split(".");2===n.length&&(void 0===t||"true"===t?l.g.putData(n[0],n[1],s,this.props_smooth.infoA):"false"===t?l.g.putDataGB(n[0],n[1],s):l.g.putDataGB(n[0],n[1],""))}getConfigTemplate(){var e,t,a,i;let o=this.props_smooth.default.name;return{config:{default:{search:{placeholder:l.g.getLang("jselect_search")},placeholder:l.g.getLang("jselect_placeholder"),data_status:l.g.getLang("jselect_no_result"),title:(null===(e=this.props_smooth.lang)||void 0===e||null===(t=e.ui)||void 0===t||null===(a=t[l.g.getLangKey()])||void 0===a?void 0:a[o])||o,type:"",class:this.props_smooth.default.class,required:this.props_smooth.validate.request},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:!0,error:{message:"jSelect_NotFindValue"===this.state.help_mess?"":this.renderMess(this.state.help_mess),type:""}},mode:{moreColumn:this.state.is_multi_col},column:this.state.table_format},data:null===(i=this.data_view_template)||void 0===i?void 0:i.map(e=>(e.selected=e.value===this.state.list_selected[0],e)),input_value:this.getSelectedView(this.state.list_selected)||"",search_value:this.state.search_input||""}}render(){if("false"===String(this.state.CMD.visible))return null;const e=Object(v.b)("uOfGroup");return this.props.isOfgroupParent?s.a.createElement(e,{class:this.props.default.class_ofgroup},this.renderThisComponent(),this.props.ofGroupData.map(e=>s.a.createElement(N.a,Object.assign({},e,{isOfgroupParent:!1})))):this.renderThisComponent()}}var nt=lt;class rt extends o.Component{constructor(e){super(e);var t=Object(l.m)(),a=[];for(var i in t){var o={};o.code=i,o.title=t[i].info.title,a[a.length]=o}this.state={data:a,d_key:"code",d_name:"title"}}async _onChange(e){void 0!==this.props.onChange&&this.props.onChange(e)}renderOptions(){return this.state.data.map((e,t)=>s.a.createElement("option",{key:t,index:t,value:e[this.state.d_key]},e[this.state.d_name]))}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",{className:"form-group "+this.props.class},s.a.createElement("label",null,this.props.name),s.a.createElement("div",{className:"select-box"},s.a.createElement("div",{className:"selectbox"},s.a.createElement("select",{style:{height:"32px"},disabled:this.props.disabled,className:"form-control",value:this.props.value,onChange:e=>this._onChange(e)},!0===this.props.hasNew&&s.a.createElement("option",{value:""},"Kh\xf4ng d\xf9ng"),this.renderOptions()))))}}var ct=rt;class dt extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.renderConfig=e=>{switch(e){case"get_set":return s.a.createElement("div",null,s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}));case"database":return s.a.createElement("div",null,s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Lo\u1ea1i d\u1eef li\u1ec7u",value:this.state.data.mask_mode,data:[{title:"M\u1eb7c \u0111\u1ecbnh",code:"default"},{title:"Th\u1eddi gian",code:"date"}],onChange:e=>this.onChange_Value("mask_mode",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"\u0110\u1ecbnh d\u1ea1ng mask",value:this.state.data.data_type,data:[{title:"M\u1eb7c \u0111\u1ecbnh",code:"edit"},{title:"Textbox",code:"free"}],onChange:e=>this.onChange_Value("data_type",e)}),"edit"===this.state.data.data_type&&s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"\u0110\u1ecbnh d\u1ea1ng mask hi\u1ec3n th\u1ecb",value:this.state.data.mask_format,onChange:e=>this.onChange_Value("mask_format",e)}),"edit"===this.state.data.data_type&&s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"\u0110\u1ecbnh d\u1ea1nh mask t\u1eeb data",value:this.state.data.mask_data_format,onChange:e=>this.onChange_Value("mask_data_format",e)}));case"input":return s.a.createElement("div",null," ",s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Lo\u1ea1i d\u1eef li\u1ec7u",value:"date"===this.state.data.mask_mode?"number":this.state.data.value_type,data:[{title:"T\u1ea5t c\u1ea3",code:"all"},{title:"S\u1ed1",code:"number"},{title:"Ch\u1eef",code:"word"}],onChange:e=>this.onChange_Value("value_type",e),disabled:"date"===this.state.data.mask_mode}))}},this.renderUI=(e,t)=>s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"prtm-full-block inner-acccordians"},s.a.createElement("div",{className:"panel panel-inverse mrgn-b-none"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-7 col-sm-7 col-md-8 col-lg-8"},s.a.createElement("h4",{className:"text-capitalize mrgn-all-none"},t)," "),s.a.createElement("div",{className:"col-xs-5 col-sm-5 col-md-4 col-lg-4"},s.a.createElement("div",{className:"tab-icon pull-right"},s.a.createElement("div",{"data-toggle":"collapse","data-target":"#"+e,"aria-expanded":"true",style:{cursor:"pointer"}}," ",s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"})," "))))),s.a.createElement("div",{id:e,className:"collapse","aria-expanded":"true"},s.a.createElement("div",{className:"pad-all-md"},this.renderConfig(e)))))),this.state={data:this.readConfig(this.props.data)}}readConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},a={structable:"",structable_read:"",data_default:"",data_type:"edit",component_title:"",mask_format:"",mask_data_format:"",value_type:"all",auto_delete:"true",mask_mode:"default",content_style:"",format_value_type_string:""};for(let i in a)t[i]=e[i]||a[i];return void 0!==e.isLookup?t.isLookup=e.isLookup:t.isLookup="false",void 0!==e.callform?t.callform=e.callform:t.callform="",void 0!==e.callform_detail?t.callform_detail=e.callform_detail:t.callform_detail="",void 0!==e.callform_detail_mode?t.callform_detail_mode=e.callform_detail_mode:t.callform_detail_mode="modal",void 0!==e.data_view?t.data_view=e.data_view:t.data_view="",void 0!==e.data_value?t.data_value=e.data_value:t.data_value="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,"date"===a.mask_mode&&(a.value_type="number"),this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},this.renderUI("get_set","Get v\xe0 Set d\u1eef li\u1ec7u"),this.renderUI("database","Mask"),this.renderUI("input","Nh\u1eadp li\u1ec7u"),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"D\xf9ng lookup",value:this.state.data.isLookup,data:[{title:"Kh\xf4ng d\xf9ng",code:"false"},{title:"D\xf9ng lookup",code:"true"}],onChange:e=>this.onChange_Value("isLookup",e)}),"true"===this.state.data.isLookup&&s.a.createElement(ct,{class:"col-sm-12 col-md-6",name:"L\u1ea5y data t\u1eeb form",value:this.state.data.callform,onChange:e=>this.onChange_Value("callform",e)}),"true"===this.state.data.isLookup&&s.a.createElement(ct,{class:"col-sm-12 col-md-6",name:"Xem chi ti\u1ebft",value:this.state.data.callform_detail,onChange:e=>this.onChange_Value("callform_detail",e)}),"true"===this.state.data.isLookup&&s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Xem chi ti\u1ebft mode",value:this.state.data.callform_detail_mode,data:[{title:"Modal",code:"modal"},{title:"Main",code:"main"}],onChange:e=>this.onChange_Value("callform_detail_mode",e)}),"true"===this.state.data.isLookup&&s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"OOP hi\u1ec3n th\u1ecb",value:this.state.data.data_view,onChange:e=>this.onChange_Value("data_view",e)}),"true"===this.state.data.isLookup&&s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"OOP gi\xe1 tr\u1ecb",value:this.state.data.data_value,onChange:e=>this.onChange_Value("data_value",e)}))}}var ht=dt;class _t extends o.Component{constructor(e){super(e),this.getValue=()=>{let e=this.state.data;return e.condistion=e.condistion.filter(e=>""!==e.condistion&&""!==e.error),e},this.isValidate=()=>!0,this.renderTable=e=>e.map((e,t)=>s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:e.condistion,onChange:e=>{var a=this.state.data;a.condistion[t].condistion=e.target.value,this.setState({data:a})}})),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:e.error,onChange:e=>{var a=this.state.data;a.condistion[t].error=e.target.value,this.setState({data:a})}})))),this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min&&(t.min=e.min),null!=e.max&&(t.max=e.max),t.condistion=e.condistion||[],t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"checkbox"},s.a.createElement("label",null,s.a.createElement("input",{type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}),s.a.createElement("span",{className:"mrgn-l-xs display-ib"},"B\u1eaft bu\u1ed9c nh\u1eadp"))),s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"\u0110i\u1ec1u ki\u1ec7n"," ",s.a.createElement("i",{className:"fa fa-plus-square","aria-hidden":"true",onClick:()=>{let e=this.state.data;e.condistion.push({condistion:"",error:""}),this.setState(e)}})),s.a.createElement("th",null,"Th\xf4ng b\xe1o l\u1ed7i"))),s.a.createElement("tbody",null,this.renderTable(this.state.data.condistion))))))}}var ut=_t;class gt extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.renderDicionaryTable=(e,t)=>s.a.createElement("div",{className:"tab-pane fade active in"},s.a.createElement("div",{className:"inner-acccordians"},s.a.createElement("div",{className:"collapse in"},s.a.createElement("div",null,void 0!==e&&e.length>0&&e.map((e,a)=>s.a.createElement("div",{className:"panel panel-default",key:a},s.a.createElement("div",{className:"panel-heading pos-relative pad-all-md",id:"heading-3"},s.a.createElement("h4",{className:"panel-title"},s.a.createElement("a",{className:"accordion-toggle collapsed show","data-toggle":"collapse","data-parent":"#accordion",href:"#collapseNine"+a+t},s.a.createElement("span",null,e)))),s.a.createElement("div",{id:"collapseNine"+a+t,className:"panel-collapse collapse",role:"tabpanel","aria-labelledby":"heading-3"},s.a.createElement("div",{className:"panel-body"},this.state.lang_system.map((a,i)=>s.a.createElement("div",{key:i},s.a.createElement(n.a,{key:i,class:"col-sm-12 col-md-12",name:a.view,value:void 0!==this.state.data[t][a.key]?this.state.data[t][a.key][e]:a.key,onChange:i=>{var o=this.state.data;o[t][a.key][e]=i.target.value,this.setState({data:o})}})))))))))));var t=[];if(void 0!==this.props.config&&void 0!==this.props.default.name){let e=this.props.default.name;""!==e&&t.push(e)}var a=[];if(void 0!==this.props.config&&void 0!==this.props.config.mask_format){let e=this.props.config.mask_format.split("_");for(let t=0;t<e.length;t++){const i=e[t];""===i||a.includes(i)||a.push(i)}}var i=[];this.props.validate.condistion&&this.props.validate.condistion.forEach(e=>{""===e.error||a.includes(e.error)||i.push(e.error)}),this.state={lang_system:l.g.getConfigUserDefault("list_lang_config"),data:{ui:this.joinTableColumnAndLang(l.g.getConfigUserDefault("list_lang_config"),t,"ui"),mask_format:this.joinTableColumnAndLang(l.g.getConfigUserDefault("list_lang_config"),a,"mask_format"),validate:this.joinTableColumnAndLang(l.g.getConfigUserDefault("list_lang_config"),i,"validate")},title:t,mask_format:a,validate:i}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}joinTableColumnAndLang(e,t,a){var i=t;void 0===i&&(i=[]);var o=this.props.data;void 0===o&&(o={});var s={};for(let n=0;n<i.length;n++){let t=i[n];if(void 0!==t)for(let i=0;i<e.length;i++){let n=e[i].key;void 0===s[n]&&(s[n]={}),void 0===o[a]&&(o[a]={}),void 0===o[a][n]&&(o[a][n]={});var l=t.trim();void 0===o[a][n][l]?s[n][l]=l:s[n][l]=o[a][n][l]}}return s}render(){return s.a.createElement("div",{className:"line-slide-tab"},s.a.createElement("ul",{className:"nav nav-tabs"},s.a.createElement("li",null,s.a.createElement("a",{"data-toggle":"tab",href:"#tab1","aria-expanded":"true"},"UI")),s.a.createElement("li",null,s.a.createElement("a",{"data-toggle":"tab",href:"#tab2","aria-expanded":"true"},"Mask")),s.a.createElement("li",null,s.a.createElement("a",{"data-toggle":"tab",href:"#tab3","aria-expanded":"true"},"validate"))),s.a.createElement("div",{className:"tab-content pad-all-lg"},s.a.createElement("div",{id:"tab1",className:"tab-pane fade in active"},this.renderDicionaryTable(this.state.title,"ui")),s.a.createElement("div",{id:"tab2",className:"tab-pane fade"},this.renderDicionaryTable(this.state.mask_format,"mask_format")),s.a.createElement("div",{id:"tab3",className:"tab-pane fade"},this.renderDicionaryTable(this.state.validate,"validate"))))}}var mt=gt;const pt={structable:"",structable_read:"",data_default:"",data_type:"edit",component_title:"",mask_format:"",mask_data_format:"",value_type:"all",auto_delete:"true",mask_mode:"default",content_style:"",format_value_type_string:""};var ft=class{constructor(e,t,a){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=e=>{this.property.cmd.disabled=e},this.getCMD_enable=()=>this.property.cmd.disabled,this.combinePrevConfig=e=>{let t=e||this.property.config,a=Object(i.a)({},pt);for(let i in a)t[i]&&(""!==t[i]&&""===t[i]||(a[i]=t[i]));return a||{}},this.getDefault=()=>this.property.default,this.property={inputType:e,config:a,default:t,main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class vt extends o.Component{constructor(e){super(e),this.getValue=()=>this.refs.RefDesignRole.get(),this.cmd=ft.getCMD(),this.state={cmd:this.cmd,data:this.readConfig(this.props.data)},this.keyComponent=l.g.autoID()}readConfig(e){var t={};void 0===e&&(e={});for(let a in this.cmd)t[a]=e[a]||"";return t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement(Ye,{key:this.keyComponent,class:"col-sm-12 col-md-12",cmd:this.state.cmd,value:this.state.data,ref:"RefDesignRole"})}}var bt=vt,yt=a(12);const Dt={a:/[a-zA-Z]/,9:/\d/,h:/\d/,H:/\d/,m:/\d/,s:/\d/,"*":/./,_:/[a-zA-Z\d]/,L:/[a-zA-Z\d]/,".":/./,0:/\d/,z:/[a-zA-Z]/,Z:/[a-zA-Z ]/,A:/[A-Za-z0-9\\_]/},Ct={0:{status:!0,reg_remove:/[^\d/]/g},L:{status:!0,reg_remove:/[^a-zA-Z\d]/g},z:{status:!0,reg_remove:/[^a-zA-Z]/g},Z:{status:!0,reg_remove:/[^a-zA-Z ]/g},".":{status:!0,reg_remove:""},A:{status:!0,reg_remove:/[^A-Za-z0-9\\_]/g}},At={EMAIL:{regex_validate:/^[\w-.]+@([\w-]+.)+[\w-]{2,4}$/,regex_lang:"jMaskInput_WrongFormat"},EMAIL_MULTI:{regex_validate:/^[\w-.]+@([\w-]+.)+[\w-]{2,4}$/,regex_lang:"jMaskInput_WrongFormat",isMulti:!0}},kt={"-":".{100}",EMAIL:".{100}",EMAIL_MULTI:".{500}"},Mt=e=>Dt[e],xt=e=>{let t=e[0];return Ct[t]},Nt=e=>{var t,a;if(!e)return!1;let i=e[0];if(!0!==(null===(t=Ct[i])||void 0===t?void 0:t.status))return!1;let o=!0;for(const s of e)e[0]!==s&&(o=!1);return!0===(null===(a=xt(i))||void 0===a?void 0:a.status)&&o},wt=(e,t)=>{let a=[];const i=/(\\.|.)/g;let o;for(;null!==(o=i.exec(e));){o.index===i.lastIndex&&i.lastIndex++;const e=o[0],s=1===e.length?"regex":"const";let l={type:s,key:e};"regex"===s?Mt(e)?"date"===t&&/[^/:]/.test(e)?(l.reg=Mt("9"),l.value=e):(l.reg=Mt(e),l.value="_"):"date"===t&&/[^/:]/.test(e)?(l.reg=Mt("9"),l.value=e):(l.value=e,l.type="const"):l.value=e[1],a.push(l)}return a},St=(e,t)=>{let a="";for(const i of e)a+="date"===t?i.key:i.value;return a},Tt=(e,t)=>{let a="";for(const i of e)a+=i.key.includes("\\")?i.value:i.key;return a},Et=(e,t,a,i,o)=>{if(!e||!t||!a)return"";let s="";if(!e)return"";switch(a){case"default":for(const i in t){let a=e[i];if("regex"===t[i].type){if(!1===t[i].reg.test(a))return"";s+=a}}break;case"date":let a=St(t);switch(i){case"string":s=o&&""!==o?Object(me.b)(e,a,o):e;break;default:s=Object(me.a)(e,a)}break;default:s=e}return s||0===s?s:""},Ot=(e,t,a,i,o)=>{if(!e&&0!==e||!t||!a)return"";let s="";const l=Tt(t);switch(a){case"default":let a=0;for(const o in t)if("regex"===t[o].type)if(Nt(l))s+=e[a]||"",a++;else{if(e[a]&&t[o].reg.test(e[a]))s+=e[a];else{if("OPTIMISTIC"!==i)return"";s+=t[o].value}a++}else s+=t[o].value;break;case"date":let n=St(t);switch("string"!==o&&(e=Number(e)),i){case"utc":s=Object(me.h)(e,n);break;default:s=Object(me.g)(e,n)}break;default:s=e}return s||""},It=(e,t,a,i,o,s)=>{let l=Et(e,t,a,o,s);return(null===i||void 0===i?void 0:i.length)?Ot(l,i,a):l},Ft=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,l=e;(null===i||void 0===i?void 0:i.length)&&(l=Et(e,i,a,s));let n=Ot(l,t,a,o,s);return n},Lt=e=>{e||(e=Date.parse(new Date));const t=new Date(e);return{mounth_data:Rt(t.getMonth()+1),year_data:zt(),day_data:jt(),day_of_mounth_data:Ut(e),date_view:e}},jt=()=>["SUN","MON","TUE","WED","THU","FRI","SAT"].map((e,t)=>({title:e,type:"gray"})),Rt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getMonth()+1;const t=["January","February","March","April","May","June","July","August","September","October","November","December"];return t.map((t,a)=>({title:t,selected:e-1===a}))},zt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1900,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2100,a=[];if(e<=t)for(let i=e;i<=t;i++)a.push(i);return a},Pt=e=>{let t=new Date(e).getMonth()+1,a=[0,31,28,31,30,31,30,31,31,30,31,30,31];(e=>e%400===0||e%100!==0&&e%4===0)(new Date(e).getFullYear())&&a[2]++;let i=[];for(let o=1;o<=a[t];o++)i.push(o);return i},Ut=e=>{e||(e=Date.parse(new Date));let t=new Date(e),a=new Date(Object(yt.d)(e,{M:-1})),i=new Date(Object(yt.d)(e,{M:1})),o=Date.parse(a),s=Date.parse(i),l=Pt(o),n=Pt(e),r=Pt(s),c=new Date(t.getFullYear(),t.getMonth(),1),d=new Date(t.getFullYear(),t.getMonth(),n.length),h=l.slice(l.length-c.getDay(),l.length),_=r.slice(0,6-d.getDay()),u=h.map(e=>{let i=String(e),s="gray",l=new Date(o).setDate(e);return e===t.getDate()&&a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear()&&(s="primary"),{title:i,type:s,value:l}}),g=n.map(a=>{let i=String(a),o="",s=new Date(e).setDate(a);return a===t.getDate()&&(o="primary"),{title:i,type:o,value:s}}),m=_.map(e=>{let a=String(e),o="gray",l=new Date(s).setDate(e);return e===t.getDate()&&i.getMonth()===t.getMonth()&&i.getFullYear()===t.getFullYear()&&(o="primary"),{title:a,type:o,value:l}}),p=u.concat(g);return p=p.concat(m),p};class Vt extends o.Component{constructor(e){var t;super(e),t=this,this.getComponentContructor=(e,t)=>{let a=this.buildPropsSmooth(t);return{props_smooth:a,state_smooth:this.buildStateSmooth(a)}},this.buildPropsSmooth=e=>{let t=l.g.cloneJson(e);var a;t.config=this.propertyConstructor.combinePrevConfig(e.config),t.config.const_mask_format=t.config.mask_format,t.config.mask_format=(a=t.config.mask_format,kt[a]||a),t.config.mask_format=(e=>{for(const t in Dt){let a,i=new RegExp(`\\${t}{(\\d+)}`,"g");for(;null!==(a=i.exec(e));){a.index===i.lastIndex&&i.lastIndex++;let o="";for(let e=0;e<Number(a[1]);e++)o+=t;e=e.replace(a[0],o)}}return e})(t.config.mask_format);let i=(e=>{let t=/\${([^}]+)}/gm.exec(e);if(null!==t)try{let a=l.g.context_get(t[1])||"";e=e.replace(t[0],a)}catch(a){}return e})(t.config.data_default);return Number(i)||"string"!==t.config.value_type||(i=me.c(i,t.config.format_value_type_string)),i=(e=>{let t=e;let a=/libDate_cal\((.*),(.*)\)/gm.exec(t);if(null!==a)try{t=Object(yt.d)(Number(a[1]),JSON.parse(a[2]))}catch(o){}let i=/JF_DATE\.([^(]+)\(([^)]*)\)/gm.exec(t);if(null!==i)try{e=l.g.persist_convertCondition(e);let a=i[1],o=i[2].split(",");t=yt.a[a].apply(null,o)}catch(o){}return t})(i),void 0!==i&&null!==i||(i=""),t.config.data_default=i,t},this.buildStateSmooth=e=>{const t=e.config;let a=wt(t.mask_format,t.mask_mode),i=wt(t.mask_data_format,t.mask_mode),o=St(a,t.mask_mode),s=t.mask_mode,n={status:!1,reg_remove:""};if(Nt(t.mask_format)){let e=xt(t.mask_format);void 0!==e&&(n.status=e.status,n.reg_remove=e.reg_remove)}const r=o,c=Date.parse(new Date);let d={mounth_data:Rt(),year_data:zt(),day_data:jt(),day_of_mounth_data:Ut(c,c),date_view:c};return{isLookup:"true"===this.props.config.isLookup,error_input:!1,lang_select:l.g.getLangKey(),component_title:this.props.default.name||"",CMD:this.propertyConstructor.getCMD(),format_value_type_string:e.config.format_value_type_string,value:"",mask_value:"",date_selected_cache:0,content_style:e.config.content_style,value_type:e.config.value_type,mask_mode:s,mask_format:r,mask_regs:a,mask_regs_to:i,mask_placeholder:o,free_style:n,date_picker:d}},this.getInfoErrror=()=>{var e;const{help_mess:t}=this.state;return t?{info:this.getErrorLang(this.state.help_mess),key:(null===(e=this.state.lang)||void 0===e?void 0:e[this.props.default.name])||this.props.default.name,infoComponent:this.props.default}:""},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.setCMD=(e,t)=>{const{CMD:a}=this.state;let i=Object.assign(l.g.cloneJson(a),t);a.disabled===i.disabled&&a.visible===i.visible&&a.block===i.block||this.setState({CMD:i})},this.getDataOOP=(e,t)=>this.data_select,this.getAdvanced=(e,t)=>this.maskInputGet(),this.setAdvanced=(e,t)=>{if(e.codeHidden){if(e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(void 0!==this.props.config.data_view)var a="";void 0!==this.props.config.data_value&&(a=l.g.getOOP(this.data_select,this.props.config.data_value.trim())+""),this.maskInputSet(a,"enter_tab",void 0,void 0,void 0,!0)}}else e.list_component&&(null!==t&&void 0!==t||(t=""),this.maskInputSet(t,"on_change",void 0,void 0,void 0,!0))},this.get=(e,t)=>{const a=this.props_smooth.config.structable.split("|");for(const i of a)this.readData(i,e.inform)},this.runRule=e=>{if(e){var t=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.set=(e,t)=>{var a;let i=this.props_smooth.config.structable_read.split("."),o=null===t||void 0===t||null===(a=t[i[0]])||void 0===a?void 0:a[i[1]];void 0!==o||this.props_smooth.config.structable_read||(o=this.props_smooth.config.data_default),void 0!==o&&(null==o&&(o=""),this.maskInputSet(o,"on_change",void 0,void 0,void 0,!0))},this.reload=(e,t)=>{const a=this.props_smooth.config;this.data_select={},this.maskInputSet(a.data_default,void 0,void 0,void 0,"OPTIMISTIC")},this.setDataDefault=()=>{const e=this.props_smooth.config;this.data_select={},this.maskInputSet(e.data_default,void 0,void 0,void 0,"OPTIMISTIC")},this.checkValidate=()=>{let e=this.maskInputGet(),t="";if(this.props.validate.request&&!e&&(t="validateRequest",this.state.mask_value&&0!==e&&(t="jMaskInput_WrongFormat")),t||(t=this.maskInputValidate()),t){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.setFormValidateFromComponent(!0,this.props.default)}return this.state.help_mess=t,this.setState({help_mess:t}),!!t},this.setMaskConfig=(e,t)=>{let a=this.props_smooth;a.config.mask_format=t.mask_format,a.config.mask_data_format=t.mask_data_format,a.config.mask_mode=t.mask_mode,this.props_smooth=this.buildPropsSmooth(a);const i=this.buildStateSmooth(this.props_smooth),{mask_format:o,mask_mode:s,mask_reg:l,mask_regs:n,mask_regs_to:r,mask_placeholder:c,mask_value:d,free_style:h,date_picker:_}=i;this.setState({mask_format:o,mask_mode:s,mask_reg:l,mask_regs:n,mask_regs_to:r,mask_placeholder:c,mask_value:d,free_style:h,date_picker:_})},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:l.g.getLangKey()},()=>{this.onBlur()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setCallBuildFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.modalToggle=e=>{e||this.buildFormChild(),!0!==this.state.CMD.disabled&&(void 0===e?this.setState({show_modal:l.g.autoID()}):e&&(this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})))},this.getFormConfig=e=>s.a.createElement(ht,{data:e,ref:e=>l.g.setConfigComponent("config",e)}," "),this.getFormRole=e=>s.a.createElement(bt,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(ut,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(mt,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.clearError=()=>{this.setState({help_mess:""})},this.maskInputSet=(e,t,a,i,o,s)=>{const{mask_regs:l,mask_regs_to:n,mask_mode:r,mask_mode_time:c,value_type:d,format_value_type_string:h}=this.state;let _={end_pos:0,start_pos:0,help_mess:"",mask_value:"",value:e},u=Ft(e,l,r,n,o);"date"===r&&("string"===d?(Number(e)||!0!==s?Number(e)||(e=me.c(e,St(l))):e=me.c(e,h),_.date_picker=Lt(e),u=Ft(e,l,r,[],"utc","string")):Number(e)&&(_.date_picker=Lt(e),u=Ft(Number(e),l,r,[],c))),_.mask_value=u,_=Object.assign(_,i),this.setState(_,()=>{this.runRule(t),a&&a()})},this.maskInputGet=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{mask_regs:a,mask_regs_to:i,mask_value:o,mask_mode:s,value_type:l}=t.state;let n="";return t.state.free_style.status?o:(n="date"===s?It(o,a,s,[],l,e):It(o,a,s,i),n)},this.maskInputClear=()=>{this.data_select={},this.setState({end_pos:0,start_pos:0,value:"",mask_value:"",help_mess:""},()=>{})},this.maskInputValidate=()=>{const{mask_value:e}=this.state;let t="",a=this.maskInputGet();const i=(o=this.props_smooth.config.const_mask_format,At[o]);var o;if(t=e&&!a&&0!==a?"jMaskInput_WrongFormat":function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[{title:"@VALUE",value:t},{title:"@NOW",value:Date.parse(new Date)},{title:"@YEAR",value:31536e6.toString()},{title:"@MOUNTH",value:2592e6.toString()},{title:"@DAY",value:864e5.toString()},{title:"@HOURS",value:36e5.toString()},{title:"@MINUTE",value:6e4.toString()},{title:"@SECONDS",value:1e3.toString()}];for(const i of e){let{content:e,mess:t}=i;for(const i of a)e=e.replace(new RegExp(i.title,"g"),i.value);if(!1===l.g.checkDynamicConditionNoData(e))return t}return""}(this.props.validate.conditions,a),i&&e){const a=i.regex_validate;if(i.isMulti){let i=e.split(",");for(let e=0;e<i.length;e++){const o=i[e];if(!a.test(o)){t="jMaskInput_WrongFormat";break}}}else a.test(e)||(t="jMaskInput_WrongFormat")}return t},this.abs_calendar_changeMonth=e=>{const t=this.maskInputGet()||Date.parse(new Date),a=Object(yt.d)(t,{M:e},this.state.mask_format,"string"===this.state.value_type);this.maskInputSet(a)},this.abs_calendar_submit=e=>{let t=this.state.date_picker.day_of_mounth_data[e].value;this.maskInputSet(t,"enter_tab")},this.abs_calendar_chooseYear=e=>{const t=this.maskInputGet()||Date.parse(new Date),a=new Date(t).setFullYear(e);this.maskInputSet(a)},this.abs_calendar_changeYear=e=>{},this.abs_calendar_chooseMonth=e=>{const t=e,a=this.maskInputGet()||Date.parse(new Date),i=new Date(a).setMonth(t);this.maskInputSet(i)},this.abs_calendar_openCalendar=()=>{let e=this.maskInputGet();e&&this.maskInputSet(e,"","",{date_selected_cache:e})},this.abs_calendar_KeyUp=e=>{const t=this.maskInputGet()||Date.parse(new Date);let a,i=this.state.date_selected_cache;switch(e.key){case"ArrowLeft":a=Object(yt.d)(t,{d:-1}),this.maskInputSet(a);break;case"ArrowRight":a=Object(yt.d)(t,{d:1}),this.maskInputSet(a);break;case"ArrowUp":a=Object(yt.d)(t,{d:-7}),this.maskInputSet(a);break;case"ArrowDown":a=Object(yt.d)(t,{d:7}),this.maskInputSet(a);break;case"Enter":a=t,this.maskInputSet(a),this.ref_maskinput.current.abs_CloseCalendar();break;case"Escape":Number(i)!==Number(this.maskInputGet())?this.maskInputSet(i):this.ref_maskinput.current.abs_CloseCalendar()}},this.abs_calendar_today=()=>{const e=Date.parse(new Date);this.maskInputSet(e,"enter_tab")},this.componentDidUpdate=(e,t)=>{},this.onEventKey=e=>{switch(e.key){case"Delete":this.maskInputClear()}this.state.mask_mode},this.onClick=e=>{this.clearError()},this.onBlur=()=>{if("date"===this.state.mask_mode){let e=this.maskInputGet();this.maskInputSet(e,"",()=>{!1===this.checkValidate()&&this.runRule("enter_tab")})}else!1===this.checkValidate()&&this.runRule("enter_tab")},this.setLastPost=e=>{let t=e.target;this.state.start_pos=t.selectionStart,this.state.end_pos=t.selectionEnd},this.setPos=(e,t)=>{e.selectionStart=t,e.selectionEnd=t},this.onChangeMaskInput=e=>{let{start_pos:t,mask_value:a,mask_regs:i,mask_placeholder:o,content_style:s}=this.state;const l=e.target;let n=l.selectionStart,r=l.value||"";"UPPER"===s&&(r=r.toLocaleUpperCase());const c=this.state.free_style;if(c.status)return r=r.replace(c.reg_remove,""),r=r.slice(0,i.length),void this.setState({mask_value:r});let d=r.slice(t,n)||"",h=0,_="",u=r.slice(0,n);for(let m=n;m<o.length;m++)m<n+(o.length-r.length)?u+=o[m]:u+=a[m]||o[m];a=u;for(const m in i){const e=i[m];"regex"===e.type||"const"===e.type&&e.value===d[h]?t<=m&&h<d.length?("const"===e.type&&e.value===d[h]||e.reg.test(d[h])?_+=d[h]||e.value:(_+=e.value,n--),h++):_+=a[m]||o[m]:(_+=e.value,t<=m&&h<d.length&&n++)}_===o&&(_="");let g=Tt(this.state.mask_regs,this.props_smooth.config.mask_mode);if(g.includes("HH:mm")){let e=((e,t)=>{t=t.replace("_","0");let a=Object(me.a)(t,e);return Object(me.d)(a,e)})(g,_);"Invalid date"===e&&(e=this.state.mask_value),_=e}this.setState({mask_value:_},()=>{this.setPos(l,n)})},this.getErrorLang=e=>{switch(e){case"validateNumMin":return l.g.getLang(e).replace("{count}",this.state.validate.min);case"validateNumMax":return l.g.getLang(e).replace("{count}",this.state.validate.max);case"validateRequest":default:return l.g.getLang(e)}},this.renderThisComponent=()=>{const e=this.state.mask_mode,t=Object(v.b)("date"===e?"uDate":"uInput");if("true"===String(this.props.config.isLabel)){const e=Object(v.b)("uLabel");return s.a.createElement(e,{dataFull:{config:{default:{title:this.state.mask_value||"",class:this.props_smooth.default.class},cmd:{visible:"true"===String(this.state.CMD.visible)}}}})}return s.a.createElement(t,{dataFull:Object(i.a)(Object(i.a)({},this.getConfigTemplate()),{},{abs_Change:this.onChangeMaskInput,abs_Blur:this.onBlur,abs_Click:this.onClick,abs_KeyDown:this.setLastPost,abs_KeyUp:this.onEventKey,abs_MouseUp:this.setLastPost}),ref:this.ref_maskinput})},this.abs_CloseModal=()=>{this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})},this.propertyConstructor=new ft(e.inputType,e.default,e.config),this.data_debug={},this.app_debug=[];let a="";"date"===this.propertyConstructor.property.config.mask_mode&&(a="utc"===this.propertyConstructor.property.config.mask_mode_time?"utc":"time_zone_c"),this.renderFormChildDone=!1,this.state={is_lookup:!1,is_error:!1,is_clicked:!1,help_mess:"",lang_select:"",title:"",CMD:{},format_value_type_string:"",end_pos:-1,start_pos:0,_type:"",value:"",mask_mode_time:a,mask_value:"",mask_format:"",mask_placeholder:"",mask_mode:"default",mask_regs:[],mask_regs_to:[],content_style:"",value_type:"long",free_style:{status:!1,reg_remove:""},date_picker:{mounth_data:[],year_data:[],day_data:[],day_of_mounth_data:[],date_view:Date.parse(new Date)},date_selected_cache:0,renderFormChildDone:!1,id_component:l.g.autoID()},this.ref_maskinput=s.a.createRef();const o=this.getComponentContructor({},e);this.state=Object.assign(this.state,o.state_smooth),this.props_smooth=o.props_smooth}readData(e,t){var a=e.split(".");if(2!==a.length)return;let{format_value_type_string:i}=this.state,o=this.maskInputGet(i);switch(t){case void 0:case"true":l.g.putData(a[0],a[1],o,this.props.infoA);break;case"false":l.g.putDataGB(a[0],a[1]);break;default:l.g.putDataGB(a[0],a[1],"")}}openDetail(){const e=this.props.config.callform_detail;if(e){var t=l.g.getFormAppAuto(e);t&&this.props.config.callform_detail_mode,void 0===t?Object(A.a)({form_code:this.props.config.callform_detail},this.props.infoA,this.props.default,"callform_detail;"+this.state.id_component,this.data_select):"modal"===this.props.config.callform_detail_mode?(t.putDataAll_andSet(this.data_select),this.setState({show_modal_detail:l.g.autoID()})):(t.putDataAll_andSet(this.data_select),l.g.openForm(e))}}buildFormChild(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let e=l.g.cloneJson(this.props.infoA);e.componentParent=this.props.default,Object(A.b)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),e,this.props.default,"callform;"+this.state.id_component)}}componentDidMount(){const e=this.props_smooth.config.data_default,t=()=>{setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())};e?this.maskInputSet(e,"on_change",t(),{},"OPTIMISTIC"):t()}getConfigTemplate(){const{date_picker:e,free_style:t}=this.state;return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{subTitle_isShow:"date"===this.state.mask_mode,subTitle:`(${this.state.mask_placeholder})`,placeholder:this.state.CMD.disabled+""==="true"?" ":Tt(this.state.mask_regs,this.props_smooth.config.mask_mode),title:this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:this.props_smooth.validate.request,icon:!0===this.state.isLookup?"search":""},cmd:{disable:"true"===String(this.state.CMD.disabled),visible:!0,error:{message:this.getErrorLang(this.state.help_mess),type:""}},mode:{textAlign:"left",letterSpacing:t.status?"":"M"}},valueTitleHover:"true"!==String(this.state.CMD.disabled)?"":this.state.mask_value,value:this.state.mask_value,cmd:{isLock:!1},calendar_data:{value_current:"",today:{title:"Today"},config:{days_title:e.day_data},list_months:e.mounth_data,list_years:{value:new Date(e.date_view).getFullYear()||"",data:e.year_data},list_days:e.day_of_mounth_data},abs_calendar_changeMonth:this.abs_calendar_changeMonth,abs_calendar_submit:this.abs_calendar_submit,abs_calendar_chooseYear:this.abs_calendar_chooseYear,abs_calendar_changeYear:this.abs_calendar_changeYear,abs_calendar_chooseMonth:this.abs_calendar_chooseMonth,abs_calendar_openCalendar:this.abs_calendar_openCalendar,abs_calendar_today:this.abs_calendar_today,abs_calendar_KeyUp:this.abs_calendar_KeyUp,tooltip_copy:{icon:"copy",title:l.g.getLang("btn_copy")},abs_Copy:()=>{l.g.copyToClipboard(this.maskInputGet())}}}render(){if("false"===String(this.state.CMD.visible))return null;const e=Object(v.b)("uOfGroup");return this.props.isOfgroupParent?s.a.createElement(e,{class:this.props.default.class_ofgroup},s.a.createElement(s.a.Fragment,null,this.renderThisComponent(),this.state.isLookup&&s.a.createElement(C,{modal_title:l.g.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})),this.props.ofGroupData.map(e=>s.a.createElement(N.a,Object.assign({},e,{isOfgroupParent:!1})))):s.a.createElement(s.a.Fragment,null,this.renderThisComponent(),this.state.isLookup&&s.a.createElement(C,{modal_title:l.g.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal}))}}var Bt=Vt;class Ht extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}onChange(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a,errorJson:!1})}onBlur(e,t){var a=this.state.data,i=!1;try{var o=JSON.parse(t.target.value);a[e]=JSON.stringify(o,null,4)}catch(s){i=!0,alert(s)}this.setState({data:a,errorJson:i})}readConfig(e){var t={};return void 0===e&&(e={}),void 0!==e.structable?t.structable=e.structable:t.structable="",void 0!==e.structable_read?t.structable_read=e.structable_read:t.structable_read="",void 0!==e.data_default?t.data_default=e.data_default:t.data_default="",void 0!==e.component_title?t.component_title=e.component_title:t.component_title="",null!=e.data_type?t.data_type=e.data_type:t.data_type="json",null!=e.data_json?t.data_json=e.data_json:t.data_json="[]",null!=e.data_query?t.data_query=e.data_query:t.data_query="",null!=e.data_more?t.data_more=e.data_more:t.data_more="[]",null!=e.data_more_status?t.data_more_status=e.data_more_status:t.data_more_status="no",null!=e.data_view_format?t.data_view_format=e.data_view_format:t.data_view_format="no",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ti\xeau \u0111\u1ec1 c\u1ee7a component",value:this.state.data.component_title,onChange:e=>this.onChange_Value("component_title",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"prtm-full-block inner-acccordians"},s.a.createElement("div",{className:"panel panel-inverse mrgn-b-none"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-7 col-sm-7 col-md-8 col-lg-8"},s.a.createElement("h4",{className:"text-capitalize mrgn-all-none"},"Kho d\u1eef li\u1ec7u")," "),s.a.createElement("div",{className:"col-xs-5 col-sm-5 col-md-4 col-lg-4"},s.a.createElement("div",{className:"tab-icon pull-right"},s.a.createElement("div",{"data-toggle":"collapse","data-target":"#database","aria-expanded":"true",style:{cursor:"pointer"}}," ",s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"})," "))))),s.a.createElement("div",{id:"database",className:"collapse","aria-expanded":"true"},s.a.createElement("div",{className:"pad-all-md"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Lo\u1ea1i d\u1eef li\u1ec7u",value:this.state.data.data_type,data:[{title:"Query",code:"database"},{title:"Json",code:"json"}],onChange:e=>this.onChange_Value("data_type",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Th\xeam d\u1eef li\u1ec7u",value:this.state.data.data_more_status,data:[{title:"C\xf3",code:"yes"},{title:"Kh\xf4ng",code:"no"}],onChange:e=>this.onChange_Value("data_more_status",e)}),"database"===this.state.data.data_type&&s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Query l\u1ea5y d\u1eef li\u1ec7u",value:this.state.data.data_query,onChange:e=>this.onChange_Value("data_query",e)}),"json"===this.state.data.data_type&&s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12",style:{marginBottom:"2rem"}},"D\u1eef li\u1ec7u d\u1ea1ng json",s.a.createElement("textarea",{className:"form-control",rows:"10",value:this.state.data.data_json,id:"data_json",onChange:e=>{this.onChange("data_json",e)},onBlur:e=>{this.onBlur("data_json",e)},placeholder:"data_json"})),"yes"===this.state.data.data_more_status&&s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12",style:{marginBottom:"2rem"}},"D\u1eef li\u1ec7u th\xeam v\xe0o",s.a.createElement("textarea",{className:"form-control",rows:"10",id:"data_more",value:this.state.data.data_more,onChange:e=>{this.onChange("data_more",e)},onBlur:e=>{this.onBlur("data_more",e)},placeholder:"data_more"}))))))),s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"prtm-full-block inner-acccordians"},s.a.createElement("div",{className:"panel panel-inverse mrgn-b-none"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-7 col-sm-7 col-md-8 col-lg-8"},s.a.createElement("h4",{className:"text-capitalize mrgn-all-none"},"Giao di\u1ec7n")," "),s.a.createElement("div",{className:"col-xs-5 col-sm-5 col-md-4 col-lg-4"},s.a.createElement("div",{className:"tab-icon pull-right"},s.a.createElement("div",{"data-toggle":"collapse","data-target":"#uiFormat","aria-expanded":"true",style:{cursor:"pointer"}}," ",s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"})," "))))),s.a.createElement("div",{id:"uiFormat",className:"collapse","aria-expanded":"true"},s.a.createElement("div",{className:"pad-all-md"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"\u0110\u1ecbnh d\u1ea1ng d\u1eef li\u1ec7u",value:this.state.data.data_view_format,onChange:e=>this.onChange_Value("data_view_format",e)})))))))}}var Yt=Ht;class Qt extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min&&(t.min=e.min),null!=e.max&&(t.max=e.max),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"T\xean x\xe1c nh\u1eadn"),s.a.createElement("th",null,"D\u1eef li\u1ec7u"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"B\u1eaft bu\u1ed9c nh\u1eadp"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng nh\u1ecf h\u01a1n"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.min=parseFloat(e.target.value):void 0!==t.min&&delete t.min,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng v\u01b0\u1ee3t qu\xe1"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max=parseFloat(e.target.value):void 0!==t.max&&delete t.max,this.setState({data:t})}}))))))))}}var Gt=Qt;class Jt extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.renderDicionaryTable=(e,t)=>s.a.createElement("div",{className:"tab-pane fade active in"},s.a.createElement("div",{className:"inner-acccordians"},s.a.createElement("div",{className:"collapse in"},s.a.createElement("div",null,void 0!==e&&e.length>0&&e.map((e,a)=>s.a.createElement("div",{className:"panel panel-default",key:a},s.a.createElement("div",{className:"panel-heading pos-relative pad-all-md",id:"heading-3"},s.a.createElement("h4",{className:"panel-title"},s.a.createElement("a",{className:"accordion-toggle collapsed show","data-toggle":"collapse","data-parent":"#accordion",href:"#collapseNine"+a+t},s.a.createElement("span",null,e)))),s.a.createElement("div",{id:"collapseNine"+a+t,className:"panel-collapse collapse",role:"tabpanel","aria-labelledby":"heading-3"},s.a.createElement("div",{className:"panel-body"},this.state.lang_system.map((a,i)=>s.a.createElement("div",{key:i},s.a.createElement(n.a,{key:i,class:"col-sm-12 col-md-12",name:a.view,value:void 0!==this.state.data[t][a.key]?this.state.data[t][a.key][e]:a.key,onChange:i=>{var o=this.state.data;o[t][a.key][e]=i.target.value,this.setState({data:o})}})))))))))));var t=[];if(void 0!==this.props.config&&void 0!==this.props.config.component_title){let e=this.props.config.component_title;""!==e&&t.push(e)}var a=[];if(void 0!==this.props.config&&void 0!==this.props.config.data_view_format){let e=this.props.config.data_view_format;e=e.trim(),e=e.split("@");for(let t=0;t<e.length;t++){let i=e[t].trim();if(""!==i&&void 0!==i)if(0===t)a.push(i);else{let e=i.indexOf(" ");if(-1!==e){let t=i.substring(e,i.length).trim();a.push(t)}}}}this.state={lang_system:l.g.getConfigUserDefault("list_lang_config"),data:{ui:this.joinTableColumnAndLang(l.g.getConfigUserDefault("list_lang_config"),t,"ui"),data_view_format:this.joinTableColumnAndLang(l.g.getConfigUserDefault("list_lang_config"),a,"data_view_format")},title:t,data_view_format:a}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}joinTableColumnAndLang(e,t,a){var i=t;void 0===i&&(i=[]);var o=this.props.data;void 0===o&&(o={});var s={};for(let n=0;n<i.length;n++){let t=i[n];if(void 0!==t)for(let i=0;i<e.length;i++){let n=e[i].key;void 0===s[n]&&(s[n]={}),void 0===o[a]&&(o[a]={}),void 0===o[a][n]&&(o[a][n]={});var l=t.trim();void 0===o[a][n][l]?s[n][l]=l:s[n][l]=o[a][n][l]}}return s}render(){return s.a.createElement("div",{className:"line-slide-tab"},s.a.createElement("ul",{className:"nav nav-tabs"},s.a.createElement("li",null,s.a.createElement("a",{"data-toggle":"tab",href:"#tab1","aria-expanded":"true"},"UI")),s.a.createElement("li",null,s.a.createElement("a",{"data-toggle":"tab",href:"#tab2","aria-expanded":"true"},"Data"))),s.a.createElement("div",{className:"tab-content pad-all-lg"},s.a.createElement("div",{id:"tab1",className:"tab-pane fade in active"},this.renderDicionaryTable(this.state.title,"ui")),s.a.createElement("div",{id:"tab2",className:"tab-pane fade in"},this.renderDicionaryTable(this.state.data_view_format,"data_view_format"))))}}var Wt=Jt;class qt extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var Kt=qt;class Zt extends o.Component{constructor(e){var t;if(super(e),t=this,this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(Yt,{data:e,ref:e=>l.g.setConfigComponent("config",e)}," "),this.getFormRole=e=>s.a.createElement(Kt,{data:e,ref:e=>l.g.setConfigComponent("role",e)}," "),this.getFormValidate=e=>s.a.createElement(Gt,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}," "),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(Wt,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}," "),this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){let e=this.props.config.structable_read;var a=e.split(".");if(a.length>0&&void 0!==t[a[0]]&&void 0!==t[a[0]][a[1]]){let i=0;if(void 0!==this.state.data_gb)for(let o=0;o<this.state.data_gb.length;o++){const s=this.state.data_gb[o];if(t[a[0]][a[1]]===l.g.getOOP(s,e)){i=o;break}}return void this.setState({value:t[a[0]][a[1]],index_selected:i})}}this.setState({value:""})}},this.setAdvanced=(e,t)=>{if(e.codeHidden&&e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change")}var i="";void 0!==this.props.config.data_view&&(i=": "+l.g.getOOP(this.data_select,this.props.config.data_view.trim()));var o="";void 0!==this.props.config.data_value&&(o=l.g.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:o,data_view:i})}},this.get=(e,t)=>{var a=!0;if(e.checkError&&"false"===e.checkError&&(a=!1),!a||!this.checkValidate()){var i=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(i=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(i=!0),i)){var o=this.props.config.structable;if(o.includes("|"))for(var s=o.split("|"),l=0;l<s.length;l++)this.readData(s[l],e.inform);else this.readData(o,e.inform)}}},this.checkValidate=()=>{var e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:l.g.getLang("validateRequest")}))),e){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:this.data_default})},this.onChangeRadio=e=>{let t=e.target.value;var a=this.props.config.structable;let i=l.g.getOOP(this.state.data_gb[t],a);this.setState({index_selected:t,value:i})},this.changeView=(e,t,a)=>{let i="",o=(t=t.trim()).split("@");for(let s=0;s<o.length;s++){let t=o[s].trim();if(""!==t&&void 0!==t)if(0===s)void 0!==this.state.lang[a]&&void 0!==this.state.lang[a][this.state.lang_select]&&void 0!==this.state.lang[a][this.state.lang_select][t]?i+=this.state.lang[a][this.state.lang_select][t]+" ":i+=o[s];else{let o=t.indexOf(" ");if(-1===o)i+=l.g.getOOP(e,t)+" ";else if(-1!==o){let s=t.substring(o,t.length).trim(),n=t.substring(0,o).trim();i+=l.g.getOOP(e,n)+" ",void 0!==this.state.lang[a]&&void 0!==this.state.lang[a][this.state.lang_select]&&void 0!==this.state.lang[a][this.state.lang_select][s]?i+=this.state.lang[a][this.state.lang_select][s]+" ":i+=s}}}return i},this.runRule=e=>{if(e){var t=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.getAdvanced=(e,t)=>{var a;return null===(a=this.state.value)||void 0===a?void 0:a.code},this.handleClick=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.input,i=t.state.data_gb;i.forEach((t,a)=>{t.isCheck=a===e.index}),t.setState({data_gb:i,value:a},()=>{t.runRule("enter_tab")})},this.getConfigComponent=(e,t)=>void 0===e.isCheck?{value:0===t,isCheck:0===t,dataItem:{index:t,input:e},abs_Click:this.handleClick,class:this.props.default.class,title:e.title,config:{cmd:{disable:!1,isLock:!1,error:{message:""}}}}:{value:void 0!==e.isCheck&&e.isCheck,isCheck:void 0!==e.isCheck&&e.isCheck,dataItem:{index:t,input:e},abs_Click:this.handleClick,class:this.props.default.class,title:e.title,config:{cmd:{disable:!1,isLock:!1,error:{message:""}}}},this.data_gb=[],void 0!==this.props.config.data_type){if("database"===this.props.config.data_type&&void 0!==this.props.config.data_query){let e=this.props.config.data_query;if(void 0!==e){let t=l.g.getDataLimited(e,0,50);void 0!==t?this.data_gb=t.data:l.g.AppException("#jSelect.constructor#1","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","data")}}if("json"===this.props.config.data_type&&void 0!==this.props.config.data_json){let e=l.g.parseJson(this.props.config.data_json);void 0!==e?this.data_gb=e:l.g.AppException("#jSelect.constructor#1","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","data")}}if(void 0!==this.props.config.data_more&&""!==this.props.config.data_more){let e=l.g.parseJson(this.props.config.data_more);if(void 0!==e)for(let t=0;t<e.length;t++){const a=e[t];this.data_gb.unshift(a)}}if(void 0!==this.props.config){this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var a=this.props.config.component_title;void 0===a&&(a=""),this.data_view_format_="",void 0!==this.props.config.data_view_format&&(this.data_view_format_=this.props.config.data_view_format)}var i=this.props.validate;void 0===i&&(i={});var o=this.props.lang;void 0===o&&(o={}),this.callform_detail="",this.callform="",this.data_select={},this.state={value:{},value_old:"",lang:o,lang_select:l.g.getLangKey(),validate:i,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",data_gb:this.data_gb,index_selected:0,component_title:a,value_checked:!0,component_key:l.g.autoID()};let n=this.props.config.structable_read;if(void 0!==n&&void 0!==this.state.data_gb)for(let s=0;s<this.state.data_gb.length;s++){const e=this.state.data_gb[s];if(l.g.getOOP(e,n)===this.data_default){this.state.index_selected=s,this.state.value=this.data_default;break}}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent());let e=this.props.config.structable_read;if(void 0!==e&&void 0!==this.state.data_gb&&void 0!==this.state.index_selected){let t=l.g.getOOP(this.state.data_gb[this.state.index_selected],e);this.setState({value:t})}}readData(e,t){if(e.includes(".")){var a=e.split(".");void 0===t||"true"===t?l.g.putData(a[0],a[1],this.state.value,this.props.infoA):"false"===t?l.g.putDataGB(a[0],a[1],this.state.value):l.g.putDataGB(a[0],a[1],"")}}render(){const e=Object(v.b)("uRadioButton");return s.a.createElement(s.a.Fragment,null,""!==this.state.data_gb&&this.state.data_gb.map((t,a)=>s.a.createElement(e,{key:a,dataFull:this.getConfigComponent(t,a)})))}}var Xt=Zt;class $t extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.renderConfig=e=>{switch(e){case"UI":return s.a.createElement("div",null,s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"Icon c\xf3 th\u1ec3 m\u1edf",value:this.state.data.icon_open,onChange:e=>this.onChange_Value("icon_open",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"Icon c\xf3 th\u1ec3 \u0111\xf3ng",value:this.state.data.icon_close,onChange:e=>this.onChange_Value("icon_close",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"Icon d\u1eef li\u1ec7u c\u1ea5p nh\u1ecf nh\u1ea5t",value:this.state.data.icon_min_chil,onChange:e=>this.onChange_Value("icon_min_chil",e)}));case"database":return s.a.createElement("div",null,s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"Lo\u1ea1i d\u1eef li\u1ec7u",value:this.state.data.data_type,data:[{title:"Json",code:"json"},{title:"Query",code:"query"}],onChange:e=>this.onChange_Value("data_type",e)}),"query"===this.state.data.data_type&&s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"C\xe2u query l\u1ea5y data",value:this.state.data.data_query,onChange:e=>this.onChange_Value("data_query",e)}),"json"===this.state.data.data_type&&s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12",style:{marginBottom:"2rem"}},"D\u1eef li\u1ec7u d\u1ea1ng json",s.a.createElement("textarea",{className:"form-control",rows:"10",value:this.state.data.data_json,id:"data_json",onChange:e=>{this.onChange("data_json",e)},onBlur:e=>{this.onBlur("data_json",e)},placeholder:"data_json"})),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Th\xeam d\u1eef li\u1ec7u",value:this.state.data.data_more_status,data:[{title:"C\xf3",code:"yes"},{title:"Kh\xf4ng",code:"no"}],onChange:e=>this.onChange_Value("data_more_status",e)}),"yes"===this.state.data.data_more_status&&s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12",style:{marginBottom:"2rem"}},"D\u1eef li\u1ec7u th\xeam v\xe0o",s.a.createElement("textarea",{className:"form-control",rows:"10",id:"data_more",value:this.state.data.data_more,onChange:e=>{this.onChange("data_more",e)},onBlur:e=>{this.onBlur("data_more",e)},placeholder:"data_more"})),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Kh\xf3a ph\xe2n bi\u1ec7t d\u1eef ki\u1ec7u (*)",value:this.state.data.key_private,onChange:e=>this.onChange_Value("key_private",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"ID parent (*)",value:this.state.data.key_set_parent,onChange:e=>this.onChange_Value("key_set_parent",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Kh\xf3a l\u1ea5y id c\u1ee7a cha t\u1eeb con (*)",value:this.state.data.key_get_parent,onChange:e=>this.onChange_Value("key_get_parent",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Kh\xf3a l\u1ea5y hi\u1ec3n th\u1ecb d\u1eef li\u1ec7u (*)",value:this.state.data.key_view,onChange:e=>this.onChange_Value("key_view",e)}));case"getdata":return s.a.createElement("div",null," ",s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"\u0110\u1ecbnh d\u1ea1ng l\u1ea5y d\u1eef li\u1ec7u",value:this.state.data.get_value_type,data:[{title:"String",code:"string"},{title:"Array",code:"array"}],onChange:e=>this.onChange_Value("get_value_type",e)}),"string"===this.state.data.get_value_type&&s.a.createElement("div",null,s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"C\u1ea5u h\xecnh l\u1ea5y d\u1eef li\u1ec7u",value:this.state.data.get_value_string_format,onChange:e=>this.onChange_Value("get_value_string_format",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"Ph\xe2n c\xe1ch",value:this.state.data.get_value_string_format_split,onChange:e=>this.onChange_Value("get_value_string_format_split",e)})),"array"===this.state.data.get_value_type&&s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},"C\u1ea5u h\xecnh l\u1ea5y d\u1eef li\u1ec7u",s.a.createElement("textarea",{className:"form-control  form-group",rows:"10",id:"get_value_array_format",value:this.state.data.get_value_array_format,onChange:e=>{this.onChange("get_value_array_format",e)},onBlur:e=>{this.onBlur("get_value_array_format",e)},placeholder:"get_value_array_format",style:{paddingBottom:"2rem"}})));case"setdata":break;case"advanced":return s.a.createElement("div",null," ",s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"T\u1ef1 \u0111\u1ed9ng ch\u1ecdn",value:this.state.data.auto_select,data:[{title:"C\xf3",code:!0},{title:"Kh\xf4ng",code:!1}],onChange:e=>this.onChange_Value("auto_select",e)}),s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},"C\u1ea5p \u0111\u1ed9 c\xe2y con t\u1ed1i \u0111a",s.a.createElement("input",{className:"form-control  form-group",type:"number",value:this.state.data.tree_level,onChange:e=>{let t=this.state.data;t.tree_level=e.target.value,this.setState({data:t})},placeholder:"tree_level"})),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"id C\u1ea5p cha cao nh\u1ea5t",value:this.state.data.max_parent_id,onChange:e=>this.onChange_Value("max_parent_id",e)}))}},this.renderUI=(e,t)=>s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"prtm-full-block inner-acccordians"},s.a.createElement("div",{className:"panel panel-inverse mrgn-b-none"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-7 col-sm-7 col-md-8 col-lg-8"},s.a.createElement("h4",{className:"text-capitalize mrgn-all-none"},t)," "),s.a.createElement("div",{className:"col-xs-5 col-sm-5 col-md-4 col-lg-4"},s.a.createElement("div",{className:"tab-icon pull-right"},s.a.createElement("div",{"data-toggle":"collapse","data-target":"#"+e,"aria-expanded":"true",style:{cursor:"pointer"}}," ",s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"})," "))))),s.a.createElement("div",{id:e,className:"collapse","aria-expanded":"true"},s.a.createElement("div",{className:"pad-all-md"},this.renderConfig(e)))))),this.state={data:this.readConfig(this.props.data)}}onChange(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a,errorJson:!1})}onBlur(e,t){var a=this.state.data,i=!1;try{var o=JSON.parse(t.target.value);a[e]=JSON.stringify(o,null,4)}catch(s){i=!0,alert(s)}this.setState({data:a,errorJson:i})}readConfig(e){var t={};return void 0===e&&(e={}),void 0!==e.structable?t.structable=e.structable:t.structable="",void 0!==e.structable_read?t.structable_read=e.structable_read:t.structable_read="",void 0!==e.data_default?t.data_default=e.data_default:t.data_default="",void 0!==e.component_title?t.component_title=e.component_title:t.component_title="",void 0!==e.data_type?t.data_type=e.data_type:t.data_type="",void 0!==e.data_json?t.data_json=e.data_json:t.data_json="",void 0!==e.data_query?t.data_query=e.data_query:t.data_query="",void 0!==e.data_more?t.data_more=e.data_more:t.data_more="",null!=e.data_more_status?t.data_more_status=e.data_more_status:t.data_more_status="no",void 0!==e.max_parent_id?t.max_parent_id=e.max_parent_id:t.max_parent_id="",void 0!==e.key_private?t.key_private=e.key_private:t.key_private="",void 0!==e.key_set_parent?t.key_set_parent=e.key_set_parent:t.key_set_parent="",void 0!==e.key_get_parent?t.key_get_parent=e.key_get_parent:t.key_get_parent="",void 0!==e.key_view?t.key_view=e.key_view:t.key_view="",void 0!==e.auto_select?t.auto_select=e.auto_select:t.auto_select=!0,void 0!==e.tree_level?t.tree_level=e.tree_level:t.tree_level=!0,null!=e.get_value_type?t.get_value_type=e.get_value_type:t.get_value_type="string",null!=e.get_value_string_format?t.get_value_string_format=e.get_value_string_format:t.get_value_string_format="",null!=e.get_value_string_format_split?t.get_value_string_format_split=e.get_value_string_format_split:t.get_value_string_format_split="",null!=e.get_value_array_format?t.get_value_array_format=e.get_value_array_format:t.get_value_array_format="",void 0!==e.icon_open?t.icon_open=e.icon_open:t.icon_open="",void 0!==e.icon_close?t.icon_close=e.icon_close:t.icon_close="",void 0!==e.icon_min_chil?t.icon_min_chil=e.icon_min_chil:t.icon_min_chil="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ti\xeau \u0111\u1ec1 c\u1ee7a component",value:this.state.data.component_title,onChange:e=>this.onChange_Value("component_title",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),this.renderUI("database","Kho d\u1eef li\u1ec7u (*)"),this.renderUI("getdata","L\u1ea5y d\u1eef li\u1ec7u"),this.renderUI("UI","Giao di\u1ec7n"),this.renderUI("advanced","N\xe2ng cao"))}}var ea=$t;class ta extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min&&(t.min=e.min),null!=e.max&&(t.max=e.max),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"T\xean x\xe1c nh\u1eadn"),s.a.createElement("th",null,"D\u1eef li\u1ec7u"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"B\u1eaft bu\u1ed9c nh\u1eadp"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng nh\u1ecf h\u01a1n"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.min=parseFloat(e.target.value):void 0!==t.min&&delete t.min,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng v\u01b0\u1ee3t qu\xe1"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max=parseFloat(e.target.value):void 0!==t.max&&delete t.max,this.setState({data:t})}}))))))))}}var aa=ta;class ia extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.renderDicionaryTable=(e,t)=>s.a.createElement("div",{className:"tab-pane fade active in"},s.a.createElement("div",{className:"inner-acccordians"},s.a.createElement("div",{className:"collapse in"},s.a.createElement("div",null,void 0!==e&&e.length>0&&e.map((e,a)=>s.a.createElement("div",{className:"panel panel-default",key:a},s.a.createElement("div",{className:"panel-heading pos-relative pad-all-md",id:"heading-3"},s.a.createElement("h4",{className:"panel-title"},s.a.createElement("a",{className:"accordion-toggle collapsed show","data-toggle":"collapse","data-parent":"#accordion",href:"#collapseNine"+a+t},s.a.createElement("span",null,e)))),s.a.createElement("div",{id:"collapseNine"+a+t,className:"panel-collapse collapse",role:"tabpanel","aria-labelledby":"heading-3"},s.a.createElement("div",{className:"panel-body"},this.state.lang_system.map((a,i)=>s.a.createElement("div",{key:i},s.a.createElement(n.a,{key:i,class:"col-sm-12 col-md-12",name:a.view,value:void 0!==this.state.data[t][a.key]?this.state.data[t][a.key][e]:a.key,onChange:i=>{var o=this.state.data;o[t][a.key][e]=i.target.value,this.setState({data:o})}})))))))))));var t=[];if(void 0!==this.props.config&&void 0!==this.props.config.component_title){let e=this.props.config.component_title;t.push(e)}var a=[];if(void 0!==this.props.config&&void 0!==this.props.config.key_view){let e=this.props.config.key_view;e=e.trim(),e=e.split("@");for(let t=0;t<e.length;t++){let i=e[t].trim();if(""!==i&&void 0!==i)if(0===t)a.push(i);else{let e=i.indexOf(" ");if(-1!==e){let t=i.substring(e,i.length).trim();a.push(t)}}}}this.state={lang_system:l.g.getConfigUserDefault("list_lang_config"),data:{ui:this.joinTableColumnAndLang(l.g.getConfigUserDefault("list_lang_config"),t,"ui"),data_view_format:this.joinTableColumnAndLang(l.g.getConfigUserDefault("list_lang_config"),a,"data_view_format")},title:t,data_view_format:a}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}joinTableColumnAndLang(e,t,a){var i=t;void 0===i&&(i=[]);var o=this.props.data;void 0===o&&(o={});var s={};for(let n=0;n<i.length;n++){let t=i[n];if(void 0!==t)for(let i=0;i<e.length;i++){let n=e[i].key;void 0===s[n]&&(s[n]={}),void 0===o[a]&&(o[a]={}),void 0===o[a][n]&&(o[a][n]={});var l=t.trim();void 0===o[a][n][l]?s[n][l]=l:s[n][l]=o[a][n][l]}}return s}render(){return s.a.createElement("div",{className:"line-slide-tab"},s.a.createElement("ul",{className:"nav nav-tabs"},s.a.createElement("li",null,s.a.createElement("a",{"data-toggle":"tab",href:"#tab1","aria-expanded":"true"},"Ti\xeau \u0111\u1ec1")),s.a.createElement("li",null,s.a.createElement("a",{"data-toggle":"tab",href:"#tab2","aria-expanded":"true"},"Giao di\u1ec7n"))),s.a.createElement("div",{className:"tab-content pad-all-lg"},s.a.createElement("div",{id:"tab1",className:"tab-pane fade in active"},this.renderDicionaryTable(this.state.title,"ui")),s.a.createElement("div",{id:"tab2",className:"tab-pane fade in"},this.renderDicionaryTable(this.state.data_view_format,"data_view_format"))))}}var oa=ia;class sa extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var la=sa;a(197);class na extends o.Component{constructor(e){if(super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(ea,{data:e,ref:e=>l.g.setConfigComponent("config",e)}," "),this.getFormRole=e=>s.a.createElement(la,{data:e,ref:e=>l.g.setConfigComponent("role",e)}," "),this.getFormValidate=e=>s.a.createElement(aa,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}," "),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(oa,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}," "),this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var a=this.props.config.structable_read.split(".");if(a.length>0&&void 0!==t[a[0]]&&void 0!==t[a[0]][a[1]])return void this.setState({value:t[a[0]][a[1]]})}this.setState({value:""})}},this.setAdvanced=(e,t)=>{if(e.codeHidden&&e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&(a.putDataSetAdvanced(this.props.default,this.data_select),a.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var i="";void 0!==this.props.config.data_view&&(i=": "+l.g.getOOP(this.data_select,this.props.config.data_view.trim()));var o="";void 0!==this.props.config.data_value&&(o=l.g.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:o,data_view:i})}},this.get=(e,t)=>{var a=!0;if(e.checkError&&"false"===e.checkError&&(a=!1),!a||!this.checkValidate()){var i=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(i=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(i=!0),i)){var o=this.props.config.structable;if(o.includes("|"))for(var s=o.split("|"),l=0;l<s.length;l++)this.readData(s[l],e.inform);else this.readData(o,e.inform)}}},this.checkValidate=()=>{var e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:l.g.getLang("validateRequest")}))),e){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.getResultData=()=>{let e=this.state.json_tree,t={value:[]};return"string"===this.props.config.get_value_type&&(t={value:""}),this.convertResultData(e,t),t},this.convertResultData=(e,t)=>{if(void 0!==this.props.config.get_value_type)switch(this.props.config.get_value_type){case"string":let a="";void 0!==this.props.config.get_value_string_format&&(a=this.props.config.get_value_string_format);for(let o=0;o<e.chil.length;o++){const a=e.chil[o];this.convertResultData(a,t)}if(!0===e.my_system.isChecked&&""!==a){""!==l.g.getOOP(e.value,a)&&(t.value+=l.g.getOOP(e.value,a),void 0!==this.props.config.get_value_string_format_split&&(t.value+=this.props.config.get_value_string_format_split))}break;case"array":let i="";if(void 0!==this.props.config.get_value_array_format&&(i=this.props.config.get_value_array_format,i=l.g.parseJson(i)),!0===e.my_system.isChecked&&void 0!==e.value){let a={};for(let t in i)a[t]=l.g.getOOP(e.value,i[t]);t.value.push(a)}for(let o=0;o<e.chil.length;o++){const a=e.chil[o];this.convertResultData(a,t)}}},this.changeView=(e,t,a)=>{let i="",o=(t=t.trim()).split("@");for(let s=0;s<o.length;s++){let t=o[s].trim();if(""!==t&&void 0!==t)if(0===s)void 0!==this.state.lang[a]&&void 0!==this.state.lang[a][this.state.lang_select]&&void 0!==this.state.lang[a][this.state.lang_select][t]?i+=this.state.lang[a][this.state.lang_select][t]+" ":i+=o[s];else{let o=t.indexOf(" ");if(-1===o)i+=l.g.getOOP(e,t)+" ";else if(-1!==o){let s=t.substring(o,t.length).trim(),n=t.substring(0,o).trim();i+=l.g.getOOP(e,n)+" ",void 0!==this.state.lang[a]&&void 0!==this.state.lang[a][this.state.lang_select]&&void 0!==this.state.lang[a][this.state.lang_select][s]?i+=this.state.lang[a][this.state.lang_select][s]+" ":i+=s}}}return i},this.reload=(e,t)=>{this.setState({value:this.data_default})},this.createJsonTree=(e,t,a,i)=>{if(void 0===e.parent&&(e.parent=[]),void 0!==i)for(let o=0;o<i.length;o++){const t=i[o];e.parent.push(t)}void 0!==a&&!1===e.parent.includes(a)&&e.parent.push(a),void 0===e&&(e={}),void 0===e.chil&&(e.chil=[]),void 0===e.my_system&&(e.my_system={isOpen:!0,isChecked:!0,isDisable:!1});if(e.parent.length<=this.tree_level||0===this.tree_level)for(let o=0;o<t.length;o++){const i=t[o];if(l.g.getOOP(i,this.key_get_parent)===a){let a=e.chil.length;e.chil[a]={value:i};let o=l.g.getOOP(i,this.key_set_parent);void 0!==o&&this.createJsonTree(e.chil[a],t,o,e.parent)}}},this.checkUnCheckChil=e=>{for(let t in e.data){if(!1===e.data[t].my_system.isChecked)return!0;if(!0===e.data[t].my_system.isDisable)return!0;this.checkUnCheckChil(e.data[t])}return!1},this.eventOnTree=(e,t)=>{let a=l.g.getOOP(e.value,this.key_private),i=this.state.json_tree;switch(t){case"change_isOpen":this.changeTreeItem(i,this.key_private,a,"isOpen",!e.my_system.isOpen);break;case"change_isChecked":this.changeTreeItem(i,this.key_private,a,"isChecked",!e.my_system.isChecked);break;case"isChecked":this.changeTreeItem(i,this.key_private,a,"isChecked",!0)}for(;"true"===this.auto_select;){let e=JSON.stringify(i);if(this.updateCheckboxTree(i),e===JSON.stringify(i))break}this.setState({json_tree:i})},this.changeTreeItem=(e,t,a,i,o)=>{let s=e.value;if(l.g.getOOP(s,t)===a)e.my_system[i]=o,"true"===this.auto_select&&this.changeTreeChil(e,i,o);else for(let l=0;l<e.chil.length;l++){const s=e.chil[l];this.changeTreeItem(s,t,a,i,o)}},this.changeTreeChil=(e,t,a)=>{for(let i=0;i<e.chil.length;i++){let o=e.chil[i];o.my_system[t]=a,this.changeTreeChil(o,t,a)}},this.checkTreeChil=(e,t,a,i)=>{for(let o=0;o<e.chil.length;o++){let s=e.chil[o];s.my_system[t]===a?i.value=!0:this.checkTreeChil(s,t,a,i)}},this.updateCheckboxTree=e=>{let t={value:!1},a={value:!1};this.checkTreeChil(e,"isChecked",!0,t),this.checkTreeChil(e,"isChecked",!1,a),!0===t.value&&!0===a.value?(e.my_system.isChecked=!0,e.my_system.isDisable=!0):!0===t.value?(e.my_system.isChecked=!0,e.my_system.isDisable=!1):!0===a.value?(e.my_system.isChecked=!1,e.my_system.isDisable=!1):e.my_system.isDisable=!1;for(let i=0;i<e.chil.length;i++){let t=e.chil[i];this.updateCheckboxTree(t)}},this.renderTreeView=e=>{if(void 0!==e&&e.chil.length>0)return s.a.createElement("div",{className:"item-jTreeView"},s.a.createElement("ul",null,e.chil.map((e,t)=>s.a.createElement("li",{key:t},s.a.createElement("span",{style:{position:"relative",display:"inline-block"}},!0===e.my_system.isDisable&&s.a.createElement("div",{style:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",cursor:"pointer"},onClick:()=>this.eventOnTree(e,"isChecked")}),s.a.createElement("input",{type:"checkbox",checked:e.my_system.isChecked,onChange:()=>this.eventOnTree(e,"change_isChecked"),disabled:e.my_system.isDisable})),e.chil.length>0?!0===e.my_system.isOpen?s.a.createElement("i",{className:this.icon_close_,onClick:()=>this.eventOnTree(e,"change_isOpen")}):s.a.createElement("i",{className:this.icon_open_,onClick:()=>this.eventOnTree(e,"change_isOpen")}):s.a.createElement("i",{className:this.icon_min_chil_}),s.a.createElement("span",null,this.changeView(e.value,this.key_view,"data_view_format")),!0===e.my_system.isOpen&&this.renderTreeView(e)))))},this.data_gb=[],void 0!==this.props.config.data_type){if("query"===this.props.config.data_type&&void 0!==this.props.config.data_query){let e=this.props.config.data_query;if(void 0!==e){let t=l.g.getDataLimited(e,0,999999);void 0!==t?this.data_gb=t.data:l.g.AppException("#jSelect.constructor#1","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","data")}}if("json"===this.props.config.data_type&&void 0!==this.props.config.data_json){let e=l.g.parseJson(this.props.config.data_json);void 0!==e?this.data_gb=e:l.g.AppException("#jSelect.constructor#1","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","data")}}if(void 0!==this.props.config.data_more&&""!==this.props.config.data_more){let e=l.g.parseJson(this.props.config.data_more);if(void 0!==e)for(let t=0;t<e.length;t++){const a=e[t];this.data_gb.unshift(a)}}if(void 0!==this.props.config){this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var t=this.props.config.component_title;void 0===t&&(t=""),this.key_private="group_menu.group_menu_id",void 0!==this.props.config.key_private&&(this.key_private=this.props.config.key_private),this.key_set_parent="group_menu.group_menu_id",void 0!==this.props.config.key_set_parent&&(this.key_set_parent=this.props.config.key_set_parent),this.key_get_parent="group_menu.group_menu_parent",void 0!==this.props.config.key_get_parent&&(this.key_get_parent=this.props.config.key_get_parent),this.key_view="group_menu.group_menu_name",void 0!==this.props.config.key_view&&(this.key_view=this.props.config.key_view),this.icon_close_="",void 0!==this.props.config.icon_close&&(this.icon_close_=this.props.config.icon_close),this.icon_open_="",void 0!==this.props.config.icon_open&&(this.icon_open_=this.props.config.icon_open),this.icon_min_chil_="",void 0!==this.props.config.icon_min_chil&&(this.icon_min_chil_=this.props.config.icon_min_chil),this.auto_select=!0,void 0!==this.props.config.auto_select&&(this.auto_select=this.props.config.auto_select),this.tree_level="0",void 0!==this.props.config.tree_level&&(this.tree_level=this.props.config.tree_level),this.tree_level=parseInt(this.tree_level),this.max_parent_id="",void 0!==this.props.config.max_parent_id&&(this.max_parent_id=this.props.config.max_parent_id),""===this.max_parent_id&&(this.max_parent_id="0")}var a=this.props.validate;void 0===a&&(a={});var i=this.props.lang;void 0===i&&(i={}),this.callform_detail="",this.callform="",this.data_select={},this.state={value:this.data_default,value_old:"",lang:i,lang_select:l.g.getLangKey(),validate:a,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",data_gb:this.data_gb,json_tree:{},component_title:t,key_component:l.g.autoID(),update:!1};let o={};this.createJsonTree(o,this.state.data_gb,this.max_parent_id,[]),this.state.json_tree=o}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}readData(e,t){let a=this.getResultData();if(e.includes(".")){var i=e.split(".");void 0===t||"true"===t?l.g.putData(i[0],i[1],a,this.props.infoA):"false"===t&&l.g.putDataGB(i[0],i[1],a),l.g.putDataGB(i[0],i[1],"")}}render(){return s.a.createElement("div",{className:this.props.default.class},s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,void 0!==this.state.lang.ui&&void 0!==this.state.lang.ui[this.state.lang_select]&&void 0!==this.state.lang.ui[this.state.lang_select][this.state.component_title]?this.state.lang.ui[this.state.lang_select][this.state.component_title]:this.state.component_title,""===this.state.component_title&&s.a.createElement("small",{className:"form-text text-success"},"\xa0")),this.renderTreeView(this.state.json_tree,this.state.key_component))))}}var ra=na;class ca extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.data_elearning?t.data_elearning=e.data_elearning:t.data_elearning="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u \u0111\xe0o t\u1ea1o",value:this.state.data.data_elearning,onChange:e=>this.onChange_Value("data_elearning",e)}))}}var da=ca;class ha extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min&&(t.min=e.min),null!=e.max&&(t.max=e.max),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"T\xean x\xe1c nh\u1eadn"),s.a.createElement("th",null,"D\u1eef li\u1ec7u"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"B\u1eaft bu\u1ed9c nh\u1eadp"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng nh\u1ecf h\u01a1n"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.min=parseFloat(e.target.value):void 0!==t.min&&delete t.min,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng v\u01b0\u1ee3t qu\xe1"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max=parseFloat(e.target.value):void 0!==t.max&&delete t.max,this.setState({data:t})}}))))))))}}var _a=ha;class ua extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var ga=ua;class ma extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var pa=ma;class fa extends o.Component{constructor(e){super(e),this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(da,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(pa,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(_a,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(ga,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.getCode=()=>this.props.default.code,this.getElearning=()=>y.a.findDOMNode(this),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}};var t="";void 0!==this.props.config.data_elearning&&(t=this.props.config.data_elearning),this.ob_mde=void 0,this.state={data_elearning:t,lang_select:l.g.getLangKey(),lang_system:l.g.getConfigUserDefault("list_lang_config"),data:{}}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this);let e=document.body.getElementsByClassName("content");for(let t of e)for(let e of t.getElementsByTagName("img"))e.style.width="100%"},l.g.getTimeAddComponent()),this.downLoadOneELearning()}downLoadOneELearning(){for(var e="",t=0;t<this.state.lang_system.length;t++)e+=""===e?this.state.lang_system[t].key:";"+this.state.lang_system[t].key;Object(te.b)([{txcode:"#sys:bo-load-oneELearing",input:{eleaning_id:this.state.data_elearning,all_lang:e}}],{}).then(e=>{this.setState({data:l.g.foGetData("data",e)})},e=>{})}render(){return s.a.createElement("div",{className:this.props.default.class},s.a.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:l.g.markdown_render(this.state.data[this.state.lang_select])}}))}}var va=fa;class ba extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),void 0!==e.action?t.action=e.action:t.action="",void 0!==e.structable?t.structable=e.structable:t.structable="",void 0!==e.structable_read?t.structable_read=e.structable_read:t.structable_read="",void 0!==e.data_default?t.data_default=e.data_default:t.data_default="{}",void 0!==e.callform?t.callform=e.callform:t.callform="",void 0!==e.hidden?t.hidden=e.hidden:t.hidden="",void 0!==e.is_open?t.is_open=e.is_open:t.is_open="true",void 0!==e.has_default?t.has_default=e.has_default:t.has_default="true",void 0!==e.value_default?t.value_default=e.value_default:t.value_default="",void 0!==e.address_default?t.address_default=e.address_default:t.address_default="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"L\u1ea5y data t\u1eeb form",value:this.state.data.callform,onChange:e=>this.onChange_Value("callform",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"\u1ea8n ti\xeau \u0111\u1ec1 form",value:this.state.data.hidden,data:[{title:"Kh\xf4ng \u1ea9n",code:"false"},{title:"\u1ea8n",code:"true"}],onChange:e=>this.onChange_Value("hidden",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"is_open",value:this.state.data.is_open,data:[{title:"M\u1edf",code:"true"},{title:"\u0110\xf3ng",code:"false"}],onChange:e=>this.onChange_Value("is_open",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Tr\u1ea3 v\u1ec1 data m\u1eb7c \u0111\u1ecbnh",value:this.state.data.has_default,data:[{title:"C\xf3",code:"true"},{title:"Kh\xf4ng",code:"false"}],onChange:e=>this.onChange_Value("has_default",e)}),"true"===this.state.data.has_default&&s.a.createElement("div",null,s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"N\u01a1i l\u01b0u",value:this.state.data.address_default,onChange:e=>this.onChange_Value("address_default",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Gi\xe1 Tr\u1ecb L\u01b0u",value:this.state.data.value_default,onChange:e=>this.onChange_Value("value_default",e)})))}}var ya=ba;class Da extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){return{}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"}))}}var Ca=Da;class Aa extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var ka=Aa;class Ma extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var xa=Ma;class Na extends o.Component{constructor(e){super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getCodeHidden=()=>this.props.default.codeHidden,this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.checkIsLoading=()=>this.isLoading,this.setCallFormBack=(e,t)=>{if(void 0!==e.key_form&&void 0!==e.key&&e.key===this.props.default.codeHidden){this.muti_form_didMount[this.muti_form_didMount.length]=e.key_form,this.isLoading=!0,this.setState({isLoadingComponent:!1});var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.hasOwnProperty("componentIsLoaded")&&a.componentIsLoaded(this.props.default.codeHidden)}},this.getFormConfig=e=>s.a.createElement(ya,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(xa,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(Ca,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(ka,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.getAdvanced=(e,t)=>{if(this.muti_form_didMount.length>0){var a=l.g.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==a)return a.getDataAll();l.g.AppException("#jMutivalue.setDataCallForm","form is undefined","system")}else l.g.AppException("#jMutivalue.setDataCallForm","muti_form_didMount is 0","system")},this.set=(e,t)=>{if(this.setState({isLoadingComponent:!0}),void 0!==t)if(void 0===this.props.config.structable_read)this.reloadForm(this.muti_form_didMount[0]),this.setState({isLoadingComponent:!1});else{if(this.props.config.structable_read.includes(".")){var a=this.props.config.structable_read.split(".");if(a.length>0&&void 0!==t[a[0]]&&void 0!==t[a[0]][a[1]]){let e=t[a[0]][a[1]];return e=JSON.parse(JSON.stringify(e)),"object"!==typeof e&&(e={}),e={muti:e},this.setState({value:e}),void this.setDataCallForm(e)}return void this.setDataCallForm(void 0)}var i=this.props.config.structable_read;if(void 0!==t[i]){let e=t[i];return e=JSON.parse(JSON.stringify(e)),"object"!==typeof e&&(e={}),e={muti:e},this.setState({value:e}),void this.setDataCallForm(e)}this.setDataCallForm(void 0)}else this.setDataCallForm(void 0)},this.setAdvanced=(e,t)=>{var a=l.g.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==a&&a.hasOwnProperty("callDirFromSupport")){let i=this.props.default.code,o=new RegExp(i+"\\(([^)]*)\\)","g"),s=l.g.getElementWithRegex(o,e.list_component);s||(s=e.list_component),"*"===s?a.putDataAll_andSet(t):a.callDirFromSupport("setAdvanced",{list_component:s,list_view:e.list_view},t)}},this.getInfoErrror=()=>{let e="";var t=l.g.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==t&&t.hasOwnProperty("getValidateForm")){let a=t.getValidateForm();for(let t=0;t<a.length;t++){const i=a[t];e+=i.key+": "+i.info+"; "}}if(""!==e)return{info:e,key:this.props.default.name,infoComponent:this.props.default}},this.get=(e,t)=>{var a=this.props.config.structable;if(a.includes("|"))for(var i=a.split("|"),o=0;o<i.length;o++)this.readData(i[o],e.inform);else this.readData(a,e.inform)},this.checkValidate=()=>{var e=!1,t=l.g.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==t&&(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("callDirFromSupport")&&(t.callDirFromSupport("clearError",{},{}),t.callDirFromSupport("checkValidate",{},{}),t.hasOwnProperty("getFormValidate")&&(e=t.getFormValidate()))),e){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{!0!==this.props.config.notReload&&this.setState({value:this.data_default},()=>{this.reloadForm(this.muti_form_didMount[0])})},this.getDataCallForm=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var a=l.g.getFormAppAuto(e);if(void 0===a)return"";if(a.hasOwnProperty("setFormValidateFromFunctionClient")&&a.setFormValidateFromFunctionClient(!1),a.hasOwnProperty("callDirFromSupport")){let e=!1;if(!1!==t&&(a.callDirFromSupport("clearError",{},{}),a.callDirFromSupport("checkValidate",{},{}),e=a.getFormValidate()),!e&&(a.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),a.hasOwnProperty("getData")))return a.getData("")}},this.toolAutoValue=()=>{var e=l.g.getFormAppAuto(this.muti_form_didMount[0]);void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("toolAutoValue",{list_component:"*"},{})},this.setCMD=(e,t)=>{var a=l.g.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==a&&a.hasOwnProperty("callDirFromSupport")){let i=this.props.default.code,o=new RegExp(i+"\\(([^)]*)\\)","g"),s=l.g.getElementWithRegex(o,e.list_component);s||(s="*"),a.callDirFromSupport("setCMD",{list_component:s},t)}},this.clearError=()=>{var e=l.g.getFormAppAuto(this.muti_form_didMount[0]);void 0!==e&&e.hasOwnProperty("clearError")&&e.clearError()},this.reloadForm=e=>{var t=l.g.getFormAppAuto(e);void 0!==t&&(t.hasOwnProperty("reload")&&t.reload({}),t.hasOwnProperty("clearError")&&t.clearError())},this.setDataCallForm=e=>{if(this.muti_form_didMount.length>0){var t=l.g.getFormAppAuto(this.muti_form_didMount[0]);void 0!==t?this.isLoading&&(void 0!==e?t.putDataAll_andSet(e):t.clearForm(),this.setState({isLoadingComponent:!1})):l.g.AppException("#jMutivalue.setDataCallForm","form is undefined","system")}else l.g.AppException("#jMutivalue.setDataCallForm","muti_form_didMount is 0","system");this.setState({isLoadingComponent:!1})},this.renderButton=()=>{const e=this.state.isOpenForm;return s.a.createElement("div",{style:{height:"34px"}},s.a.createElement("div",{className:"btn btn-primary","data-toggle":"collapse",href:"#collapseOne"+this.id_component,onClick:()=>{this.setState({isOpenForm:!e})}},e?s.a.createElement("i",{className:"fa fa-minus-circle","aria-hidden":"true"}):s.a.createElement("i",{className:"fa fa-plus-circle","aria-hidden":"true"})))},this.config={},this.props.config&&(this.config=this.props.config),this.ref_callForm=s.a.createRef(),this.data_default="",void 0!==this.config.data_default&&(this.data_default=this.config.data_default);var t=this.props.validate;void 0===t&&(t={}),this.data_select={};var a=this.props.lang;void 0===a&&(a={}),this.is_open="true"===this.config.is_open;let i={mode:"",col_text:"",col_input:""};void 0!==e.infoA.mode_form&&(i=e.infoA.mode_form);let o={parent:"",child:""},n={class:""},r=void 0!==this.props.ofgroup&&""!==this.props.ofgroup&&"false"!==this.props.ofgroup,c=void 0!==e.infoA.mode_form&&"1"===e.infoA.mode_form.mode,d=!!this.props.ofgroup_child;if(c)if(d)o={parent:"",child:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:void 0!==this.props.css_default.class&&""!==this.props.css_default.class?this.props.css_default.class:"col-sm-4"};else if(r){let e=4/(this.props.ofgroup_data.length+1);n={class:"col-sm-"+parseInt(e<0?1:e)},o={parent:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:"col-sm-6",child:""}}else o={parent:"col-sm-6",child:""};else o=d?{parent:"",child:this.props.default.class+" jwebui-ofgroup"}:r?0===this.props.ofgroup_data.length?{parent:this.props.default.class,child:""}:{parent:this.props.default.class_ofgroup,child:this.props.default.class+" jwebui-ofgroup-fisrt"}:{parent:this.props.default.class,child:""};this.state={value:this.data_default,value_old:"",lang:a,lang_select:l.g.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpenForm:this.is_open,call_form:this.props.config.callform||"",config_mode:i,class_config:o,css_default:n,isLoadingComponent:!0},this.id_component=l.g.autoID(),this.isLoading=!1,this.isErrorLoadForm=!1,this.muti_form_didMount=[]}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.lang!==e.lang&&this.setState({lang:this.props.lang}),this.props.validate!==e.validate&&this.setState({validate:this.props.validate}),this.props.property!==e.property&&this.setState({property:this.props.property})}componentDidMount(){let e=this.props.config.callform;e&&""!==e.trim()&&void 0!==this.ref_callForm.current&&Object(A.b)(e,this.ref_callForm.current,this.props.infoA,this.props.default,this.props.default.codeHidden),setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}readData(e,t){const a=this.getDataCallForm(this.muti_form_didMount[0],!1);if(e.includes(".")){var i=e.split(".");if(void 0===t)l.g.putData(i[0],i[1],a.muti,this.props.infoA);else if("true"===t&&void 0!==a){const{address_default:e,value_default:t,has_default:o}=this.props.config;if(l.g.putData(i[0],i[1],a.muti,this.props.infoA),"true"===o){let i=e.split(".")||[],o=t.split(".")||[];if(2===i.length&&2===o.length){let e=a||{};e=e[o[0]]||{},e=e[o[1]],l.g.putData(i[0],i[1],e,this.props.infoA)}}}else"false"===t?l.g.putDataGB(i[0],i[1],a):l.g.putDataGB(i[0],i[1],"")}}render(){let e=this.state.lang||{};e=e[this.state.lang_select]||this.props.default.name;const t=Object(v.b)("uMultiValue"),a=Object(v.b)("uView");return s.a.createElement(a,{class:"col-12"},s.a.createElement(t,{title:e,class:this.props.default.class,isLoadingEnd:!this.state.isLoadingComponent,isOpenDefault:this.state.isOpenForm},s.a.createElement("div",{ref:this.ref_callForm})))}}var wa=Na;class Sa extends o.Component{constructor(e){super(e),this.getValue=()=>{let e=this.state.data;return"cdlist"===this.state.data.data_type&&(e.cdlist=this.refs.ref_designCdlist.get(),e.data_gb=e.cdlist.query),e},this.state={data:this.readConfig(this.props.data)}}readConfig(e){let t={};return void 0===e&&(e={}),e.structable,t.structable="word_typing.key_word_ex",null!=e.structable_read?t.structable_read=e.structable_read:t.structable_read="word_typing.key_word_ex",null!=e.data_default?t.data_default=e.data_default:t.data_default="",null!=e.data_gb?t.data_gb=e.data_gb:t.data_gb="",null!=e.data_json?t.data_json=e.data_json:t.data_json="",null!=e.cdlist?t.cdlist=e.cdlist:t.cdlist="",null!=e.data_display?t.data_display=e.data_display:t.data_display="c_cdlist.cdid",null!=e.isSearch?t.isSearch=e.isSearch:t.isSearch="false",null!=e.title_tag_input?t.title_tag_input=e.title_tag_input:t.title_tag_input="",null!=e.tag_display?t.tag_display=e.tag_display:t.tag_display="c_cdlist.cdid",null!=e.format_col?t.format_col=e.format_col:t.format_col="true",null!=e.data_type?t.data_type=e.data_type:t.data_type="cdlist",null!=e.type_value_string?t.type_value_string=e.type_value_string:t.type_value_string="c_cdlist.cdid",null!=e.separator?t.separator=e.separator:t.separator=";",null!=e.display_mixing_col?t.display_mixing_col=e.display_mixing_col:t.display_mixing_col="@c_cdlist.cdid",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){let a=this.state.data;a[e]=t.target.value,this.setState({data:a})}onChange(e,t){let a=this.state.data;a[e]=t.target.value,this.setState({data:a,errorJson:!1})}onBlur(e,t){let a=this.state.data,i=!1;try{if(""!==t.target.value){let i=JSON.parse(t.target.value);a[e]=JSON.stringify(i,null,4)}}catch(o){i=!0,console.error(o)}this.setState({data:a,errorJson:i})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"T\xean ti\xeau \u0111\u1ec1",value:this.state.data.title_tag_input,onChange:e=>this.onChange_Value("title_tag_input",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"D\xf9ng search",value:this.state.data.isSearch,data:[{title:"Kh\xf4ng",code:"false"},{title:"C\xf3",code:"true"}],onChange:e=>this.onChange_Value("isSearch",e)}),s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"prtm-full-block inner-acccordians"},s.a.createElement("div",{className:"panel panel-inverse mrgn-b-none"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-7 col-sm-7 col-md-8 col-lg-8"},s.a.createElement("h4",{className:"text-capitalize mrgn-all-none"},"Kho d\u1eef li\u1ec7u")," "),s.a.createElement("div",{className:"col-xs-5 col-sm-5 col-md-4 col-lg-4"},s.a.createElement("div",{className:"tab-icon pull-right"},s.a.createElement("div",{"data-toggle":"collapse","data-target":"#database","aria-expanded":"true",style:{cursor:"pointer"}}," ",s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"})," "))))),s.a.createElement("div",{id:"database",className:"collapse","aria-expanded":"true"},s.a.createElement("div",{className:"pad-all-md"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Lo\u1ea1i d\u1eef li\u1ec7u",value:this.state.data.data_type,data:[{title:"Query",code:"database"},{title:"Json",code:"json"},{title:"Cdlist",code:"cdlist"}],onChange:e=>this.onChange_Value("data_type",e)}),"database"===this.state.data.data_type&&s.a.createElement("div",null,s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Query l\u1ea5y d\u1eef li\u1ec7u",value:this.state.data.data_gb,onChange:e=>this.onChange_Value("data_gb",e)})),"cdlist"===this.state.data.data_type&&s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},s.a.createElement(Ie,{cdlist:this.state.data.cdlist,class:"col-sm-12 col-md-12",name:"CDList",ref:"ref_designCdlist"})),"json"===this.state.data.data_type&&s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12",style:{marginBottom:"2rem"}},"D\u1eef li\u1ec7u d\u1ea1ng json",s.a.createElement("textarea",{className:"form-control",rows:"10",value:this.state.data.data_json,id:"data_json",onChange:e=>{this.onChange("data_json",e)},onBlur:e=>{this.onBlur("data_json",e)},placeholder:"data_json"}))))))),s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"prtm-full-block inner-acccordians"},s.a.createElement("div",{className:"panel panel-inverse mrgn-b-none"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-7 col-sm-7 col-md-8 col-lg-8"},s.a.createElement("h4",{className:"text-capitalize mrgn-all-none"},"C\u1ea5u h\xecnh d\u1eef li\u1ec7u")," "),s.a.createElement("div",{className:"col-xs-5 col-sm-5 col-md-4 col-lg-4"},s.a.createElement("div",{className:"tab-icon pull-right"},s.a.createElement("div",{"data-toggle":"collapse","data-target":"#get_set_data","aria-expanded":"true",style:{cursor:"pointer"}}," ",s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"})," "))))),s.a.createElement("div",{id:"get_set_data",className:"collapse","aria-expanded":"true"},s.a.createElement("div",{className:"pad-all-md"},s.a.createElement("div",null,s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"C\u1ea5u h\xecnh d\u1eef li\u1ec7u",value:this.state.data.type_value_string,onChange:e=>this.onChange_Value("type_value_string",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1ea5u ph\xe2n c\xe1ch",value:this.state.data.separator,onChange:e=>this.onChange_Value("separator",e)}))))))),s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"prtm-full-block inner-acccordians"},s.a.createElement("div",{className:"panel panel-inverse mrgn-b-none"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-7 col-sm-7 col-md-8 col-lg-8"},s.a.createElement("h4",{className:"text-capitalize mrgn-all-none"},"Hi\u1ec3n th\u1ecb l\u01b0\u1edbi d\u1eef li\u1ec7u")," "),s.a.createElement("div",{className:"col-xs-5 col-sm-5 col-md-4 col-lg-4"},s.a.createElement("div",{className:"tab-icon pull-right"},s.a.createElement("div",{"data-toggle":"collapse","data-target":"#typeTable","aria-expanded":"true",style:{cursor:"pointer"}}," ",s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"})," "))))),s.a.createElement("div",{id:"typeTable",className:"collapse","aria-expanded":"true"},s.a.createElement("div",{className:"pad-all-md"},s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"Tr\u1ed9n c\u1ed9t/\u0110a c\u1ed9t",value:this.state.data.format_col,data:[{title:"D\xf9ng \u0111a c\u1ed9t",code:"true"},{title:"D\xf9ng tr\u1ed9n c\u1ed9t",code:"false"}],onChange:e=>this.onChange_Value("format_col",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1eef li\u1ec7u hi\u1ec3n th\u1ecb (c\xe1ch nhau b\u1eb1ng d\u1ea5u ';')",value:this.state.data.data_display,onChange:e=>this.onChange_Value("data_display",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ti\xeau \u0111\u1ec1 th\u1ebb tag",value:this.state.data.tag_display,onChange:e=>this.onChange_Value("tag_display",e)}),"false"===this.state.data.format_col&&s.a.createElement("div",null,s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"C\xe1ch hi\u1ec3n th\u1ecb d\u1eef li\u1ec7u",value:this.state.data.display_mixing_col,onChange:e=>this.onChange_Value("display_mixing_col",e)}))))))))}}var Ta=Sa;class Ea extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min&&(t.min=e.min),null!=e.max&&(t.max=e.max),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"T\xean x\xe1c nh\u1eadn"),s.a.createElement("th",null,"D\u1eef li\u1ec7u"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"B\u1eaft bu\u1ed9c nh\u1eadp"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))))))))}}var Oa=Ea;class Ia extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var Fa=Ia;class La extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var ja=La;class Ra{}Ra.getProperty=()=>({main:[{tagType:{style:[{backgroundColor:"#ff471a"},{marginRight:"4px"}],attr:[{tabIndex:-1}],class:"tag label label-info tag-focus"}},{tagData:{style:[{backgroundColor:"#adad85"},{marginRight:"4px"}],attr:[{tabIndex:-1}],class:"tag label label-info tag-focus"}}],position:[{tagRemove:{style:[{marginRight:"10px"}],attr:[{tabIndex:-1}],class:""}}]});var za=Ra;class Pa extends o.Component{constructor(e){super(e),this.renderTable=e=>e.map((t,a)=>s.a.createElement("table",{key:a},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,Object.keys(t)))),s.a.createElement("tbody",null,t[Object.keys(t)[0]].style.map((i,o)=>s.a.createElement("tr",{key:o},s.a.createElement("td",null,void 0!==Object.keys(i)[1]?s.a.createElement("input",{type:"text",tabIndex:-1,className:"form-control",value:Object.keys(i)[0],readOnly:!0}):s.a.createElement("input",{type:"text",className:"form-control",value:Object.keys(i)[0],onChange:s=>{let{value:l}=s.target,n=Object.values(i)[0];e[a][Object.keys(t)[0]].style[o]={[l]:void 0!==n?n:""},this.setState({data:this.state.data})}})),s.a.createElement("td",null,s.a.createElement("input",{type:"text",className:"form-control",value:Object.values(i)[0],onChange:s=>{let{value:l}=s.target,n=e[a][Object.keys(t)[0]].style[o],r=Object.keys(i)[0];void 0!==r?n[r]=l:e[a][Object.keys(t)[0]].style[o]={"*":l},this.setState({data:this.state.data})}})),s.a.createElement("td",null,void 0!==Object.values(i)[1]?s.a.createElement("input",{type:"text",tabIndex:-1,className:"form-control",value:Object.values(i)[1],readOnly:!0}):s.a.createElement("i",{className:"fa fa-minus-square",onClick:()=>{t[Object.keys(t)].style.splice(o,1),this.setState({data:this.state.data})}})),s.a.createElement("td",null,0===o&&s.a.createElement("i",{className:"fa fa-plus-square",onClick:()=>{t[Object.keys(t)].style.push({"":""}),this.setState({data:this.state.data})}})))),t[Object.keys(t)].attr.map((i,o)=>s.a.createElement("tr",{key:o},s.a.createElement("td",null,void 0!==Object.keys(i)[1]?s.a.createElement("input",{type:"text",tabIndex:-1,className:"form-control",value:Object.keys(i)[0],readOnly:!0}):s.a.createElement("input",{type:"text",className:"form-control",value:Object.keys(i)[0],onChange:s=>{let{value:l}=s.target,n=Object.values(i)[0];e[a][Object.keys(t)[0]].attr[o]={[l]:void 0!==n?n:""},this.setState({data:this.state.data})}})),s.a.createElement("td",null,s.a.createElement("input",{type:"text",className:"form-control",value:Object.values(i)[0],onChange:s=>{let{value:l}=s.target,n=e[a][Object.keys(t)[0]].attr[o],r=Object.keys(i)[0];void 0!==r?n[r]=l:e[a][Object.keys(t)[0]].attr[o]={"*":l},this.setState({data:this.state.data})}})),s.a.createElement("td",null,void 0!==Object.values(i)[1]?s.a.createElement("input",{type:"text",tabIndex:-1,className:"form-control",value:Object.values(i)[1],readOnly:!0}):s.a.createElement("i",{className:"fa fa-minus-square",onClick:()=>{t[Object.keys(t)].attr.splice(o,1),this.setState({data:this.state.data})}})),s.a.createElement("td",null,0===o&&s.a.createElement("i",{className:"fa fa-plus-square",onClick:()=>{t[Object.keys(t)].attr.push({"":""}),this.setState({data:this.state.data})}})))),s.a.createElement("tr",null,s.a.createElement("td",null),s.a.createElement("td",null,s.a.createElement("input",{type:"text",className:"form-control",value:t[Object.keys(t)].class.value,onChange:i=>{let{value:o}=i.target;e[a][Object.keys(t)[0]].class.value=o,this.setState({data:this.state.data})}})),s.a.createElement("td",null,s.a.createElement("input",{type:"text",tabIndex:-1,className:"form-control",value:t[Object.keys(t)].class.default_,readOnly:!0})))))),this.get=()=>this.state.data;let t=this.props.propertyDefault;for(let i of t.main)for(let e in i){let t=[],a=[];for(let o of i[e].style)t.push({[Object.keys(o)[0]]:"#",default_:Object.values(o)[0]});i[e].style=t;for(let o of i[e].attr)a.push({[Object.keys(o)[0]]:"#",default_:Object.values(o)[0]});i[e].attr=a,i[e].class={value:"#",default_:i[e].class}}for(let i of t.position)for(let e in i){let t=[],a=[];for(let o of i[e].style)t.push({[Object.keys(o)[0]]:"#",default_:Object.values(o)[0]});i[e].style=t;for(let o of i[e].attr)a.push({[Object.keys(o)[0]]:"#",default_:Object.values(o)[0]});i[e].attr=a,i[e].class={value:"#",default_:i[e].class}}let a=this.props.properties;if(void 0!==a.main)for(let i=0;i<a.main.length;i++)for(let e in a.main[i])if(void 0!==t.main[i]&&void 0!==t.main[i][e]&&void 0!==a.main[i]){for(let o=0;o<a.main[i][e].style.length;o++){let s=a.main[i][e].style[o],l=t.main[i][e].style;l.some(e=>Object.keys(e)[0]===Object.keys(s)[0])?"#"!==Object.values(s)[0]&&(void 0!==l[o]?l[o][Object.keys(l[o])[0]]=Object.values(s)[0]:l.push(s)):l.push(s)}for(let o=0;o<a.main[i][e].attr.length;o++){let s=a.main[i][e].attr[o],l=t.main[i][e].attr;l.some(e=>Object.keys(e)[0]===Object.keys(s)[0])?"#"!==Object.values(s)[0]&&(void 0!==l[o]?l[o][Object.keys(l[o])[0]]=Object.values(s)[0]:l.push(s)):l.push(s)}void 0!==a.main[i][e].class&&"#"!==a.main[i][e].class.value&&(t.main[i][e].class.value=a.main[i][e].class)}if(void 0!==a.position)for(let i=0;i<a.position.length;i++)for(let e in a.position[i]){for(let o=0;o<a.position[i][e].style.length;o++){let s=a.position[i][e].style[o],l=t.position[i][e].style;l.some(e=>Object.keys(e)[0]===Object.keys(s)[0])?"#"!==Object.values(s)[0]&&(void 0!==l[o]?l[o][Object.keys(l[o])[0]]=Object.values(s)[0]:l.push(s)):l.push(s)}for(let o=0;o<a.position[i][e].attr.length;o++){let s=a.position[i][e].attr[o],l=t.position[i][e].attr;l.some(e=>Object.keys(e)[0]===Object.keys(s)[0])?"#"!==Object.values(s)[0]&&(void 0!==l[o]?l[o][Object.keys(l[o])[0]]=Object.values(s)[0]:l.push(s)):l.push(s)}void 0!==a.position[i][e].class&&"#"!==a.position[i][e].class.value&&(t.position[i][e].class.value=a.position[i][e].class)}this.state={data:t}}render(){return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("div",{className:"form-group "+this.props.className,style:{marginBottom:25},hidden:void 0!==this.props.hidden&&!this.props.hidden},"Main "," ",this.renderTable(this.state.data.main)),s.a.createElement("div",{className:"form-group "+this.props.className,style:{marginBottom:25},hidden:void 0!==this.props.hidden&&!this.props.hidden},"Position "," ",this.renderTable(this.state.data.position))))}}class Ua extends o.Component{constructor(e){super(e),this.getValue=()=>{let e=this.state.data;return e.properties=this.convertData(this.refs.DesignProperty.get()),e},this.convertData=e=>{for(let t of e.main)for(let e in t){let a=[],i=[];for(let o of t[e].style)void 0===o.default_?0!==Object.keys(o)[0].length&&0!==Object.values(o)[0].length&&a.push(o):0!==Object.values(o)[0].length?a.push({[Object.keys(o)[0]]:Object.values(o)[0]}):a.push({[Object.keys(o)[0]]:"#"});t[e].style=a;for(let o of t[e].attr)void 0===o.default_?0!==Object.keys(o)[0].length&&i.push(o):i.push({[Object.keys(o)[0]]:Object.values(o)[0]});t[e].attr=i,0!==t[e].class.value.length?t[e].class=t[e].class.value:t[e].class="#"}for(let t of e.position)for(let e in t){let a=[],i=[];for(let o of t[e].style)void 0===o.default_?0!==Object.keys(o)[0].length&&0!==Object.values(o)[0].length&&a.push(o):0!==Object.values(o)[0].length?a.push({[Object.keys(o)[0]]:Object.values(o)[0]}):a.push({[Object.keys(o)[0]]:"#"});t[e].style=a;for(let o of t[e].attr)void 0===o.default_?0!==Object.keys(o)[0].length&&i.push(o):i.push({[Object.keys(o)[0]]:Object.values(o)[0]});t[e].attr=i,0!==t[e].class.value.length?t[e].class=t[e].class.value:t[e].class="#"}return e},this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.properties?t.properties=e.properties:t.properties="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",null,s.a.createElement(Pa,{properties:this.state.data.properties,propertyDefault:za.getProperty(),ref:"DesignProperty"}))}}var Va=Ua;class Ba extends o.Component{constructor(e){super(e),this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(Ta,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(ja,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(Oa,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormProperty=e=>s.a.createElement(Va,{data:e,ref:e=>l.g.setConfigComponent("property",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(Fa,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.set=(e,t)=>{if(this.setState({value_selected:[]}),void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var a=this.props.config.structable_read.split(".");if(a.length>0&&void 0!==t[a[0]]&&void 0!==t[a[0]][a[1]]&&0!==t[a[0]][a[1]].length){let e=[],i=this.state.data_search;for(let o of t[a[0]][a[1]].split(";"))0===this.getDataFromValueSelected(o).length?e.push(o):e=e.concat(this.getDataFromValueSelected(o));for(let t of e)i=i.filter(e=>e!==t);return void this.setState({value_selected:e,data_search:i})}}this.setState({value:""})}},this.setAdvanced=(e,t)=>{if(e.codeHidden&&e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&(a.putDataSetAdvanced(this.props.default,this.data_select),a.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var i="";void 0!==this.props.config.data_view&&(i=": "+l.g.getOOP(this.data_select,this.props.config.data_view.trim()));var o="";void 0!==this.props.config.data_value&&(o=l.g.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:o,data_view:i})}},this.get=(e,t)=>{var a=!0;if(e.checkError&&"false"===e.checkError&&(a=!1),!a||!this.checkValidate()){var i=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(i=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(i=!0),i)){if(0!==this.state.value_selected.length){let e=[];for(let t of this.state.value_selected)"string"===typeof t?e.push(t):e.push(l.g.getOOP(t,this.state.config_.type_value_string_config));this.setState({result_:e.join(this.state.config_.separator_config)})}var o=this.props.config.structable;if(o.includes("|"))for(var s=o.split("|"),n=0;n<s.length;n++)this.readData(s[n],e.inform);else this.readData(o,e.inform)}}},this.checkValidate=()=>{let e=!1,t=this.state.value_selected;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&0===t.length&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:"validateRequest"}))),e){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:this.data_default,value_selected:[]})},this.onClickSelected=e=>{if(!this.state.value_selected.includes(e)){let t=this.state.data_search.filter(t=>t!==e);this.setState({value_selected:[...this.state.value_selected,e],data_search:t})}},this.onClickRemove=e=>{let t=this.state.value_selected.filter(t=>t!==e);"string"===typeof e?this.setState({value_selected:t}):this.setState({value_selected:t,data_search:[...this.state.data_search,e]})},this.getDataFromValueSelected=e=>{let t=l.g.convertStringToEn(e).replace(/ /g,""),a="";for(let i of this.state.config_.data_display_array)for(let e of this.state.data_search){l.g.convertStringToEn(l.g.getOOP(e,i)).replace(/ /g,"")===t&&(a=e)}return a},this.handleSearch=e=>{let t=this.state.arr_,a=this.state.value_selected,i=this.state.config_.data_display_array,o=l.g.convertStringToEn(e.target.value.trim()).replace(/ /g,""),s=[],n=[];if(0!==e.target.value.length&&0===a.length){for(let e of t)for(let t of i){l.g.convertStringToEn(l.g.getOOP(e,t)).replace(/ /g,"").includes(o)&&-1===s.indexOf(e)&&s.push(e)}n=s}if(0===e.target.value.length&&0===a.length&&(n=t),0!==a.length&&0===e.target.value.length){for(let e=0;e<a.length;e++)t=t.filter(t=>t!==a[e]);n=t}if(0!==a.length&&0!==e.target.value.length){for(let e=0;e<a.length;e++)t=t.filter(t=>t!==a[e]);for(let e of t)for(let t of i){l.g.convertStringToEn(l.g.getOOP(e,t)).replace(/ /g,"").includes(o)&&-1===s.indexOf(e)&&s.push(e)}n=s}this.setState({data_search:n})},this.handleChangeValue=e=>{const{name:t,value:a}=e.target;this.setState({[t]:a})},this.handleKeyDownForInput=e=>{switch(e.keyCode){case 37:if(0!==this.state.value_selected.length){let e=this.state.value_selected.length-1;this.refs["tag_"+e.toString()].focus(),this.setState({current_tag:e})}break;case 40:"true"===this.state.config_.isSearch_config?this.refs.input_search.focus():0!==this.state.data_search.length&&(this.refs.tr_0.focus(),this.setState({current_tableRow:0}));break;case 13:if(""!==e.target.value)if(this.state.value_selected.some(t=>t===e.target.value)){let t=this.state.value_selected.findIndex(t=>t===e.target.value);this.refs["tag_"+t.toString()].focus(),this.setState({current_tag:t,value:""})}else this.setState({value_selected:[...this.state.value_selected,e.target.value],value:""})}},this.handleKeyDownForInputSearch=e=>{switch(e.keyCode){case 38:this.refs.input_import.focus();break;case 40:0!==this.state.data_search.length&&(this.refs.tr_0.focus(),this.setState({current_tableRow:0}))}},this.handleKeyDownForSpanTag=e=>{let t=this.state.value_selected.length-1,a=this.state.current_tag-1,i=this.state.current_tag+1;switch(e.keyCode){case 37:this.state.current_tag>=0&&a>=0&&(this.refs["tag_"+a.toString()].focus(),this.setState({current_tag:a<0?0:a}));break;case 39:this.state.current_tag===t?(this.refs.input_import.focus(),this.setState({current_tag:void 0})):this.state.current_tag<t&&(this.refs["tag_"+i.toString()].focus(),this.setState({current_tag:i>t?t:i}));break;case 46:this.onClickRemove(this.state.value_selected[this.state.current_tag]),this.state.current_tag===t&&0!==this.state.current_tag&&(this.refs["tag_"+(0!==t&&t-1).toString()].focus(),this.setState({current_tag:0!==t&&t-1}))}},this.handleKeyDownForTable=e=>{let t=this.state.data_search.length-1,a=this.state.current_tableRow-1,i=this.state.current_tableRow+1;switch(e.keyCode){case 38:0===this.state.current_tableRow?"true"!==this.state.config_.isSearch_config?this.refs.input_import.focus():this.refs.input_search.focus():this.state.current_tableRow>0&&(this.refs["tr_"+a.toString()].focus(),this.setState({current_tableRow:a<0?0:a}));break;case 40:this.state.current_tableRow<t&&(this.refs["tr_"+i.toString()].focus(),this.setState({current_tableRow:i>t?t:i}));break;case 13:let e=this.refs["hiddenInput_"+this.state.current_tableRow.toString()].value;for(let t of this.state.config_.data_display_array){let a=this.state.data_search.filter(a=>l.g.getOOP(a,t).includes(e));0!==a.length&&this.onClickSelected(a[0])}this.state.current_tableRow===t&&0!==t&&(this.refs["tr_"+(t-1).toString()].focus(),this.setState({current_tableRow:t-1}))}},this.renderTable=()=>s.a.createElement("div",{className:"selectize-dropdown-content"},s.a.createElement("table",{id:"myTable",className:"table table-hover table-bordered table-striped"},"true"===this.state.config_.format_col_config?s.a.createElement("tbody",null,this.state.data_search.map((e,t)=>s.a.createElement("tr",{key:t,style:{cursor:"pointer"},tabIndex:"-1",ref:"tr_"+t,onKeyDown:this.handleKeyDownForTable,onClick:()=>{this.onClickSelected(e)}},"json"!==this.state.config_.data_type_config?this.state.config_.data_display_array.map((a,i)=>s.a.createElement("td",{key:i},l.g.getOOP(e,a),this.state.config_.data_display_array[0]===a&&s.a.createElement("input",{ref:"hiddenInput_"+t,value:l.g.getOOP(e,this.state.config_.data_display_array[0]),hidden:!0,readOnly:!0}))):this.state.config_.data_display_array.map((t,a)=>s.a.createElement("td",{key:a},e[t]))))):s.a.createElement("tbody",null,this.state.data_search.map((e,t)=>s.a.createElement("tr",{key:t,style:{cursor:"pointer"},tabIndex:"-1",ref:"tr_"+t,onKeyDown:this.handleKeyDownForTable,onClick:()=>{this.onClickSelected(e)}},"json"!==this.state.config_.data_type_config?s.a.createElement("td",null,this.convertMixDisplay(e),s.a.createElement("input",{ref:"hiddenInput_"+t,value:l.g.getOOP(e,this.state.config_.data_display_array[0]),hidden:!0,readOnly:!0})):s.a.createElement("td",null,this.convertMixDisplay(e))))))),this.renderTag=()=>this.state.value_selected.map((e,t)=>s.a.createElement("span",{key:t},-1===this.state.arr_.indexOf(e)?s.a.createElement("span",Object.assign({className:"tagInput "+this.state.property.main.tagType.class},this.state.property.main.tagType.attr,{ref:"tag_"+t,style:this.state.property.main.tagType.style,onKeyDown:this.handleKeyDownForSpanTag}),e,s.a.createElement("span",{"data-role":"remove",className:"tag-style",onClick:()=>{this.onClickRemove(e)}})):s.a.createElement("span",Object.assign({className:"tagInput "+this.state.property.main.tagData.class,ref:"tag_"+t},this.state.property.main.tagData.attr,{style:this.state.property.main.tagData.style,onKeyDown:this.handleKeyDownForSpanTag}),"json"!==this.state.config_.data_type_config?l.g.getOOP(e,this.state.config_.tag_display_config):e[this.state.config_.tag_display_config],s.a.createElement("span",{"data-role":"remove",className:"tag-style",onClick:()=>{this.onClickRemove(e)}})))),this.convertMixDisplay=e=>{let t=this.state.config_.display_mixing_col_config,a=l.g.component_getListCode(this.state.config_.display_mixing_col_config);if("json"!==this.state.config_.data_type_config)for(let i of a)t=t.replace(i.key,l.g.getOOP(e,i.code));else for(let i of a)t=t.replace(i.key,e[i.code]);return t.trim()},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.renderMess=e=>{switch(e){case"validateRequest":default:return l.g.getLang(e)}},this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var t=this.props.validate;void 0===t&&(t={}),this.callform_detail="",this.callform="",this.data_select={};var a=l.g.component_propertyIndex(this.props.property.properties,za.getProperty());void 0===a&&(a={});var i=this.props.lang;void 0===i&&(i={});var o="";void 0!==this.props.config.data_type&&(o=this.props.config.data_type);var n="false";void 0!==this.props.config.isSearch&&(n=this.props.config.isSearch);var r="true";void 0!==this.props.config.format_col&&(r=this.props.config.format_col);var c="";void 0!==this.props.config.tag_display&&(c=this.props.config.tag_display);var d="";void 0!==this.props.config.data_gb&&(d=this.props.config.data_gb);var h="";void 0!==this.props.config.cdlist&&(h=this.props.config.cdlist);var _="";void 0!==this.props.config.data_display&&(_=this.props.config.data_display);var u="";void 0!==this.props.config.title_tag_input&&(u=this.props.config.title_tag_input);var g="";void 0!==this.props.config.type_value_string&&(g=this.props.config.type_value_string);var m=";";void 0!==this.props.config.separator&&(m=this.props.config.separator);var p="";void 0!==this.props.config.display_mixing_col&&(p=this.props.config.display_mixing_col),this.state={value:this.data_default,value_old:"",lang:i,lang_select:l.g.getLangKey(),validate:t,property:a,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",value_selected:[],arr_:[],data_search:[],result_:"",config_:{data_display_array:_.split(";"),query_db:d,isSearch_config:n,format_col_config:r,title_tag_input_config:u,type_value_string_config:g,separator_config:m,display_mixing_col_config:p,cdlist_config:h,data_type_config:o,tag_display_config:c},current_tag:void 0,current_tableRow:void 0,hover_event:!1}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent()),this.setState({data_search:this.state.arr_})}UNSAFE_componentWillMount(){switch(this.state.config_.data_type_config){case"database":0!==this.state.config_.query_db.length&&this.setState({arr_:l.g.getDataLimited(this.state.config_.query_db,0,999999).data});break;case"cdlist":let e=this.state.config_.cdlist_config.cdgrp,t=this.state.config_.cdlist_config.cdname;this.setState({arr_:l.g.data_cdList(e,t)||[]});break;case"json":if(void 0!==this.props.config.data_json){let e=l.g.parseJson(this.props.config.data_json);void 0!==e&&this.setState({arr_:e})}}}readData(e,t){if(e.includes(".")){var a=e.split(".");void 0===t||"true"===t?l.g.putData(a[0],a[1],this.state.result_,this.props.infoA):"false"===t?l.g.putDataGB(a[0],a[1],this.state.result_):l.g.putDataGB(a[0],a[1],"")}}render(){return s.a.createElement("div",{ref:"jTagInput"},s.a.createElement("div",{className:this.props.default.class},s.a.createElement("label",{style:{fontWeight:400}},void 0!==this.state.lang&&(void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:""!==this.state.config_.title_tag_input_config?this.state.config_.title_tag_input_config:this.props.default.name)),s.a.createElement("div",{className:""!==this.state.help_css?"form-group has-"+this.state.help_css+" has-feedback":"prtm-block-content"},s.a.createElement("div",{className:"bootstrap-tagsinput tag-input"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-6 cont-tag"},this.renderTag()),s.a.createElement("div",{className:"col-sm-6 cont-main"},s.a.createElement("div",{className:"selectize-control selectize-optgroup single plugin-optgroup_columns"},s.a.createElement("div",{className:"items has-options not-full"},s.a.createElement("input",{type:"text",className:"tag-register",ref:"input_import",autoComplete:"off",name:"value",placeholder:l.g.getLang("jTagInput_register_Input"),value:this.state.value,onChange:this.handleChangeValue,onKeyDown:this.handleKeyDownForInput}),s.a.createElement("div",{className:"selectize-dropdown single selectize-optgroup plugin-optgroup_columns table-data cont-table"},"true"===this.state.config_.isSearch_config&&s.a.createElement("div",{className:"cont-search"},s.a.createElement("input",{type:"text",className:"tag-search",ref:"input_search",placeholder:l.g.getLang("jTagInput_search_Input"),name:"value_search",onKeyDown:this.handleKeyDownForInputSearch,onChange:this.handleSearch}),s.a.createElement("i",{className:"fa fa-search tag-remove"})),0!==this.state.data_search.length&&this.renderTable())))))))),""!==this.state.help_icon&&s.a.createElement("span",{className:"glyphicon "+this.state.help_icon+" form-control-feedback","aria-hidden":"true"}),""===this.state.help_mess&&s.a.createElement("small",{className:"form-text text-danger"},"\xa0"),""!==this.state.help_mess&&s.a.createElement("small",{className:"form-text text-danger"},this.renderMess(this.state.help_mess)))}}var Ha=Ba;class Ya extends o.Component{constructor(){super(...arguments),this.getInfoCheckRun=()=>({view:this.props.infoView,default:this.props.default}),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.printComponent=()=>{let e=l.g.getFormAppAuto(this.props.infoA.key_form).callDirFromSupport("getElearning",{},{}),t=window.open("","","height=600,width=1200");for(let i in e){if(void 0===e[i])return;let o="",s="",l="",n="";if(null!==document.querySelector("code")&&void 0!==document.querySelector("code")){let e=window.getComputedStyle(document.querySelector("code"));for(let t=0;t<e.length;t++)o+=e[t]+":"+e.getPropertyValue(e[t])+";"}if(null!==document.querySelector("p")&&void 0!==document.querySelector("p")){let e=window.getComputedStyle(document.querySelector("p"));for(let t=0;t<e.length;t++)s+=e[t]+":"+e.getPropertyValue(e[t])+";"}if(null!==document.querySelector("pre")&&void 0!==document.querySelector("pre")){let e=window.getComputedStyle(document.querySelector("pre"));for(let t=0;t<e.length;t++)l+=e[t]+":"+e.getPropertyValue(e[t])+";"}if(null!==document.querySelector("blockquote")&&void 0!==document.querySelector("blockquote")){let e=window.getComputedStyle(document.querySelector("blockquote"));for(let t=0;t<e.length;t++)n+=e[t]+":"+e.getPropertyValue(e[t])+";"}var a=`code {${o}}p {${s}}pre {${l} height: auto; width: auto;}blockquote {${n} height: auto; width: auto;}hr {page-break-before:always;}`;t.document.write('<html><head><style type="text/css">'),t.document.write(a),t.document.write("</style></head><body>"),t.document.write(e[i].innerHTML),t.document.write("</body></html>")}t.document.close(),t.print()}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}render(){return s.a.createElement("div",{className:this.props.default.class},s.a.createElement("div",{style:{textAlign:"right"}},s.a.createElement("button",{className:"btn btn-primary",onClick:()=>this.printComponent()},l.g.getLang("jButtonPrint_title"))))}}var Qa=Ya;class Ga extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.action?t.action=e.action:t.action="",null!=e.structable?t.structable=e.structable:t.structable="",null!=e.structable_read?t.structable_read=e.structable_read:t.structable_read="",null!=e.data_default?t.data_default=e.data_default:t.data_default="",null!=e.isLookup?t.isLookup=e.isLookup:t.isLookup="false",null!=e.callform?t.callform=e.callform:t.callform="",null!=e.callform_detail?t.callform_detail=e.callform_detail:t.callform_detail="",null!=e.callform_detail_mode?t.callform_detail_mode=e.callform_detail_mode:t.callform_detail_mode="modal",null!=e.data_view?t.data_view=e.data_view:t.data_view="",null!=e.data_value?t.data_value=e.data_value:t.data_value="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"D\xf9ng lookup",value:this.state.data.isLookup,data:[{title:"Kh\xf4ng d\xf9ng",code:"false"},{title:"D\xf9ng lookup",code:"true"}],onChange:e=>this.onChange_Value("isLookup",e)}),"true"===this.state.data.isLookup&&s.a.createElement(ct,{class:"col-sm-12 col-md-6",name:"L\u1ea5y data t\u1eeb form",value:this.state.data.callform,onChange:e=>this.onChange_Value("callform",e)}),"true"===this.state.data.isLookup&&s.a.createElement(ct,{class:"col-sm-12 col-md-6",name:"Xem chi ti\u1ebft",value:this.state.data.callform_detail,onChange:e=>this.onChange_Value("callform_detail",e)}),"true"===this.state.data.isLookup&&s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Xem chi ti\u1ebft mode",value:this.state.data.callform_detail_mode,data:[{title:"Modal",code:"modal"},{title:"Main",code:"main"}],onChange:e=>this.onChange_Value("callform_detail_mode",e)}),"true"===this.state.data.isLookup&&s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"OOP hi\u1ec3n th\u1ecb",value:this.state.data.data_view,onChange:e=>this.onChange_Value("data_view",e)}),"true"===this.state.data.isLookup&&s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"OOP gi\xe1 tr\u1ecb",value:this.state.data.data_value,onChange:e=>this.onChange_Value("data_value",e)}))}}var Ja=Ga;class Wa extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min&&(t.min=e.min),null!=e.max&&(t.max=e.max),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"T\xean x\xe1c nh\u1eadn"),s.a.createElement("th",null,"D\u1eef li\u1ec7u"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"B\u1eaft bu\u1ed9c nh\u1eadp"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng nh\u1ecf h\u01a1n"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.min=parseFloat(e.target.value):void 0!==t.min&&delete t.min,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng v\u01b0\u1ee3t qu\xe1"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max=parseFloat(e.target.value):void 0!==t.max&&delete t.max,this.setState({data:t})}}))))))))}}var qa=Wa;class Ka extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var Za=Ka;class Xa extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var $a=Xa;class ei extends o.Component{constructor(e){super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.setCMD=(e,t)=>{},this.getAdvanced=(e,t)=>{},this.getDataOOP=(e,t)=>{const{list_component:a}=e,{code:i}=this.props.default;if(a){if(a.split(";").includes(i))return this.data_select}},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(Ja,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement($a,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(qa,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(Za,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.setDataGB=(e,t)=>{},this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var a=this.props.config.structable_read.split(".");if(a.length>0&&void 0!==t[a[0]]&&void 0!==t[a[0]][a[1]])return void this.setState({value:t[a[0]][a[1]]})}this.setState({value:""})}},this.setAdvanced=(e,t)=>{if(e.codeHidden&&e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&(a.putDataSetAdvanced(this.props.default,this.data_select),a.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var i="";void 0!==this.props.config.data_view&&(i=": "+l.g.getOOP(this.data_select,this.props.config.data_view.trim()));var o="";void 0!==this.props.config.data_value&&(o=l.g.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:o,data_view:i})}},this.get=(e,t)=>{var a=!0;if(e.checkError&&"false"===e.checkError&&(a=!1),!a||!this.checkValidate()){var i=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(i=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(i=!0),i)){var o=this.props.config.structable;if(o.includes("|"))for(var s=o.split("|"),l=0;l<s.length;l++)this.readData(s[l],e.inform);else this.readData(o,e.inform)}}},this.checkValidate=()=>{var e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:l.g.getLang("validateRequest")}))),e){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:this.data_default})},this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var t=this.props.validate;void 0===t&&(t={}),this.callform_detail="",this.callform="",this.data_select={};var a=this.props.lang;void 0===a&&(a={}),this.state={value:this.data_default,value_old:"",lang:a,lang_select:l.g.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:""}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}readData(e,t){if(e.includes(".")){var a=e.split(".");void 0===t||"true"===t?l.g.putData(a[0],a[1],this.state.value,this.props.infoA):"false"===t?l.g.putDataGB(a[0],a[1],this.state.value):l.g.putDataGB(a[0],a[1],"")}}render(){return s.a.createElement("div",{className:this.props.default.class},"jTableCalculator")}}var ti=ei;class ai extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.action?t.action=e.action:t.action="",null!=e.structable?t.structable=e.structable:t.structable="",null!=e.structable_read?t.structable_read=e.structable_read:t.structable_read="",null!=e.data_default?t.data_default=e.data_default:t.data_default="",null!=e.checked_mode?t.checked_mode=e.checked_mode:t.checked_mode="true_false",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Lo\u1ea1i d\u1eef li\u1ec7u",value:this.state.data.checked_mode,data:[{title:"True - False",code:"true_false"},{title:"Y - N",code:"Y_N"},{title:"1 - 0",code:"1_0"}],onChange:e=>this.onChange_Value("checked_mode",e)}))}}var ii=ai;class oi extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min&&(t.min=e.min),null!=e.max&&(t.max=e.max),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"T\xean x\xe1c nh\u1eadn"),s.a.createElement("th",null,"D\u1eef li\u1ec7u"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"B\u1eaft bu\u1ed9c nh\u1eadp"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng nh\u1ecf h\u01a1n"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.min=parseFloat(e.target.value):void 0!==t.min&&delete t.min,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng v\u01b0\u1ee3t qu\xe1"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max=parseFloat(e.target.value):void 0!==t.max&&delete t.max,this.setState({data:t})}}))))))))}}var si=oi;class li extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var ni=li;class ri extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var ci=ri;class di extends o.Component{constructor(e){switch(super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCMD=(e,t)=>{const{CMD:a}=this.state||{};let i=Object.assign(l.g.cloneJson(a),t);for(let o in i)"true"===i[o]&&(i[o]=!0),"false"===i[o]&&(i[o]=!1);this.setState({CMD:i})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(ii,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(ci,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(si,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(ni,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.renderDebug=()=>{if(l.g.isDebug()){let e=this.props.config.structable.split(".")[1],t=this.data_debug.data_cpn;return null===t&&(t="NULL"),void 0===this.props.config.cdlist&&(this.props.config.cdlist={}),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{color:"#f17316"}},`DATA-> |${e}|:|${t}|`))}},this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var a=this.props.config.structable_read.split(".");if(a.length>0&&void 0!==t[a[0]]&&(this.data_debug.data_cpn=t[a[0]][a[1]],void 0!==t[a[0]][a[1]])){let e=t[a[0]][a[1]]==this.IS_CHECKED;return void this.setState({value:e})}}this.setState({value:!1},()=>{this.runRule("enter_tab")})}},this.setAdvanced=(e,t)=>{if(e.codeHidden){if(e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&(a.putDataSetAdvanced(this.props.default,this.data_select),a.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var i="";void 0!==this.props.config.data_view&&(i=": "+l.g.getOOP(this.data_select,this.props.config.data_view.trim()));var o="";void 0!==this.props.config.data_value&&(o=l.g.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:o,data_view:i},()=>{this.runRule("enter_tab")})}}else{let e=t===this.IS_CHECKED;this.setState({value:e},()=>{this.runRule("enter_tab")})}},this.get=(e,t)=>{var a=this.props.config.structable;if(a.includes("|"))for(var i=a.split("|"),o=0;o<i.length;o++)this.readData(i[o],e.inform);else this.readData(a,e.inform)},this.checkValidate=()=>{var e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.state.help_mess=l.g.getLang("validateRequest"),this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:l.g.getLang("validateRequest")}))),e){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.getAdvanced=(e,t)=>!0===this.state.value?this.IS_CHECKED:this.IS_UNCHECKED,this.reload=(e,t)=>{this.setState({value:"true"===this.data_default},()=>{this.runRule("enter_tab")})},this.runRule=e=>{if(e){var t=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.props.config.checked_mode||"Y_N"){case"true_false":this.IS_CHECKED=!0,this.IS_UNCHECKED=!1;break;case"1_0":this.IS_CHECKED=1,this.IS_UNCHECKED=0;break;default:this.IS_CHECKED="Y",this.IS_UNCHECKED="N"}this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var t=this.props.validate;void 0===t&&(t={}),this.callform_detail="",this.callform="",this.data_select={};var a=this.props.lang;void 0===a&&(a={});let i={mode:"",col_text:"",col_input:""};void 0!==e.infoA.mode_form&&(i=e.infoA.mode_form);let o={parent:"",child:""},n={class:""},r=void 0!==this.props.ofgroup&&""!==this.props.ofgroup&&"false"!==this.props.ofgroup,c=void 0!==e.infoA.mode_form&&"1"===e.infoA.mode_form.mode,d=!!this.props.ofgroup_child;if(c)if(d)o={parent:"",child:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:void 0!==this.props.css_default.class&&""!==this.props.css_default.class?this.props.css_default.class:"col-sm-4"};else if(r){let e="col-sm-"+parseInt(10/(this.props.ofgroup_data.length+1));n={class:e},o={parent:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:e,child:""}}else o={parent:"col-sm-6",child:""};else o=d?{parent:"",child:this.props.default.class+" jwebui-ofgroup"}:r?0===this.props.ofgroup_data.length?{parent:this.props.default.class,child:""}:{parent:this.props.default.class_ofgroup,child:this.props.default.class+" jwebui-ofgroup-fisrt"}:{parent:this.props.default.class,child:""};this.state={value:"true"===this.data_default,value_old:"",lang:a,lang_select:l.g.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:{},config_mode:i,class_config:o,css_default:n},this.data_debug={}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}readData(e,t){if(e.includes(".")){var a=e.split(".");void 0===t?l.g.putData(a[0],a[1],this.state.value,this.props.infoA):"true"===t?!0===this.state.value?l.g.putData(a[0],a[1],this.IS_CHECKED,this.props.infoA):l.g.putData(a[0],a[1],this.IS_UNCHECKED,this.props.infoA):"false"===t?l.g.putDataGB(a[0],a[1],this.state.value):l.g.putDataGB(a[0],a[1],"")}}render(){if(!1===this.state.CMD.visible)return null;let e=Object(v.b)("uCheckBox");const t=Object(v.b)("uOfGroup");return this.props.isOfgroupParent?s.a.createElement(t,{class:this.props.default.class_ofgroup},s.a.createElement(e,{dataFull:{class:this.props.default.class,title:this.props.default.name,value:this.state.value,config:{cmd:{disable:this.state.CMD.disabled+""==="true"}},abs_Click:()=>{this.setState({value:!this.state.value},()=>{this.runRule("enter_tab")})}}}),this.props.ofGroupData.map(e=>s.a.createElement(N.a,Object.assign({},e,{isOfgroupParent:!1})))):s.a.createElement(e,{dataFull:{class:this.props.default.class,title:this.props.default.name,value:this.state.value,config:{cmd:{disable:this.state.CMD.disabled+""==="true"}},abs_Click:()=>{this.setState({value:!this.state.value},()=>{this.runRule("enter_tab")})}}})}}var hi=di;const _i={structable:"",structable_read:"",data_default:"",format:"#,###.00",decimal_length:2},ui=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(i.a)({},_i);for(let a in t)void 0!==e[a]&&(""!==t[a]&&""===e[a]||(t[a]=e[a]));return t||{}},gi={request:!1,min:0,max:void 0,max_length:void 0};class mi extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){return ui(e)}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),s.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"prtm-full-block inner-acccordians"},s.a.createElement("div",{className:"panel panel-inverse mrgn-b-none"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-7 col-sm-7 col-md-8 col-lg-8"},s.a.createElement("h4",{className:"text-capitalize mrgn-all-none"},"\u0110\u1ecbnh d\u1ea1ng ki\u1ec3u hi\u1ec3n th\u1ecb")," "),s.a.createElement("div",{className:"col-xs-5 col-sm-5 col-md-4 col-lg-4"},s.a.createElement("div",{className:"tab-icon pull-right"},s.a.createElement("div",{"data-toggle":"collapse","data-target":"#type_currency","aria-expanded":"true",style:{cursor:"pointer"}}," ",s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"})," "))))),s.a.createElement("div",{id:"type_currency",className:"collapse","aria-expanded":"true"},s.a.createElement("div",{className:"pad-all-md"},s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"\u0110\u1ecbnh d\u1ea1ng d\u1ea5u",value:this.state.data.format,data:[{title:"#_______________1235",code:"#"},{title:"#.00____________1234.56",code:"#.00"},{title:"#,###.00________1,234.56",code:"#,###.00"},{title:"#.###,00________1.234,56",code:"#.###,00"},{title:"#,###___________1,234",code:"#,###"},{title:"#.###___________1.234",code:"#.###"}],onChange:e=>this.onChange_Value("format",e)}),!1===["#","#.###","#,###"].includes(this.state.data.format)&&s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ch\u1eef s\u1ed1 th\u1eadp ph\xe2n",value:this.state.data.decimal_length,onChange:e=>this.onChange_Value("decimal_length",e)})))))))}}var pi=mi;class fi extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(i.a)({},gi);for(let a in t)e[a]&&(""!==t[a]&&""===e[a]||(t[a]=e[a]));return t||{}}(e)}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"T\xean x\xe1c nh\u1eadn"),s.a.createElement("th",null,"D\u1eef li\u1ec7u"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"B\u1eaft bu\u1ed9c nh\u1eadp"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Kh\xf4ng nh\u1ecf h\u01a1n"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.min=parseFloat(e.target.value):void 0!==t.min&&delete t.min,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Kh\xf4ng v\u01b0\u1ee3t qu\xe1"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max=parseFloat(e.target.value):void 0!==t.max&&delete t.max,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"\u0110\u1ed9 d\xe0i t\u1ed1i \u0111a"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.max_length?this.state.data.max_length:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max_length=parseFloat(e.target.value):void 0!==t.max_length&&delete t.max_length,this.setState({data:t})}}))))))))}}var vi=fi;class bi extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var yi=bi;class Di extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var Ci=Di;a(198);class Ai extends o.Component{constructor(e){super(e),this.getFormConfig=e=>s.a.createElement(pi,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(Ci,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(vi,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getDataOOP=(e,t)=>this.data_select,this.getFormLang=(e,t,a,i,o)=>s.a.createElement(yi,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.setCallBuildFormBack=(e,t)=>{if(void 0!==e.key&&void 0!==e.key_form){let t=e.key.split(";");this[t[0]]=e.key_form,t[1]===this.state.id_component&&(this.renderFormChildDone=!0,this.setState({renderFormChildDone:!0}))}},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.renderMess(this.state.help_mess),key:e,infoComponent:this.props.default}}return""},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.toolAutoValue=()=>{"false"!==String(this.state.CMD.disabled)&&"false"!==String(this.state.CMD.visible)||this.setValue(1,this.isNegative,"enter_tab")},this.setAdvanced=(e,t)=>{if(e.codeHidden){if(e.codeHidden===this.props_smooth.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){let e="";void 0!==this.props.config.data_value&&(e=l.g.getOOP(this.data_select,this.props.config.data_value.trim())+""),this.setValue(e,this.isNegative,"enter_tab")}}else if(e.list_component){const{list_component:a}=e,{code:i}=this.props_smooth.default;if(void 0!==t&&null!==t||(t=""),a){a.split(";").includes(i)&&this.setValue(t)}}else this.setValue(t)},this.set=(e,t)=>{let a=this.props_smooth.config.structable_read?l.g.getNodeJson(t,this.props.config.structable_read):this.props_smooth.config.data_default;void 0!==a?this.setValue(a,this.isNegative):this.setDataDefault()},this.getAdvanced=(e,t)=>this.getValue(),this.get=(e,t)=>{var a=this.props.config.structable.split("|");let i=this.getValue();for(const s of a){var o=s.split(".");switch(e.inform){case"false":l.g.putDataGB(o[0],o[1],i);break;default:l.g.putData(o[0],o[1],i,this.props.infoA)}}},this.checkValidate=()=>{let e=!1,t=this.getValue(),a="";const{request:i,max:o,min:s,max_length:n}=this.props_smooth.validate;if(void 0!==t&&""!==t||"true"!==i.toString()){if(void 0!==t){let i=this.state.value.replace(/\D/g,"");i.length>Number(n)&&Number(n)>0&&encodeURI(i).split(/%..|./).length-1>Number(n)?(e=!0,a="jCurrency_maxLength"):t>Number(o)&&null!==o&&void 0!==o&&""!==o?(e=!0,a="validateNumMax"):t<Number(s)&&null!==s&&void 0!==s&&""!==s&&(e=!0,a="validateNumMin")}}else e=!0,a="validateRequest";if(this.state.help_mess=a,this.setState({help_mess:a}),e){var r=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==r&&r.setFormValidateFromComponent(!0,this.props.default)}return e},this.convertConfigWithContext=e=>{let t=e,a=l.g.getlistCodeContext(e);for(const i of a){let e=l.g.context_get(i.code)||"";t=t.replace(i.key,e),"number"===typeof e&&(t=Number(t))}return t},this.reload=(e,t)=>{this.setValue(this.props_smooth.config.data_default,this.isNegative)},this.setDataDefault=()=>{this.setValue(this.props_smooth.config.data_default,this.isNegative)},this.setCMD=(e,t)=>{const{CMD:a}=this.state;let i=Object.assign(l.g.cloneJson(a),t);a.disabled===i.disabled&&a.visible===i.visible&&a.block===i.block||this.setState({CMD:i})},this.onBlur=async()=>{void 0!==this.state.value&&!this.state.value.includes("-.")&&0!==Number(this.state.value)||""===this.state.value||await this.setValue(0),!1===this.checkValidate()&&!0===this.state.isChange&&(this.setState({isChange:!1}),this.onRunRule("enter_tab")),this.onFocus=!1},this.UNSAFE_componentWillUpdate=(e,t)=>{this.realtime_value=t.value},this.onChange=e=>{let t=e.target;const{selectionStart:a,value:i}=t,{decimal_char:o,int_char:s,decimal_length:l}=this,n=this.state.value;let r=i;if(r.includes("-")&&!1===this.isNegative)return void this.setState({value:n},()=>{t.setSelectionRange(0,0)});if(n.includes(o)&&!i.includes(o)&&o){let e=n.lastIndexOf(o);r=i.substring(0,e)+o+i.substring(e,i.length),r===o&&(r="")}let c=n,d=i.lastIndexOf(o);i.indexOf(o)!==i.lastIndexOf(o)&&o?d=c.length-l:(c=Object(Se.a)(r,l,s,o,!1)||"",d=a-(i.length-c.length),1===a?d=1:a>i.lastIndexOf(o)&&(d+=1));let h=c.replace(/\D/g,"");const _=this.props_smooth.validate.max_length;h.length>Number(_)&&Number(_)>0&&(c=n),this.setState({value:c,isChange:!0},()=>{t.setSelectionRange(d,d)})},this.renderThisComponent=()=>{const e=Object(v.b)("uInput");if("true"===String(this.props.config.isLabel)){const e=Object(v.b)("uLabel");return s.a.createElement(e,{dataFull:{config:{default:{title:this.state.value||"",class:this.props_smooth.default.class},cmd:{visible:"false"!==String(this.state.CMD.visible)}}}})}return s.a.createElement(e,{dataFull:Object(i.a)(Object(i.a)({},this.getConfigTemplate()),{},{abs_Change:this.onChange,abs_Blur:this.onBlur})})},this.modalToggle=e=>{e||this.buildFormChild(),!0!==this.state.CMD.disabled&&(void 0===e?this.setState({show_modal:l.g.autoID()}):e&&(this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})))},this.abs_CloseModal=()=>{this.renderFormChildDone=!1,this.setState({show_modal:"none",renderFormChildDone:!1})},this.renderMess=e=>{switch(e){case"validateNumMin":return l.g.getLang(e).replace("{count}",this.props_smooth.validate.min);case"validateNumMax":return l.g.getLang(e).replace("{count}",this.props_smooth.validate.max);case"validateRequest":return l.g.getLang(e);case"jCurrency_maxLength":return l.g.getLang(e).replace("@{max_length}",this.props_smooth.validate.max_length);default:return l.g.getLang(e)}},this.props.config.data_default=this.convertConfigWithContext(this.props.config.data_default),this.props_smooth=this.getConfigSmooth(this.props),this.renderFormChildDone=!1,this.int_char=l.g.getElementWithRegex(/#(\D)#/,this.props_smooth.config.format)||"",this.decimal_char=l.g.getElementWithRegex(/#(\D)0/,this.props_smooth.config.format)||"",this.decimal_length=this.props_smooth.config.decimal_length,this.decimal_char=l.g.getElementWithRegex(/#(\D)0/,this.props_smooth.config.format)||"",""!==this.decimal_char&&this.decimal_char!==this.int_char||(this.decimal_length=0),this.isNegative=!1,(void 0===Object(Se.b)(this.props_smooth.validate.min)||Object(Se.b)(this.props_smooth.validate.min)<0)&&(this.isNegative=!0),this.state={isLookup:"true"===this.props.config.isLookup,help_css:"",help_icon:"",help_mess:"",value:"",CMD:{},isChange:!1,renderFormChildDone:!1,id_component:l.g.autoID()},this.onFocus=!1,this.data_debug={}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent()),this.setValue(this.props_smooth.config.data_default,this.isNegative)}onRunRule(e){var t=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}getConfigSmooth(e){let t=l.g.cloneJson(e);return t.config=ui(t.config),t.validate.max_length&&!Number(t.validate.max_length>16)||(t.validate.max_length=16),t}getValue(){let e=this.realtime_value;return void 0===e&&(e=this.state.value),Object(Se.b)(e,this.int_char,this.decimal_char)}setValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.isNegative,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on_change";null!==e&&void 0!==e||(e=""),e+="";const{decimal_char:i,int_char:o,decimal_length:s}=this;let l=Object(Se.a)(e,s,o,i);(void 0===l||l.includes("-")&&!1===t)&&(l=""),0===Number(l)&&""!==l&&(l=Object(Se.a)(0,s,o,i)),this.realtime_value=l,this.setState({value:l,help_css:"",help_icon:"",help_mess:""},()=>{this.onRunRule(a||"on_change")})}render(){if("false"===String(this.state.CMD.visible))return null;const e=Object(v.b)("uOfGroup");return this.props.isOfgroupParent?s.a.createElement(e,{class:this.props.default.class_ofgroup},s.a.createElement(s.a.Fragment,null,this.renderThisComponent(),this.state.isLookup&&s.a.createElement(C,{modal_title:l.g.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal})),this.props.ofGroupData.map(e=>s.a.createElement(N.a,Object.assign({},e,{isOfgroupParent:!1})))):s.a.createElement(s.a.Fragment,null,this.renderThisComponent(),this.state.isLookup&&s.a.createElement(C,{modal_title:l.g.getLang("lookup_modal_title"),info_component:this.props.default,show:this.state.show_modal,infoA_call_form:this.state.infoA_call_form,ref:"b_modal",callform:this.state.callform,renderFormChildDone:this.renderFormChildDone,abs_CloseModal:this.abs_CloseModal}))}buildFormChild(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let e=l.g.cloneJson(this.props.infoA);e.componentParent=this.props.default,Object(A.b)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),e,this.props.default,"callform;"+this.state.id_component)}}getConfigTemplate(){return{abs_ClickIcon:()=>{this.modalToggle()},config:{default:{title:this.props_smooth.default.name,type:"",class:this.props_smooth.default.class,required:this.props_smooth.validate.request,icon:!0===this.state.isLookup?"search":"",placeholder:"true"===String(this.state.CMD.disabled)?" ":""},cmd:{disable:this.state.CMD.disabled+""==="true",visible:this.state.CMD.visible+""!=="false",error:{message:this.renderMess(this.state.help_mess),type:""}},mode:{textAlign:"right"}},mode:{readOnly:"true"===String(this.props.config.readOnly)},valueTitleHover:this.state.CMD.disabled+""!=="true"?"":this.state.value,value:this.state.value}}}var ki=Ai;class Mi extends o.Component{constructor(e){super(e),this.getValue=()=>{var e=this.state.data;if(void 0!==this.refs.txFo){var t=this.refs.txFo.getValue();void 0!==t.txFo&&(e.txFo=t.txFo)}if(void 0!==this.refs.txFoAction){var a=this.refs.txFoAction.getValue();void 0!==a.txFoActions&&(e.txFoActions=a.txFoActions)}return e},this.state={data:this.readConfig(this.props.data),private_key_config:l.g.autoID()}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.node_data_print?t.node_data_print=e.node_data_print:t.node_data_print="",null!=e.json_path?t.json_path=e.json_path:t.json_path="",null!=e.auto_print?t.auto_print=e.auto_print:t.auto_print="true",null!=e.txFoActions?t.txFoActions=e.txFoActions:t.txFoActions="",null!=e.txFo?t.txFo=e.txFo:t.txFo="",null!=e.useAction?t.useAction=e.useAction:t.useAction="true",null!==e.list_report?t.list_report=e.list_report:t.list_report="",null!==e.get_voucher_way?t.get_voucher_way=e.get_voucher_way:t.get_voucher_way="key",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"C\xe1ch l\u1ea5y danh s\xe1ch voucher",value:this.state.data.get_voucher_way,data:[{title:"T\u1eeb key",code:"key"},{title:"Nh\u1eadp tay",code:"type"}],onChange:e=>this.onChange_Value("get_voucher_way",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",hidden:"key"===this.state.data.get_voucher_way,name:"M\xe3 template",value:this.state.data.node_data_print,onChange:e=>this.onChange_Value("node_data_print",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"List reports",hidden:"type"===this.state.data.get_voucher_way,value:this.state.data.list_report,placeholder:"Input list of vouchers, separate by comma (,)",onChange:e=>this.onChange_Value("list_report",e)}),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-8 col-sm-8 col-md-8"},s.a.createElement("h3",{className:"panel-title text-capitalize"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse"},"H\xe0nh \u0111\u1ed9ng"))),s.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse"},s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"}))))),s.a.createElement("div",{id:this.state.private_key_config+"_function",className:"collapse"},s.a.createElement("div",{className:"panel-body"},s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"H\xe0nh \u0111\u1ed9ng click",value:this.state.data.useAction,data:[{title:"G\u1ecdi tx fo",code:"false"},{title:"G\xf5 nhanh",code:"true"}],onChange:e=>this.onChange_Value("useAction",e)}),s.a.createElement(d.a,{ref:"txFo",hidden:"false"===this.state.data.useAction,data:this.state.data.txFo}),s.a.createElement(c.a,{hidden:"true"===this.state.data.useAction,ref:"txFoAction",data:this.state.data.txFoActions}))))))}}var xi=Mi;class Ni extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min&&(t.min=e.min),null!=e.max&&(t.max=e.max),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"T\xean x\xe1c nh\u1eadn"),s.a.createElement("th",null,"D\u1eef li\u1ec7u"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"B\u1eaft bu\u1ed9c nh\u1eadp"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng nh\u1ecf h\u01a1n"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.min=parseFloat(e.target.value):void 0!==t.min&&delete t.min,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng v\u01b0\u1ee3t qu\xe1"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max=parseFloat(e.target.value):void 0!==t.max&&delete t.max,this.setState({data:t})}}))))))))}}var wi=Ni;class Si extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var Ti=Si;class Ei extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var Oi=Ei,Ii=a(18);class Fi extends o.Component{constructor(e){super(e),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>{},this.getDataOOP=(e,t)=>{const{list_component:a}=e,{code:i}=this.props.default;if(a){if(a.split(";").includes(i))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(xi,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(Oi,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(wi,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(Ti,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.setDataGB=(e,t)=>{},this.set=(e,t)=>{let a=t,i=this.state.json_path.split(".");if(void 0!==this.state.node_data_print&&void 0!==a[this.state.node_data_print]&&null!==a[this.state.node_data_print]&&""!==a[this.state.node_data_print]||this.setState({first_print:!1}),void 0!==a){if(i.length>0)for(let e=0;e<i.length;e++)void 0!==a[i[e]]&&(a=a[i[e]]);this.setState({value:a,first_print:!0})}else this.setState({value:""})},this.setAdvanced=(e,t)=>{},this.get=(e,t)=>{let a=!0;if(e.checkError&&"false"===e.checkError&&(a=!1),!a||!this.checkValidate()){let t=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(t=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(t=!0),t)){let t=this.props.config.structable;if(t.includes("|")){let a=t.split("|");for(let t=0;t<a.length;t++)this.readData(a[t],e.inform)}else this.readData(t,e.inform)}}},this.checkValidate=()=>{let e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:l.g.getLang("validateRequest")}))),e){let e=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==e&&e.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.printed=!1,this.setState({value:this.data_default})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){let e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.getValueByParam=e=>{let t=this.state.value;if(void 0!==t&&0!==t.length){if(-1===e.indexOf("."))return void 0!==t[e]&&0!==t[e].length?t[e]:"";{let a=e.split(".");if(void 0!==t[a[0]]&&void 0!==t[a[0]][a[1]]){let e=""+t[a[0]][a[1]];return 0!==e.length?e:""}return""}}},this.printReportHandler=()=>{if(void 0!==this.props.config.useAction){let e=this.props.config.list_report.split(",");if("true"===this.props.config.useAction){let e=this.props.config.list_report.split(","),t=l.g.parseJson(this.props.config.txFoActions);void 0!==t&&x.a.runActionWithContext(t,{list_template_code:e},this.props.infoA,this.props.infoA_parent,this.props.default)}else if(void 0!==this.props.config.txFo){let t=l.g.parseJson(this.props.config.txFo);void 0!==t&&x.a.runFoWithContext(t,{list_template_code:e},this.props.infoA,this.props.infoA_parent,this.props.default)}}},this.printVoucher=()=>{if("type"===this.props.config.get_voucher_way)Ii.a(this.props.config.list_report,this.printReportHandler);else{if(0===this.state.value.length)return;void 0!==this.state.value[this.state.node_data_print]&&null!==this.state.value[this.state.node_data_print]&&""!==this.state.value[this.state.node_data_print]||this.setState({first_print:!1});let e=this.getValueByParam(this.state.node_data_print);if(void 0!==e&&""!==e){if("true"===this.state.auto_print&&!0===this.printed)return;this.printed=!0,Ii.b(e,this.state.value,this.props)}}},this.workFlowCall=(e,t)=>{void 0!==e&&void 0!==this.props.default.codeHidden&&(void 0!==e[this.props.default.codeHidden]?(this.visibility=e[this.props.default.codeHidden],this.setState({visibility:e[this.props.default.codeHidden]})):(this.visibility=!1,this.setState({visibility:!1})))},this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);let t=this.props.validate;void 0===t&&(t={}),this.callform_detail="",this.callform="",this.data_select={};let a=this.props.lang;void 0===a&&(a={});let i="";void 0!==this.props.config.node_data_print&&(i=this.props.config.node_data_print);let o="";void 0!==this.props.config.json_path&&(o=this.props.config.json_path);let n="true";void 0!==this.props.config.auto_print&&(n=this.props.config.auto_print),this.visibility=e.visibility&&this.visibility_role,this.state={value:this.data_default,value_old:"",lang:a,lang_select:l.g.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",node_data_print:i,auto_print:n,visibility:e.visibility&&this.visibility_role,block_send_mail:!1,json_path:o,first_print:void 0,str_voucher:"",str_style:""}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}componentDidUpdate(){this.state.first_print&&"true"===this.state.auto_print&&0!==this.state.value.length&&(this.printVoucher(),this.setState({first_print:!1}))}readData(e,t){if(e.includes(".")){let a=e.split(".");void 0===t||"true"===t?l.g.putData(a[0],a[1],this.state.value,this.props.infoA):"false"===t?l.g.putDataGB(a[0],a[1],this.state.value):l.g.putDataGB(a[0],a[1],"")}}render(){return s.a.createElement("div",{hidden:"true"===this.state.auto_print},s.a.createElement("button",{className:"btn btn-primary",onClick:()=>this.printVoucher()},s.a.createElement("i",{className:"fa fa-print",style:{padding:5}}),l.g.getLang("jPrintVoucher_title")))}}var Li=Fi,ji=a(52);class Ri extends o.Component{constructor(e){super(e),this.onCheck=e=>{const t=this.props.tableContext.props;l.g.getFormAppAuto(t.infoA.key_form).runRuleFunction(t.default,{value:e,rown_data:this.props.rowData},t.infoA_parent,"checked")},this.onCheckToSelected=()=>{this.onCheck(!0)},this.state={}}render(){var e,t,a,i=this;const o=(null===(e=this.props)||void 0===e||null===(t=e.tableContext)||void 0===t||null===(a=t.state)||void 0===a?void 0:a.CMD)||{};let l=Object(v.b)("uTableColumnCheckbox");return s.a.createElement(l,{dataFull:{title_parent:this.props.title_parent,value:!!this.props.dataValue,config:{cmd:{disable:!0===o.disabled}},abs_Click:function(){let e=arguments.length>1?arguments[1]:void 0;i.onCheck(!e),void 0!==i.props.parent_handleCheckToSelected&&i.props.parent_handleCheckToSelected(i.props.dataIndex,!e,i.props.check_type)}}})}}var zi=Ri;class Pi extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.structable?t.structable=e.structable:t.structable="",null!=e.query_data?t.query_data=e.query_data:t.query_data="",null!=e.paging_record?t.paging_record=e.paging_record:t.paging_record="5",null!=e.columns?t.columns=JSON.stringify(JSON.parse(e.columns),null,4):t.columns=JSON.stringify([{code:"table.name",title:"T\xean",inputtype:"ColumnString",config:{}}],null,4),null!==e.hasPaging?t.hasPaging=e.hasPaging:t.hasPaging="true",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}onBlur(e,t){var a=this.state.data;try{var i=JSON.parse(t.target.value);a[e]=JSON.stringify(i,null,4)}catch(o){alert(o)}this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{className:"col-sm-12 col-md-12",name:"Query data",value:this.state.data.query_data,placeholder:"select * from group_menu",onChange:e=>this.onChange_Value("query_data",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"C\xf3 ph\xe2n trang kh\xf4ng?",value:this.state.data.hasPaging,data:[{title:"C\xf3",code:"true"},{title:"Kh\xf4ng",code:"false"}],onChange:e=>this.onChange_Value("hasPaging",e)}),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"C\u1ea5u h\xecnh c\u1ed9t (JSON)"),s.a.createElement("textarea",{className:"form-control",rows:"12",onChange:e=>{this.onChange_Value("columns",e)},value:this.state.data.columns,onBlur:e=>{this.onBlur("columns",e)}})),s.a.createElement(n.a,{className:"col-sm-12 col-md-12",name:"Data m\u1ed7i trang",value:this.state.data.paging_record,onChange:e=>this.onChange_Value("paging_record",e)}),s.a.createElement(n.a,{className:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}))}}var Ui=Pi;class Vi extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];void 0!==this.props.config&&void 0!==this.props.config.columns&&(t=JSON.parse(this.props.config.columns)),this.state={data:this.joinTableColumnAndLang(l.g.getConfigUserDefault("list_lang_config"),t),columns:t,lang_system:l.g.getConfigUserDefault("list_lang_config")}}joinTableColumnAndLang(e,t){var a=t;void 0===a&&(a=[]);var i=this.props.data;void 0===i&&(i={});for(var o={},s=0;s<a.length;s++)for(var l=0;l<e.length;l++)if(void 0!==a[s].title){var n=e[l].key;void 0===i[n]&&(i[n]={}),void 0===o[n]&&(o[n]={});var r=a[s].title.trim();void 0===i[n][r]?o[n][r]=r:o[n][r]=i[n][r]}return o}componentDidUpdate(e){if(this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.data!==e.data){var t=[];void 0!==this.props.config&&void 0!==this.props.config.columns&&(t=JSON.parse(this.props.config.columns)),this.setState({data:this.joinTableColumnAndLang(this.state.lang_system,t)})}}render(){return s.a.createElement("div",{className:"col-md-12 col-lg-12"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("div",{className:"no-more-tables"},s.a.createElement("table",{className:"table table-bordered table-middle"},s.a.createElement("tbody",null,this.state.columns.map((e,t)=>s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.title),s.a.createElement("td",null,this.state.lang_system.map((t,a)=>s.a.createElement(n.a,{key:a,class:"col-sm-12 col-md-12",name:t.view,value:this.state.data[t.key][e.title],onChange:a=>{var i=this.state.data;void 0===i[t.key]&&(i[t.key]={}),i[t.key][e.title]=a.target.value,this.setState({data:i})}}))))))))))}}var Bi=Vi;class Hi extends o.Component{constructor(e){var t,a,i,o,n,r,c,d,h;super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setAdvanced=(e,t)=>{if(!1===Array.isArray(t))this.setState({data:[]});else{let e=l.g.cloneJson(t),n=[],r=this.props.config.query_data,c=r.split(".")[1]||r;if(n=e,Array.isArray(n)){var a,i,o,s;for(let e=0;e<n.length;e++){const t=n[e];for(const a in t){const i=t[a];if("object"!==typeof i){let t=l.g.cloneJson(n[e]);n[e]={},n[e][c]=t,n[e][c].AFGHkeyIndexWJ=l.g.autoID();break}void 0===i.AFGHkeyIndexWJ&&(n[e][a].AFGHkeyIndexWJ=l.g.autoID())}}if(void 0!==(null===(a=this.props.config)||void 0===a||null===(i=a.columnSystemCheckBox)||void 0===i?void 0:i.methodGet)&&void 0!==(null===(o=this.props.config)||void 0===o?void 0:o.hasSystemColumnCheck)&&void 0!==(null===(s=this.props.config)||void 0===s?void 0:s.columnSystemCheckBox)){let e={},t=this.props.config.columnSystemCheckBox.methodGet;for(let a=0;a<n.length;a++)e[n[a][c].AFGHkeyIndexWJ]=n[a][c][t];this.setState({statusCheck:e,data:n,total_record:n.length,data_search:n,column_search:{}},()=>{})}else this.setState({data:n,total_record:n.length,data_search:n,column_search:{}},()=>{})}else this.setState({data:[],data_search:[]},()=>{})}},this.setCMD=(e,t)=>{const{CMD:a}=this.state;let i=Object.assign(l.g.cloneJson(a),t);if(void 0!==e&&void 0!==t){const t=e.list_component;if(t&&t.includes(this.props.default.code)){for(let e in i)"true"===i[e]&&(i[e]=!0),"false"===i[e]&&(i[e]=!1);this.setState({CMD:i})}}},this.getFormConfig=e=>s.a.createElement(Ui,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(Bi,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.pageIndexChange=e=>{this.setState({page_index:e})},this.callDir=()=>this,this.set=(e,t)=>{let a=l.g.cloneJson(t),i=[],o=this.props.config.query_data,s=o.split(".")[1]||o;if(void 0!==o&&""!==o&&(!0===o.includes(".")?void 0!==l.g.getOOP(a,o)&&(i=l.g.getOOP(a,o)):void 0!==a[o]&&(i=a[o])),Array.isArray(i)){var n,r,c,d;for(let e=0;e<i.length;e++){const t=i[e];for(const a in t){const o=t[a];if("object"!==typeof o){let t=l.g.cloneJson(i[e]);i[e]={},i[e][s]=t,i[e][s].AFGHkeyIndexWJ=l.g.autoID();break}void 0===o.AFGHkeyIndexWJ&&(i[e][a].AFGHkeyIndexWJ=l.g.autoID())}}if(void 0!==(null===(n=this.props.config)||void 0===n||null===(r=n.columnSystemCheckBox)||void 0===r?void 0:r.methodGet)&&void 0!==(null===(c=this.props.config)||void 0===c?void 0:c.hasSystemColumnCheck)&&void 0!==(null===(d=this.props.config)||void 0===d?void 0:d.columnSystemCheckBox)){let e={},t=this.props.config.columnSystemCheckBox.methodGet;for(let a=0;a<i.length;a++)e[i[a][s].AFGHkeyIndexWJ]=i[a][s][t];this.setState({statusCheck:e,data:i,total_record:i.length,data_search:i,column_search:{}},()=>{this.runRule("on_change")})}else this.setState({data:i,total_record:i.length,data_search:i,column_search:{}},()=>{this.runRule("on_change")})}else this.setState({data:[],data_search:[]},()=>{this.runRule("on_change")})},this.runRule=e=>{if(e){var t=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.reload=(e,t)=>{this.set(e,t)},this.get=(e,t)=>{let a=this.props.config.structable;if(a.includes("|")){let t=a.split("|");for(let a=0;a<t.length;a++)this.readData(t[a],e.inform)}else this.readData(a,e.inform)},this.abs_getDataLimited=function(e,t){let a={data:this.state.dataFilter.slice(e,e+t)||[],total:this.state.dataFilter.length},i=a.data;if(!0===this.state.hasCheck)for(let l=0;l<i.length;l++)i[l].hasCheck__=!1;let o=1;void 0!==a.total&&(o=a.total);let s=this.buildPaging(o,this.state.config_table);this.setState({data:i,total_record:o,paging:s})},this.pageRecordChange=e=>{let t=this.state.config_table;t.paging_record=this.state.paging_record[e];let a=this.buildPaging(this.state.total_record,t);this.setState({paging:a,page_index:1,selectedRecordIndex:e,config_table:t})},this.getAdvanced=(e,t)=>this.getData(),this.checkAllDataHandler=()=>{let e=this.props.config.query_data,t=e.split(".")[1]||e,a=this.state.statusCheck;for(let i=0;i<this.state.data_search.length;i++)this.state.totalCheck?a={}:a[this.state.data_search[i][t].AFGHkeyIndexWJ]=!0;this.setState({statusCheck:a,totalCheck:!this.state.totalCheck},()=>{this.runRule("checked")})},this.getHeaderConfig=(e,t)=>{let a=[];return"true"===this.state.hasSystemColumnCheck&&"true"!==String(this.state.CMD.disabled)&&a.push({title:this.state.headerCheckTitle,id:"system_check_box",data:{value:this.state.totalCheck,abs_Click:this.checkAllDataHandler},config:{mode:{hasSearch:!1},hasCheck:"true"===String(this.state.hasSystemColumnCheckTotal),width:"true"===this.state.hasSystemColumnCheckTotal?"70px":"",isFrozen:!1}}),(!0===e&&"true"!==String(this.state.CMD.disabled)||!0===t)&&a.push({title:"",id:"",config:{width:"20px",isFrozen:!1}}),a=a.concat(this.state.columns.map((e,t)=>{var a,i;return{title:(null===(a=this.state.lang)||void 0===a||null===(i=a[this.state.lang_select])||void 0===i?void 0:i[e.title])||e.title,id:e.code,config:{width:"",isFrozen:!1},value_search:this.state.column_search[e.code]}})),a},this.onChangeSearch=(e,t)=>{let a=this.state.column_search;a[t]=e.target.value;let i=this.state.data.filter(e=>{let i=!0;for(const n in a)if(a[n].trim()){var o;let r=l.g.getOOP(e,n);const c=this.cols_config[t];if("columnMask"===c.inputtype){var s;let e=c.config.mask;(e.includes("DD")&&e.includes("MM")&&e.includes("YY")||!0===(null===(s=c.config)||void 0===s?void 0:s.isDate))&&(r=me.d(r,e))}if(null===r)return!1;let d=null===(o=a[n])||void 0===o?void 0:o.split(" ");for(const e of d)e&&!r.toLowerCase().includes(e.toLowerCase())&&(i=!1)}return i}),o=i.length,s=this.buildPaging(o,this.state.config_table);this.setState({paging:s,page_index:1,total_record:o,data_search:i})},this.abs_autoCallBackData=()=>{let e=this.state.paging_record;e[this.state.selectedRecordIndex]+=5,this.setState({paging_record:e},()=>{})},this.getData=()=>{var e;let t=this.state.data,a=null===(e=this.state.checked_to_selected)||void 0===e?void 0:e.mode,i=this.props.config.query_data,o=i.split(".")[1]||i,s=this.state.statusCheck;switch(a){case"IS_SELECTED":return t.filter(e=>s[e[o].AFGHkeyIndexWJ]);default:return t}},this.parent_handleCheckToSelected=(e,t,a)=>{let i=this.props.config.query_data,o=this.state.checked_to_selected,s=i.split(".")[1]||i,l=this.state.statusCheck,n=[];const r=this.state.data_search;switch(a){case"CHECK_TO_SELECTED":if("IS_SELECTED"===o.mode)for(let o=0;o<r.length;o++){let a=r[o][s].AFGHkeyIndexWJ;t?l[a]=o<=e||void 0:o>=e&&(l[a]=void 0),l[a]&&n.push(r[o])}break;case"DEFAULT":if("IS_SELECTED"===o.mode){l[r[e][s].AFGHkeyIndexWJ]=t;for(let e=0;e<r.length;e++){l[r[e][s].AFGHkeyIndexWJ]&&n.push(this.state.data_search[e])}}break;case"NO_EMPTY":let a,i,c=e;for(let e=0;e<r.length;e++){l[r[e][s].AFGHkeyIndexWJ]&&(void 0===a&&(a=e),i=e)}if(c<a)for(let e=c+1;e<a;e++){l[r[e][s].AFGHkeyIndexWJ]=!0}else if(c>a&&c<i)for(let e=c+1;e<=i;e++){l[r[e][s].AFGHkeyIndexWJ]=!1}else for(let e=i;e<c;e++){l[r[e][s].AFGHkeyIndexWJ]=!0}l[r[e][s].AFGHkeyIndexWJ]=t}let c=this.state.totalCheck;(null===n||void 0===n?void 0:n.length)||(c=!1),this.setState({statusCheck:l,totalCheck:c},()=>{var e,t;void 0!==(null===(e=this.props.config.columnSystemCheckBox)||void 0===e?void 0:e.actionFo_SystemCheck)&&this.functionFo(n,null===(t=this.props.config.columnSystemCheckBox)||void 0===t?void 0:t.actionFo_SystemCheck),this.runRule("checked")})},this.parent_handleSetChecked=e=>{let t=this.state.data_show_table,a=t[e].isCheck;void 0===a&&(a=!1),t[e].isCheck=!a,this.setState({data_show_table:t})},this.handleClickTableRow=e=>{var t,a,i;!0!==((null===(t=this.props)||void 0===t||null===(a=t.tableContext)||void 0===a||null===(i=a.state)||void 0===i?void 0:i.CMD)||{}).disabled&&void 0!==this.props.config.actionFo_RowSelect&&this.functionFo(e,this.props.config.actionFo_RowSelect)},this.handleChange=e=>{let{index_row:t,code_col:a,value_change:i}=e,o=a.split("."),s=[];s=this.hasPaging?this.getDataWithPaging(this.state.data_search,this.state.page_index,this.state.config_table.paging_record):this.state.data_search,s[t][o[0]][o[1]]=i,this.setState({data:s,data_search:s,column_search:{}},()=>{this.runRule("enter_tab")})},this.getSumDataCol=e=>{let t=0;for(const i of this.state.data_search)t+=l.g.getOOP(i,e.code);let a=2;return void 0!==e.config.decimal&&(a=e.config.decimal),Object(Se.a)(t,a)},this.isHasColumnAction=()=>this.state.action.length>0&&"true"!==String(this.state.CMD.disabled),this.renderColSum=()=>{const e=this.state.columns;let t=[],a=!1,i=this.isHasColumnAction()?1:0;for(const s of e)s.isSum?(t.push({type:"EMPTY",count:i}),t.push({type:"SUM",config:s}),a=!0,i=0):i++;if(i&&t.push({type:"EMPTY",count:i}),!a)return null;const o=Object(v.b)("uTableBodyRowCalculator"),l=Object(v.b)("uTableColumnCalculator"),n=Object(v.b)("uTableColumnMerge");return s.a.createElement(o,null,t.map((e,t)=>"EMPTY"===e.type?s.a.createElement(n,{dataFull:{col_span:e.count},key:t}):s.a.createElement(l,{dataFull:{data:`${e.config.sumTitle||"Sum"} = ${this.getSumDataCol(e.config)}`},key:t})))};let _=[5,10,15,20,50];if(void 0!==this.props.config.paging_record){let e=this.props.config.paging_record.split(",");e.length>1&&(_=e)}let u={paging_record:_[0],query_data:this.props.config.query_data},g={},m=0;void 0!==g.total&&(m=g.total);let p=this.buildPaging(m,u),f=[];void 0!==g.data&&(f=g.data);let b=[],y=[],D=e.default.code.trim();if(void 0!==e.btn_of_grid&&""!==D)for(let s=0;s<e.btn_of_grid.length;s++){D===e.btn_of_grid[s].config.onTable.trim()&&(b[b.length]=e.btn_of_grid[s],-1!==e.btn_of_grid[s].default.code.indexOf("_system")&&(y[y.length]=e.btn_of_grid[s]))}let C=this.props.lang;void 0===C&&(C={}),void 0!==this.props.config.hasPaging&&(this.hasPaging="true"===this.props.config.hasPaging);let A="false";void 0!==this.props.config.hasSystemColumnCheck&&(A=this.props.config.hasSystemColumnCheck);let k="not_use";void 0!==(null===(t=this.props.config)||void 0===t||null===(a=t.columnSystemCheckBox)||void 0===a?void 0:a.check_type)&&(k=this.props.config.columnSystemCheckBox.check_type);let M="false";void 0!==(null===(i=this.props.config)||void 0===i||null===(o=i.columnSystemCheckBox)||void 0===o?void 0:o.hasSystemColumnCheckTotal)&&(M=this.props.config.columnSystemCheckBox.hasSystemColumnCheckTotal);let x="";void 0!==(null===(n=this.props.config)||void 0===n||null===(r=n.columnSystemCheckBox)||void 0===r?void 0:r.headerCheckTitle)&&(x=null===(c=this.props.config.columnSystemCheckBox)||void 0===c?void 0:c.headerCheckTitle);let N={};void 0!==(null===(d=this.props.config)||void 0===d||null===(h=d.columnSystemCheckBox)||void 0===h?void 0:h.checked_to_selected)&&(N=this.props.config.columnSystemCheckBox.checked_to_selected),this.state={dataFilter:f,data:f,lang:C,lang_select:l.g.getLangKey(),paging:p,total_record:m,paging_record:_,page_index:1,STT:!1,columns:void 0===this.props.config.columns?[]:JSON.parse(this.props.config.columns),action:b,action_system:y,config_table:u,check_screen_width:void 0,CMD:{disabled:!1},selectedRecordIndex:0,column_search:{},data_search:[],data_show_table:[],hasSystemColumnCheck:A,check_type:k,hasSystemColumnCheckTotal:M,headerCheckTitle:x,totalCheck:!1,checkedRow:!1,statusCheck:{},checked_to_selected:N},this.cols_config={};for(const s of this.state.columns)this.cols_config[s.code]=s;this.all_columnSystemCheck=[],this.value_row_select={}}buildPaging(e,t){let a=[],i=1;if(e>0)for(let o=0;o<e;o+=parseInt(t.paging_record))a[a.length]=i,i++;else a[a.length]=1;return a}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}getDataWithPaging(){let e=arguments.length>2?arguments[2]:void 0,t=((arguments.length>1?arguments[1]:void 0)-1)*e,a=t+e;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice(t,a)}readData(e,t){if(e.includes(".")){let a=e.split(".");void 0===t||"true"===t?l.g.putData(a[0],a[1],this.getData(),this.props.infoA):"false"===t?l.g.putDataGB(a[0],a[1],this.getData()):l.g.putDataGB(a[0],a[1],"")}}getPagingConfig(){return{config:{show:l.g.getLang("cTable_Paging_show"),in:l.g.getLang("cTable_Paging_in"),jump_to_page:l.g.getLang("cTable_Paging_jump_to_page"),results:l.g.getLang("cTable_Paging_results")},result_total:this.state.total_record,abs_PagingActive:this.pageIndexChange,abs_setRecordActive:this.pageRecordChange,paging_index:this.state.page_index,paging_record:this.state.paging_record.map((e,t)=>({number:e,selected:t===this.state.selectedRecordIndex}))}}UNSAFE_componentWillUpdate(e,t){this.state.data!==t.data&&(this.state.data_search=l.g.cloneJson(t.data))}functionFo(e,t){let a=void 0===t.useAction?"notUse":t.useAction,i=this.props.default;switch(a){case"txFo":var o=l.g.parseJson(t.txFo);void 0!==o?x.a.runFoWithContext(o,e,this.props.infoA,this.props.infoA_parent,i):l.g.AppException("#cColumnAction.onClick","Error Json is undefined");break;case"txFoAction":var s=l.g.parseJson(t.txFoActions);void 0!==s?x.a.runActionWithContext(s,e,this.props.infoA,this.props.infoA_parent,i):l.g.AppException("#cColumnAction.onClick","config_fo is undefined")}}render(){var e,t,a;if("false"===String(this.state.CMD.visible))return null;let i=this.state.action.length>0,o=this.state.action_system.length>0,n=this.getHeaderConfig(i,o),{hasSystemColumnCheck:r,check_type:c,statusCheck:d}=this.state;const h=Object(v.b)("uTable"),_=Object(v.b)("uTableBodyRow");if("false"===String(this.state.CMD.visible))return null;let u=[];return u=this.hasPaging?this.getDataWithPaging(this.state.data_search,this.state.page_index,this.state.config_table.paging_record):this.state.data_search,s.a.createElement(s.a.Fragment,null,s.a.createElement(h,{dataFull:{abs_autoCallBackData:this.abs_autoCallBackData,abs_search:this.onChangeSearch,Header:{data:n,config:{mode:{hasSearch:this.state.data.length>5,isFrozenHeader:!0}}},dataEmpty:{isShow:!(null===(e=this.state)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length),title:l.g.getLang("header_searchNoResult")},config:{search:{placeholder:"Search"},title:this.props.default.name,mode:{maxHeight:!0,modeTitle:"center"},isBorder:!!this.props.default.name},uPagination:this.hasPaging?this.getPagingConfig():void 0}},null===(a=u)||void 0===a?void 0:a.map((e,t)=>{let a=this.props.config.query_data,n=a.split(".")[1]||a;return s.a.createElement(_,{dataItem:e,abs_Click:this.handleClickTableRow,key:t},"true"===r&&"true"!==String(this.state.CMD.disabled)&&s.a.createElement(zi,{ref:e=>{void 0===this.all_columnSystemCheck&&(this.all_columnSystemCheck=[]),this.all_columnSystemCheck[t]=e},tableContext:this,dataValue:!0===d[e[n].AFGHkeyIndexWJ],dataIndex:t,key:t,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,check_type:c,parent_handleCheckToSelected:this.parent_handleCheckToSelected}),!0===i&&"true"!==String(this.state.CMD.disabled)&&s.a.createElement(se.a,{tableContext:this,key:t,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,data:this.state.action,value:e,title:"Action"}),"true"===String(this.state.CMD.disabled)&&!0===o&&s.a.createElement(se.a,{tableContext:this,key:t,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,data:this.state.action_system,isButtonSystem:!0,value:e,title:"Action"}),this.state.columns.map((a,i)=>{var o,n;let r=ji.a[a.inputtype];return void 0===r&&(r=ji.a.ColumnDefault),s.a.createElement(r,{code_col:a.code,index_row:t,rowData:e,tableContext:this,title_parent:a.title,key:i,title:(null===(o=this.state.lang)||void 0===o||null===(n=o[this.state.lang_select])||void 0===n?void 0:n[a.title])||a.title,config:a.config,data:l.g.getOOP(e,a.code),cmd:this.state.CMD,value:e,abs_TableChange:this.handleChange})}))}),this.renderColSum()))}}var Yi=Hi;class Qi extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),void 0!==e.action?t.action=e.action:t.action="",void 0!==e.structable?t.structable=e.structable:t.structable="",void 0!==e.structable_read?t.structable_read=e.structable_read:t.structable_read="",void 0!==e.data_default?t.data_default=e.data_default:t.data_default="{}",void 0!==e.callform?t.callform=e.callform:t.callform="",void 0!==e.callData?t.callData=e.callData:t.callData="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"L\u1ea5y data t\u1eeb form",value:this.state.data.callform,onChange:e=>this.onChange_Value("callform",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"L\u1ea5y data t\u1eeb tr\u01b0\u1eddng d\u1eef li\u1ec7u",value:this.state.data.callData,onChange:e=>this.onChange_Value("callData",e)}))}}var Gi=Qi;class Ji extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){return{}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"}))}}var Wi=Ji;class qi extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var Ki=qi;class Zi extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var Xi=Zi;class $i extends o.Component{constructor(e){super(e),this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getCodeHidden=()=>this.props.default.codeHidden,this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.checkIsLoading=()=>!!this.props.config.is_open_static_form||this.isLoading,this.setCallFormBack=(e,t)=>{if(this.props.config.is_open_static_form)this.isLoading=!0;else if(void 0!==e.key_form&&void 0!==e.key&&e.key===this.props.default.codeHidden){this.muti_form_didMount[this.muti_form_didMount.length]=e.key_form,this.isLoading=!0;var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.hasOwnProperty("componentIsLoaded")&&a.componentIsLoaded(this.props.default.codeHidden)}},this.getFormConfig=e=>s.a.createElement(Gi,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(Xi,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(Wi,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(Ki,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.set=(e,t)=>{this.setDataCallForm(t)},this.getKeyForm=()=>this.muti_form_didMount[0],this.getInfoErrror=()=>{let e="";var t=l.g.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==t&&t.hasOwnProperty("getValidateForm")){let a=t.getValidateForm();for(let t=0;t<a.length;t++){const i=a[t];e+=i.key+": "+i.info+";"}}if(""!==e)return{info:e,key:this.props.default.name,infoComponent:this.props.default}},this.get=(e,t)=>{var a=this.props.config.structable;if(a.includes("|"))for(var i=a.split("|"),o=0;o<i.length;o++)this.readData(i[o],e.inform);else this.readData(a,e.inform)},this.setAdvanced=(e,t)=>{var a=l.g.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==a&&a.hasOwnProperty("callDirFromSupport")){let i=this.props.default.code,o=new RegExp(i+"\\(([^)]*)\\)","g"),s=l.g.getElementWithRegex(o,e.list_component);s||(s=e.list_component),"*"===s?a.putDataAll_andSet(t):a.callDirFromSupport("setAdvanced",{list_component:s,list_view:e.list_view},t)}},this.checkValidate=()=>{var e=!1,t=l.g.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==t&&(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("callDirFromSupport")&&(t.callDirFromSupport("clearError",{},{}),!0!==this.props.config.notCheckValidate&&(t.callDirFromSupport("checkValidate",{},{}),t.hasOwnProperty("getFormValidate")&&(e=t.getFormValidate())))),e){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:this.data_default},async()=>{this.props.config.is_open_static_form||(await this.reloadForm(this.muti_form_didMount[0],t),this.runRuleCPN())})},this.getDataCallForm=e=>{var t=l.g.getFormAppAuto(e);return void 0===t?"":(t.hasOwnProperty("setFormValidateFromFunctionClient")&&t.setFormValidateFromFunctionClient(!1),t.hasOwnProperty("callDirFromSupport")&&(t.callDirFromSupport("clearError",{},{}),t.callDirFromSupport("checkValidate",{},{}),t.hasOwnProperty("getFormValidate")&&!t.getFormValidate()&&(t.callDirFromSupport("get",{list_component:"*",list_view:"",inform:"true",checkError:!1},{}),t.hasOwnProperty("getData")))?t.getData(""):void 0)},this.setCMD=(e,t)=>{var a=l.g.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==a&&a.hasOwnProperty("callDirFromSupport")){let i=this.props.default.code,o=new RegExp(i+"\\(([^)]*)\\)","g"),s=l.g.getElementWithRegex(o,e.list_component);if(s||(s=e.list_component),a.callDirFromSupport("setCMD",Object.assign(e,{list_component:s,list_view:e.list_view}),t),e.list_component.includes(i+"()")){const{CMD:e}=this.state;let a=Object.assign(l.g.cloneJson(e),t);for(let t in a)"true"===a[t]&&(a[t]=!0),"false"===a[t]&&(a[t]=!1);this.setState({CMD:a})}}},this.setDataGB=(e,t)=>{var a=l.g.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==a&&a.hasOwnProperty("callDirFromSupport")){let i=this.props.default.code,o=new RegExp(i+"\\(([^)]*)\\)","g"),s=l.g.getElementWithRegex(o,e.list_component);s||(s=e.list_component),a.callDirFromSupport("setDataGB",{list_component:s,list_view:e.list_view},t)}},this.reloadForm=(e,t)=>{var a=l.g.getFormAppAuto(e);void 0!==a&&a.clearForm()},this.getAdvanced=(e,t)=>{if(this.muti_form_didMount.length>0){var a=l.g.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==a)return a.getDataAll();l.g.AppException("#jMutivalue.setDataCallForm","form is undefined","system")}else l.g.AppException("#jMutivalue.setDataCallForm","muti_form_didMount is 0","system")},this.runRuleCPN=e=>{if(this.muti_form_didMount.length>0)if(void 0!==l.g.getFormAppAuto(this.muti_form_didMount[0])){if(this.isLoading){l.g.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,{},this.props.infoA_parent,e||"on_change")}}else l.g.AppException("#jMutivalue.setDataCallForm","form is undefined","system");else l.g.AppException("#jMutivalue.setDataCallForm","muti_form_didMount is 0","system")},this.setDataCallForm=async e=>{if(this.muti_form_didMount.length>0){var t=l.g.getFormAppAuto(this.muti_form_didMount[0]);if(void 0!==t){if(this.isLoading)if(void 0!==e){let a=l.g.getFormAppAuto(this.props.infoA.key_form);await t.putDataAll_andSet(e),a.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_change")}else t.clearForm()}else l.g.AppException("#jMutivalue.setDataCallForm","form is undefined","system")}else l.g.AppException("#jMutivalue.setDataCallForm","muti_form_didMount is 0","system")},this.ref_callForm=s.a.createRef(),this.config={},this.props.config&&(this.config=this.props.config),this.data_default="",void 0!==this.config.data_default&&(this.data_default=this.config.data_default);var t=this.props.validate;void 0===t&&(t={}),this.data_select={};var a=this.props.lang;void 0===a&&(a={}),this.is_open="true"===this.config.is_open,this.state={value:this.data_default,value_old:"",lang:a,lang_select:l.g.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpenForm:this.is_open,call_form:this.props.config.callform||"",CMD:{}},this.id_component=l.g.autoID(),this.isLoading=!1,this.isErrorLoadForm=!1,this.muti_form_didMount=[]}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.lang!==e.lang&&this.setState({lang:this.props.lang}),this.props.validate!==e.validate&&this.setState({validate:this.props.validate}),this.props.property!==e.property&&this.setState({property:this.props.property})}componentDidMount(){let e=this.state.call_form;e&&""!==e.trim()&&void 0!==this.ref_callForm.current&&(this.props.config.is_open_static_form?Object(A.c)(e,this.ref_callForm.current,this.props.infoA,this.props.default,this.props.default.codeHidden):Object(A.b)(e,this.ref_callForm.current,this.props.infoA,this.props.default,this.props.default.codeHidden)),setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}readData(e,t){const a=this.getDataCallForm(this.muti_form_didMount[0]);if(e.includes(".")&&void 0!==a){var i=e.split(".");const{callData:o}=this.props.config;let s=a;s=o.includes(".")?l.g.getOOP(a,o):a[o],void 0===t||"true"===t?l.g.putData(i[0],i[1],s,this.props.infoA):"false"===t?l.g.putDataGB(i[0],i[1],a):l.g.putDataGB(i[0],i[1],"")}}render(){const e=Object(v.b)("uSameForm");let t=this.props.default.class||"col-12";return s.a.createElement("div",{style:{display:"false"===String(this.state.CMD.visible)?"none":""},className:t},s.a.createElement(e,null,s.a.createElement("div",{ref:this.ref_callForm})))}}var eo=$i;class to extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.action?t.action=e.action:t.action="",null!=e.structable?t.structable=e.structable:t.structable="",null!=e.structable_read?t.structable_read=e.structable_read:t.structable_read="",null!=e.data_default?t.data_default=e.data_default:t.data_default="",null!=e.isLookup?t.isLookup=e.isLookup:t.isLookup="false",null!=e.callform?t.callform=e.callform:t.callform="",null!=e.callform_detail?t.callform_detail=e.callform_detail:t.callform_detail="",null!=e.callform_detail_mode?t.callform_detail_mode=e.callform_detail_mode:t.callform_detail_mode="modal",null!=e.data_view?t.data_view=e.data_view:t.data_view="",null!=e.data_value?t.data_value=e.data_value:t.data_value="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"D\xf9ng lookup",value:this.state.data.isLookup,data:[{title:"Kh\xf4ng d\xf9ng",code:"false"},{title:"D\xf9ng lookup",code:"true"}],onChange:e=>this.onChange_Value("isLookup",e)}),"true"===this.state.data.isLookup&&s.a.createElement(ct,{class:"col-sm-12 col-md-6",name:"L\u1ea5y data t\u1eeb form",value:this.state.data.callform,onChange:e=>this.onChange_Value("callform",e)}),"true"===this.state.data.isLookup&&s.a.createElement(ct,{class:"col-sm-12 col-md-6",name:"Xem chi ti\u1ebft",value:this.state.data.callform_detail,onChange:e=>this.onChange_Value("callform_detail",e)}),"true"===this.state.data.isLookup&&s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Xem chi ti\u1ebft mode",value:this.state.data.callform_detail_mode,data:[{title:"Modal",code:"modal"},{title:"Main",code:"main"}],onChange:e=>this.onChange_Value("callform_detail_mode",e)}),"true"===this.state.data.isLookup&&s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"OOP hi\u1ec3n th\u1ecb",value:this.state.data.data_view,onChange:e=>this.onChange_Value("data_view",e)}),"true"===this.state.data.isLookup&&s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"OOP gi\xe1 tr\u1ecb",value:this.state.data.data_value,onChange:e=>this.onChange_Value("data_value",e)}))}}var ao=to;class io extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min&&(t.min=e.min),null!=e.max&&(t.max=e.max),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"T\xean x\xe1c nh\u1eadn"),s.a.createElement("th",null,"D\u1eef li\u1ec7u"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"B\u1eaft bu\u1ed9c nh\u1eadp"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng nh\u1ecf h\u01a1n"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.min=parseFloat(e.target.value):void 0!==t.min&&delete t.min,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"S\u1ed1 t\u1eeb kh\xf4ng v\u01b0\u1ee3t qu\xe1"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max=parseFloat(e.target.value):void 0!==t.max&&delete t.max,this.setState({data:t})}}))))))))}}var oo=io;class so extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var lo=so;class no extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var ro=no;class co extends o.Component{constructor(e){super(e),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{const{CMD:a}=this.state;let i=Object.assign(l.g.cloneJson(a),t);for(let o in i)"true"===i[o]&&(i[o]=!0),"false"===i[o]&&(i[o]=!1);this.setState({CMD:i})},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>this.state.value,this.getDataOOP=(e,t)=>{const{list_component:a}=e,{code:i}=this.props.default;if(a){if(a.split(";").includes(i))return this.data_select}},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(ao,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(ro,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(oo,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(lo,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.setDataGB=(e,t)=>{},this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var a=this.props.config.structable_read.split(".");if(a.length>0&&void 0!==t[a[0]]&&void 0!==t[a[0]][a[1]])return this.data_debug.data_cpn=t[a[0]][a[1]],void this.setState({value:t[a[0]][a[1]]})}this.data_debug.data_cpn="undefined"}},this.setAdvanced=(e,t)=>{this.setState({value:t})},this.get=(e,t)=>{let a=this.props.config.structable;if(a.includes("|")){let t=a.split("|");for(let a=0;a<t.length;a++)this.readData(t[a],e.inform)}else this.readData(a,e.inform)},this.checkValidate=()=>{var e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:l.g.getLang("validateRequest")}))),e){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:this.data_default})},this.setDataDefault=()=>{this.setState({value:this.data_default})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.renderDebug=()=>{if(l.g.isDebug()){this.props.config.structable=this.props.config.structable||"";let e=this.props.config.structable.split(".")[1],t=this.data_debug.data_cpn;return null===t&&(t="NULL"),s.a.createElement("div",{style:{color:"#f17316"}},`DATA-> |${e}|:|${t}|`)}},this.getComponentConfig=()=>({config:{default:{title:this.getTitleLabel(),class:this.props.default.class,type:this.props.config.color,isBold:this.props.config.isBold,fontSize:this.props.config.fontSize},cmd:{visible:"false"!==String(this.state.CMD.visible)&&!!this.state.value}}}),this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var t=this.props.validate;void 0===t&&(t={}),this.callform_detail="",this.callform="",this.data_select={};var a=this.props.lang;void 0===a&&(a={});let i={mode:"",col_text:"",col_input:""};void 0!==e.infoA.mode_form&&(i=e.infoA.mode_form);let o={parent:"",child:""},n={class:""},r=void 0!==this.props.ofgroup&&""!==this.props.ofgroup&&"false"!==this.props.ofgroup,c=void 0!==e.infoA.mode_form&&"1"===e.infoA.mode_form.mode,d=!!this.props.ofgroup_child;if(c)if(d)o=void 0!==this.props.default&&void 0!==this.props.css_default?{parent:"",child:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:void 0!==this.props.css_default.class&&""!==this.props.css_default.class?this.props.css_default.class:"col-sm-4"}:{parent:"",child:"col-sm-4"};else if(r){let e="col-sm-"+parseInt(10/(this.props.ofgroup_data.length+1));n={class:e},o={parent:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:e,child:""}}else o={parent:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:"col-sm-6",child:""};else o=d?{parent:"",child:this.props.default.class+" jwebui-ofgroup"}:r?0===this.props.ofgroup_data.length?{parent:this.props.default.class,child:""}:{parent:this.props.default.class_ofgroup,child:this.props.default.class+" jwebui-ofgroup-fisrt"}:{parent:this.props.default.class,child:""};this.state={value:this.data_default,value_old:"",lang:a,lang_select:l.g.getLangKey(),validate:t,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:{},config_mode:i,class_config:o,css_default:n},this.data_debug={}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}readData(e,t){if(e.includes(".")){var a=e.split(".");void 0===t||"true"===t?l.g.putData(a[0],a[1],this.state.value,this.props.infoA):"false"===t?l.g.putDataGB(a[0],a[1],this.state.value):l.g.putDataGB(a[0],a[1],"")}}getTitleLabel(){return this.props.config.isUseTitle+""==="true"?this.state.lang&&this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name:l.g.isDebug()?this.props.default.name+"|->"+this.state.value:"{}"!==JSON.stringify(this.state.value)?this.state.value:""}render(){const e=Object(v.b)("uLabel"),t=Object(v.b)("uOfGroup");return"false"!==String(this.state.CMD.visible)&&this.state.value?this.props.isOfgroupParent?s.a.createElement(t,{class:this.props.default.class_ofgroup},s.a.createElement(e,{dataFull:this.getComponentConfig()}),";",this.props.ofGroupData.map(e=>s.a.createElement(N.a,Object.assign({},e,{isOfgroupParent:!1})))):s.a.createElement(e,{dataFull:this.getComponentConfig()}):null}}var ho=co;class _o extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.action?t.action=e.action:t.action="",null!=e.structable?t.structable=e.structable:t.structable="",null!=e.structable_read?t.structable_read=e.structable_read:t.structable_read="",null!=e.data_default?t.data_default=e.data_default:t.data_default="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}))}}var uo=_o;class go extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request="false",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"Confirmation Name"),s.a.createElement("th",null,"Data"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Required"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))))))))}}var mo=go;class po extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var fo=po;class vo extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var bo=vo;class yo extends o.Component{constructor(e){super(e),this.getValue=()=>({}),this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.properties?t.properties=e.properties:t.properties="",t}render(){return s.a.createElement("div",null)}}var Do=yo;class Co extends o.Component{constructor(e){super(e),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>{},this.getDataOOP=(e,t)=>{const{list_component:a}=e,{code:i}=this.props.default;if(a){if(a.split(";").includes(i))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(uo,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(bo,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(mo,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormProperty=e=>s.a.createElement(Do,{data:e,ref:e=>l.g.setConfigComponent("property",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(fo,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.setDataGB=(e,t)=>{},this.set=(e,t)=>{},this.setAdvanced=(e,t)=>{this.setState({value:t})},this.get=(e,t)=>{var a=!0;if(e.checkError&&"false"===e.checkError&&(a=!1),!a||!this.checkValidate()){var i=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(i=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(i=!0),i)){var o=this.props.config.structable;if(o.includes("|"))for(var s=o.split("|"),l=0;l<s.length;l++)this.readData(s[l],e.inform);else this.readData(o,e.inform)}}},this.checkValidate=()=>!1,this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:[]})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.renderMess=e=>{switch(e){case"key language":default:return l.g.getLang(e)}},this.renderModal=()=>{const e=this.MediaDetail;return this.state.isOpen?s.a.createElement(o.Suspense,{fallback:s.a.createElement("div",null)}," ",s.a.createElement(e,this.getDefaultConfig(this.state.value))):null};var t={};void 0===t&&(t={}),this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var a=this.props.validate;void 0===a&&(a={}),this.callform_detail="",this.callform="",this.data_select={};var i=this.props.lang;void 0===i&&(i={}),this.state={value:[],value_old:"",lang:i,lang_select:l.g.getLangKey(),validate:a,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpen:!1},this.MediaDetail=Object(v.c)("O9_FormMediaDetail")}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}readData(e,t){}render(){const e=Object(v.b)("uButton");return s.a.createElement(s.a.Fragment,null,s.a.createElement(e,{dataFull:{config:{default:{title:"",type:"",class:"",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyOCAyOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGQ9Ik0yMC40ODkgMTAuODM2NUwyNC43MDc0IDEyLjM4NkwyMS4xOTkyIDIxLjkzNzhDMjAuODcwOSAyMi44MzYyIDE5LjA5MDUgMjUuNjQ3MyAxNy44NTA3IDI2LjIyMDdMMTcuNTQ5OCAyNy4wNDE0QzE3LjQ3MzIgMjcuMjQ5MyAxNy4yNzYzIDI3LjM3OTYgMTcuMDY3MyAyNy4zNzk2QzE3LjAwODIgMjcuMzc5NiAxNi45NDkxIDI3LjM2ODYgMTYuODkgMjcuMzQ3OEMxNi42MjQxIDI3LjI0OTMgMTYuNDg2MiAyNi45NTUgMTYuNTg0NyAyNi42ODY5TDE2Ljg2OTIgMjUuOTExMUMxNi4yNCAyNC42ODg4IDE2LjcwOTQgMjEuMTM5IDE2Ljk4NTIgMjAuMzg4M0wyMC40ODkgMTAuODM2NVpNMjYuNTkzOSAwLjcyOTg3NkMyNS40MzQgMC4zMDUzMDIgMjQuMDc2IDEuMTgyOSAyMy42ODc1IDIuMjQzMjRMMjEuMTQ2NyA5LjE2NTU1TDI1LjM2NCAxMC43MTI4TDI3LjkwMTYgMy43OTE2MkMyOC4yMjExIDIuOTI0OTcgMjcuNzU2IDEuMTU1NTQgMjYuNTkzOSAwLjcyOTg3NlpNMTguOTYxNCAxMC40Nzg3QzE5LjA3OTYgMTAuNTIyNCAxOS4yMDExIDEwLjU0MzIgMTkuMzE5MyAxMC41NDMyQzE5LjczNzMgMTAuNTQzMiAyMC4xMzAxIDEwLjI4NzIgMjAuMjg0NCA5Ljg3MTM1TDIyLjk2NTMgMi42NDA0NkMyMy4xNjM0IDIuMTA3NTUgMjIuODkwOSAxLjUxNTU2IDIyLjM1OCAxLjMxODU5QzIxLjgyMDcgMS4xMjM4MSAyMS4yMzMxIDEuMzkzIDIxLjAzNTEgMS45MjU5MUwxOC4zNTQxIDkuMTU2NzlDMTguMTU2IDkuNjg5NyAxOC40Mjg1IDEwLjI4MTcgMTguOTYxNCAxMC40Nzg3Wk0xNC42NDU3IDI0LjAzNzdDMTQuMzY4OCAyMy43NzYxIDE0LjAyNDEgMjMuNDUwMSAxMy40NjYgMjMuMjAxN0MxMy4wMDY0IDIyLjk5NyAxMi41NTg5IDIyLjk4NzIgMTIuMjMxNyAyMi45Nzk1QzEyLjE5NzggMjIuOTc5NSAxMi4xNTg0IDIyLjk3ODQgMTIuMTE5IDIyLjk3NzNDMTEuOTE0NCAyMi40MTcxIDExLjQ5OTYgMjIuMDY0NyAxMC44NzcgMjEuOTI2OEMxMC4wNTMgMjEuNzUyOSA5LjM5NTM4IDIyLjE0MTMgOC45MzkwNyAyMi40NDExQzguOTc5NTYgMjIuMjExNCA5LjA0NjMxIDIxLjkzNzggOS4wOTU1NSAyMS43NDA4QzkuMjUzMTMgMjEuMTA2MSA5LjQxNTA4IDIwLjQ0OTYgOS4yOTQ3MSAxOS44MzQ2QzkuMTk5NTEgMTkuMzQ4OCA4Ljc4OTE2IDE4Ljk4NzcgOC4yOTQ1NSAxOC45NTI2QzcuMDE5NzMgMTguODgxNSA1Ljk3OCAxOS41Njc2IDUuMDU5OTEgMjAuMTg4MUM0LjA5NTg2IDIwLjgzOTEgMy40Nzc2MSAyMS4yMjc2IDIuODYyNjMgMjEuMDA3N0MyLjExMTk2IDIwLjc0MDcgMi4wMzY0NiAxOC43MDg2IDIuMzk3NTcgMTYuODk4N0MyLjcyMDM4IDE1LjI2ODMgMy4zMjExMyAxMi4yMzI4IDQuODYwNzUgMTAuODU0QzUuMzc5NDMgMTAuMzkgNi4xMzAxIDkuODg3NzYgNi43NDcyNiAxMC4xMzE4QzcuNDcyNzYgMTAuNDE2MyA4LjA3MjQyIDExLjYxMTIgOC4yMDU5MiAxMy4wMzQ5QzguMjYxNzIgMTMuNjM1NiA4Ljc4NTg4IDE0LjA3NjYgOS4zOTc1NyAxNC4wMjE5QzkuOTk5NDEgMTMuOTY2MSAxMC40NDE1IDEzLjQzMjEgMTAuMzg0NiAxMi44MzAyQzEwLjE2NzkgMTAuNTEwNCA5LjA4MDIzIDguNjk2MTEgNy41NDcxNyA4LjA5MzE3QzYuNjI5MDggNy43MzY0NCA1LjE2OTM0IDcuNjQwMTUgMy4zOTk5MSA5LjIyMzU1QzEuNDc1MSAxMC45NDcgMC43NjM4MzMgMTMuODY5OCAwLjI0ODQzNSAxNi40NzNDLTAuMDA5ODEwODUgMTcuNzczIC0wLjYzOTAxMiAyMi4wODY2IDIuMTI3MjggMjMuMDcwM0MzLjgxMjQ1IDIzLjY3MTEgNS4xODEzNyAyMi43NDQzIDYuMjgxMTEgMjIuMDAyM0M2LjQ4MjQ1IDIxLjg2NjcgNi42ODA1MSAyMS43MzMyIDYuODczMSAyMS42MTM5QzYuNjkwMzYgMjIuNDA3MiA2LjU3NjU2IDIzLjI1NjQgNy4wNTU4NSAyMy45NzJDNy43NzA0IDI1LjA0NjYgOC43ODA0IDI1LjE2MzcgMTAuMDU2MyAyNC4zMjMzQzEwLjEwNTYgMjQuMjkxNSAxMC4xNjI1IDI0LjI1NDMgMTAuMjE2MSAyNC4yMTcxQzEwLjMzNDMgMjQuNDY0NCAxMC41NDMzIDI0LjczNjkgMTAuOTIzIDI0LjkyMjlDMTEuMzgyNiAyNS4xNDg0IDExLjg0MjIgMjUuMTU5MyAxMi4xNzcgMjUuMTY4MUMxMi4zMjAzIDI1LjE3MTMgMTIuNTE2MiAyNS4xNzU3IDEyLjU3NTMgMjUuMjAyQzEyLjc4MSAyNS4yOTI4IDEyLjkwMjUgMjUuNDA0NCAxMy4xMzg5IDI1LjYyNzZDMTMuMzE2MSAyNS43OTUxIDEzLjUwMzIgMjUuOTY5MSAxMy43NDA3IDI2LjE0ODVDMTMuOTM3NyAyNi4yOTYyIDE0LjE2NzUgMjYuMzY2MyAxNC4zOTUxIDI2LjM2NjNDMTQuNzI3NyAyNi4zNjYzIDE1LjA1NzEgMjYuMjE0MiAxNS4yNzE2IDI1LjkyODZDMTUuNjMzOCAyNS40NDQ5IDE1LjUzNTMgMjQuNzU4OCAxNS4wNTE2IDI0LjM5NjZDMTQuODkzIDI0LjI3NCAxNC43NjcxIDI0LjE1MjYgMTQuNjQ1NyAyNC4wMzc3WiIgZmlsbD0iIzQ5NEY1OSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KPHJlY3Qgd2lkdGg9IjI4IiBoZWlnaHQ9IjI4IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="},cmd:{disable:!1,isLoading:!1},mode:"square"},abs_Click:()=>{var e;(null===(e=this.state.value)||void 0===e?void 0:e.length)>0&&this.setState({isOpen:!0})}}}),this.renderModal())}isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(a){}return t}getRefTypeData(e){return[{title:"Single customer",value:"C"},{title:"Group of customer",value:"G"},{title:"Customer linkage",value:"L"}].map((t,a)=>Object(i.a)(Object(i.a)({},t),{},{selected:t.value===e}))}getDefaultConfig(e){if(void 0!==e)return{modal:{title:"Signature Viewer",visibility:this.state.isOpen,abs_Close:()=>{this.setState({isOpen:!1})}},data_info:{valueModal:{dataFull:{data:[]}}},stateData:e.map(e=>({img_form:{title:e.FN,link:this.isImage(e.MCS)?"data:image/png;base64,"+e.MCS:"../rs/global/img/file_icon.svg",content:this.isImage(e.MCS)?"":e.MCS,file_type:e.FT},code:{dataFull:{config:{default:{title:"File Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.FN}},expireDate:{dataFull:{config:{default:{placeholder:this.dateFormat||" ",title:"Expire date",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:e.ED?Object(me.d)(Object(me.a)(e.ED,"YYYY-MM-DD"),"DD/MM/YYYY"):""}},other:{dataFull:{config:{default:{title:"Other",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.OT}}}))}}}var Ao=Co;class ko extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data),private_key_config:l.g.autoID()}}readConfig(e){var t={};void 0===e&&(e={}),null!=e.structable?t.structable=e.structable:t.structable="",null!=e.structable_read?t.structable_read=e.structable_read:t.structable_read="",null!=e.eventFoStart?t.eventFoStart=e.eventFoStart:t.eventFoStart="DataCoffeeShop",null!=e.eventFoStart_config?t.eventFoStart_config=e.eventFoStart_config:t.eventFoStart_config="";return t.eventClick=e.eventClick?e.eventClick:"DataCoffeeShop",t.eventClick_config=e.eventClick_config?e.eventClick_config:"",null!=e.eventFo_Year?t.eventFo_Year=e.eventFo_Year:t.eventFo_Year="",null!=e.formatDateRead?t.formatDateRead=e.formatDateRead:t.formatDateRead="",null!=e.formatDateGet?t.formatDateGet=e.formatDateGet:t.formatDateGet="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-8 col-sm-8 col-md-8"},s.a.createElement("h3",{className:"panel-title text-capitalize"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse"},"G\u1ecdi fo khi m\u1edbi m\u1edf calender"))),s.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse"},s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"}))))),s.a.createElement("div",{id:this.state.private_key_config+"_function",className:"collapse"},s.a.createElement("div",{className:"panel-body"},s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"H\xe0nh \u0111\u1ed9ng",value:this.state.data.eventFoStart,data:[{title:"L\u1ea5y v\u1edbi API",code:"LearnApi"},{title:"L\u1ea5y v\u1edbi SQL",code:"LearnSql"},{title:"Data Coffee Shop",code:"DataCoffeeShop"}],onChange:e=>this.onChange_Value("eventFoStart",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"T\xean c\u1ea5u h\xecnh li\xean k\u1ebft (API,SQL,DCS)",value:this.state.data.eventFoStart_config,onChange:e=>this.onChange_Value("eventFoStart_config",e)}))))),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-8 col-sm-8 col-md-8"},s.a.createElement("h3",{className:"panel-title text-capitalize"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse"},"Click event"))),s.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse"},s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"}))))),s.a.createElement("div",{id:this.state.private_key_config+"_function",className:"collapse"},s.a.createElement("div",{className:"panel-body"},s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"H\xe0nh \u0111\u1ed9ng",value:this.state.data.eventClick,data:[{title:"L\u1ea5y v\u1edbi API",code:"LearnApi"},{title:"L\u1ea5y v\u1edbi SQL",code:"LearnSql"},{title:"Data Coffee Shop",code:"DataCoffeeShop"}],onChange:e=>this.onChange_Value("eventClick",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"T\xean c\u1ea5u h\xecnh li\xean k\u1ebft (API,SQL,DCS)",value:this.state.data.eventClick_config,onChange:e=>this.onChange_Value("eventClick_config",e)}))))),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-8 col-sm-8 col-md-8"},s.a.createElement("h3",{className:"panel-title text-capitalize"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse"},"Chuy\u1ec3n date*"))),s.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse"},s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"}))))),s.a.createElement("div",{id:this.state.private_key_config+"_function",className:"collapse"},s.a.createElement("div",{className:"panel-body"},s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"\u0110\u1ecbnh d\u1ea1ng ng\xe0y \u0111\u1ea7u v\xe0o",value:this.state.data.eventFoStart_config,onChange:e=>this.onChange_Value("eventFoStart_config",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"\u0110\u1ecbnh d\u1ea1ng ng\xe0y \u0111\u1ea7u ra",value:this.state.data.eventFoStart_config,onChange:e=>this.onChange_Value("eventFoStart_config",e)}))))))}}var Mo=ko;class xo extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request=!1,null!=e.min&&(t.min=e.min),null!=e.max&&(t.max=e.max),null!=e.regex_format&&(t.regex_format=e.regex_format),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"Confirmation Name"),s.a.createElement("th",null,"Data"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Required"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"The number of words is not less than"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.min?this.state.data.min:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.min=parseFloat(e.target.value):void 0!==t.min&&delete t.min,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"The number of words does not exceed"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.max?this.state.data.max:"",type:"number",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.max=parseFloat(e.target.value):void 0!==t.max&&delete t.max,this.setState({data:t})}}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Regex structure"))),s.a.createElement("td",null,s.a.createElement("input",{className:"form-control",value:void 0!==this.state.data.regex_format?this.state.data.regex_format:"",type:"text",onChange:e=>{var t=this.state.data;""!==e.target.value.trim()?t.regex_format=e.target.value:t.regex_format="",this.setState({data:t})}}))))))))}}var No=xo;class wo extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var So=wo;class To extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var Eo=To;class Oo extends o.Component{constructor(e){super(e),this.getValue=()=>({}),this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.properties?t.properties=e.properties:t.properties="",t}render(){return s.a.createElement("div",null)}}var Io=Oo;var Fo=class{constructor(e,t,a){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_enable=e=>{this.property.cmd.disabled=e},this.property={main:[],position:[],cmd:{visible:"true",disabled:"true",block:"false"}}}};class Lo extends o.Component{render(){return s.a.createElement(s.a.Fragment,null,""!==this.props.ofgroup&&"false"!==this.props.ofgroup&&void 0!==this.props.ofgroup_data&&this.props.ofgroup_data.map((e,t)=>(void 0===e.config.onTable||""===e.config.onTable)&&s.a.createElement(N.a,{btn_of_grid:this.props.btn_of_grid,key:t,index:t,default:e.default,visibility:e.visibility,config:e.config,role:e.role,property:e.property,validate:e.validate,lang:e.lang,configAVD:e.configAVD,inputType:e.inputtype,value:e.value,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,infoView:this.props.infoView,css_default:this.props.css_default,ofgroup_data:this.props.ofgroup_data,ofgroup_parent:this.props.ofgroup_parent,ofgroup_child:!0})))}}var jo=Lo;class Ro extends o.Component{constructor(e){super(e),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>{},this.getDataOOP=(e,t)=>{const{list_component:a}=e,{code:i}=this.props.default;if(a){if(a.split(";").includes(i))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()},()=>{this.calendar.setOption("locale",this.state.lang_select)})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(Mo,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(Eo,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(No,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormProperty=e=>s.a.createElement(Io,{data:e,ref:e=>l.g.setConfigComponent("property",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(So,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.setDataGB=(e,t)=>{},this.set=(e,t)=>{if(void 0!==t&&void 0!==t.calender&&t.calender.length>0){let e=[];for(let a=0;a<t.calender.length;a++){let i=t.calender[a];if(void 0!==i.calender&&void 0!==i.calender.start&&i.calender.title){let t=Object(yt.e)(i.calender.start,"dd/mm/yyyy");null!=t&&e.push({id:l.g.autoID(),title:l.g.getLang(i.calender.title),start:Object(yt.c)(t,"ISOString"),end:null,constraint:i.calender.constraint?i.calender.constraint:"",color:i.calender.color?i.calender.color:"#257e4a",allDay:!!i.calender.allDay&&i.calender.allDay})}}this.addEvents(e)}},this.setAdvanced=(e,t)=>{if(void 0!==t&&void 0!==t&&t.length>0){let e=[];for(let a=0;a<t.length;a++){let i=t[a].calender.calender;if(void 0!==i&&void 0!==i.start&&i.title){let t=Object(yt.e)(i.start,"dd/mm/yyyy");null!=t&&e.push({id:l.g.autoID(),title:l.g.getLang(i.title),start:Object(yt.c)(t,"ISOString"),end:null,constraint:i.constraint?i.constraint:"",color:i.color?i.color:"#257e4a",allDay:!!i.allDay&&i.allDay})}}this.addEvents(e)}},this.goToDate=(e,t)=>{this.calendar.gotoDate(new Date(t))},this.get=(e,t)=>{var a=!0;if(e.checkError&&"false"===e.checkError&&(a=!1),!a||!this.checkValidate()){var i=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(i=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(i=!0),i)){var o=this.props.config.structable;if(o.includes("|"))for(var s=o.split("|"),l=0;l<s.length;l++)this.readData(s[l],e.inform);else this.readData(o,e.inform)}}},this.checkValidate=()=>{var e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:l.g.getLang("validateRequest")}))),e){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{let a=this.calendar.getEventById(this.eventNeedDeleteId);a&&a.remove()},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.renderMess=e=>{switch(e){case"key language":default:return l.g.getLang(e)}},this.propertyConstructor=new Fo(e.inputType,e.default,e.config);var t=l.g.component_propertyIndex(this.props.property.properties,this.propertyConstructor.getProperty());void 0===t&&(t={});var a=this.props.validate;void 0===a&&(a={}),this.callform_detail="",this.callform="",this.data_select={};var i=this.props.lang;void 0===i&&(i={});let o={mode:"",col_text:"",col_input:""};void 0!==e.infoA.mode_form&&(o=e.infoA.mode_form);let n={parent:"",child:""},r={class:""},c=void 0!==this.props.ofgroup&&""!==this.props.ofgroup&&"false"!==this.props.ofgroup,d=void 0!==e.infoA.mode_form&&"1"===e.infoA.mode_form.mode,h=!!this.props.ofgroup_child;if(d)if(h)n={parent:"",child:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:void 0!==this.props.css_default.class&&""!==this.props.css_default.class?this.props.css_default.class:"col-sm-4"};else if(c){let e="col-sm-"+parseInt(10/(this.props.ofgroup_data.length+1));r={class:e},n={parent:void 0!==this.props.default.class&&""!==this.props.default.class?this.props.default.class:e,child:""}}else n={parent:"col-sm-6",child:""};else n=h?{parent:"",child:this.props.default.class+" jwebui-ofgroup"}:c?0===this.props.ofgroup_data.length?{parent:this.props.default.class,child:""}:{parent:this.props.default.class_ofgroup,child:this.props.default.class+" jwebui-ofgroup-fisrt"}:{parent:this.props.default.class,child:""};this.resourceData={id:l.g.autoID(),title:"Resource"},this.state={value:{},value_old:{},data:[],lang:i,lang_select:l.g.getLangKey(),validate:a,date_now:(new Date).toISOString(),data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",config_mode:o,class_config:n,css_default:r}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this),x.a.runFoWithContext([{txcode:"#sys:fo-calender-loadData",input:{dataType:this.props.config.eventFoStart,dataContent:this.props.config.eventFoStart_config}}],{},this.props.infoA,this.props.infoA_parent,this.props.default)},l.g.getTimeAddComponent());let e=l.g.getConfigUserDefault("list_lang_config");for(let t=0;t<e.length;t++)void 0!==e[t].key&&l.g.loadJs("/app/calender/core/locales/"+e[t].key+".js");l.g.loadCss("/app/calender/core/main.css"),l.g.loadCss("/app/calender/daygrid/main.css"),l.g.loadCss("/app/calender/timegrid/main.css"),l.g.loadCss("/app/calender/list/main.css"),l.g.loadJs("/app/calender/core/main.js").then(e=>{l.g.loadJs("/app/calender/interaction/main.js").then(e=>{l.g.loadJs("/app/calender/daygrid/main.js").then(e=>{l.g.loadJs("/app/calender/timegrid/main.js").then(e=>{l.g.loadJs("/app/calender/list/main.js").then(e=>{this.calendar=new window.FullCalendar.Calendar(this.refs.calendar,{plugins:["interaction","dayGrid","timeGrid","list"],header:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},locale:l.g.getLangKey(),weekNumbers:!0,weekNumbersWithinDays:!0,weekNumberCalculation:"ISO",contentHeight:900,defaultDate:this.state.date_now,navLinks:!0,businessHours:!0,editable:!0,events:[],eventClick:e=>{this.eventNeedDeleteId=e.event.id,x.a.runFoWithContext([{txcode:"#sys:fo-calendar-removeEvent",input:{dataType:this.props.config.eventClick,dataContent:this.props.config.eventClick_config,start:Object(yt.b)(e.event.start,"DD/MM/YYYY")}}],{},this.props.infoA,this.props.infoA_parent,this.props.default)},dateClick:e=>{}}),this.calendar.render()},e=>{})},e=>{})},e=>{})},e=>{})},e=>{})}readData(e,t){if(e.includes(".")){var a=e.split(".");void 0===t||"true"===t?l.g.putData(a[0],a[1],this.state.value,this.props.infoA):"false"===t?l.g.putDataGB(a[0],a[1],this.state.value):l.g.putDataGB(a[0],a[1],"")}}readEvents(){let e=this.calendar.getEvents(),t=[];for(let a=0;a<e.length;a++){let i=e[a];void 0!==i.start&&void 0!==i.end&&void 0!==i.title&&t.push({start:i.start,end:i.end,title:i.title,backgroundColor:i.backgroundColor,borderColor:i.borderColor,textColor:i.textColor,rendering:i.rendering,groupId:i.groupId,allDay:i.allDay})}return t}addEvents(e){for(var t=this.calendar.getEventSources(),a=t.length,i=0;i<a;i++)t[i].remove();this.calendar.addEventSource(e)}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{ref:"calendar",className:"basic-full-calendar malibu-component-padding",style:{margin:"32px auto 32px"}}),s.a.createElement(jo,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,infoView:this.props.infoView,ofgroup:this.props.ofgroup,ofgroup_data:this.props.ofgroup_data,ofgroup_parent:l.g.cloneJson(this.props),css_default:this.state.css_default}))}}var zo=Ro;class Po extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.query_data?t.query_data=e.query_data:t.query_data="",null!=e.chartType?t.chartType=e.chartType:t.chartType="ColumnChart",null!=e.chart_width?t.chart_width=e.chart_width:t.chart_width="",null!=e.chart_height?t.chart_height=e.chart_height:t.chart_height="600",null!=e.columns?t.columns=JSON.stringify(JSON.parse(e.columns),null,4):t.columns=JSON.stringify([{columnName:"Kh\xf4ng c\u1ea7n t\xean",tableColumnGroup:"table1.recname"},{columnName:"T\u1ed5ng c\u1ee7a tableColumn 1",tableColumn:"table1.recvalue"},{columnName:"T\u1ed5ng c\u1ee7a tableColumn 2",tableColumn:"table1.recvalue"}],null,4),null!=e.options?t.options=JSON.stringify(JSON.parse(e.options),null,4):t.options=JSON.stringify({title:"Population of Largest U.S. Cities",chartArea:{width:"30%"},hAxis:{title:"Total Population",minValue:0},vAxis:{title:"City"}},null,4),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}onBlur(e,t){var a=this.state.data;try{var i=JSON.parse(t.target.value);a[e]=JSON.stringify(i,null,4)}catch(o){alert(o)}this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{className:"col-sm-12 col-md-11",name:"Query data",value:this.state.data.query_data,placeholder:"select * from group_menu",onChange:e=>this.onChange_Value("query_data",e)}),s.a.createElement("button",{onClick:()=>{var e=l.g.getDataLimited(this.state.data.query_data,0,1e3);l.g.log(e,"Check")}},"Check"),s.a.createElement(n.a,{className:"col-sm-4 col-md-4",name:"Chart type",value:this.state.data.chartType,placeholder:"ColumnChart",onChange:e=>this.onChange_Value("chartType",e)}),s.a.createElement(n.a,{className:"col-sm-4 col-md-4",name:"Height",value:this.state.data.chart_height,placeholder:"600",onChange:e=>this.onChange_Value("chart_height",e)}),s.a.createElement(n.a,{className:"col-sm-4 col-md-4",name:"Width",value:this.state.data.chart_width,placeholder:"must be number, default 100% if it is empty",onChange:e=>this.onChange_Value("chart_width",e)}),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"C\u1ea5u h\xecnh c\u1ed9t (JSON)"),s.a.createElement("textarea",{className:"form-control",rows:"12",onChange:e=>{this.onChange_Value("columns",e)},value:this.state.data.columns,onBlur:e=>{this.onBlur("columns",e)}})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"C\u1ea5u h\xecnh tu\u1ef3 ch\u1ecdn (JSON)"),s.a.createElement("textarea",{className:"form-control",rows:"12",onChange:e=>{this.onChange_Value("options",e)},value:this.state.data.options,onBlur:e=>{this.onBlur("options",e)}})))}}var Uo=Po;class Vo extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){return void 0===e&&(e={}),{}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"}))}}var Bo=Vo;class Ho extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null)}}var Yo=Ho;class Qo extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){return void 0===e&&(e={}),{}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"})}}var Go=Qo;class Jo extends o.Component{constructor(e){super(e),this.getValue=()=>({}),this.state={data:this.readConfig(this.props.data)}}readConfig(e){return void 0===e&&(e={}),{}}render(){return s.a.createElement("div",null)}}var Wo=Jo;class qo extends o.Component{constructor(e){super(e),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>{},this.getDataOOP=(e,t)=>{const{list_component:a}=e,{code:i}=this.props.default;if(a){if(a.split(";").includes(i))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(Uo,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(Go,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(Bo,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormProperty=e=>s.a.createElement(Wo,{data:e,ref:e=>l.g.setConfigComponent("property",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(Yo,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.drawChart=()=>{if(void 0!==this.state.data&&void 0!==window.google&&void 0!==window.google.visualization){let e=window.google.visualization.arrayToDataTable(this.state.data),{options:t,chart_id:a,chartType:i}=this.state,o=this.getChartByIdAndType(a,i);null!=o&&o.draw(e,t)}},this.getChartByIdAndType=(e,t)=>{let a=null;switch(t){case"AreaChart":a=new window.google.visualization.AreaChart(document.getElementById(e));break;case"ColumnChart":a=new window.google.visualization.ColumnChart(document.getElementById(e));break;case"LineChart":a=new window.google.visualization.LineChart(document.getElementById(e));break;case"PieChart":a=new window.google.visualization.PieChart(document.getElementById(e))}return a},this.setDataGB=(e,t)=>{},this.set=(e,t)=>{if(void 0!==t&&void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var a=this.props.config.structable_read.split(".");if(a.length>0&&void 0!==t[a[0]]&&void 0!==t[a[0]][a[1]])return void this.convertDataJWebUI_toDataChart(t)}this.convertDataJWebUI_toDataChart([])},this.setAdvanced=(e,t)=>{if(e.codeHidden&&e.codeHidden===this.props.default.codeHidden&&(this.data_select=t,void 0!==this.data_select)){if(this.state.isLookup){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&(a.putDataSetAdvanced(this.props.default,this.data_select),a.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,"on_change"))}var i="";void 0!==this.props.config.data_view&&(i=": "+l.g.getOOP(this.data_select,this.props.config.data_view.trim()));var o="";void 0!==this.props.config.data_value&&(o=l.g.getOOP(this.data_select,this.props.config.data_value.trim())),this.setState({value:o,data_view:i})}},this.get=(e,t)=>{var a=!0;if(e.checkError&&"false"===e.checkError&&(a=!1),!a||!this.checkValidate()){var i=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(i=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(i=!0),i)){var o=this.props.config.structable;if(o.includes("|"))for(var s=o.split("|"),l=0;l<s.length;l++)this.readData(s[l],e.inform);else this.readData(o,e.inform)}}},this.checkValidate=()=>{var e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:l.g.getLang("validateRequest")}))),e){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{let a=l.g.getDataLimited(this.props.config.query_data,0,9999999),i=this.convertDataJWebUI_toDataChart(a.data,this.state.data_column);this.setState({data:i},()=>this.drawChart())},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.renderMess=e=>{switch(e){case"key language":default:return l.g.getLang(e)}};var t=l.g.getDataLimited(this.props.config.query_data,0,9999999);let a=this.props.lang;void 0===a&&(a={});let i={};void 0!==this.props.config.options&&(i=l.g.jsonParser(this.props.config.options),void 0===i&&(i={}));let o=[];void 0!==this.props.config.columns&&(o=l.g.jsonParser(this.props.config.columns),void 0===o&&(o=[]));let n=600;void 0!==this.props.config.chart_height&&"0"!==this.props.config.chart_height&&(n=parseInt(this.props.config.chart_height));let r="100%";void 0!==this.props.config.chart_width&&""!==this.props.config.chart_width&&"0"!==this.props.config.chart_width&&(r=parseInt(this.props.config.chart_width)),i.width=r,i.height=n;let c=l.g.autoID();this.state={chart_id:c,value:this.data_default,data_column:o,data:this.convertDataJWebUI_toDataChart(t.data,o),options:i,chartType:this.props.config.chartType,value_old:"",lang:a,lang_select:l.g.getLangKey(),data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:""}}convertDataJWebUI_toDataChart(e,t){let a={},i=t,o=[];if(void 0!==e&&void 0!==t){for(let t=0;t<e.length;t++){let o=e[t];if(i.length>1&&void 0!==i[0].tableColumnGroup){let e=this.readTableCode(i[0].tableColumnGroup,o);void 0===a[e]&&(a[e]=[]);for(let t=1;t<i.length;t++)if(void 0!==i[t].tableColumn&&""!==i[t].tableColumn.trim()){let s=a[e][t-1];void 0===s&&(s=0);let l=this.readTableCode(i[t].tableColumn,o);""!==l&&(s+=parseFloat(l),a[e][t-1]=s)}}}let s=[];for(let e=0;e<t.length;e++)void 0!==t[e].columnName&&s.push(t[e].columnName);o.push(s);for(let e in a){let t=[];t.push(e);let i=a[e];for(let e=0;e<i.length;e++)t.push(i[e]);o.push(t)}}return o}readTableCode(e,t){if(e.includes(".")&&void 0!==t){let a=e.split(".");if(a.length>1)return t[a[0]][[a[1]]]}return""}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}readData(e,t){if(e.includes(".")){var a=e.split(".");void 0===t||"true"===t?l.g.putData(a[0],a[1],this.state.value,this.props.infoA):"false"===t?l.g.putDataGB(a[0],a[1],this.state.value):l.g.putDataGB(a[0],a[1],"")}}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{id:this.state.chart_id,style:{width:"100%"}}))}}var Ko=qo,Zo=a(33),Xo=a(34),$o=a(35),es=a(36);class ts extends o.Component{constructor(e){var t,a;super(e),this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{const{CMD:a}=this.state;let i=Object.assign(l.g.cloneJson(a),t);for(let o in i)"true"===i[o]&&(i[o]=!0),"false"===i[o]&&(i[o]=!1);this.setState({CMD:i})},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>this.state.value,this.getDataOOP=(e,t)=>{const{list_component:a}=e,{code:i}=this.props.default;if(a){if(a.split(";").includes(i))return this.data_select}},this.changeKeyLanguage=()=>{""!==this.state.help_mess&&this.checkValidate(),this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(Zo.default,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(es.default,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(Xo.default,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement($o.default,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.setDataGB=(e,t)=>{},this.set=(e,t)=>{if(void 0!==t){if(void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){var a=this.props.config.structable_read.split(".");if(a.length>0&&void 0!==t[a[0]]&&void 0!==t[a[0]][a[1]])return this.data_debug.data_cpn=t[a[0]][a[1]],void this.setState({value:t[a[0]][a[1]]})}this.data_debug.data_cpn="undefined"}},this.setAdvanced=(e,t)=>{},this.get=(e,t)=>{},this.checkValidate=()=>{var e=!1,t=this.state.value;if(void 0!==t&&(void 0===this.state.validate.request||e||this.state.validate.request&&""===t&&(e=!0,this.setState({help_css:"warning",help_icon:"glyphicon-warning-sign",help_mess:l.g.getLang("validateRequest")}))),e){var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.setFormValidateFromComponent(!0,this.props.default)}return e},this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:this.data_default})},this.setDataDefault=()=>{this.setState({value:this.data_default})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.renderDebug=()=>{if(l.g.isDebug()){this.props.config.structable=this.props.config.structable||"";let e=this.props.config.structable.split(".")[1],t=this.data_debug.data_cpn;return null===t&&(t="NULL"),s.a.createElement("div",{style:{color:"#f17316"}},`DATA-> |${e}|:|${t}|`)}},this.getComponentConfig=()=>{let e=this.state.total;return isNaN(parseInt(e))&&parseInt(e)<=0&&(e=100),{config:{default:{title:this.props.lang.label[this.state.lang_select],hasLabel:"true"===this.props.config.label},cmd:{percent:this.state.value},mode:!0}}},this.getComponentConfigLabel=()=>{let e=this.state.lang.label[this.state.lang_select];return{config:{default:{title:e,class:this.props.default.class},cmd:{visible:"false"!==String(this.state.hasLabel)&&!!e&&""!==e}}}},this.data_default="",void 0!==this.props.config.data_default&&(this.data_default=this.props.config.data_default);var i=this.props.validate;void 0===i&&(i={}),this.data_select={};var o=this.props.lang;void 0===o&&(o={});let n={mode:"",col_text:"",col_input:""};void 0!==e.infoA.mode_form&&(n=e.infoA.mode_form);let r=null===(t=this.props.config)||void 0===t?void 0:t.label,c=null===(a=this.props.config)||void 0===a?void 0:a.total;this.state={value:this.data_default,value_old:"",lang:o,lang_select:l.g.getLangKey(),validate:i,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",CMD:{},config_mode:n,class_config:{parent:"",child:""},css_default:{class:""},hasLabel:r,total:c},this.data_debug={}}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}readData(e,t){if(e.includes(".")){var a=e.split(".");void 0===t||"true"===t?l.g.putData(a[0],a[1],this.state.value,this.props.infoA):"false"===t?l.g.putDataGB(a[0],a[1],this.state.value):l.g.putDataGB(a[0],a[1],"")}}render(){if("false"===String(this.state.CMD.visible))return null;const e=Object(v.b)("uProgressBarLogic");return s.a.createElement(e,{dataFull:this.getComponentConfig()})}}var as=ts;class is extends o.Component{constructor(e){super(e),this.getValue=()=>{var e=this.state.data;if(void 0!==this.refs.txFo){var t=this.refs.txFo.getValue();void 0!==t.txFo&&(e.txFo=t.txFo)}if(void 0!==this.refs.txFoAction){var a=this.refs.txFoAction.getValue();void 0!==a.txFoActions&&(e.txFoActions=a.txFoActions)}return e};var t=this.readConfig(this.props.data),a=this.changDataSchemaToDataSelect(),i=[];if(a.length>0&&void 0!==t.tableMasterData&&""!==t.tableMasterData){var o=this.changDataSchemaTo_privateKeyTableMasterData(t.tableMasterData,t);void 0!==o.data_schema_pk&&(i=o.data_schema_pk)}this.state={data:t,data_schema:a,data_schema_pk:i,private_key_config:l.g.autoID()}}changDataSchemaToDataSelect(){for(var e=Object(l.n)().all_id_button,t=[{title:"Ch\u01b0a ch\u1ecdn",code:""}],a=0;a<e.length;a++)t[t.length]={title:e[a].title,code:e[a].type};return t.sort((function(e,t){var a=e.title.toUpperCase(),i=t.title.toUpperCase();return a<i?-1:a>i?1:0})),t}changDataSchemaTo_privateKeyTableMasterData(e,t){var a=Object(l.n)(),i=[],o="";if(void 0!==a&&void 0!==a.all_id_button)for(var s=a.all_id_button,n=0;n<s.length;n++){var r=s[n];if(void 0!==r.type&&void 0!==r.detail&&""!==r.type.trim()&&r.type.trim()===e){for(var c=0;c<r.detail.length;c++){var d=r.detail[c];void 0!==d.datapk&&"true"===d.datapk&&(""===o&&(o=d.code),i[i.length]={title:d.title,code:d.code})}break}}var h=t;return h.privateKeyTableMasterData=o,{data_schema_pk:i,data:h}}readConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},a={structable:"",structable_read:"",data_default:"",data_type:"edit",component_title:"",mask_format:"",mask_data_format:"",value_type:"all",auto_delete:"true",mask_mode:"default",content_style:""};for(let i in a)t[i]=e[i]||a[i];return void 0===e&&(e={}),null!=e.action?t.action=e.action:t.action="",null!=e.txFoActions?t.txFoActions=e.txFoActions:t.txFoActions="",null!=e.txFo?t.txFo=e.txFo:t.txFo="",null!=e.useAction?t.useAction=e.useAction:t.useAction="true",null!=e.icon?t.icon=e.icon:t.icon="fa-floppy-o",null!=e.color?t.color=e.color:t.color="info",null!=e.onTable?t.onTable=e.onTable:t.onTable="",null!=e.isMasterData?t.isMasterData=e.isMasterData:t.isMasterData="false",null!=e.tableMasterData?t.tableMasterData=e.tableMasterData:t.tableMasterData="",null!=e.privateKeyTableMasterData?t.privateKeyTableMasterData=e.privateKeyTableMasterData:t.privateKeyTableMasterData="",void 0!==e.structable?t.structable=e.structable:t.structable="",void 0!==e.structable_read?t.structable_read=e.structable_read:t.structable_read="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;if(a[e]=t.target.value,"tableMasterData"===e){var i=this.changDataSchemaTo_privateKeyTableMasterData(t.target.value,a);this.setState({data_schema_pk:i.data_schema_pk,data:i.data})}else this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"Thu\u1ed9c grid",value:this.state.data.onTable,onChange:e=>this.onChange_Value("onTable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"Icon",value:this.state.data.icon,onChange:e=>this.onChange_Value("icon",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"Color",value:this.state.data.color,onChange:e=>this.onChange_Value("color",e)}),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-8 col-sm-8 col-md-8"},s.a.createElement("h3",{className:"panel-title text-capitalize"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse"},"H\xe0nh \u0111\u1ed9ng"))),s.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse"},s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"}))))),s.a.createElement("div",{id:this.state.private_key_config+"_function",className:"collapse"},s.a.createElement("div",{className:"panel-body"},s.a.createElement(r.a,{class:"col-sm-12 col-md-12",name:"H\xe0nh \u0111\u1ed9ng click",value:this.state.data.useAction,data:[{title:"G\u1ecdi tx fo",code:"false"},{title:"G\xf5 nhanh",code:"true"}],onChange:e=>this.onChange_Value("useAction",e)}),s.a.createElement(d.a,{ref:"txFo",hidden:"false"===this.state.data.useAction,data:this.state.data.txFo}),s.a.createElement(c.a,{hidden:"true"===this.state.data.useAction,ref:"txFoAction",data:this.state.data.txFoActions}))))),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-8 col-sm-8 col-md-8"},s.a.createElement("h3",{className:"panel-title text-capitalize"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_master",className:"pull-left","data-toggle":"collapse"},"Master data"))),s.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_master",className:"pull-right","data-toggle":"collapse"}," ",s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"})," ")))),s.a.createElement("div",{id:this.state.private_key_config+"_master",className:"collapse"},s.a.createElement("div",{className:"panel-body"},s.a.createElement(r.a,{className:"col-sm-12 col-md-12",name:"L\xe0 master data",value:this.state.data.isMasterData,data:[{title:"Kh\xf4ng",code:"false"},{title:"\u0110\xfang",code:"true"}],onChange:e=>this.onChange_Value("isMasterData",e)}),"true"===this.state.data.isMasterData&&s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u",value:this.state.data.tableMasterData,data:this.state.data_schema,onChange:e=>this.onChange_Value("tableMasterData",e)}),"true"===this.state.data.isMasterData&&s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Kh\xf3a ch\xednh",value:this.state.data.privateKeyTableMasterData,data:this.state.data_schema_pk,onChange:e=>this.onChange_Value("privateKeyTableMasterData",e)}))))))}}var os=is;class ss extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var ls=ss;class ns extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var rs=ns;class cs extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Kh\xf4ng",t[0].code="false",t[1]={},t[1].title="D\xf9ng",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.danger?t.danger=e.danger:t.danger="",null!=e.warning?t.warning=e.warning:t.warning="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Danger",data:this.state.list_true_false,value:this.state.data.danger,hasNew:!1,onChange:e=>this.onChange_Value("danger",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Warning",data:this.state.list_true_false,value:this.state.data.warning,hasNew:!1,onChange:e=>this.onChange_Value("warning",e)}))}}var ds=cs;var hs=class{constructor(e,t,a){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=e=>{this.property.cmd.disabled=e},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class _s extends o.Component{constructor(e){if(super(e),this.setDataOOP=(e,t)=>{this.setState({dataOOP:t},()=>{l.g.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,t,this.props.infoA_parent,"update")})},this.getDataOOP=(e,t)=>{const{list_component:a}=e,{code:i}=this.props.default;if(a){if(a.split(";").includes(i))return this.state.dataOOP}},this.setCMD=(e,t)=>{if(void 0!==e&&void 0!==t){const a=e.list_component;if(a&&a.includes(this.props.default.code)){this.propertyConstructor.setCMD(t);let{dataFull:e}=this.state;e.config.cmd.disable="true"===String(this.propertyConstructor.getCMD_disable()),e.config.cmd.visible=this.propertyConstructor.getCMD_visible(),this.setState({dataFull:e})}}},this.getAdvanced=(e,t)=>{},this.setAdvanced=(e,t)=>{},this.getInfoCheckRun=()=>{let e=this.propertyConstructor.getCMD();return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getFormConfig=e=>s.a.createElement(os,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(rs,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormProperty=e=>s.a.createElement(ds,{data:e,ref:e=>l.g.setConfigComponent("property",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(ls,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.changeKeyLanguage=()=>{this.state.lang_default?this.setState({lang:l.g.getLang(this.props.default.code),lang_select:l.g.getLangKey()}):this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.get=(e,t)=>{let a=this.props.config.structable;if(a.includes("|")){let t=a.split("|");for(let a=0;a<t.length;a++)this.readData(t[a],e.inform)}else this.readData(a,e.inform)},this.reload=(e,t)=>{this.setState({file_value:void 0})},this.runFO=(e,t)=>{t.action&&x.a.runActionWithContext(t.action,{},this.props.infoA,this.props.infoA_parent,this.props.default),t.txFo&&x.a.runFoWithContext(t.txFo,{},this.props.infoA,this.props.infoA_parent,this.props.default)},this.setLoadingAction=(e,t)=>{const a=(null===t||void 0===t?void 0:t.isLoading)||!1;let i=this.state.dataFull;i.config.cmd.isLoading=a,i.config.cmd.disable=a||"true"===String(this.propertyConstructor.getCMD_disable()),this.setState({dataFull:i})},this.fileSelectHandler=e=>{},this.runRule=e=>{if(e){var t=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.showToast=function(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={},o=e;switch(t){case!0:a&&(o+=" successfully"),i={class_:"success",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}};break;case!1:a&&(o+=" error"),i={class_:"error",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}}}l.g.pushNotify("notifyToast",i,{}),l.g.pushNotify("notifyDefault",i,{}),l.g.callAllScreenListen()},this.propertyConstructor=new hs(e.inputType,e.default,e.config),this.uploadfile_result={},this.disabled=!1,void 0!==this.props.infoA.form_code){var t=l.g.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=t&&void 0!==t.role&&(void 0!==t.role.disabled&&(!0===t.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==t.role.visible&&(!0===t.role.visible?this.propertyConstructor.setCMD_visible(e.visibility&&!0):this.propertyConstructor.setCMD_visible(e.visibility&&!1)))}var a=this.props.lang;void 0===a&&(a={});let i={color:this.props.config.color,icon:this.props.config.icon},o={btn_remove:{color:"danger",icon:"fa-trash-o"},btn_save:{color:"success",icon:"fa-save"},btn_add:{color:"primary",icon:"fa-plus"},btn_modified:{color:"warning",icon:"fa-pencil-square-o"},btn_update:{color:"warning",icon:"fa-cloud-upload"},btn_cancel:{color:"default",icon:"fa-ban"},btn_clear:{color:"default",icon:"fa-times"},btn_import:{color:"primary",icon:"fa-upload"},btn_export:{color:"primary",icon:"fa-download"},btn_accept:{color:"primary",icon:"fa-check"},btn_apply:{color:"primary",icon:"fa-check"},btn_search:{color:"primary",icon:"fa-search"},btn_copy:{color:"primary",icon:"fa-files-o"},btn_print:{color:"base",icon:"fa-print"},btn_printVoucher:{color:"base",icon:"fa-file-text-o"}},n=!1;void 0!==o[this.props.default.code]&&(i=o[this.props.default.code],a=l.g.getLang(this.props.default.code),n=!0);var r=!1;void 0!==this.props.config.isLookup&&"true"===this.props.config.isLookup&&(r=!0),this.state={file_value:void 0,lang:a,lang_select:l.g.getLangKey(),lang_default:n,dataOOP:{},count:1,config_btn:i,show_modal:"none",isLookup:r,dataFull:{config:{default:{title:this.props.default.name,type:this.props.config.color,class:this.props.default.class,icon:this.props.config.icon,accept:this.props.config.accept},cmd:{disable:"true"===String(this.propertyConstructor.getCMD_disable()),isLoading:!1}}}},this.time_last_click=0}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}readData(e,t){var a=e.split(".");if(2!==a.length)return;let i=this.uploadfile_result;switch(t){case void 0:case"true":l.g.putData(a[0],a[1],i,this.props.infoA);break;case"false":l.g.putDataGB(a[0],a[1]);break;default:l.g.putDataGB(a[0],a[1],"")}}componentDidMount(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let e=l.g.cloneJson(this.props.infoA);e.componentParent=this.props.default,Object(A.b)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),e,this.props.default,"callform")}setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}onClick(){let e=(new Date).getTime();e-this.time_last_click<1e3||(this.time_last_click=e,void 0!==this.props.config.uploadfile&&"true"===this.props.config.uploadfile.active?this.refs.uploadfile_hidden.click():this.this_redirect())}this_redirect(){if(this.propertyConstructor.getCMD_visible())if(void 0!==this.props.config.useAction)if("true"===this.props.config.useAction){var e=l.g.parseJson(this.props.config.txFoActions);void 0!==e?x.a.runActionWithContext(e,{},this.props.infoA,this.props.infoA_parent,this.props.default):l.g.AppException("#CBUTTON.onClick","config_fo is undefined")}else if(void 0!==this.props.config.txFo){var t=l.g.parseJson(this.props.config.txFo);void 0!==t?x.a.runFoWithContext(t,{},this.props.infoA,this.props.infoA_parent,this.props.default):l.g.AppException("#CBUTTON.onClick","Error Json is undefined")}else l.g.AppException("#CBUTTON.onClick","txFo is undefined");else l.g.AppException("#CBUTTON.onClick","useAction is undefined");else alert(l.g.getLang("#sysDontLoveMe"));var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_click"),l.g.isDebug()&&l.g.copyToClipboard(JSON.stringify(this.props.config.txFo))}render(){const e=Object(v.b)("uInputFile");if("false"===this.state.dataFull.config.cmd.visible)return null;const t=Object(v.b)("uOfGroup");return this.props.isOfgroupParent?s.a.createElement(t,{class:this.props.default.class_ofgroup},s.a.createElement(s.a.Fragment,null,s.a.createElement(e,{dataFull:Object(i.a)(Object(i.a)(Object(i.a)({},this.state.dataFull),{config:Object(i.a)({},Object(i.a)(Object(i.a)({},this.state.dataFull.config),{default:Object(i.a)(Object(i.a)({},this.state.dataFull.config.default),{att_content:this.state.file_value?this.state.file_value.name:"No file choose"})}))}),{},{abs_Change:e=>{void 0!==e.target.files&&(e.target.files.length>0?(Object(te.a)(e.target.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then(e=>{this.uploadfile_result=e,this.this_redirect()},e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#",!1):this.showToast("buttonNotSelectFile",!1)}),this.setState({file_value:e.target.files[0]})):this.showToast("buttonNotSelectFile",!1))},abs_Click:(e,t)=>{this.onClick()}})})),this.props.ofGroupData.map(e=>s.a.createElement(N.a,Object.assign({},e,{isOfgroupParent:!1})))):s.a.createElement(s.a.Fragment,null,s.a.createElement(e,{dataFull:Object(i.a)(Object(i.a)(Object(i.a)({},this.state.dataFull),{config:Object(i.a)({},Object(i.a)(Object(i.a)({},this.state.dataFull.config),{default:Object(i.a)(Object(i.a)({},this.state.dataFull.config.default),{att_content:this.state.file_value?this.state.file_value.name:"No file choose"})}))}),{},{abs_Change:e=>{void 0!==e.target.files&&(e.target.files.length>0?(this.uploadfile_result={name:e.target.files[0].name},Object(te.a)(e.target.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then(e=>{this.this_redirect()},e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#",!1):this.showToast("buttonNotSelectFile",!1)}),this.setState({file_value:e.target.files[0]})):this.showToast("buttonNotSelectFile",!1))},abs_Click:(e,t)=>{this.onClick()}})}))}}var us=_s,gs=a(60);class ms extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.action?t.action=e.action:t.action="",null!=e.structable?t.structable=e.structable:t.structable="",null!=e.structable_read?t.structable_read=e.structable_read:t.structable_read="",null!=e.data_default?t.data_default=e.data_default:t.data_default="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-12",name:"D\u1ea1y c\xe1ch \u0111\u1ecdc data cho set: user.name",value:this.state.data.structable_read,onChange:e=>this.onChange_Value("structable_read",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",value:this.state.data.data_default,onChange:e=>this.onChange_Value("data_default",e)}))}}var ps=ms;class fs extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.request?t.request=e.request:t.request="false",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement("div",{className:"prtm-block-content"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",{className:"thead-primary"},s.a.createElement("tr",null,s.a.createElement("th",null,"Confirmation Name"),s.a.createElement("th",null,"Data"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Required"))),s.a.createElement("td",null,s.a.createElement("input",{className:"control-input",type:"checkbox",checked:void 0!==this.state.data.request&&this.state.data.request,onChange:e=>{var t=this.state.data;t.request=e.target.checked,this.setState({data:t})}}))))))))}}var vs=fs;class bs extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var ys=bs;class Ds extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(r.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var Cs=Ds;class As extends o.Component{constructor(e){super(e),this.getValue=()=>({}),this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.properties?t.properties=e.properties:t.properties="",t}render(){return s.a.createElement("div",null)}}var ks=As;var Ms=class{constructor(e,t,a){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=e=>{this.property.cmd.disabled=e},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}};class xs extends o.Component{constructor(e){var t;super(e),t=this,this.getCode=()=>this.props.default.code,this.getCodeHidden=()=>this.props.default.codeHidden,this.setCMD=(e,t)=>{if(void 0!==e&&void 0!==t){const a=e.list_component;if(a&&a.includes(this.props.default.code)){this.propertyConstructor.setCMD(t);let{dataFull:e}=this.state;e.config.cmd.disable="true"===String(this.propertyConstructor.getCMD_disable()),e.config.cmd.visible=this.propertyConstructor.getCMD_visible(),this.setState({dataFull:e})}}},this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getAdvanced=(e,t)=>{},this.getDataOOP=(e,t)=>{const{list_component:a}=e,{code:i}=this.props.default;if(a){if(a.split(";").includes(i))return this.data_select}},this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.setCallFormBack=(e,t)=>{void 0!==e.key&&void 0!==e.key_form&&(this[e.key]=e.key_form)},this.getFormConfig=e=>s.a.createElement(ps,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(Cs,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormValidate=e=>s.a.createElement(vs,{data:e,ref:e=>l.g.setConfigComponent("validate",e)}),this.getFormProperty=e=>s.a.createElement(ks,{data:e,ref:e=>l.g.setConfigComponent("property",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(ys,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.setDataGB=(e,t)=>{},this.set=(e,t)=>{},this.get=(e,t)=>{var a=!0;if(e.checkError&&"false"===e.checkError&&(a=!1),!a||!this.checkValidate()){var i=!1;if(null!==e&&void 0!==e&&(e.list_component?(";"+e.list_component+";").includes(";"+this.props.default.code+";")&&(i=!0):void 0!==e.list_view&&void 0!==this.props.infoView.code&&this.props.infoView.code===e.list_view&&(i=!0),i)){var o=this.props.config.structable;if(o.includes("|"))for(var s=o.split("|"),l=0;l<s.length;l++)this.readData(s[l],e.inform);else this.readData(o,e.inform)}}},this.checkValidate=()=>!1,this.clearError=()=>{this.setState({help_css:"",help_icon:"",help_mess:""})},this.reload=(e,t)=>{this.setState({value:[]})},this.getInfoErrror=()=>{if(""!==this.state.help_mess){var e=void 0!==this.state.lang&&void 0!==this.state.lang[this.state.lang_select]?this.state.lang[this.state.lang_select]:this.props.default.name;return{info:this.state.help_mess,key:e,infoComponet:this.props.default}}return""},this.renderMess=e=>{switch(e){case"key language":default:return l.g.getLang(e)}},this.setPaging=e=>{console.log(e),this.callAPI(this.props.config.apiId,{page:e}).then(t=>{if(t.PAGING&&t.PAGING.TOTAL){let{value:a,dataFull_paging:i,titleNoData:o}=this.state;o="",i.result_total=t.PAGING.TOTAL,a=t.MEDIA,i.number_item=e-1,this.setState({dataFull_paging:i,value:a,titleNoData:o})}else{let{value:e,dataFull_paging:t,titleNoData:a}=this.state;t.result_total=0,e=[],t.number_item=0,a="Hasn't Signature Information",this.setState({value:e,dataFull_paging:t,titleNoData:a})}})},this.callAPI=function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.state.isLoading||t.setState({isLoading:!0});var o=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];let s={},n=l.g.getFormAppAuto(t.props.infoA.key_form);return void 0!==n&&(s=n.getData("")),s&&(a=Object.assign(s,a)),o[0].input=Object.assign(o[0].input,a),Object(te.b)(o,i).then(e=>{var t=l.g.foGetData("infoError",e);return void 0!==t?{infoError:t}:l.g.foGetData("data",e)}).finally(e=>{t.setState({isLoading:!1})})},this.renderModal=()=>{const e=this.MediaDetail;return this.state.isOpen?s.a.createElement(o.Suspense,{fallback:s.a.createElement("div",null)}," ",s.a.createElement(e,this.getDefaultConfig(this.state.value))):null},this.propertyConstructor=new Ms(e.inputType,e.default,e.config);var a={};void 0===a&&(a={});var i=this.props.validate;void 0===i&&(i={}),this.callform_detail="",this.callform="",this.data_select={};var n=this.props.lang;if(void 0===n&&(n={}),void 0!==this.props.infoA.form_code){var r=l.g.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=r&&void 0!==r.role&&(void 0!==r.role.disabled&&(!0===r.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==r.role.visible&&(!0===r.role.visible?this.propertyConstructor.setCMD_visible(e.visibility&&!0):this.propertyConstructor.setCMD_visible(e.visibility&&!1)))}this.state={value:[],value_old:"",lang:n,lang_select:l.g.getLangKey(),validate:i,data_view:"",infoA_call_form:"",help_css:"",help_icon:"",help_mess:"",isOpen:!1,titleNoData:"",dataFull:{config:{default:{title:this.props.default.name,type:this.props.config.color,class:this.props.default.class,icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyOCAyOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGQ9Ik0yMC40ODkgMTAuODM2NUwyNC43MDc0IDEyLjM4NkwyMS4xOTkyIDIxLjkzNzhDMjAuODcwOSAyMi44MzYyIDE5LjA5MDUgMjUuNjQ3MyAxNy44NTA3IDI2LjIyMDdMMTcuNTQ5OCAyNy4wNDE0QzE3LjQ3MzIgMjcuMjQ5MyAxNy4yNzYzIDI3LjM3OTYgMTcuMDY3MyAyNy4zNzk2QzE3LjAwODIgMjcuMzc5NiAxNi45NDkxIDI3LjM2ODYgMTYuODkgMjcuMzQ3OEMxNi42MjQxIDI3LjI0OTMgMTYuNDg2MiAyNi45NTUgMTYuNTg0NyAyNi42ODY5TDE2Ljg2OTIgMjUuOTExMUMxNi4yNCAyNC42ODg4IDE2LjcwOTQgMjEuMTM5IDE2Ljk4NTIgMjAuMzg4M0wyMC40ODkgMTAuODM2NVpNMjYuNTkzOSAwLjcyOTg3NkMyNS40MzQgMC4zMDUzMDIgMjQuMDc2IDEuMTgyOSAyMy42ODc1IDIuMjQzMjRMMjEuMTQ2NyA5LjE2NTU1TDI1LjM2NCAxMC43MTI4TDI3LjkwMTYgMy43OTE2MkMyOC4yMjExIDIuOTI0OTcgMjcuNzU2IDEuMTU1NTQgMjYuNTkzOSAwLjcyOTg3NlpNMTguOTYxNCAxMC40Nzg3QzE5LjA3OTYgMTAuNTIyNCAxOS4yMDExIDEwLjU0MzIgMTkuMzE5MyAxMC41NDMyQzE5LjczNzMgMTAuNTQzMiAyMC4xMzAxIDEwLjI4NzIgMjAuMjg0NCA5Ljg3MTM1TDIyLjk2NTMgMi42NDA0NkMyMy4xNjM0IDIuMTA3NTUgMjIuODkwOSAxLjUxNTU2IDIyLjM1OCAxLjMxODU5QzIxLjgyMDcgMS4xMjM4MSAyMS4yMzMxIDEuMzkzIDIxLjAzNTEgMS45MjU5MUwxOC4zNTQxIDkuMTU2NzlDMTguMTU2IDkuNjg5NyAxOC40Mjg1IDEwLjI4MTcgMTguOTYxNCAxMC40Nzg3Wk0xNC42NDU3IDI0LjAzNzdDMTQuMzY4OCAyMy43NzYxIDE0LjAyNDEgMjMuNDUwMSAxMy40NjYgMjMuMjAxN0MxMy4wMDY0IDIyLjk5NyAxMi41NTg5IDIyLjk4NzIgMTIuMjMxNyAyMi45Nzk1QzEyLjE5NzggMjIuOTc5NSAxMi4xNTg0IDIyLjk3ODQgMTIuMTE5IDIyLjk3NzNDMTEuOTE0NCAyMi40MTcxIDExLjQ5OTYgMjIuMDY0NyAxMC44NzcgMjEuOTI2OEMxMC4wNTMgMjEuNzUyOSA5LjM5NTM4IDIyLjE0MTMgOC45MzkwNyAyMi40NDExQzguOTc5NTYgMjIuMjExNCA5LjA0NjMxIDIxLjkzNzggOS4wOTU1NSAyMS43NDA4QzkuMjUzMTMgMjEuMTA2MSA5LjQxNTA4IDIwLjQ0OTYgOS4yOTQ3MSAxOS44MzQ2QzkuMTk5NTEgMTkuMzQ4OCA4Ljc4OTE2IDE4Ljk4NzcgOC4yOTQ1NSAxOC45NTI2QzcuMDE5NzMgMTguODgxNSA1Ljk3OCAxOS41Njc2IDUuMDU5OTEgMjAuMTg4MUM0LjA5NTg2IDIwLjgzOTEgMy40Nzc2MSAyMS4yMjc2IDIuODYyNjMgMjEuMDA3N0MyLjExMTk2IDIwLjc0MDcgMi4wMzY0NiAxOC43MDg2IDIuMzk3NTcgMTYuODk4N0MyLjcyMDM4IDE1LjI2ODMgMy4zMjExMyAxMi4yMzI4IDQuODYwNzUgMTAuODU0QzUuMzc5NDMgMTAuMzkgNi4xMzAxIDkuODg3NzYgNi43NDcyNiAxMC4xMzE4QzcuNDcyNzYgMTAuNDE2MyA4LjA3MjQyIDExLjYxMTIgOC4yMDU5MiAxMy4wMzQ5QzguMjYxNzIgMTMuNjM1NiA4Ljc4NTg4IDE0LjA3NjYgOS4zOTc1NyAxNC4wMjE5QzkuOTk5NDEgMTMuOTY2MSAxMC40NDE1IDEzLjQzMjEgMTAuMzg0NiAxMi44MzAyQzEwLjE2NzkgMTAuNTEwNCA5LjA4MDIzIDguNjk2MTEgNy41NDcxNyA4LjA5MzE3QzYuNjI5MDggNy43MzY0NCA1LjE2OTM0IDcuNjQwMTUgMy4zOTk5MSA5LjIyMzU1QzEuNDc1MSAxMC45NDcgMC43NjM4MzMgMTMuODY5OCAwLjI0ODQzNSAxNi40NzNDLTAuMDA5ODEwODUgMTcuNzczIC0wLjYzOTAxMiAyMi4wODY2IDIuMTI3MjggMjMuMDcwM0MzLjgxMjQ1IDIzLjY3MTEgNS4xODEzNyAyMi43NDQzIDYuMjgxMTEgMjIuMDAyM0M2LjQ4MjQ1IDIxLjg2NjcgNi42ODA1MSAyMS43MzMyIDYuODczMSAyMS42MTM5QzYuNjkwMzYgMjIuNDA3MiA2LjU3NjU2IDIzLjI1NjQgNy4wNTU4NSAyMy45NzJDNy43NzA0IDI1LjA0NjYgOC43ODA0IDI1LjE2MzcgMTAuMDU2MyAyNC4zMjMzQzEwLjEwNTYgMjQuMjkxNSAxMC4xNjI1IDI0LjI1NDMgMTAuMjE2MSAyNC4yMTcxQzEwLjMzNDMgMjQuNDY0NCAxMC41NDMzIDI0LjczNjkgMTAuOTIzIDI0LjkyMjlDMTEuMzgyNiAyNS4xNDg0IDExLjg0MjIgMjUuMTU5MyAxMi4xNzcgMjUuMTY4MUMxMi4zMjAzIDI1LjE3MTMgMTIuNTE2MiAyNS4xNzU3IDEyLjU3NTMgMjUuMjAyQzEyLjc4MSAyNS4yOTI4IDEyLjkwMjUgMjUuNDA0NCAxMy4xMzg5IDI1LjYyNzZDMTMuMzE2MSAyNS43OTUxIDEzLjUwMzIgMjUuOTY5MSAxMy43NDA3IDI2LjE0ODVDMTMuOTM3NyAyNi4yOTYyIDE0LjE2NzUgMjYuMzY2MyAxNC4zOTUxIDI2LjM2NjNDMTQuNzI3NyAyNi4zNjYzIDE1LjA1NzEgMjYuMjE0MiAxNS4yNzE2IDI1LjkyODZDMTUuNjMzOCAyNS40NDQ5IDE1LjUzNTMgMjQuNzU4OCAxNS4wNTE2IDI0LjM5NjZDMTQuODkzIDI0LjI3NCAxNC43NjcxIDI0LjE1MjYgMTQuNjQ1NyAyNC4wMzc3WiIgZmlsbD0iIzQ5NEY1OSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KPHJlY3Qgd2lkdGg9IjI4IiBoZWlnaHQ9IjI4IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="},cmd:{disable:"true"===String(this.propertyConstructor.getCMD_disable()),isLoading:!1}}},dataFull_paging:{result_total:0,paging_record:[{number:1,selected:!0}],abs_PagingActive:this.setPaging,number_item:0,config:{show:"Show",in:"in",jump_to_page:"Jump to page",results:"results"},mode:{noShowResult:!0}}},this.MediaDetail=Object(v.c)("O9_FormMediaDetail")}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}readData(e,t){}render(){const e=Object(v.b)("uButton");return s.a.createElement(s.a.Fragment,null,s.a.createElement(e,{dataFull:Object(i.a)(Object(i.a)({},this.state.dataFull),{},{abs_Click:()=>{this.setState({isOpen:!0}),this.callAPI(this.props.config.apiId,{page:"1"}).then(e=>{if(e.PAGING&&e.PAGING.TOTAL){let{value:t,dataFull_paging:a,titleNoData:i}=this.state;i="",a.result_total=e.PAGING.TOTAL,t=e.MEDIA,a.number_item=0,this.setState({dataFull_paging:a,value:t,titleNoData:i})}else{let{value:e,dataFull_paging:t,titleNoData:a}=this.state;t.result_total=0,e=[],t.number_item=0,a="Hasn't Signature Information",this.setState({value:e,dataFull_paging:t,titleNoData:a})}})}})}),this.renderModal())}isImage(e){let t=!1;try{t=btoa(atob(e))===e&&"/iR".includes(e[0])}catch(a){}return t}getRefTypeData(e){return[{title:"Single customer",value:"C"},{title:"Group of customer",value:"G"},{title:"Customer linkage",value:"L"}].map((t,a)=>Object(i.a)(Object(i.a)({},t),{},{selected:t.value===e}))}getDefaultConfig(e){if(void 0!==e)return{modal:{title:"Signature Viewer",visibility:this.state.isOpen,abs_Close:()=>{this.setState({isOpen:!1})}},media_paging:{dataFull:Object(i.a)({},this.state.dataFull_paging)},form:{config:{default:{title:this.state.titleNoData}},cmd:{isLoading:this.state.isLoading}},stateData:e.map(e=>({img_form:{title:e.FN,link:this.isImage(e.MCS)?"data:image/png;base64,"+e.MCS:"../rs/global/img/file_icon.svg",content:this.isImage(e.MCS)?"":e.MCS,file_type:e.FT},code:{dataFull:{config:{default:{title:"File Name",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.FN}},expireDate:{dataFull:{config:{default:{placeholder:this.dateFormat||" ",title:"Expire date",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},data:[],value:e.ED?Object(me.d)(Object(me.a)(e.ED,"YYYY-MM-DD"),"DD/MM/YYYY"):""}},other:{dataFull:{config:{default:{title:"Other",type:"text",class:"col-md-12"},cmd:{disable:!0,visible:!0,error:{message:"",type:""}}},value:e.OT}}}))}}}var Ns=xs,ws=a(17),Ss=a(21),Ts=a(22),Es=a(23),Os=a(24),Is=a(25),Fs=a(26),Ls=a(28),js=a(29),Rs=a(38),zs=a(39),Ps=a(27),Us=a(30);var Vs={columnInputEdit:a(31).a,ColumnString:ws.a,ColumnStatus:Ss.a,ColumnNumber:Ts.a,columnImg:Es.a,columnMask:Os.a,columnCurrency:Is.a,ColumnDefault:ws.a,ColumnCheckbox:Fs.a,ColumnCdlist:Ls.a,ColumnProgressBar:Rs.a,ColumnIcon:zs.a,ColumnStatusTitle:Ps.a,ColumnHtmlDanger:Us.a,ColumnSelectEdit:js.a};class Bs extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.readConfig(this.props.data)}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.structable?t.structable=e.structable:t.structable="",null!=e.query_data?t.query_data=e.query_data:t.query_data="",null!=e.paging_record?t.paging_record=e.paging_record:t.paging_record="5",null!=e.columns?t.columns=JSON.stringify(JSON.parse(e.columns),null,4):t.columns=JSON.stringify([{code:"table.name",title:"T\xean",inputtype:"ColumnString",config:{}}],null,4),t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}onBlur(e,t){var a=this.state.data;try{var i=JSON.parse(t.target.value);a[e]=JSON.stringify(i,null,4)}catch(o){alert(o)}this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{className:"col-sm-12 col-md-11",name:"Query data",value:this.state.data.query_data,placeholder:"select * from group_menu",onChange:e=>this.onChange_Value("query_data",e)}),s.a.createElement("button",{onClick:()=>{var e=l.g.getDataLimited(this.state.data.query_data,0,1e3);l.g.log(e,"Check")}},"Check"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"C\u1ea5u h\xecnh c\u1ed9t (JSON)"),s.a.createElement("textarea",{className:"form-control",rows:"12",onChange:e=>{this.onChange_Value("columns",e)},value:this.state.data.columns,onBlur:e=>{this.onBlur("columns",e)}})),s.a.createElement(n.a,{className:"col-sm-12 col-md-12",name:"Data m\u1ed7i trang",value:this.state.data.paging_record,onChange:e=>this.onChange_Value("paging_record",e)}),s.a.createElement(n.a,{className:"col-sm-12 col-md-12",name:"Ph\u01b0\u01a1ng th\u1ee9c thu th\u1eadp (user.name: table:col v\xe0 user.name|group.title: 2 table)",value:this.state.data.structable,onChange:e=>this.onChange_Value("structable",e)}))}}var Hs=Bs;class Ys extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];void 0!==this.props.config&&void 0!==this.props.config.columns&&(t=JSON.parse(this.props.config.columns)),this.state={data:this.joinTableColumnAndLang(l.g.getConfigUserDefault("list_lang_config"),t),columns:t,lang_system:l.g.getConfigUserDefault("list_lang_config")}}joinTableColumnAndLang(e,t){var a=t;void 0===a&&(a=[]);var i=this.props.data;void 0===i&&(i={});for(var o={},s=0;s<a.length;s++)for(var l=0;l<e.length;l++)if(void 0!==a[s].title){var n=e[l].key;void 0===i[n]&&(i[n]={}),void 0===o[n]&&(o[n]={});var r=a[s].title.trim();void 0===i[n][r]?o[n][r]=r:o[n][r]=i[n][r]}return o}componentDidUpdate(e){if(this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.data!==e.data){var t=[];void 0!==this.props.config&&void 0!==this.props.config.columns&&(t=JSON.parse(this.props.config.columns)),this.setState({data:this.joinTableColumnAndLang(this.state.lang_system,t)})}}render(){return s.a.createElement("div",{className:"col-md-12 col-lg-12"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("div",{className:"no-more-tables"},s.a.createElement("table",{className:"table table-bordered table-middle"},s.a.createElement("tbody",null,this.state.columns.map((e,t)=>s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.title),s.a.createElement("td",null,this.state.lang_system.map((t,a)=>s.a.createElement(n.a,{key:a,class:"col-sm-12 col-md-12",name:t.view,value:this.state.data[t.key][e.title],onChange:a=>{var i=this.state.data;void 0===i[t.key]&&(i[t.key]={}),i[t.key][e.title]=a.target.value,this.setState({data:i})}}))))))))))}}var Qs=Ys;const Gs={},Js={},Ws={disabled:["false","true"],visible:["false","true"],other:["fooA","fooB","fooC"],other2:["foo1","foo2","foo3"]};class qs{}qs.get=()=>({main:Gs,position:Js,cmd:Ws}),qs.getCmd=()=>Ws,qs.getValueCmd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return void 0!==e.infoA.form_code&&(t=l.g.role_getComponent(e.infoA.form_code,e.default.codeHidden)||{},t=t.role||{}),t};var Ks=qs;class Zs extends o.Component{constructor(e){var t,a,o,n,r,c,d,h,_,u;super(e),t=this,this.getInfoCheckRun=()=>{let e=this.state.CMD||{};return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.changeKeyLanguage=()=>{this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.getFormConfig=e=>s.a.createElement(Hs,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(Qs,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.callDir=()=>this,this.setCMD=(e,t)=>{const{CMD:a}=this.state;let i=Object.assign(l.g.cloneJson(a),t);for(let o in i)"true"===i[o]&&(i[o]=!0),"false"===i[o]&&(i[o]=!1);this.setState({CMD:i})},this.set=(e,t)=>{let a="false",i=0,o="table_paging";this.props.config.table_name&&(o=this.props.config.table_name+"_paging"),void 0!==t[o]&&(void 0!==t[o].total_items&&(i=t[o].total_items),void 0!==t[o].search_advanced&&(a=t[o].search_advanced));let s=this.buildPaging(i,this.state.config_table);this.dataGlobal=l.g.getDataLimited(this.state.config_table.query_data,0,999999999);let n={data:this.dataGlobal.data.slice(0,this.state.config_table.paging_record)||[]},r=[];void 0!==n.data&&(r=n.data);let c=l.g.cloneJson(r),d=[],h=this.props.config.query_data.split(" "),_=h[h.length-1]||h;if(void 0!==c&&(d=c),Array.isArray(d)){var u,g,m,p;for(let e=0;e<d.length;e++){const t=d[e];for(const a in t){const i=t[a];if("object"!==typeof i){let t=l.g.cloneJson(d[e]);d[e]={},d[e][_]=t,d[e][_].AFGHkeyIndexWJ=l.g.autoID();break}void 0===i.AFGHkeyIndexWJ&&(d[e][a].AFGHkeyIndexWJ=l.g.autoID())}}if(void 0!==(null===(u=this.props.config)||void 0===u||null===(g=u.columnSystemCheckBox)||void 0===g?void 0:g.methodGet)&&void 0!==(null===(m=this.props.config)||void 0===m?void 0:m.hasSystemColumnCheck)&&void 0!==(null===(p=this.props.config)||void 0===p?void 0:p.columnSystemCheckBox)){let e={},t=this.props.config.columnSystemCheckBox.methodGet;for(let a=0;a<d.length;a++)e[d[a][_].AFGHkeyIndexWJ]=d[a][_][t];this.setState({statusCheck:e,column_search:{},total_record:i,paging:s,data:d,isSearchAdvanced:a,totalCheck:!1},()=>{this.runRule("on_change")})}else this.setState({column_search:{},total_record:i,paging:s,data:d,isSearchAdvanced:a,totalCheck:!1},()=>{this.runRule("on_change")})}else this.setState({data:r,total_record:i,paging:s,isSearchAdvanced:a,totalCheck:!1},()=>{this.runRule("on_change")})},this.runRule=e=>{if(e){var t=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.checkAllDataHandler=()=>{let e=this.props.config.query_data.split(" "),t=e[e.length-1]||e,a=this.state.statusCheck;for(let i=0;i<this.state.data.length;i++)this.state.totalCheck?a={}:a[this.state.data[i][t].AFGHkeyIndexWJ]=!0;this.setState({statusCheck:a,totalCheck:!this.state.totalCheck},()=>{this.runRule("checked")})},this.reload=(e,t)=>{this.page_index=1,this.setState({page_index:1},()=>{})},this.setData=e=>{e.length>0?this.dataGlobal.data=e:this.dataGlobal=l.g.getDataLimited(this.state.config_table.query_data,0,999999999);let t={data:this.dataGlobal.data.slice(0,this.state.config_table.paging_record)||[],total:this.dataGlobal.total},a=[];void 0!==t.data&&(a=t.data);let i=l.g.cloneJson(a),o=[],s=this.props.config.query_data.split(" "),n=s[s.length-1]||s;if(void 0!==s&&""!==s&&(!0===s.includes(".")?void 0!==l.g.getOOP(i,s)&&(o=l.g.getOOP(i,s)):void 0!==i&&(o=i)),Array.isArray(o)){var r,c,d,h;for(let e=0;e<o.length;e++){const t=o[e];for(const a in t){const i=t[a];if("object"!==typeof i){let t=l.g.cloneJson(o[e]);o[e]={},o[e][n]=t,o[e][n].AFGHkeyIndexWJ=l.g.autoID();break}void 0===i.AFGHkeyIndexWJ&&(o[e][a].AFGHkeyIndexWJ=l.g.autoID())}}if(void 0!==(null===(r=this.props.config)||void 0===r||null===(c=r.columnSystemCheckBox)||void 0===c?void 0:c.methodGet)&&void 0!==(null===(d=this.props.config)||void 0===d?void 0:d.hasSystemColumnCheck)&&void 0!==(null===(h=this.props.config)||void 0===h?void 0:h.columnSystemCheckBox)){let e={},t=this.props.config.columnSystemCheckBox.methodGet;for(let a=0;a<o.length;a++)e[o[a][n].AFGHkeyIndexWJ]=o[a][n][t];this.setState({statusCheck:e,column_search:{},data:o,totalCheck:!1},()=>{this.runRule("on_change")})}else this.setState({column_search:{},data:o,totalCheck:!1},()=>{this.runRule("on_change")})}else this.setState({data:a,totalCheck:!1},()=>{this.runRule("on_change")})},this.get=(e,t)=>{let a=this.props.config.structable;if(a.includes("|")){let t=a.split("|");for(let a=0;a<t.length;a++)this.readData(t[a],e.inform)}else this.readData(a,e.inform)},this.abs_getDataLimited=function(e,t){let a={data:this.state.dataFilter.slice(e,e+t)||[],total:this.state.dataFilter.length},i=a.data;if(!0===this.state.hasCheck)for(let l=0;l<i.length;l++)i[l].hasCheck__=!1;let o=1;void 0!==a.total&&(o=a.total);let s=this.buildPaging(o,this.state.config_table);this.setState({data:i,total_record:o,paging:s})},this.buildDataPaging=e=>({pagingIndex:e?1:this.page_index,recordItem:this.state.paging_record.find((e,t)=>t===this.state.selectedRecordIndex)}),this.getData=()=>{var e;let t=this.state.data,a=null===(e=this.state.checked_to_selected)||void 0===e?void 0:e.mode,i=this.props.config.query_data.split(" "),o=i[i.length-1]||i,s=this.state.statusCheck;switch(a){case"IS_SELECTED":return t.filter(e=>s[e[o].AFGHkeyIndexWJ]);default:return t}},this.getAdvanced=(e,t)=>this.getData(),this.readData=(e,t)=>{e.includes(".")&&(void 0===t||"true"===t?this.props.config.table_name?l.g.putData(this.props.config.table_name,"paging",this.buildDataPaging(!0),this.props.infoA):l.g.putData("table_search","paging",this.buildDataPaging(!0),this.props.infoA):"false"===t?this.props.config.table_name?l.g.putData(this.props.config.table_name,"paging",this.buildDataPaging(!0),this.props.infoA):l.g.putData("table_search","paging",this.buildDataPaging(!0)):this.props.config.table_name?l.g.putData(this.props.config.table_name,"paging"," "):l.g.putData("table_search","paging"," "))},this.recordChangeHandler=e=>{let t=this.state.config_table;t.paging_record=this.state.paging_record[e];let a=this.buildPaging(this.state.total_record,t);this.page_index=1,this.setState({paging:a,page_index:1,selectedRecordIndex:e,config_table:t},()=>{let e="table_search",t={};this.props.config.table_name&&(e=this.props.config.table_name),t[e]={paging:this.buildDataPaging()},"true"===this.state.isSearchAdvanced&&this.props.config.apiSearchAdvanced?this.callBOSearchAdvanced(this.props.config.apiSearchAdvanced,Object(i.a)({},t)).then(e=>{this.setData(e)}):this.callBOSearch(this.props.config.apiId,Object(i.a)({},t)).then(e=>{this.setData(e)})})},this.abs_PagingActive=e=>{this.page_index=e,this.setState({page_index:e},()=>{let e="table_search",t={};this.props.config.table_name&&(e=this.props.config.table_name),t[e]={paging:this.buildDataPaging()},"true"===this.state.isSearchAdvanced&&this.props.config.apiSearchAdvanced?this.callBOSearchAdvanced(this.props.config.apiSearchAdvanced,Object(i.a)({},t)).then(e=>{this.setData(e)}):this.callBOSearch(this.props.config.apiId,Object(i.a)({},t)).then(e=>{this.setData(e)})})},this.callBOSearch=function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o=[{txcode:"bo-search-API",input:{learn_api:e}}];let s={},n=l.g.getFormAppAuto(t.props.infoA.key_form);return void 0!==n&&(n.setLoadingAction(!0),s=n.getData("")),s&&a?a=Object.assign(s,a):a||(a=s),t.props.config.api_data&&(a=Object.assign(a,JSON.parse(t.props.config.api_data))),o[0].input=Object.assign(o[0].input,a),Object(te.b)(o,i).then(e=>{var a=l.g.foGetData("infoError",e);if(void 0!==a)return{infoError:a};let i=t.props.config.query_data.split(" "),o=i[i.length-1]||i;var s=l.g.foGetData(o,e);return s||(s=[]),s}).finally(e=>{n.setLoadingAction(!1)})},this.callBOSearchAdvanced=function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o=[{txcode:"bo-search-advanced-API",input:{learn_api:e}}];let s={},n=l.g.getFormAppAuto(t.props.infoA.key_form);return void 0!==n&&(n.setLoadingAction(!0),s=n.getData("")),s&&a?a=Object.assign(s,a):a||(a=s),t.props.config.api_advanced_data&&(a=Object.assign(a,JSON.parse(t.props.config.api_advanced_data))),o[0].input=Object.assign(o[0].input,a),Object(te.b)(o,i).then(e=>{var a=l.g.foGetData("infoError",e);if(void 0!==a)return{infoError:a};let i=t.props.config.query_data.split(" "),o=i[i.length-1]||i;var s=l.g.foGetData(o,e);return s||(s=[]),s}).finally(e=>{n.setLoadingAction(!1)})},this.parent_handleCheckToSelected=(e,t,a)=>{let i=this.props.config.query_data.split(" "),o=i[i.length-1]||i,s=this.state.checked_to_selected,l=this.state.statusCheck,n=[];const r=this.state.data;switch(a){case"CHECK_TO_SELECTED":if("IS_SELECTED"===s.mode)for(let s=0;s<r.length;s++){let a=r[s][o].AFGHkeyIndexWJ;t?l[a]=s<=e||void 0:s>=e&&(l[a]=void 0),l[a]&&n.push(r[s])}break;case"DEFAULT":if("IS_SELECTED"===s.mode){l[r[e][o].AFGHkeyIndexWJ]=t;for(let e=0;e<r.length;e++){l[r[e][o].AFGHkeyIndexWJ]&&n.push(this.state.data[e])}}break;case"NO_EMPTY":let a,i,c=e;for(let e=0;e<r.length;e++){l[r[e][o].AFGHkeyIndexWJ]&&(void 0===a&&(a=e),i=e)}if(c<a)for(let e=c+1;e<a;e++){l[r[e][o].AFGHkeyIndexWJ]=!0}else if(c>a&&c<i)for(let e=c+1;e<=i;e++){l[r[e][o].AFGHkeyIndexWJ]=!1}else for(let e=i;e<c;e++){l[r[e][o].AFGHkeyIndexWJ]=!0}l[r[e][o].AFGHkeyIndexWJ]=t}let c=this.state.totalCheck;(null===n||void 0===n?void 0:n.length)?n.length<r.length?c="-":n.length===r.length&&(c=!0):c=!1,this.setState({statusCheck:l,totalCheck:c},()=>{var e,t;void 0!==(null===(e=this.props.config.columnSystemCheckBox)||void 0===e?void 0:e.actionFo_SystemCheck)&&this.functionFo(n,null===(t=this.props.config.columnSystemCheckBox)||void 0===t?void 0:t.actionFo_SystemCheck),this.runRule("checked")})},this.parent_handleSetChecked=e=>{let t=this.state.data_show_table,a=t[e].isCheck;void 0===a&&(a=!1),t[e].isCheck=!a,this.setState({data_show_table:t})},this.getHeaderConfig=e=>{let t=[];return!0===e&&t.push({title:"",config:{width:"20px",isFrozen:!1}}),"true"===this.state.hasSystemColumnCheck&&"true"!==String(this.state.CMD.disabled)&&t.push({title:this.state.headerCheckTitle,id:"system_check_box",data:{value:this.state.totalCheck,abs_Click:this.checkAllDataHandler},config:{mode:{hasSearch:!1},hasCheck:"true"===String(this.state.hasSystemColumnCheckTotal),width:"true"===this.state.hasSystemColumnCheckTotal?"70px":"",isFrozen:!1}}),t=t.concat(this.state.columns.map(e=>{var t,a;return{title:(null===(t=this.state.lang)||void 0===t||null===(a=t[this.state.lang_select])||void 0===a?void 0:a[e.title])||e.title,id:e.code,config:{width:"",isFrozen:!1},value_search:this.state.columnSearchValue[e.code]}})),t},this.handelClearSearch=()=>{let e=this.state.columnSearchValue;for(const s in e)e[s]="";let t=this.dataGlobal.data,a=t.slice(0,this.state.config_table.paging_record),i=t.length,o=this.buildPaging(i,this.state.config_table);this.page_index=1,this.setState({data:a,dataFilter:t,paging:o,page_index:1,total_record:i,columnSearchValue:e})},this.getCaptionLang=(e,t,a)=>{this.CACHE_CDLIST={},void 0===this.CACHE_CDLIST[`${t}_${a}`]&&(this.CACHE_CDLIST[`${t}_${a}`]=l.g.data_cdList(t,a,!0));let i={};for(const l of this.CACHE_CDLIST[`${t}_${a}`]){let e=l.c_cdlist.mcaption||{},t=l.c_cdlist.caption||"";i[l.c_cdlist.cdid]=l.c_cdlist={mcaption:e,caption:t}}const o=i[e]||{};let s=(null===o||void 0===o?void 0:o.mcaption)||{},n=(null===o||void 0===o?void 0:o.caption)||"";return s[l.g.getLangKey()]||n},this.handelChangeSearch=(e,t)=>{var a;let i=this.state.columnSearchValue;i[t]=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"";let o=this.dataGlobal.data.filter(e=>{let t=!0;for(const o in i){let s=l.g.getOOP(e,o);const n=this.cols_config[o];if("columnMask"===n.inputtype){var a;let e=n.config.mask;(e.includes("DD")&&e.includes("MM")&&e.includes("YY")||!0===(null===(a=n.config)||void 0===a?void 0:a.isDate))&&(s=me.d(s,e))}if("ColumnCdlist"===n.inputtype){let{cdgrp:e,cdname:t}=n.config;s=this.getCaptionLang(s,e,t)}!1===String(s).toLowerCase().includes(i[o].toLowerCase())&&(t=!1)}return t}),s=o.slice(0,this.state.config_table.paging_record),n=o.length,r=this.buildPaging(n,this.state.config_table);this.page_index=1,this.setState({data:s,dataFilter:o,paging:r,page_index:1,total_record:n,columnSearchValue:i})},this.abs_autoCallBackData=()=>{let e=this.state.paging_record;e[this.state.selectedRecordIndex]+=5,this.setState({paging_record:e},()=>{this.recordChangeHandler(0)})},this.handleClickTableRow=e=>{},this.page_index=1;let g=[5,10,15,20,50];if(void 0!==this.props.config.paging_record){let e=this.props.config.paging_record.split(",");e.length>1&&(g=e)}let m={paging_record:g[0],query_data:this.props.config.query_data};this.dataGlobal=l.g.getDataLimited(m.query_data,0,999999999)||{};let p={data:[],total:0};"false"!==this.props.config.isLoadDataStart&&(p={data:this.dataGlobal.data.slice(0,m.paging_record)||[],total:this.dataGlobal.total}),void 0===p&&(p={});let f=0;void 0!==p.total&&(f=p.total);let v=this.buildPaging(f,m),b=[],y=e.default.code.trim();if(void 0!==e.btn_of_grid&&""!==y)for(let i=0;i<e.btn_of_grid.length;i++){y===e.btn_of_grid[i].config.onTable.trim()&&(b[b.length]=e.btn_of_grid[i])}let D="false";void 0!==this.props.config.hasSystemColumnCheck&&(D=this.props.config.hasSystemColumnCheck);let C="not_use";void 0!==(null===(a=this.props.config)||void 0===a||null===(o=a.columnSystemCheckBox)||void 0===o?void 0:o.check_type)&&(C=this.props.config.columnSystemCheckBox.check_type);let A="false";void 0!==(null===(n=this.props.config)||void 0===n||null===(r=n.columnSystemCheckBox)||void 0===r?void 0:r.hasSystemColumnCheckTotal)&&(A=this.props.config.columnSystemCheckBox.hasSystemColumnCheckTotal);let k="";void 0!==(null===(c=this.props.config)||void 0===c||null===(d=c.columnSystemCheckBox)||void 0===d?void 0:d.headerCheckTitle)&&(k=null===(h=this.props.config.columnSystemCheckBox)||void 0===h?void 0:h.headerCheckTitle);let M={};void 0!==(null===(_=this.props.config)||void 0===_||null===(u=_.columnSystemCheckBox)||void 0===u?void 0:u.checked_to_selected)&&(M=this.props.config.columnSystemCheckBox.checked_to_selected);let x=this.props.lang;void 0===x&&(x={}),this.state={dataFilter:this.dataGlobal.data,data:[],lang:x,lang_select:l.g.getLangKey(),paging:v,total_record:0,paging_record:g,selectedRecordIndex:0,page_index:1,STT:!1,hasCheck:!1,columns:void 0===this.props.config.columns?[]:JSON.parse(this.props.config.columns),action:b,config_table:m,CMD:Ks.getValueCmd(this.props),columnSearchValue:{},hasSystemColumnCheck:D,check_type:C,hasSystemColumnCheckTotal:A,headerCheckTitle:k,totalCheck:!1,checkedRow:!1,statusCheck:{},checked_to_selected:M,isSearchAdvanced:!1},this.all_columnSystemCheck=[],this.cols_config={};for(const i of this.state.columns)this.cols_config[i.code]=i}buildPaging(e,t){let a=[],i=1;if(e>0)for(let o=0;o<e;o+=parseInt(t.paging_record))a[a.length]=i,i++;else a[a.length]=1;return a}pageIndexChange(e){this.page_index=e.target.value,this.setState({page_index:e.target.value}),this.abs_getDataLimited((parseInt(e.target.value)-1)*this.state.config_table.paging_record,this.state.config_table.paging_record)}componentDidMount(){setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({columns:JSON.parse(this.props.config.columns)}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}checkAll(e){if(this.state.hasCheck){let t=this.state.data;for(let a=0;a<t.length;a++)t[a].hasCheck__=e.target.checked;this.setState({checkAll:e.target.checked,data:t})}}functionFo(e,t){let a=void 0===t.useAction?"notUse":t.useAction,i=this.props.default;switch(a){case"txFo":var o=l.g.parseJson(t.txFo);void 0!==o?x.a.runFoWithContext(o,e,this.props.infoA,this.props.infoA_parent,i):l.g.AppException("#cColumnAction.onClick","Error Json is undefined");break;case"txFoAction":var s=l.g.parseJson(t.txFoActions);void 0!==s?x.a.runActionWithContext(s,e,this.props.infoA,this.props.infoA_parent,i):l.g.AppException("#cColumnAction.onClick","config_fo is undefined")}}render(){var e,t,a;let i=this.state.action.length>0,o=this.getHeaderConfig(i),{hasSystemColumnCheck:n,check_type:r,statusCheck:c}=this.state;const d=Object(v.b)("uTable"),h=Object(v.b)("uTableBodyRow");return"false"===String(this.state.CMD.visible)?null:s.a.createElement(d,{dataFull:{abs_autoCallBackData:this.abs_autoCallBackData,abs_search:this.handelChangeSearch,abs_ClearSearch:this.handelClearSearch,Header:{data:o,config:{mode:{hasSearch:!1}}},dataEmpty:{isShow:!(null===(e=this.state)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length),title:l.g.getLang("header_searchNoResult")},config:{search:{placeholder:l.g.getLang("Search")},mode:{modeTitle:"center",isFrozenHeader:!1}},uPagination:{config:{show:l.g.getLang("cTable_Paging_show"),in:l.g.getLang("cTable_Paging_in"),jump_to_page:l.g.getLang("cTable_Paging_jump_to_page"),results:l.g.getLang("cTable_Paging_results")},mode:{paging_min:"MIN"===(null===(a=this.props.config)||void 0===a?void 0:a.paging_mode)},result_total:this.state.total_record,abs_PagingActive:this.abs_PagingActive,abs_setRecordActive:this.recordChangeHandler,paging_index:this.state.page_index,paging_record:this.state.paging_record.map((e,t)=>({number:e,selected:t===this.state.selectedRecordIndex}))}}},this.state.data.map((e,t)=>{let a=this.props.config.query_data.split(" "),o=a[a.length-1]||a;return s.a.createElement(h,{abs_Click:this.handleClickTableRow,key:t},!0===i&&s.a.createElement(se.a,{tableContext:this,key:t,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,data:this.state.action,value:e,title:"Action"}),"true"===n&&"true"!==String(this.state.CMD.disabled)&&s.a.createElement(zi,{ref:e=>{void 0===this.all_columnSystemCheck&&(this.all_columnSystemCheck=[]),this.all_columnSystemCheck[t]=e},tableContext:this,dataValue:!0===c[e[o].AFGHkeyIndexWJ],dataIndex:t,lang_select:this.state.lang_select,infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,check_type:r,parent_handleCheckToSelected:this.parent_handleCheckToSelected}),this.state.columns.map((t,a)=>{var i,o;let n=Vs[t.inputtype];return void 0===n&&(n=Vs.ColumnDefault),s.a.createElement(n,{tableContext:this,title_parent:t.title,rowData:e,key:a,title:(null===(i=this.state.lang)||void 0===i||null===(o=i[this.state.lang_select])||void 0===o?void 0:o[t.title])||t.title,config:t.config,data:l.g.getOOP(e,t.code),value:e})}))}))}}const Xs={jTableSearch:Zs,jCheckbox:hi,cTextInput:T,cTextArea:Q,cButton:ie,jButtonPrint:Qa,cTableDefault:fe,jTableCalculator:ti,jNumberInput:Ee,jSelect:nt,jMaskInput:Bt,jRadioBox:Xt,jTreeView:ra,jeLearning:va,jMutiValue:wa,jTagInput:Ha,jCurrency:ki,jPrintVoucher:Li,jLabel:ho,jTableForm:Yi,jSameMain:eo,jSignature:Ao,jFullCalendar:zo,jChart:Ko,jProgressBar:as,jUploadFile:us,jImage:gs.a,jButtonSignature:Ns};t.a=Xs},,function(e,t,a){"use strict";var i=a(0),o=a.n(i),s=a(1),l=a(2);class n extends i.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:s.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return o.a.createElement("div",null,this.state.lang_system.map((e,t)=>o.a.createElement(l.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}t.a=n},function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return l}));var i=a(1),o=!0;const s=()=>{window.addEventListener("online",()=>{o=!0,Object(i.G)(!1,{}),document.body.classList.remove("isOffline")}),window.addEventListener("offline",()=>{o=!1,Object(i.G)(!0,{title:"#MsgSystem_client_offline",btn:"",list_fo:"",list_fo_start:"",color:"warning"}),document.body.classList.add("isOffline")})},l=()=>o},function(e,t,a){"use strict";var i=a(6),o=a(4),s=a(1);const l={ttl:5e3},n={limit:{calls:100,time:1e3},cache:l};class r{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class c{static set(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;this.mapCache.set(e,t),setTimeout(()=>{this.mapCache.delete(e)},a.ttl)}static get(e){return this.mapCache.get(e)}}c.mapCache=new Map;class d{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let a=new h(e);return this.mapInstance.set(t,a),a}static async load(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===typeof e&&(e=JSON.stringify(e));let i=d.getSingleFlight(a);d.mapInstance.set(e,i);const o=new r(e);return i.load(o,t)}}d.mapInstance=new Map;class h{constructor(e){this.config={},this.intervalRequest=null,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(n,e)}async load(e,t){const a=c.get(e.key);if(a)return Promise.resolve(a);let i=!1,o=this.mapRequestCalling.get(e.key);return o||(o=e,i=!0,this.mapRequestCalling.set(o.key,o)),new Promise((e,a)=>{if(!o)return a("Not found request!");o.add(e,a),i&&this.fetch(o,t)})}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then(t=>{c.set(e.key,t,this.config.cache),e.resolves(t)}).catch(t=>{e.rejects(t)}).finally(()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)})}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var a;this.requestQueue.push(e),this.intervalRequest=setInterval(()=>{this.fetchRequestQueue(t)},null===(a=this.config.limit)||void 0===a?void 0:a.time)}validateLimit(){if(!this.config.limit)return!1;const e=this.timeLogs[0]||0,t=(new Date).getTime();if(this.timeLogs.length<this.config.limit.calls)return!0;return t-e>this.config.limit.time}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}var _=class{constructor(){this.start=async e=>{if(!this.isRun(e))return;const t=this.config.config;var a="",l={};const n=e.infoA.key_form,r=s.g.getFormAppAuto(n);let c=r.getDataAll(!0);for(const i in c)!0===Array.isArray(c[i])&&delete c[i];switch(t.data_type){case"api":a="#sys:bo-rule-getInfoAPI",l=Object(i.a)(Object(i.a)({},c),{},{learn_api:t.api_id,GB_obDataForm:{}});break;case"sql":a="#sys:bo-rule-getInfoSQL",l={learn_sql:t.sql_id,GB_obDataForm:{},FORM_obDataForm:c};break;case"data":a="#sys:bo-rule-getInfoData",l={table_code:t.data_table,GB_obDataForm:{},FORM_obDataForm:c};break;default:return void s.g.AppException("#getInfo.start#6","data_type is null:"+JSON.stringify(e),"system")}const h=[{txcode:a,input:l}];let _;if("api"===t.data_type&&t.api_id){const e=t.api_id+JSON.stringify(c);_=await d.load(e,()=>Object(o.b)(h,{}))}else _=await Object(o.b)(h,{});var u=s.g.foGetData("data",_);if("true"===t.is_data_to_form&&r.putDataAll_andSet(u),u&&"true"===String(t.isSetCode)){for(const e in u){const t=u[e];if(Array.isArray(t))for(const a in t)u[e][a]={[e]:u[e][a]}}let a=s.g.parseJson(t.component_result||"{}");s.g.isDebug()&&console.log("Get_info_data",u);let i={};for(let l in a){let o=s.g.getNodeJson(u,a[l]);void 0===o&&"true"===String(t.isAutoDefault)?r.callDirFromSupport("setDataDefault",{list_component:l,DEBUG_RULE:s.g.isDebug()?{name:"GET_INFO",isRun:!0,rule_config:this.config.config,config_target:e,reponse_data:s.g.cloneJson(u)}:{}},o):r.callDirFromSupport("setAdvanced",{component_action:this.config.config.component_action,list_component:l,DEBUG_RULE:s.g.isDebug()?{name:"GET_INFO",isRun:!0,rule_config:this.config.config,config_target:e,reponse_data:s.g.cloneJson(u)}:{}},o),i[l]=o}const o=s.g.persist_JSONParser(t.error_configs);if(o)for(const e of o){let t=e.condition,a=e.error_lang;const o=s.g.persist_convertCondition(t,"","",i);s.g.paramStringCaculator(o)&&s.g.persist_setFormError(n,!1,a,"GETINFO")}}},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||(void 0!==this.config.isStart&&void 0!==e.event&&!0===this.config.isStart&&"isStart"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action+";").includes(";"+e.configComponent.code+";"))),this.config={}}isRun(e){let t=this.config.config.condition;return s.g.persist_checkCondition(t,e.infoA.key_form)}};var u=class{constructor(){this.start=e=>{var t=s.g.getFormAppAuto(e.infoA.key_form);if(void 0!==this.config.config.component_result&&void 0!==t&&void 0!==this.config.config.component_action&&""!==this.config.config.component_result.trim()){t.callDirFromSupport("get",{list_component:this.config.config.component_action,list_view:"",inform:"true",checkError:"false"},{});var a=s.g.runJs(t.getData(""),e.configComponent.code,this.config.config.component_result.replace(/\n/g," "));void 0!==a&&t.putDataJoin(a),t.callDirFromSupport("set",{inform:"true"},t.getData(""))}},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action+";").includes(";"+e.configComponent.code+";")),this.config={}}};var g=class{constructor(){this.start=e=>{let t=s.g.getFormAppAuto(e.infoA.key_form);const a=this.config.config;if(!t||!a)return;if(!this.checkCondition(e))return;let i={};void 0!==a.ena_dis&&"not_use"!==a.ena_dis&&(i.disabled=a.ena_dis),void 0!==a.visible&&"not_use"!==a.visible&&(i.visible=a.visible);let o={list_component:a.component_result,list_view:a.view_result};s.g.isDebug()&&(o.DEBUG={},o.DEBUG.CONFIG_RULE=this.config),t.callDirFromSupport("setCMD",o,i)},this.setConfig=e=>{this.config=e},this.checkUse=e=>(e.event,!0),this.config={}}checkCondition(e){let t=this.config.config.condition;return s.g.persist_checkCondition(t,e.infoA.key_form,e.infoA_parent.key_form)}};var m=class{constructor(){this.start=e=>{let{function_cal:t,component_result:a,component_action:i}=this.config.config,o={name:"CACULATOR",ruleConfig:s.g.cloneJson(this.config.config),componentConfig:e},l=s.g.getFormAppAuto(e.infoA.key_form);if((null===a||void 0===a?void 0:a.trim())&&l&&i&&this.isRun(e)){let i=s.g.persist_convertCondition(t,e.infoA.key_form);i=s.g.paramStringCaculator(i),void 0!==i&&null!==i&&l.callDirFromSupport("setAdvanced",{DEBUG:s.g.isDebug()?o:{},list_component:a,type:"calculator",list_view:"",inform:"true",checkError:"false"},i)}},this.setConfig=e=>{this.config=e},this.checkUse=e=>(e.event,!0),this.config={}}isRun(e){let t=this.config.config.condition;return s.g.persist_checkCondition(t,e.infoA.key_form)}};var p=class{constructor(){this.start=e=>{const{component_result:t,getOOPFormat:a,isGetOOP:i,component_action:o}=this.config.config;var l=s.g.getFormAppAuto(e.infoA.key_form);if(void 0!==t&&void 0!==l&&void 0!==o&&(""!==t.trim()||""!==a.trim())){let e={};if("true"!==i)return e=l.callDirFromSupport("getAdvanced",{list_component:this.config.config.component_action,isGetOOP:i},{}),e=e[this.config.config.component_action],void l.callDirFromSupport("setAdvanced",{list_component:this.config.config.component_result},e);{e=l.callDirFromSupport("getDataOOP",{list_component:this.config.config.component_action,isGetOOP:i},{}),e=e[this.config.config.component_action];let t=s.g.parseJson(a);for(let a in t)l.callDirFromSupport("setAdvanced",{list_component:a},s.g.getOOP(e,t[a]))}}},this.setConfig=e=>{this.config=e},this.checkUse=e=>{if("isOpenFromOther"===e.event)return!0;if(!0===this.config.isStart&&"isStart"===e.event)return!0;{var t;const a=this.config.config,i=e.configComponent,o=e.event,s=a.component_event;if(("all"===s||o===s)&&`;${a.component_action.trim()};`.includes(`;${null===(t=i.code)||void 0===t?void 0:t.trim()};`))return!0}return!1},this.config={}}},f=a(62),v=a(63),b=a(8);var y=class{constructor(){this.start=e=>{if(this.checkCondition(e))if(void 0!==this.config.config.useAction)if("true"===this.config.config.useAction){var t=s.g.parseJson(this.config.config.txFoActions);void 0!==t?b.a.runActionWithContext(t,{ruleFunction:this.config.config,data_cpn:e.data},e.infoA,e.infoA_parent,e.configComponent):s.g.AppException("#CBUTTON.onClick","config_fo is undefined")}else if(void 0!==this.config.config.txFo){var a=s.g.parseJson(this.config.config.txFo);void 0!==a?b.a.runFoWithContext(a,{ruleFunction:this.config.config},e.infoA,e.infoA_parent,e.configComponent):s.g.AppException("#CBUTTON.onClick","Error Json is undefined")}else s.g.AppException("#CBUTTON.onClick","txFo is undefined");else s.g.AppException("#CBUTTON.onClick","useAction is undefined")},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||(void 0!==this.config.isStart&&void 0!==e.event&&!0===this.config.isStart&&"isStart"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action.trim()+";").includes(";"+e.configComponent.code.trim()+";"))),this.config={}}checkCondition(e){let t=s.g.getFormAppAuto(e.infoA.key_form);const a=this.config.config,i=t.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{});let o=a.condition,l=s.g.component_getListCode(o);for(let s of l){let e=t.callDirFromSupport("getAdvanced",{list_component:s.code},{});e=e[s.code],"object"===typeof e?e=JSON.stringify(e):e+="",o=o.replace(s.key,e)}let n=!0;void 0!==i&&l.length>0&&(n=s.g.checkConditionComponent(o,i));const r=this.checkConditionParent(e,o);return n&&r}checkConditionParent(e,t){if(e.infoA_parent.key_form){let a=this.getListParentCode(t),i=s.g.getFormAppAuto(e.infoA_parent.key_form),o={};a.length>0&&(o=i.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}));for(let e=0;e<a.length;e++){const i=a[e].code;let s=o[i];void 0===s&&(s=i),t=t.replace(a[e].key,s)}return s.g.checkConditionComponent(t,o)}return!0}getListParentCode(e){if("string"!==typeof e)return[];let t=[];var a=new RegExp("@PARENT{([^@{}]*)}","g");let i=a.exec(e);for(;i;)t.push({key:i[0],code:i[1]}),i=a.exec(e);return t}};var D=class{constructor(){this.start=e=>{const{component_result:t}=this.config.config;s.g.getFormAppAuto(e.infoA.key_form).callDirFromSupport("setFocus",{list_component:t},{})},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||(!0===this.config.isStart&&"isStart"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action.trim()+";").includes(";"+e.configComponent.code.trim()+";"))),this.config={}}};var C=class{constructor(){this.callAPI=(e,t)=>{var a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,t),Object(o.b)(a,{}).then(e=>s.g.foGetData("data",e))},this.start=e=>{if(!this.isRun(e))return;const{component_result:t,mask_format:a,mask_data_format:i,mask_mode:o}=this.config.config;var l=s.g.getFormAppAuto(e.infoA.key_form);let n=l.callDirFromSupport("getAdvanced",{list_component:"*"},{}),r=s.g.getConditionWithData(a,n),c=i?s.g.getConditionWithData(i,n):"",d=s.g.getConditionWithData(o,n);l.callDirFromSupport("setMaskConfig",{list_component:t},{mask_format:r,mask_data_format:c,mask_mode:d})},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||(void 0!==this.config.isStart&&void 0!==e.event&&!0===this.config.isStart&&"isStart"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action+";").includes(";"+e.configComponent.code+";"))),this.config={}}isRun(e){let t=this.config.config.condition;return s.g.persist_checkCondition(t,e.infoA.key_form)}};const A={getInfo:_,numberCal:u,visibility:g,calculator:m,setValue:p,setDataGB:f.a,managerComponent:v.a,runFo:y,setFocus:D,setMaskConfig:C};t.a=A},function(e,t,a){"use strict";var i=a(6),o=a(0),s=a.n(o),l=a(1),n=a(2),r=a(15),c=a(16),d=a(5);class h extends o.Component{constructor(e){super(e),this.getValue=()=>{var e=this.state.data;if(void 0!==this.refs.txFo){var t=this.refs.txFo.getValue();void 0!==t.txFo&&(e.txFo=t.txFo)}if(void 0!==this.refs.txFoAction){var a=this.refs.txFoAction.getValue();void 0!==a.txFoActions&&(e.txFoActions=a.txFoActions)}return e};var t=this.readConfig(this.props.data),a=this.changDataSchemaToDataSelect(),i=[];if(a.length>0&&void 0!==t.tableMasterData&&""!==t.tableMasterData){var o=this.changDataSchemaTo_privateKeyTableMasterData(t.tableMasterData,t);void 0!==o.data_schema_pk&&(i=o.data_schema_pk)}this.state={data:t,data_schema:a,data_schema_pk:i,private_key_config:l.g.autoID()}}changDataSchemaToDataSelect(){for(var e=Object(l.n)().all_id_button,t=[{title:"Ch\u01b0a ch\u1ecdn",code:""}],a=0;a<e.length;a++)t[t.length]={title:e[a].title,code:e[a].type};return t.sort((function(e,t){var a=e.title.toUpperCase(),i=t.title.toUpperCase();return a<i?-1:a>i?1:0})),t}changDataSchemaTo_privateKeyTableMasterData(e,t){var a=Object(l.n)(),i=[],o="";if(void 0!==a&&void 0!==a.all_id_button)for(var s=a.all_id_button,n=0;n<s.length;n++){var r=s[n];if(void 0!==r.type&&void 0!==r.detail&&""!==r.type.trim()&&r.type.trim()===e){for(var c=0;c<r.detail.length;c++){var d=r.detail[c];void 0!==d.datapk&&"true"===d.datapk&&(""===o&&(o=d.code),i[i.length]={title:d.title,code:d.code})}break}}var h=t;return h.privateKeyTableMasterData=o,{data_schema_pk:i,data:h}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.action?t.action=e.action:t.action="",null!=e.txFoActions?t.txFoActions=e.txFoActions:t.txFoActions="",null!=e.txFo?t.txFo=e.txFo:t.txFo="",null!=e.useAction?t.useAction=e.useAction:t.useAction="true",null!=e.icon?t.icon=e.icon:t.icon="fa-floppy-o",null!=e.color?t.color=e.color:t.color="info",null!=e.onTable?t.onTable=e.onTable:t.onTable="",null!=e.isMasterData?t.isMasterData=e.isMasterData:t.isMasterData="false",null!=e.tableMasterData?t.tableMasterData=e.tableMasterData:t.tableMasterData="",null!=e.privateKeyTableMasterData?t.privateKeyTableMasterData=e.privateKeyTableMasterData:t.privateKeyTableMasterData="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;if(a[e]=t.target.value,"tableMasterData"===e){var i=this.changDataSchemaTo_privateKeyTableMasterData(t.target.value,a);this.setState({data_schema_pk:i.data_schema_pk,data:i.data})}else this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"Thu\u1ed9c grid",value:this.state.data.onTable,onChange:e=>this.onChange_Value("onTable",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"Icon",value:this.state.data.icon,onChange:e=>this.onChange_Value("icon",e)}),s.a.createElement(n.a,{class:"col-sm-12 col-md-6",name:"Color",value:this.state.data.color,onChange:e=>this.onChange_Value("color",e)}),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-8 col-sm-8 col-md-8"},s.a.createElement("h3",{className:"panel-title text-capitalize"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-left","data-toggle":"collapse"},"H\xe0nh \u0111\u1ed9ng"))),s.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_function",className:"pull-right","data-toggle":"collapse"},s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"}))))),s.a.createElement("div",{id:this.state.private_key_config+"_function",className:"collapse"},s.a.createElement("div",{className:"panel-body"},s.a.createElement(d.a,{class:"col-sm-12 col-md-12",name:"H\xe0nh \u0111\u1ed9ng click",value:this.state.data.useAction,data:[{title:"G\u1ecdi tx fo",code:"false"},{title:"G\xf5 nhanh",code:"true"}],onChange:e=>this.onChange_Value("useAction",e)}),s.a.createElement(c.a,{ref:"txFo",hidden:"false"===this.state.data.useAction,data:this.state.data.txFo}),s.a.createElement(r.a,{hidden:"true"===this.state.data.useAction,ref:"txFoAction",data:this.state.data.txFoActions}))))),s.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-8 col-sm-8 col-md-8"},s.a.createElement("h3",{className:"panel-title text-capitalize"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_master",className:"pull-left","data-toggle":"collapse"},"Master data"))),s.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4"},s.a.createElement("a",{href:"#"+this.state.private_key_config+"_master",className:"pull-right","data-toggle":"collapse"}," ",s.a.createElement("i",{className:"fa fa-angle-down fa-lg fa-inverse"})," ")))),s.a.createElement("div",{id:this.state.private_key_config+"_master",className:"collapse"},s.a.createElement("div",{className:"panel-body"},s.a.createElement(d.a,{className:"col-sm-12 col-md-12",name:"L\xe0 master data",value:this.state.data.isMasterData,data:[{title:"Kh\xf4ng",code:"false"},{title:"\u0110\xfang",code:"true"}],onChange:e=>this.onChange_Value("isMasterData",e)}),"true"===this.state.data.isMasterData&&s.a.createElement(d.a,{class:"col-sm-12 col-md-6",name:"D\u1eef li\u1ec7u",value:this.state.data.tableMasterData,data:this.state.data_schema,onChange:e=>this.onChange_Value("tableMasterData",e)}),"true"===this.state.data.isMasterData&&s.a.createElement(d.a,{class:"col-sm-12 col-md-6",name:"Kh\xf3a ch\xednh",value:this.state.data.privateKeyTableMasterData,data:this.state.data_schema_pk,onChange:e=>this.onChange_Value("privateKeyTableMasterData",e)}))))))}}var _=h;class u extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data,this.state={data:this.props.data,lang_system:l.g.getConfigUserDefault("list_lang_config")}}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.props.data})}render(){return s.a.createElement("div",null,this.state.lang_system.map((e,t)=>s.a.createElement(n.a,{key:t,class:"col-sm-12 col-md-12",name:e.view,value:void 0!==this.state.data[e.key]?this.state.data[e.key]:e.key,onChange:t=>{var a=this.state.data;a[e.key]=t.target.value,this.setState({data:a})}})))}}var g=u;class m extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Not use",t[0].code="false",t[1]={},t[1].title="Use",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.visible?t.visible=e.visible:t.visible="",null!=e.disabled?t.disabled=e.disabled:t.disabled="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(d.a,{class:"col-sm-12 col-md-6",name:"Disabled",data:this.state.list_true_false,value:this.state.data.disabled,hasNew:!1,onChange:e=>this.onChange_Value("disabled",e)}),s.a.createElement(d.a,{class:"col-sm-12 col-md-6",name:"Visible",data:this.state.list_true_false,value:this.state.data.visible,hasNew:!1,onChange:e=>this.onChange_Value("visible",e)}))}}var p=m;class f extends o.Component{constructor(e){super(e),this.getValue=()=>this.state.data;var t=[];t[0]={},t[0].title="Kh\xf4ng",t[0].code="false",t[1]={},t[1].title="D\xf9ng",t[1].code="true",this.state={data:this.readConfig(this.props.data),list_true_false:t}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.danger?t.danger=e.danger:t.danger="",null!=e.warning?t.warning=e.warning:t.warning="",t}componentDidUpdate(e){this.props.data!==e.data&&this.setState({data:this.readConfig(this.props.data)})}onChange_Value(e,t){var a=this.state.data;a[e]=t.target.value,this.setState({data:a})}render(){return s.a.createElement("div",{className:"col-sm-12 col-md-12"},s.a.createElement(d.a,{class:"col-sm-12 col-md-6",name:"Danger",data:this.state.list_true_false,value:this.state.data.danger,hasNew:!1,onChange:e=>this.onChange_Value("danger",e)}),s.a.createElement(d.a,{class:"col-sm-12 col-md-6",name:"Warning",data:this.state.list_true_false,value:this.state.data.warning,hasNew:!1,onChange:e=>this.onChange_Value("warning",e)}))}}var v=f,b=a(8);var y=class{constructor(e,t,a){this.getProperty=()=>this.property,this.setCMD=e=>{void 0!==e.visible&&("true"!==e.visible&&"false"!==e.visible||(this.property.cmd.visible=e.visible)),void 0!==e.disabled&&("true"!==e.disabled&&"false"!==e.disabled||(this.property.cmd.disabled=e.disabled)),void 0!==e.block&&("true"!==e.block&&"false"!==e.block||(this.property.cmd.block=e.block))},this.getCMD=()=>this.property.cmd,this.setCMD_visible=e=>{this.property.cmd.visible=e},this.getCMD_visible=()=>this.property.cmd.visible,this.setCMD_disable=e=>{this.property.cmd.disabled=e},this.getCMD_disable=()=>this.property.cmd.disabled,this.property={main:[],position:[],cmd:{visible:"true",disabled:"false",block:"false"}}}},D=a(11),C=a(3),A=a(4),k=a(13);class M extends o.Component{constructor(e){if(super(e),this.setDataOOP=(e,t)=>{this.setState({dataOOP:t},()=>{l.g.getFormAppAuto(this.props.infoA.key_form).runRuleFunction(this.props.default,t,this.props.infoA_parent,"update")})},this.getDataOOP=(e,t)=>{const{list_component:a}=e,{code:i}=this.props.default;if(a){if(a.split(";").includes(i))return this.state.dataOOP}},this.setCMD=(e,t)=>{if(void 0!==e&&void 0!==t){const a=e.list_component;if(a&&a.includes(this.props.default.code)){this.propertyConstructor.setCMD(t);let{dataFull:e}=this.state;e.config.cmd.disable="true"===String(this.propertyConstructor.getCMD_disable()),e.config.cmd.visible=this.propertyConstructor.getCMD_visible(),this.setState({dataFull:e})}}},this.getAdvanced=(e,t)=>{},this.setAdvanced=(e,t)=>{},this.getInfoCheckRun=()=>{let e=this.propertyConstructor.getCMD();return{view:this.props.infoView,default:this.props.default,layout:this.props.infoLayout,block:e.block}},this.getFormConfig=e=>s.a.createElement(_,{data:e,ref:e=>l.g.setConfigComponent("config",e)}),this.getFormRole=e=>s.a.createElement(p,{data:e,ref:e=>l.g.setConfigComponent("role",e)}),this.getFormProperty=e=>s.a.createElement(v,{data:e,ref:e=>l.g.setConfigComponent("property",e)}),this.getFormLang=(e,t,a,i,o)=>s.a.createElement(g,{data:i,default:e,config:t,validate:a,configAVD:o,ref:e=>l.g.setConfigComponent("lang",e)}),this.changeKeyLanguage=()=>{this.state.lang_default?this.setState({lang:l.g.getLang(this.props.default.code),lang_select:l.g.getLangKey()}):this.setState({lang_select:l.g.getLangKey()})},this.forDebug=e=>{!0!==e&&!1!==e||this.setState({isDebug:e})},this.get=(e,t)=>{let a=this.props.config.structable;if(a.includes("|")){let t=a.split("|");for(let a=0;a<t.length;a++)this.readData(t[a],e.inform)}else this.readData(a,e.inform)},this.reload=(e,t)=>{this.setState({file_value:void 0})},this.runFO=(e,t)=>{t.action&&b.a.runActionWithContext(t.action,{},this.props.infoA,this.props.infoA_parent,this.props.default),t.txFo&&b.a.runFoWithContext(t.txFo,{},this.props.infoA,this.props.infoA_parent,this.props.default)},this.setLoadingAction=(e,t)=>{const a=(null===t||void 0===t?void 0:t.isLoading)||!1;let i=this.state.dataFull;i.config.cmd.isLoading=a,i.config.cmd.disable=a||"true"===String(this.propertyConstructor.getCMD_disable()),this.setState({dataFull:i})},this.fileSelectHandler=e=>{},this.set=(e,t)=>{if(void 0!==t&&null!==t&&void 0!==this.props.config.structable_read&&this.props.config.structable_read.includes(".")){let e=this.props.config.structable_read.split(".");if(e.length>0&&void 0!==t[e[0]]&&null!==t[e[0]]&&void 0!==t[e[0]][e[1]]&&null!==t[e[0]][e[1]])return void(""!==t[e[0]][e[1]]?"string"===typeof t[e[0]][e[1]]&&(t[e[0]][e[1]].indexOf(this.prefixImage)>-1?this.setState({img_value:t[e[0]][e[1]]},()=>{}):this.setState({img_value:this.prefixImage+t[e[0]][e[1]]},()=>{})):this.setState({img_value:"../rs/global/img/file_icon.svg"},()=>{}))}},this.runRule=e=>{if(e){var t=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==t&&t.runRuleFunction(this.props.default,this.data_select,this.props.infoA_parent,e)}},this.showToast=function(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={},o=e;switch(t){case!0:a&&(o+=" successfully"),i={class_:"success",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}};break;case!1:a&&(o+=" error"),i={class_:"error",icon:"fa fa-check",title:o,time:(new Date).getTime()+"",description:o,data:{},action:{}}}l.g.pushNotify("notifyToast",i,{}),l.g.pushNotify("notifyDefault",i,{}),l.g.callAllScreenListen()},this.propertyConstructor=new y(e.inputType,e.default,e.config),this.prefixImage="data:image/png;base64,",this.uploadfile_result={},this.disabled=!1,void 0!==this.props.infoA.form_code){var t=l.g.role_getComponent(this.props.infoA.form_code,this.props.default.codeHidden);null!=t&&void 0!==t.role&&(void 0!==t.role.disabled&&(!0===t.role.disabled?this.disabled=!0:this.disabled=!1),void 0!==t.role.visible&&(!0===t.role.visible?this.propertyConstructor.setCMD_visible(e.visibility&&!0):this.propertyConstructor.setCMD_visible(e.visibility&&!1)))}var a=this.props.lang;void 0===a&&(a={});let i={color:this.props.config.color,icon:this.props.config.icon},o={btn_remove:{color:"danger",icon:"fa-trash-o"},btn_save:{color:"success",icon:"fa-save"},btn_add:{color:"primary",icon:"fa-plus"},btn_modified:{color:"warning",icon:"fa-pencil-square-o"},btn_update:{color:"warning",icon:"fa-cloud-upload"},btn_cancel:{color:"default",icon:"fa-ban"},btn_clear:{color:"default",icon:"fa-times"},btn_import:{color:"primary",icon:"fa-upload"},btn_export:{color:"primary",icon:"fa-download"},btn_accept:{color:"primary",icon:"fa-check"},btn_apply:{color:"primary",icon:"fa-check"},btn_search:{color:"primary",icon:"fa-search"},btn_copy:{color:"primary",icon:"fa-files-o"},btn_print:{color:"base",icon:"fa-print"},btn_printVoucher:{color:"base",icon:"fa-file-text-o"}},n=!1;void 0!==o[this.props.default.code]&&(i=o[this.props.default.code],a=l.g.getLang(this.props.default.code),n=!0);var r=!1;void 0!==this.props.config.isLookup&&"true"===this.props.config.isLookup&&(r=!0),this.state={file_value:void 0,lang:a,img_value:"",lang_select:l.g.getLangKey(),lang_default:n,dataOOP:{},count:1,config_btn:i,show_modal:"none",isLookup:r,dataFull:{config:{default:{title:this.props.default.name,type:this.props.config.color,class:this.props.default.class,icon:this.props.config.icon,accept:"image/png, image/jpeg",hasUpload:this.props.config.uploadfile},cmd:{disable:"true"===String(this.propertyConstructor.getCMD_disable()),isLoading:!1}}}},this.time_last_click=0}componentDidUpdate(e){this.props.default!==e.default&&this.setState({default:this.props.default}),this.props.config!==e.config&&this.setState({config:this.props.config}),this.props.role!==e.role&&this.setState({role:this.props.role}),this.props.property!==e.property&&this.setState({property:this.props.property})}readData(e,t){var a=e.split(".");if(2!==a.length)return;let i=this.uploadfile_result;switch("{}"===JSON.stringify(i)&&(i=this.state.img_value),t){case void 0:case"true":l.g.putData(a[0],a[1],i,this.props.infoA);break;case"false":l.g.putDataGB(a[0],a[1]);break;default:l.g.putDataGB(a[0],a[1],"")}}componentDidMount(){if(this.state.isLookup&&this.props.config.callform&&""!==this.props.config.callform.trim()){let e=l.g.cloneJson(this.props.infoA);e.componentParent=this.props.default,Object(D.b)(this.props.config.callform,this.refs.b_modal.getElementContentModal(),e,this.props.default,"callform")}setTimeout(()=>{l.g.FromAddComponent(this.props.infoA.key_form,this)},l.g.getTimeAddComponent())}onClick(){let e=(new Date).getTime();e-this.time_last_click<1e3||(this.time_last_click=e,void 0!==this.props.config.uploadfile&&"true"===this.props.config.uploadfile.active?this.refs.uploadfile_hidden.click():this.this_redirect())}this_redirect(){if(this.propertyConstructor.getCMD_visible())if(void 0!==this.props.config.useAction)if("true"===this.props.config.useAction){var e=l.g.parseJson(this.props.config.txFoActions);void 0!==e?b.a.runActionWithContext(e,{},this.props.infoA,this.props.infoA_parent,this.props.default):l.g.AppException("#CBUTTON.onClick","config_fo is undefined")}else if(void 0!==this.props.config.txFo){var t=l.g.parseJson(this.props.config.txFo);void 0!==t?b.a.runFoWithContext(t,{},this.props.infoA,this.props.infoA_parent,this.props.default):l.g.AppException("#CBUTTON.onClick","Error Json is undefined")}else l.g.AppException("#CBUTTON.onClick","txFo is undefined");else l.g.AppException("#CBUTTON.onClick","useAction is undefined");else alert(l.g.getLang("#sysDontLoveMe"));var a=l.g.getFormAppAuto(this.props.infoA.key_form);void 0!==a&&a.runRuleFunction(this.props.default,{},this.props.infoA_parent,"on_click"),l.g.isDebug()&&l.g.copyToClipboard(JSON.stringify(this.props.config.txFo))}render(){const e=Object(C.b)("uUploadImage");if("false"===this.state.dataFull.config.cmd.visible)return null;const t=Object(C.b)("uOfGroup");return this.props.isOfgroupParent?s.a.createElement(t,{class:this.props.default.class_ofgroup},s.a.createElement(s.a.Fragment,null,s.a.createElement(e,{dataFull:Object(i.a)(Object(i.a)(Object(i.a)({},this.state.dataFull),{config:Object(i.a)({},Object(i.a)(Object(i.a)({},this.state.dataFull.config),{default:Object(i.a)(Object(i.a)({},this.state.dataFull.config.default),{att_content:this.state.file_value?this.state.file_value.name:"No file choose"})}))}),{},{abs_Change:e=>{void 0!==e.target.files&&(e.target.files.length>0?(Object(A.a)(e.target.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then(e=>{this.uploadfile_result=e,this.this_redirect()},e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#",!1):this.showToast("buttonNotSelectFile",!1)}),this.setState({file_value:e.target.files[0]})):this.showToast("buttonNotSelectFile",!1))},abs_Click:(e,t)=>{this.onClick()}})})),this.props.ofGroupData.map(e=>s.a.createElement(k.a,Object.assign({},e,{isOfgroupParent:!1})))):s.a.createElement(s.a.Fragment,null,s.a.createElement(e,{dataFull:Object(i.a)(Object(i.a)(Object(i.a)({},this.state.dataFull),{config:Object(i.a)({},Object(i.a)(Object(i.a)({},this.state.dataFull.config),{default:Object(i.a)(Object(i.a)({},this.state.dataFull.config.default),{att_content:this.state.file_value?this.state.file_value.name:"No file choose"})}))}),{},{abs_Change:e=>{if(e.preventDefault(),void 0!==e.target.files)if(e.target.files.length>0){let t=new FileReader,a=e.target.files[0];t.onloadend=()=>{let{img_value:e}=this.state;e=t.result,this.setState({img_value:e})};let i=10;void 0!==a&&null!==a&&a.size/1024/1024<i&&t.readAsDataURL(a),Object(A.a)(e.target.files[0],e.target.files[0].name,{infoA:this.props.infoA,infoA_parent:this.props.infoA_parent,componentConfigDefault:this.props.default}).then(e=>{this.uploadfile_result=e,this.this_redirect()},e=>{e.statusCode&&e.statusText?this.showToast(e.statusCode+":"+e.statusText+"#",!1):this.showToast("buttonNotSelectFile",!1)}),this.setState({file_value:e.target.files[0]})}else this.showToast("buttonNotSelectFile",!1)},abs_Click:(e,t)=>{this.onClick()},value:this.state.img_value})}))}}t.a=M},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(1);function o(e,t){var a={};a.key=t.key.trim();var i=e.split(t.key);return i.length>=2?(a.old=i[0].trim(),a.new=i[1].trim()):a.old=i[0].trim(),a}function s(e,t,a){var i={};for(var o in e)if(void 0!==e[o]){var s=e[o];if(void 0!==s)if(",*,"===t)for(var l in s)void 0!==s[l]&&(void 0===i[o]&&(i[o]={}),i[o][l]=s[l]);else if(t.includes(" as ")){if(a.length>0)for(var n=0;n<a.length;n++){var r=a[n];if(r.split(" as ").length>0)if("all"===r.split(" as ")[1]){if(o===r.split(" as ")[0])for(var c in s)i[c]=s[c]}else for(var d in s)r.includes(o+"."+d+" ")&&(i[r.split(" as ")[1]]=s[d])}}else for(var h in s)void 0!==s[h]&&t.includes(","+o+"."+h+",")&&(void 0===i[o]&&(i[o]={}),i[o][h]=s[h])}return i}class l{static AnalyticsQuery(e,t,a){var l={total:0,data:[]};if(void 0!==e&&""!==e.trim()){var n=i.g.jsonParser(e);if(void 0!==n){if(void 0!==n.data&&void 0!==n.select){let e=n.data,o=[];for(let t=0;t<e.length;t++){var r={data:[],table:e[t].table,alert:e[t].alert,join_column:e[t].join_column};let a=i.g.getData(e[t].table);if(void 0!==r.alert){for(let e=0;e<a.length;e++){let t={};t[r.alert]=a[e][r.table],r.data.push(t)}r.table=r.alert}else r.data=a;if(void 0!==e[t].data_add)if(void 0!==e[t].data_add.length)for(let o=0;o<e[t].data_add.length;o++)void 0!==e[t].data_add[o][r.table]&&void 0!==e[t].data_add[o][r.table][r.join_column]?r.data.push(e[t].data_add[o]):i.g.log(e[t].data_add[o],"Error AnalyticsQuery data_add "+r.table);else void 0!==e[t].data_add[r.table]&&void 0!==e[t].data_add[r.table][r.join_column]?r.data.push(e[t].data_add):i.g.log(e[t].data_add,"Error AnalyticsQuery data_add "+r.table);o.push(r)}var c=[];c=o.length>1?function(e,t){const a=t.data.reduce((e,a)=>e.set(a[t.table][t.join_column],a),new Map);return e.data.map(i=>{let o=a.get(i[e.table][e.join_column]);if(void 0!==o){let e={};return e=i,e[t.table]=o[t.table],e}})}(o[0],o[1]):o[0];let s=[],d="";void 0!==n.where&&(d=n.where);for(let t=0;t<c.length;t++)if(void 0!==c[t]){let e=c[t];if(i.g.checkDynamicCondition(e,d)){let t={};for(let a=0;a<n.select.length;a++){let i=n.select[a];void 0!==i.alert_table&&void 0!==i.alert_column?(void 0===t[i.alert_table]&&(t[i.alert_table]={}),void 0!==e[i.table]&&(t[i.alert_table][i.alert_column]=e[i.table][i.column])):(void 0===t[i.table]&&(t[i.table]={}),void 0!==e[i.table]&&(t[i.table][i.column]=e[i.table][i.column]))}s.push(t)}}void 0!==n.sort&&n.sort.length>0&&s.sort((e,t)=>{let a=0;for(let i=0;i<n.sort.length;i++){let o=n.sort[i];if(void 0!==e[o.table]&&void 0!==t[o.table]&&void 0!==e[o.table][o.column]&&void 0!==t[o.table][o.column])switch(o.type){case"string":a="ascending"===o.sort?a||e[o.table][o.column].localeCompare(t[o.table][o.column]):a||t[o.table][o.column].localeCompare(e[o.table][o.column]);break;case"number":a="ascending"===o.sort?a||e[o.table][o.column]-t[o.table][o.column]:a||t[o.table][o.column]-e[o.table][o.column]}}return a}),l.total=s.length,t+a>s.length?l.data=s.slice(t,s.length):l.data=s.slice(t,t+a)}}else{var d=function(e){var t={},a=e.split(" from ");if(a.length>=2){var i=a[0].trim().replace("\\s+"," ");if(t.col=i,""!==i){var s=a[1].trim();if(s.includes(" where ")||s.includes(" orderby ")||s.includes(" limitby ")||s.includes(" groupby ")){var l=function(e){var t=[];if(-1!==e.indexOf(" where ")){var a={};a.index=e.indexOf(" where "),a.key=" where ",t[t.length]=a}if(-1!==e.indexOf(" orderby ")){var i={};i.index=e.indexOf(" orderby "),i.key=" orderby ",t[t.length]=i}if(-1!==e.indexOf(" groupby ")){var o={};o.index=e.indexOf(" groupby "),o.key=" groupby ",t[t.length]=o}if(-1!==e.indexOf(" limitby ")){var s={};s.index=e.indexOf(" limitby "),s.key=" limitby ",t[t.length]=s}return t.sort((function(e,t){return e.index-t.index})),t}(s),n=o(s,l[0]);t.table=n.old,s=n.new;var r=n.key;if(l.length>=2){var c=o(s,l[1]);t[r]=c.old,s=c.new;var d=c.key;if(l.length>=3){var h=o(s,l[2]);t[d]=h.old,s=h.new;var _=h.key;if(l.length>=4){var u=o(s,l[3]);t[_]=u.old,t[u.key]=u.new}else t[_]=s}else t[d]=s}else t[r]=s}else t.table=s}}return void 0!==t.col&&void 0!==t.table?t:null}(e=e.substring("select".length).trim())||"",h=[];null!==d&&void 0!==d.table&&(h=function(e){for(var t=[],a=e.split(","),i=0;i<a.length;i++){var o=a[i],s={},l=o.trim();if(l.includes(" ")){var n=l.split(" ",2);s.table=n[0].trim(),s.alert=n[1].trim()}else s.table=o.trim(),s.alert=o.trim();t[t.length]=s}return t}(d.table)),null!==h&&void 0!==h||(h=[]);var _=[],u="";void 0!==d.col&&(u=d.col);var g=","+u+",",m=u.split(",");if(h.length>1);else if(1===h.length&&void 0!==h[0].alert){var p=i.g.getData(h[0].table);if(void 0!==p)for(var f=0;f<p.length;f++){var v={};v[h[0].alert]=p[f][h[0].table],_.push(v)}}if(void 0!==d.where&&(_=_.filter(e=>i.g.checkDynamicCondition(e,d.where))),void 0!==d.orderby&&d.orderby.includes(".")){var b=d.orderby.split(".");if(b.length>0){var y=b[0],D=b[1];_.sort((e,t)=>void 0!==e[y]&&void 0!==t[y]&&void 0!==e[y][D]&&void 0!==t[y][D]?e[y][D]-t[y][D]:0)}}void 0!==_&&_.length>0&&(l.total=_.length,t+a>_.length?l.data=_.slice(t,_.length):l.data=_.slice(t,t+a));for(var C=0;C<l.data.length;C++)l.data[C]=s(l.data[C],g,m)}}return l}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _lib_libPost__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);class process{constructor(){this.callAPI=(e,t)=>{var a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,t),Object(_lib_libPost__WEBPACK_IMPORTED_MODULE_0__.b)(a,{}).then(e=>_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.g.foGetData("data",e))},this.start=config_target=>{const{component_result:component_result,component_action:component_action,query:query,filter_condition:filter_condition,mode_filter:mode_filter,api:api,data_type:data_type,query_db:query_db}=this.config.config;let js_condition=this.config.config.js_condition;var form_=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.g.getFormAppAuto(config_target.infoA.key_form);let data_component=form_.callDirFromSupport("getAdvanced",{list_component:"*"},{});if(void 0!==component_result&&void 0!==form_&&void 0!==component_action&&""!==component_result.trim()){let data_gb=[],c_cdlist_config=query.split(";");if("api"===data_type){let e="";this.callAPI(api,data_component).then(t=>{for(const o in t){e=o;const a=t[o];if(Array.isArray(a))for(const e in a)t[o][e]={[o]:t[o][e]}}let a=t||{};a=a[e]||[];let i={list_component:component_result};_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.g.isDebug()&&(i.DEBUG={},i.DEBUG.CONFIG_RULE=this.config),form_.callDirFromSupport("setDataGB",i,a)})}else{if("query_db"===data_type)data_gb=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.g.getDataLimited(query_db,0,9999999).data||[];else{if(2!==c_cdlist_config.length)return;data_gb=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.g.data_cdList(c_cdlist_config[1].trim(),c_cdlist_config[0].trim())||[]}switch(mode_filter){case"regex":let filter_condition_json=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.g.parseJson(filter_condition);void 0===filter_condition_json&&(data_gb=[]);for(let e in filter_condition_json){let t=filter_condition_json[e],a=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.g.component_getListCode(t);for(let i=0;i<a.length;i++){const o=a[i].code;let s=data_component;if(s=s[o]||{},s=Object.values(s)[0]||{},s=Object.values(s)[0]||"",void 0!==s&&""!==s.trim()){let o=t.replace(a[i].key,s),l=new RegExp(o,"g");data_gb=data_gb.filter(t=>{let a=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.g.getOOP(t,e);return!0===l.test(a)})}else data_gb=[]}}break;case"js_condition":let list_code=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.g.component_getListCode(js_condition);for(let e=0;e<list_code.length;e++){const t=list_code[e].code;let a=data_component,i=a[t];void 0===i&&(i=t),js_condition=js_condition.replace(list_code[e].key,i)}js_condition=this.replaceParentValueInCondition(config_target,js_condition);try{eval(js_condition)}catch(error){data_gb.length=0,_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.g.isDebug&&console.error("Set data GB=>",error)}}let para_call={list_component:component_result};_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.g.isDebug()&&(para_call.DEBUG={},para_call.DEBUG.CONFIG_RULE=this.config),form_.callDirFromSupport("setDataGB",para_call,data_gb)}}},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||(void 0!==this.config.isStart&&void 0!==e.event&&!0===this.config.isStart&&"isStart"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action+";").includes(";"+e.configComponent.code+";"))),this.config={}}replaceParentValueInCondition(e,t){if(e.infoA_parent.key_form){let a=this.getListParentCode(t),i=_lib_libSupport__WEBPACK_IMPORTED_MODULE_1__.g.getFormAppAuto(e.infoA_parent.key_form),o={};a.length>0&&(o=i.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}));for(let e=0;e<a.length;e++){const i=a[e].code;let s=o[i];void 0===s&&(s=i),t=t.replace(a[e].key,s)}}return t}getListParentCode(e){if("string"!==typeof e)return[];let t=[];var a=new RegExp("@PARENT{([^@{}]*)}","g");let i=a.exec(e);for(;i;)t.push({key:i[0],code:i[1]}),i=a.exec(e);return t}}__webpack_exports__.a=process},function(module,__webpack_exports__,__webpack_require__){"use strict";var _lib_libSupport__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);class process{constructor(){this.start=config_target=>{var form_=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.g.getFormAppAuto(config_target.infoA.key_form);const{component_manager:component_manager,is_use_block:is_use_block}=this.config.config;let json_manager=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.g.parseJson(component_manager),data_of_cpn=form_.callDirFromSupport("getAdvanced",{list_component:"*"},{});for(let code_result in json_manager){let condition=json_manager[code_result],list_key=_lib_libSupport__WEBPACK_IMPORTED_MODULE_0__.g.component_getListCode(condition);for(let e of list_key){let t=data_of_cpn[e.code];"object"===typeof t?t=JSON.stringify(t):t+="",condition=condition.replace(e.key,t)}let is_visible=!1;try{is_visible=eval(condition)}catch(error){}if(is_use_block){let e=!is_visible;"true"!==is_use_block&&(e="false"),form_.callDirFromSupport("setCMD",{list_component:code_result},{visible:String(!!is_visible),block:e})}else form_.callDirFromSupport("setCMD",{list_component:code_result},{visible:String(!!is_visible)})}},this.setConfig=e=>{this.config=e},this.checkUse=e=>"isOpenFromOther"===e.event||(void 0!==this.config.isStart&&void 0!==e.event&&!0===this.config.isStart&&"isStart"===e.event||!(void 0===e.configComponent||void 0===e.event||void 0===this.config.config||""===e.event.trim()||void 0===this.config.config.component_action||void 0===this.config.config.component_event||""===this.config.config.component_action.trim()||"all"!==this.config.config.component_event&&this.config.config.component_event!==e.event||!(";"+this.config.config.component_action.trim()+";").includes(";"+e.configComponent.code.trim()+";"))),this.config={}}}__webpack_exports__.a=process},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i="MIICXAIBAAKBgQDB7MQCeFvDYGwAV6a6E0Q7N8Ptqq58CxXEcJufjDIcDtML7cs7KBqDA4SYtzkI/4HFUeqcQbWFyjd10nxxilOWX2/f+TK/Zdf9MNZoBHIEeqZ9WtG6+d2p4y3cSFg9B4vJZDlPLozPzXnmhblQCSQ8K7+p14EovD0wEOmFxTEVqQIDAQABAoGAF6F0WSC1fd9YCcqkhHQokla/R0zPKkpngqJ+NDjvOkAMM53sb+75HBHnrHxXNON9ur+6qQPQzNbRX0gg5e0HNktohLe1EixiEPG7CNaKgWx11nEWN6kRY0ffS+rc2aU6IN5r6pXF1//tw9pI7bJOvZwtwM5jeN2xe3UgnfQK+aECQQDhkjLfyATEU2XHvkrdMCuzLqs0pccLStLDVsyQJ424mli1dMeMGr+4vQEpvS4UR1lDLhYV1njfcT3maoeFnLIVAkEA3BW0yRdSqJAGZS8cp3BD4TNiXzXdxaLr2zi2BXwg6acx9py/fHo2XP/23D+USwP/WEXD1gumBBYWPdsGDIQ+RQJAZ3IroJLTFNIGQDcVkCByOgcx/r/z60rSI0EgKQ/qn3kxK241wRvXRrpu2RxoEGa0Gen9uOAVqKr/Lzc1lWHKDQJAJvEASASEb6bsOsMXQtkuaY55/Xa+gtXM/cEPE/FesXkP8h7SEuhc7h+sQlRNnOhcKfZOLHVrLpXp4Y/7hgNwMQJBAJL0REs/tE+/Wi9QvaH5B0EVbE6W59tq8PrX0JU7NSbXRhjIfgxDtcAOvJ37HguePsmSWQKh3lUGe79J02U0Ufk=";class o{static buildStoreHtml5_for_login(){}static buildStoreHtml5_for_app(e){let t={};if(null!=e.searchParams.get("s")){t=JSON.parse(function(e){var t=new window.JSEncrypt({default_key_size:1024});t.setPrivateKey(i);var a="",o=e;for(;o.length>0;){var s=o.substring(0,172);o=o.substring(172),a+=t.decrypt(s)}return a}(e.searchParams.get("s")))}let a=window.location.hostname;return"www."===a.substr(0,4)&&(a=a.replace("www.","")),t.domain=a,t}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(1);class o{static analyticsTable(e){if(void 0!==e)for(var t in e){var a=Object(i.o)(t);if(void 0!==a){if(null!=a.detail)for(var o=a.detail,s=0;s<o.length;s++){var l=o[s];void 0!==l.code&&void 0!==l.datapk&&void 0!==l.autoseq&&void 0!==l.type&&(void 0!==e[t][l.code]?l.autoseq:"true"===l.datapk&&("object"!==typeof e[t]&&(e[t]={}),e[t][l.code]=i.g.autoID()),void 0!==l.fileid&&"true"===l.fileid&&(e[t].AFGHkeyIndexWJ=e[t][l.code]))}void 0===e[t].AFGHkeyUserCreateWJ&&(e[t].AFGHkeyUserCreateWJ=i.g.context_get("user_jwebui.user_id")),void 0!==e[t].AFGHkeyIndexWJ&&""!==e[t].AFGHkeyIndexWJ||(e[t].AFGHkeyIndexWJ=i.g.autoID()),e[t].AFGHkeyTime=i.g.getLongTime(),void 0===e[t].AFGHkeyWorkFlow&&(e[t].AFGHkeyWorkFlow="")}}return e}}},function(e,t,a){"use strict";var i=a(4),o=a(1),s=a(9);class l extends s.a{constructor(){super(...arguments),this.showAlert=()=>{void 0!==this.input.lang?alert(o.g.getLang(this.input.lang)):o.g.AppException("#message.showAlert","lang is undefined","data")},this.countdownLogout=()=>{let e=10;void 0!==o.g.getParameterSystem("system_countdown_logout")&&(e=o.g.getParameterSystem("system_countdown_logout"));let t=setInterval(()=>{0===e&&(clearInterval(t),Object(i.b)([{txcode:"#sys:bo-projectLogin-listApplication",input:{}}],{}).then(e=>{var t,a;const s=(null===(t=o.g.foGetData("list_application",e).find(e=>e.list_application.list_appliaction_id===o.r))||void 0===t||null===(a=t.list_application)||void 0===a?void 0:a.list_application_bo_logout)||"#sys:bo-delete-session";Object(i.b)([{txcode:s,input:{token_webui:o.g.getSessionFromStore()}}],{})})),Object(o.G)(!0,{title:o.g.getLang("system_countdown_logout")+e,btn:"",list_fo:"",list_fo_start:"",color:"warning"}),e-=1},1e3)},this.showConsole=()=>{void 0!==this.input.lang?console.log(o.g.getLang(this.input.lang)):o.g.AppException("#message.showConsole","lang is undefined","data")},this.showToastConfirm=()=>{var e,t;let a="";a=this.input.lang_confirm?o.g.getLang(this.input.lang_confirm):this.input.lang?o.g.getLang(this.input.lang):(null===(e=this.context.componentConfigDefault)||void 0===e?void 0:e.name)?o.g.getLang(null===(t=this.context.componentConfigDefault)||void 0===t?void 0:t.name):o.g.getLang("Action"),a+=" ";const i=new Date;let s="",l="";if(this.input.toast_type)switch(this.input.toast_type){case"success":s="success",l="fa fa-check",a+=o.g.getLang("success");break;case"error":default:s="error",l="fa fa-bullhorn",a+=o.g.getLang("error")}else{let e=this.input.lang;switch(e){case"sysActionOk":case"sysActionSaveOk":case"sysGetInfoOk":s="success",l="fa fa-check",a+=o.g.getLang("success");break;case"sysActionSaveError":s="error",l="fa fa-exclamation",a+=o.g.getLang("error");break;default:String(e).toLowerCase().includes("error")||String(e).toLowerCase().includes("fail")?(s="error",l="fa fa-bullhorn",a+=o.g.getLang("error")):(s="success",l="fa fa-bullhorn",a+=o.g.getLang("success"))}}var n={class_:s,icon:l,title:o.g.getLang("systemTitle"),time:i.getTime()+"",description:a,data:{},action:{}};if(o.g.pushNotify("notifyToast",n,{}),o.g.pushNotify("notifyDefault",n,{}),void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var r=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==r&&r.hasOwnProperty("getLoadingAction")){let e=!1;e=r.getLoadingAction(),e&&setTimeout(()=>{r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!1)},500)}}o.g.callAllScreenListen()},this.showToast=()=>{if(void 0!==this.input.lang){const a=new Date;let i=this.input.lang,s="",l="";switch(i){case"sysActionOk":case"sysActionSaveOk":case"sysGetInfoOk":s="success",l="fa fa-check";break;case"sysActionSaveError":s="error",l="fa fa-exclamation";break;case"sysActionSearchEmpty":s="warning",l="fa fa-exclamation";break;default:String(i).toLowerCase().includes("error")||String(i).toLowerCase().includes("fail")?(s="error",l="fa fa-bullhorn"):(s="success",l="fa fa-bullhorn")}var e={class_:s,icon:l,title:o.g.getLang("systemTitle"),time:a.getTime()+"",description:o.g.getLang(this.input.lang),data:{},action:{}};if(o.g.pushNotify("notifyToast",e,{}),o.g.pushNotify("notifyDefault",e,{}),void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var t=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t&&t.hasOwnProperty("getLoadingAction")){let e=!1;e=t.getLoadingAction(),e&&setTimeout(()=>{t.hasOwnProperty("setLoadingAction")&&t.setLoadingAction(!1)},500)}}o.g.callAllScreenListen()}else o.g.AppException("#message.showToast","lang is undefined","data")},this.showNotify=()=>{if(void 0!==this.input&&void 0!==this.input.notifyServer){for(var e=0;e<this.input.notifyServer.length;e++){var t=this.input.notifyServer[e];void 0!==t.type_notify&&void 0!==t.mess&&o.g.pushAllNotify(t.type_notify,[t.mess])}o.g.callAllScreenListen()}},this.chat=e=>{},this.showMessageModal=(e,t)=>{let a={title:o.g.getLang(e),content:o.g.getLang(t)};var i=this.buildPackRollBack();return o.g.confirmInfo(a,[{name:"message_modal_ok",color:"primary",icon:"fa-floppy-o",val:!0}],i),!0}}}var n=l,r=a(0),c=a.n(r),d=a(14),h=a.n(d),_=a(11),u=a(8),g=a(40),m={};class p{static startJob(){Object(i.b)([{txcode:"#sys:bo-schedule-loadStatusStart",input:{}}],{}).then(e=>{let t=o.g.foGetData("scheduleJob",e);if(void 0!==t)for(let a=0;a<t.length;a++)void 0!==t[a].scheduleJob&&void 0!==t[a].scheduleJob.id&&""!==t[a].scheduleJob.id&&(o.g.scheduleJob_addTo_Store(t[a]),f(t[a],{}))},e=>{})}static runSchedule(e,t){let a=o.g.scheduleJob_getJob_toRun(e);void 0===a?Object(i.b)([{txcode:"#sys:bo-schedule-loadScheduleID",input:{schedule_id:e}}],{}).then(e=>{let a=o.g.foGetData("loadScheduleID",e);o.g.scheduleJob_addTo_Store(a),f(a,t)},e=>{}):f(a,t)}}const f=(e,t)=>{let a=o.g.cloneJson(e);if(a.context={},a.context.scheduleContext_job_id=o.g.autoID(),a.context.scheduleContext_run_count=1,void 0!==a.scheduleJob.time&&void 0!==a.scheduleJob.id&&void 0!==a.scheduleJob.content_run&&a.scheduleJob.time>0&&""!==a.scheduleJob.id&&""!==a.scheduleJob.content_run)if("L"===a.scheduleJob.type){if(void 0!==a.scheduleJob.conditions&&!Object(g.a)(a,a.scheduleJob.conditions))return;a.context.scheduleContext_run_count++,"{}"!==JSON.stringify(t)?u.a.runFoWithContext(JSON.parse(a.scheduleJob.content_run),t.data,t.infoA,t.infoA_parent,t.componentConfigDefault):u.a.fo(JSON.parse(a.scheduleJob.content_run),t),m[a.context.scheduleContext_job_id]=setInterval(()=>{if(void 0!==a.scheduleJob.conditions&&!Object(g.a)(a,a.scheduleJob.conditions))return clearInterval(m[a.context.scheduleContext_job_id]),void delete m[a.context.scheduleContext_job_id];a.context.scheduleContext_run_count++,"{}"!==JSON.stringify(t)?u.a.runFoWithContext(JSON.parse(a.scheduleJob.content_run),t.data,t.infoA,t.infoA_parent,t.componentConfigDefault):u.a.fo(JSON.parse(a.scheduleJob.content_run),t)},a.scheduleJob.time)}else"S"===a.scheduleJob.type&&setTimeout(()=>{(void 0===a.scheduleJob.conditions||Object(g.a)(a,a.scheduleJob.conditions))&&("{}"!==JSON.stringify(t)?u.a.runFoWithContext(JSON.parse(a.scheduleJob.content_run),t.data,t.infoA,t.infoA_parent,t.componentConfigDefault):u.a.fo(JSON.parse(a.scheduleJob.content_run),t))},a.scheduleJob.time)};var v=a(37),b=a(32);class y extends s.a{constructor(){super(...arguments),this.startLang=()=>{var e={};let t=o.g.getLangKey();if(void 0!==this.input.key_lang&&void 0!==this.input.key_lang.lang_of_user&&(t=this.input.key_lang.lang_of_user),void 0!==this.input.sys_lang_data&&(e=this.input.sys_lang_data),void 0!==this.input.lang_data)for(var a in this.input.lang_data)e[a]=this.input.lang_data[a];else o.g.AppException("#system.startLang","lang_data is undefined","data");o.g.setLangKey(t),o.g.setAllLang(e)},this.load_flow_client=()=>{void 0!==this.input.flow_client?Object(o.J)(this.input.flow_client):o.g.AppException("#system.load_flow_client","flow_client is undefined","data")},this.loadFormDesign=()=>{null!=this.input.form_design&&Object(o.I)(this.input.form_design);var e=o.g.autoID();let t=c.a.lazy(()=>Promise.all([a.e(136),a.e(138)]).then(a.bind(null,232)));o.g.newForm(c.a.createElement(r.Suspense,{key:e,fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(t,{key:e,mapping_key:e})))},this.loadeLearning=()=>{var e=[];null!=this.input.data&&(e=this.input.data);var t=o.g.autoID();let i=c.a.lazy(()=>Promise.resolve().then(a.bind(null,67)));o.g.newForm(c.a.createElement(r.Suspense,{key:t,fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(i,{data:e,key:t,mapping_key:t})))},this.loadFormLang=()=>{for(var e=o.g.autoID(),t=o.g.getConfigUserDefault("list_lang_config"),i={},s=0;s<t.length;s++)null!=this.input["lang_data_"+t[s].key]&&(i[t[s].key]=this.input["lang_data_"+t[s].key]);let l=c.a.lazy(()=>a.e(141).then(a.bind(null,225)));o.g.newForm(c.a.createElement(r.Suspense,{key:e,fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(l,{key:e,mapping_key:e,data:i})))},this.loadFormDevice=()=>{var e=o.g.autoID();this.input.device;let t=c.a.lazy(()=>a.e(142).then(a.bind(null,226)));o.g.newForm(c.a.createElement(r.Suspense,{key:e,fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(t,{key:e,mapping_key:e,data:this.input.device})))},this.logout=()=>{o.g.clearSessionStorage()},this.loadFormRoleSystem=()=>{var e=o.g.autoID();let t=c.a.lazy(()=>a.e(145).then(a.bind(null,227)));o.g.newForm(c.a.createElement(r.Suspense,{key:e,fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(t,{key:e,mapping_key:e})))},this.loadRoleUser=()=>{var e={};null!=this.input.loadRoleUserAll&&(e=this.input.loadRoleUserAll),void 0===e&&(e={});var t=o.g.autoID();let i=c.a.lazy(()=>a.e(146).then(a.bind(null,228)));o.g.newForm(c.a.createElement(r.Suspense,{key:t,fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(i,{data:e,key:t,mapping_key:t})))},this.loadDatabase=()=>{void 0!==this.input.database?Object(o.H)(this.input.database):o.g.AppException("#system.loadDatabase","database is undefined","data")},this.loadParameterSystem=()=>{void 0!==this.input.paraServer?(o.g.loadParameterSystem(this.input.paraServer),o.g.parameterSystem_start()):o.g.AppException("#system.loadParameterSystem","paraServer is undefined","data")},this.loadTxCodeFo=()=>{},this.reloadPage=()=>{window.location.reload()},this.gotoLogin=()=>{window.location.replace(o.g.getUrlLogin_ver2())},this.callFormLogin=e=>{var t="#sys:bo-login-signIn";void 0!==e&&(t=e);var a=o.g.getSessionFromStore();""!==a?(o.g.clearSessionStorage(),o.g.setSessionTemp(a),Object(i.b)([{txcode:t,input:{e:"",p:"",session_id:a}}],{}).then(e=>{void 0!==e.fo&&e.fo.length>0&&void 0!==e.fo[0].input["login-status"]&&void 0!==e.fo[0].input["login-status"].status_login&&"login#127"===e.fo[0].input["login-status"].status_login||window.location.replace(o.g.getUrlLogin())},e=>{})):window.location.replace(o.g.getUrlLogin()),document.title=o.g.getLang("title")},this.callForm_flowFo=()=>{var e=o.g.autoID();if(void 0!==this.input.txClient){let t=c.a.lazy(()=>a.e(140).then(a.bind(null,233)));o.g.newForm(c.a.createElement(r.Suspense,{key:e,fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(t,{all_txcode:this.input.txClient,key:e,mapping_key:e})))}else o.g.AppException("#system.callForm_flowFo","txClient is undefined","data")},this.callForm_flowBo=()=>{var e=o.g.autoID();if(void 0!==this.input.tx){let t=c.a.lazy(()=>a.e(139).then(a.bind(null,229)));o.g.newForm(c.a.createElement(r.Suspense,{key:e,fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(t,{all_txcode:this.input.tx,key:e,mapping_key:e})))}else o.g.AppException("#system.callForm_flowBo","tx is undefined","data")},this.callForm_roleBo=()=>{var e=o.g.autoID();if(void 0!==this.input.tx&&void 0!==this.input.roletxbo){let t=c.a.lazy(()=>a.e(144).then(a.bind(null,230)));o.g.newForm(c.a.createElement(r.Suspense,{key:e,fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(t,{all_txcode:this.input.tx,data:this.input.roletxbo,key:e,mapping_key:e})))}else o.g.AppException("#system.callForm_roleBo","all_txcode,roletxbo is undefined","data")},this.callForm_paraServer=()=>{var e=o.g.autoID();if(void 0!==this.input.paraServer){let t=c.a.lazy(()=>a.e(143).then(a.bind(null,231)));o.g.newForm(c.a.createElement(r.Suspense,{key:e,fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(t,{key:e,mapping_key:e,data:this.input.paraServer})))}else o.g.AppException("#system.callForm_paraServer","paraServer is undefined","data")},this.callFoStart=()=>{void 0!==this.input.key_protect&&o.g.setProtect(this.input.key_protect),u.a.quickPost([{txcode:"#sys:bo-login-start",input:{lang_data:o.g.getLangKey(),isStart:!0}}],{}),setInterval(()=>{o.g.webSocketSendMessage("#protectPost")},o.g.getTimeProtect()),o.g.isDebug()&&(console.log("React.version===>"+c.a.version),console.log("=====my device=====",o.g.getMyDevice()))},this.setKeyPost=()=>{void 0!==this.input.key_protect&&o.g.setProtect(this.input.key_protect)},this.statusLogin=()=>{if(void 0!==this.input["login-status"]&&void 0!==this.input["login-status"].status_login&&"login#127"===this.input["login-status"].status_login){void 0!==this.input["login-status"].once_packed&&0!==this.input["login-status"].once_packed&&o.g.setOncePacked(this.input["login-status"].once_packed),o.g.relogin_setStatus(!1),void 0!==this.input["login-status"].relogin&&"true"===this.input["login-status"].relogin&&o.g.relogin_setStatus(!0);var e=!0;if(void 0!==this.input.loadUserConfigDefault?Object(o.O)(this.input.loadUserConfigDefault):(e=!1,o.g.AppException("#system.statusLogin","loadUserConfigDefault is undefined","data")),void 0!==this.input.loadUserConfig?(Object(o.N)(this.input.loadUserConfig),void 0!==this.input.loadUserConfig.lang&&o.g.setLangKey(this.input.loadUserConfig.lang)):(e&&(e=!1),o.g.AppException("#system.statusLogin","loadUserConfig is undefined","data")),void 0!==this.input.pin&&void 0!==this.input.pin.hasPin&&"true"===this.input.pin.hasPin&&o.g.relogin_setHasPinCode(),void 0!==this.input.loadUserChatProfile&&o.g.profileUser_set(this.input.loadUserChatProfile),void 0!==this.input.loadRoleCache?Object(o.L)(this.input.loadRoleCache):(e&&(e=!1),o.g.AppException("#system.statusLogin","loadRoleCache is undefined","data")),void 0!==this.input.loadUserRole?Object(o.M)(this.input.loadUserRole):(e&&(e=!1),o.g.AppException("#system.statusLogin","loadUserRole is undefined","data")),void 0!==this.input.dyJs&&o.g.txBasic_add(this.input.dyJs),void 0!==this.input.loadUserID?(void 0!==this.input.loadUserID.id?Object(o.P)(this.input.loadUserID.id):(e&&(e=!1),o.g.AppException("#system.statusLogin","loadUserID[id] is undefined","data")),void 0!==this.input.loadUserID.user_id_find&&Object(o.Q)(this.input.loadUserID.user_id_find)):(e&&(e=!1),o.g.AppException("#system.statusLogin","loadUserID is undefined","data")),p.startJob(),e)return h.a.unmountComponentAtNode(document.getElementById("root")),!0;o.g.AppException("#system.statusLogin","Login false","system")}this.gotoLogin()},this.loadScreenWorker=()=>{let e=o.g.template_getConfigTemplate(),t=null;void 0!==e.theme&&(t=e.theme),o.g.role_menuOfRole(),h.a.render(c.a.createElement(v.default,{template_select:e.template,screen_working:e.screen_working,theme:t}),document.getElementById("root"))},this.container=()=>{},this.data=()=>{for(var e in console.log("this.input"),o.g.isDebug()&&console.log("system.data this.input ===> ",this.input),this.input)o.g.setData(e,this.input[e]);void 0!==this.input.c_cdlist&&o.g.data_buildCdListQuick(this.input.c_cdlist)},this.addData=()=>{Object(o.D)(this.input)},this.showError=()=>{if(void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.hasOwnProperty("showErrorFromServer")&&e.showErrorFromServer(this.input.infoError)}},this.buildContext=()=>{void 0!==this.input.context&&Object(o.f)(this.input.context);let e=o.g.jcontextGetAll();for(let t=0;t<e.length;t++)e[t].hasOwnProperty("fo_call")&&e[t].fo_call()},this.sliderbarCallForm=()=>{var e={};void 0!==this.input.data&&(e=this.input.data),void 0!==this.input.form_code?Object(_.a)(this.input,{},{},{},e):o.g.AppException("#system.sliderbarCallForm","form_code is undefined","system")},this.buildObjectMarkdown=()=>{},this.dyjsReadJavascript=()=>{o.g.txBasic_add(this.input.dyJs)},this.addListKeyboard=()=>{const e=o.g.getConfigUser("key_special");let t=Object(b.b)(),a=o.g.getListSystemKeyboard();const i=Object(o.x)();let s=[];void 0!==i.system_keyboard&&(s=i.system_keyboard);let l=a.concat(s);const n={CTRL:"ctrlKey",ALT:"altKey",SHIFT:"shiftKey"},r=o.g.getMyDevice().osVersion;let c={};for(let o=0;o<l.length;o++){const t=l[o];let a={};if("Windows"===r&&(a="string"===typeof t.key?JSON.parse(t.key):t.key,void 0!==a)){const i=a.default.split("+");let o={};if(1===i.length)if(o="string"===typeof t.fo?{fo:JSON.parse(t.fo)}:t.fo,Object.values(e).includes(i[0]))for(const[t,a]of Object.entries(e))a===i[0]&&(c[t]=o);else c[i[0].toUpperCase().charCodeAt()]=o;else if(2===i.length){if(void 0!==n[i[0]])if(o="string"===typeof t.fo?{fo:JSON.parse(t.fo)}:t.fo,void 0===c[n[i[0]]]&&(c[n[i[0]]]={}),Object.values(e).includes(i[1]))for(const[t,a]of Object.entries(e))a===i[1]&&(c[n[i[0]]][t]=o);else c[n[i[0]]][i[1].toUpperCase().charCodeAt()]=o}else if(3===i.length&&""!==i[3]&&void 0!==n[i[0]]&&void 0!==n[i[1]]){o="string"===typeof t.fo?{fo:JSON.parse(t.fo)}:t.fo;const a=n[i[0]]+"_"+n[i[1]];if(void 0===c[a]&&(c[a]={}),Object.values(e).includes(i[2]))for(const[t,s]of Object.entries(e))s===i[2]&&(c[a][t]=o);else c[a][i[2].toUpperCase().charCodeAt()]=o}}}let d=o.g.cloneJson(t);for(const[o,h]of Object.entries(c))if(o.includes("Key")){void 0===d[o]&&(d[o]={});for(const[e,t]of Object.entries(c[o]))d[o][e]=t}else d[o]=JSON.parse(JSON.stringify(h));Object(b.c)(d)}}}var D=y;class C extends s.a{}var A=C;class k extends s.a{constructor(){super(...arguments),this.copyThis=(e,t)=>{let a=this.input.node_data_convert;let i=o.g.getFormAppAuto(this.context.infoA.key_form).getData("");if(this.context.infoA.form_code!==t&&(i[t]=i[this.context.infoA.form_code],a&&(i[a]=i[this.context.infoA.form_code])),void 0!==e){let t=e.split(";");for(let e=0;e<t.length;e++){let a=t[e].split("."),o=i;for(let e=0;e<a.length;e++)if(void 0!==o){const t=a[e];e+1===a.length?delete o[t]:o=o[t]}}}for(const o in i){let e=i[o];if("object"===typeof e&&!Array.isArray(e))for(const t in e)"object"===typeof e[t]&&Array.isArray(e[t])&&(i[t]=e[t])}return void 0!==t?Object(_.a)({form_code:t},{},{},{},i):Object(_.a)({form_code:this.context.infoA.form_code},{},{},{},i),!0},this.addnew=(e,t,a)=>{var i="true";if(void 0!==a&&(i=a),void 0!==e&&void 0!==t){var s=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!0),s.hasOwnProperty("getFormValidate"))){if(!s.getFormValidate()){s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:i},{}),s.hasOwnProperty("getData")&&(this.input_action=o.g.analyticsTable(s.getData("")));for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];return o.g.isDebug()&&(console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),console.log("this.input_action=>",o.g.cloneJson(this.input_action))),o.g.getParameterSystem("clipboardClearForFo")&&o.g.clearClipboardFo(),!0}s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1),s.hasOwnProperty("clearTimeOut")&&s.clearTimeOut()}}else o.g.AppException("#form.getData","form is undefined","system")}else o.g.AppException("#form.getData","parameter is undefined","system");return!1},this.clearError=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e?(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("clearError",{},{})):o.g.AppException("#form.clearError","form is undefined","system")}else o.g.AppException("#form.clearError","key_form is undefined","system");else o.g.AppException("#form.clearError","infoA is undefined","system")},this.clearForm=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e?(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")&&(e.callDirFromSupport("clearError",{},{}),e.clearForm(),e.hasOwnProperty("setStatusToForm_AndRunRule")&&e.setStatusToForm_AndRunRule(6))):o.g.AppException("#form.clearForm","form is undefined","system")}else o.g.AppException("#form.clearForm","key_form is undefined","system");else o.g.AppException("#form.clearForm","infoA is undefined","system")},this.view=(e,t)=>{if(this.input_action={},void 0===t&&(t="AFGHkeyIndexWJ"),""===t.trim()&&(t="AFGHkeyIndexWJ"),void 0!==this.context.data)if(void 0!==this.context.data[e]){if(this.input_action.table_code=e,void 0!==this.context.data[e][t])return this.input_action.table_col_key=t,this.input_action[t]=this.context.data[e][t],!0;o.g.AppException("#form.view#1",t+" is undefined","system")}else o.g.AppException("#form.view#2",e+" is undefined","system");else o.g.AppException("#form.view#3","data is undefined","system");return!1},this.lookup_selected=()=>{if(void 0!==this.context.infoA_parent){var e=o.g.getFormAppAuto(this.context.infoA_parent.key_form);e.callDirFromSupport("setAdvanced",{codeHidden:this.context.infoA_parent.componentParent.codeHidden},this.context.data),e.callDirFromSupport("modalToggle",{codeHidden:this.context.infoA_parent.componentParent.codeHidden},{isClose:!0})}},this.onLoad=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e?e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!0):o.g.AppException("#form.onLoad","form is undefined","system")}},this.offLoad=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e?e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1):o.g.AppException("#form.offLoad","form is undefined","system")}},this.reloadData=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e?e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("reload",{},{}):o.g.AppException("#form.reloadData","form is undefined","system")}},this.open=e=>{u.a.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:e}}],{})},this.confirm=(e,t)=>{let a={title:o.g.getLang(e),content:o.g.getLang(t||"sysConfirmDelContent")};var i=this.buildPackRollBack();return o.g.confirmInfo(a,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0}],i),"systemStop"},this.select=e=>{if(e){var t=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let a=t.getDataAll("");for(const t in a[e]){const i=a[e][t];Array.isArray(i)&&(a[t]=o.g.cloneJson(i))}a[e]=Object.values(this.context.data)[0],o.g.log(this.context.data,"this.context.data==> "),o.g.log(a,"data_form ==>"),t.putDataAll_andSet(a)}else o.g.AppException("#form.formChil.select","form is undefined","system")}else o.g.AppException("#form.formChil.select","parameter is undefined","system");return!1},this.getDataRowTableSelect=()=>{if(this.input_action={},o.g.getFormAppAuto(this.context.infoA.key_form).getDataAll(),void 0!==this.context.data){this.input_action=this.context.data;for(let e in this.input)this.input_action[e]=this.input[e];return!0}return o.g.AppException("#form.getDataRowTableSelect"),!1},this.delete=(e,t)=>{if(this.input_action={},""===t.trim()&&(t="AFGHkeyIndexWJ"),void 0!==this.context.data)if(void 0!==this.context.data[e]){if(this.input_action.table_code=e,void 0!==this.context.data[e][t])return this.input_action.table_col_key=t,this.input_action[t]=this.context.data[e][t],!0;o.g.AppException("#form.delete",t+" is undefined","system")}else o.g.AppException("#form.delete",e+" is undefined","system");else o.g.AppException("#form.delete","data is undefined","system");return!1},this.checkCompareResult=e=>{if(void 0===e)return!1;for(const[,t]of Object.entries(e))if(void 0!==t.is_change_value&&!0===t.is_change_value)return!0;return!1},this.check_iscompare=(e,t)=>{if(void 0!==e&&void 0!==t){var a=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==a&&a.hasOwnProperty("callDirFromSupport")){var i=a.callDirFromSupport("getInfoCompare",{list_component:e,list_view:t,inform:"true"},{});if(!this.checkCompareResult(i))return!0;if(this.checkCompareResult(i)){let e=[],t=[];for(const[,o]of Object.entries(i))void 0!==o.compareInfo&&t.push(o.compareInfo);e.push({view_code:"",view_name:"",list_component:t});let a={title:o.g.getLang("BO_003001_noti_save_changes"),content:e,message_save:o.g.getLang("BO_003001_noti_save_changes_mess")};var s=this.buildPackRollBack();o.g.compareInfo(a,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"info",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0}],s)}return"systemStop"}}},this.dataToStore=()=>{o.g.findData_Update(this.input)},this.dataToForm=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){if(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("callDirFromSupport")){e.callDirFromSupport("clearError",{},{});var t=o.g.getDataOOPFormServer(this.input);if(void 0!==t)if(!1===Array.isArray(t))e.putDataAll_andSet(t,!0);else if(t.length>0)return void e.putDataAll_andSet(t[0],!0)}}else o.g.AppException("#form.dataToForm","form is undefined","system")}else o.g.AppException("#form.dataToForm","key_form is undefined","system");else o.g.AppException("#form.dataToForm","infoA is undefined","system")},this.findAndRemove=()=>{if(void 0!==this.input.data){var e=this.input.data;if(void 0!==e.table){var t=e.pk_col,a=e.table;if(void 0!==e[a]&&e[a].length>0){var i={};i[a]=e[a][0],o.g.deleteData(a,i,t)}}else o.g.AppException("#form.findAndRemove","table is undefined","system")}else o.g.AppException("#form.findAndRemove","data is undefined","system")},this.errorToForm=()=>{if(void 0!==this.input.errorJWebUI&&void 0!==this.input.errorJWebUI.count&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.hasOwnProperty("setStatusToForm_AndRunRule")&&e.setStatusToForm_AndRunRule(this.input.errorJWebUI.count)}},this.showToast=(e,t)=>{var a={};switch(t){case!0:a={class_:"success",icon:"fa fa-check",title:e+" successfully",time:(new Date).getTime()+"",description:e+" Successfully",data:{},action:{}};break;case!1:a={class_:"error",icon:"fa fa-check",title:e||"Action error!",time:(new Date).getTime()+"",description:e||"Action error!",data:{},action:{}};break;default:a={class_:"error",icon:"fa fa-check",title:e,time:(new Date).getTime()+"",description:e,data:{},action:{}}}o.g.pushNotify("notifyToast",a,{}),o.g.callAllScreenListen()},this.checkListForm=()=>{var e=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e&&!e.getFormValidate()){e.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true",checkError:!1},{});const t=o.g.analyticsTable(e.getData(""));if(void 0!==t.group_menu&&void 0!==t.group_menu.group_menu_list_authorize_form&&void 0!==t.group_menu.group_menu_function_code){const e=t.group_menu.group_menu_list_authorize_form,a=t.group_menu.group_menu_function_code;if(e.split(";").includes(a))return this.showToast("Form code is not allowed in List of authorization forms",!1),!1;let i=!1;if(i=e.split(";").some((t,a)=>e.split(";").indexOf(t)!==a),i)return this.showToast("Duplicate form in List authourization forms",!1),!1}}return!0},this.update=(e,t,a)=>{var i="true";if(void 0!==a&&(i=a),void 0!==e&&void 0!==t){var s=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&s.hasOwnProperty("getFormValidate")&&(s.callDirFromSupport("checkValidate",{},{}),!s.getFormValidate()))return s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:i},{}),s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1),s.hasOwnProperty("getData")&&(this.input_action=o.g.analyticsTable(s.getData(""))),o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),o.g.getParameterSystem("clipboardClearForFo")&&o.g.clearClipboardFo(),!0}else o.g.AppException("#form.update","form is undefined","system")}else o.g.AppException("#form.update","parameter is undefined","system")},this.returnTrue=()=>(this.input_action=this.input,!0),this.reopen=()=>{let e=this.context.infoA.key_form;o.g.removeForm(e),u.a.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:e}}],{})},this.clearTimeOut=()=>{var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut()},this.updateDataImportFile=()=>{let e=o.g.getFormAppAuto(this.context.infoA.key_form).getDataForm("");return this.input_action=e,!0},this.updateDataImportFileToForm=()=>(o.g.getFormAppAuto(this.context.infoA.key_form).putDataAll_andSet(this.input),!0),this.setDataFormBatchConfig=()=>(o.g.getFormAppAuto(this.context.infoA.key_form).putDataAll_andSet(this.input),!0)}}var M=k;class x extends s.a{constructor(){super(...arguments),this.getDataForm=(e,t,a)=>{var i="true";if(a&&(i=a),void 0!==e&&void 0!==t){var s=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")){if("false"===a)return s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:i},{}),this.input_action=s.getData(""),!0;if(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate")&&s.hasOwnProperty("getData")&&!s.getFormValidate())return s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:i},{}),this.input_action=s.getData(""),o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),!0}}else o.g.AppException("#formmin.getData","form is undefined","system")}else o.g.AppException("#formmin.getData","parameter is undefined","system");return!1},this.addnew=(e,t,a)=>{var i="true";if(void 0!==a&&(i=a),void 0!==e&&void 0!==t){var s=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate")&&s.hasOwnProperty("getData")&&!s.getFormValidate()))return s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:i},{}),this.input_action=s.getData(""),o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),!0}else o.g.AppException("#formmin.getData","form is undefined","system")}else o.g.AppException("#formmin.getData","parameter is undefined","system");return!1},this.view=()=>{if(this.input_action={},void 0!==this.context.data){var e={};for(var t in this.context.data){var a=this.context.data[t];if(void 0!==a)for(var i in a)e[i]=a[i];break}return this.input_action=e,!0}return o.g.AppException("#formsql.view","data is undefined","system"),!1},this.update=(e,t,a)=>{var i="true";if(void 0!==a&&(i=a),void 0!==e&&void 0!==t){var s=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&s.hasOwnProperty("getFormValidate")&&(s.callDirFromSupport("checkValidate",{},{}),!s.getFormValidate()))return s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:i},{}),s.hasOwnProperty("getData")&&(this.input_action=s.getData("")),o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),!0}else o.g.AppException("#formsql.update","form is undefined","system")}else o.g.AppException("#formsql.update","parameter is undefined","system")},this.dataToStoreSQL=e=>{if(void 0!==e&&void 0!==this.input&&void 0!==this.input.data&&void 0!==this.input.data[e])for(var t=this.input.data[e],a=0;a<t.length;a++){var i={};i[e]=t[a],o.g.addData(e,i)}},this.findToStoreSQL=(e,t)=>{if(void 0!==e&&void 0!==this.input&&void 0!==this.input.data&&void 0!==this.input.data[e])for(var a=this.input.data[e],i=0;i<a.length;i++){var s={};s[e]=a[i],o.g.updateData(e,s,t)}},this.delete=(e,t)=>(this.input_action={},void 0!==this.context.data?(this.input_action=this.context.data,this.input_action.table_code=e,this.input_action.pk_col=t,!0):(o.g.AppException("#formsql.view","data is undefined","system"),!1))}}var N=x;class w extends s.a{constructor(){super(...arguments),this.show=()=>{o.g.addDataChatNew(this.input)},this.sended=()=>{void 0!==this.input.data_chat&&o.g.setStatusChat(this.input)},this.assistant_sendError=()=>{var e=prompt(o.g.getLang("sysSendErrorCurrent"),(new Date).toString());return o.g.isDebug()&&o.g.copyToClipboard(e),null!=e?(this.input_action={feed_id:o.g.assistant_sendFeekError(),info_end_user:e},!0):"systemStop"}}}var S=w;class T extends s.a{constructor(){super(...arguments),this.masterDataStart=()=>{var e=this.supportMasterData();if(void 0!==e){var t="";void 0!==this.context.data&&void 0!==this.context.data[e.table]&&void 0!==this.context.data[e.table][e.pk]&&(t=this.context.data[e.table][e.pk]),""!==t&&o.g.ms_start(e.table,e.pk,t,this.context.infoA.key_form,this.context.infoA.form_code)}},this.saveOld=()=>{var e=this.supportMasterData();if(void 0!==e){var t=o.g.ms_getMasterData(this.context.infoA.key_form);if(void 0!==t&&void 0!==t.data_key_value){var a=o.g.findData(e.table,e.pk,t.data_key_value);if(void 0!==a){o.g.ms_saveOld(a,this.context.infoA.key_form);var i=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==i&&i.hasOwnProperty("checkMasterData")&&i.checkMasterData()}}}},this.readInfoFollow=()=>{var e={};void 0!==this.input&&void 0!==this.input.info_follow&&(e=this.input.info_follow);var t=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==t&&t.hasOwnProperty("readMasterDataInfo")&&t.readMasterDataInfo(e)},this.compareData=()=>{var e=this.supportMasterData();if(void 0!==e){var t=o.g.ms_getMasterData(this.context.infoA.key_form);if(void 0!==t){if(void 0!==t.data_key_value){var a=o.g.findData(e.table,e.pk,t.data_key_value);void 0!==a&&o.g.ms_saveNew(a,this.context.infoA.key_form)}var i=o.g.ms_getMasterData(this.context.infoA.key_form);if(void 0!==i&&void 0!==i.dataOld&&void 0!==i.dataNew){var s=i.dataOld[e.table],l=i.dataNew[e.table],n={old:{},new:{}};if(void 0!==s&&void 0!==l){var r=!1;for(var c in l)"AFGHTimeWJ"!==c&&"AFGHkeyTime"!==c&&(void 0!==s[c]?l[c]!==s[c]&&(n.old[c]=s[c],n.new[c]=l[c],r||(r=!0)):(n.old[c]=null,n.new[c]=l[c],r||(r=!0)));var d={};return d[e.table]=l,r&&(this.input_action={table:e.table,pk:e.pk,data_key_value:t.data_key_value,dataCompare:n,form_code:this.context.infoA.form_code,dataNew:{table:e.table,data:l},fo_reopen:[{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:this.context.infoA.form_code,data:d,table:e.table}}]}),o.g.ms_clearMasterData(this.context.infoA.key_form),r}}}}}}supportMasterData(){if(void 0!==this.context.infoA){var e=o.g.getConfigMasterOfComponent(this.context.infoA.form_code,this.context.componentConfigDefault.codeHidden);if(void 0!==e&&void 0!==e.config&&void 0!==e.config.isMasterData&&void 0!==e.config.privateKeyTableMasterData&&void 0!==e.config.tableMasterData&&"true"===e.config.isMasterData&&""!==e.config.privateKeyTableMasterData&&""!==e.config.tableMasterData)return{pk:e.config.privateKeyTableMasterData,table:e.config.tableMasterData}}}}var E=T,O=a(3);const I="full_name",F="status",L="language_default",j="avatar",R="lock_screen_image",z="current_password",P="new_password",U="confirm_new_password",V="current_PIN",B="new_PIN",H="repeat_PIN",Y="name",Q="status",G="lang",J="avatar",W="lock_screen_image";class q{constructor(e){this.setPassword=e=>(this.rebuildPassword(e),this.pwd_display),this.getPasswordDecode=()=>this.decodePassword(this.pwd_encode),this.getPasswordDisplay=()=>this.pwd_display,this.props=e,this.pwd_encode="",this.pwd_display=""}rebuildPassword(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=String(e);let t=0,a=this.decodePassword(this.pwd_encode),i="";for(const o of e)"\u2022"===o?(i+=a[t]||"",t++):i+=o;this.pwd_encode=this.encodePassword(i),this.pwd_display=e.replace(/./g,"\u2022")}encodePassword(e){let t="";for(let a of e){let e=a.charCodeAt(0);t+=String.fromCharCode(2*e)}return t}decodePassword(e){let t="";for(let a of e){let e=a.charCodeAt(0);t+=String.fromCharCode(e/2)}return t}}class K extends r.Component{constructor(e){var t,a;super(e),this.onChangeInputUserMap=(e,t)=>{let a=e.target.value,{stateData:i,userMap:o}=this.state,s=t.split(".");3===s.length&&(i.user_map.data[s[0]][s[2]].value=a,o[s[1]][s[2]]=a,this.setState({stateData:i,userMap:o}))},this.onSaveUserMap=e=>{let{userMap:t}=this.state;Object(i.b)([{txcode:"#sys:bo-save-userMap",input:t}],{}).then(e=>{let t=o.g.foGetData("info",e);t&&("saveUserMapOk"===t.saveUserMap?this.pushNotification(t.saveUserMap,!0):this.pushNotification(t.saveUserMap,!1))})},this.changeKeyLanguage=e=>{let t={note:o.g.getLang("note"),full_name:o.g.getLang("myProfile_fullName"),avatar:o.g.getLang("myProfile_avatar"),bgre_login:o.g.getLang("myProfile_bgreLogin"),profile_app:o.g.getLang("myProfile_profileApp"),status:o.g.getLang("myProfile_status"),check_password:o.g.getLang("myProfile_checkPassword"),old_password:o.g.getLang("myProfile_oldPassword"),new_password:o.g.getLang("myProfile_newPassword"),new_password_again:o.g.getLang("myProfile_newPasswordAgain"),pin_present:o.g.getLang("myProfile_pinPresent"),new_pin:o.g.getLang("myProfile_newPin"),new_pin_again:o.g.getLang("myProfile_newPinAgain"),title_:o.g.getLang("myProfile_title"),des_:o.g.getLang("myProfile_des"),btn_save:o.g.getLang("btn_save"),btn_clear:o.g.getLang("btn_clear"),btn_update:o.g.getLang("myProfile_btnUpdate"),btn_submit:o.g.getLang("myProfile_btnSubmit"),msg_old_pass:o.g.getLang("myProfile_msgOldPass"),msg_new_pass:o.g.getLang("myProfile_msgNewPass"),msg_new_pass_emtry:o.g.getLang("myProfile_msgNewPassEmtry"),msg_old_pin:o.g.getLang("myProfile_msgOldPIN"),msg_new_pin:o.g.getLang("myProfile_msgNewPIN"),msg_new_pin_emtry:o.g.getLang("myProfile_msgNewPINEmtry"),hub:o.g.getLang("myProfile_tabHub"),o9:o.g.getLang("myProfile_tabO9"),username:o.g.getLang("myProfile_username"),password:o.g.getLang("myProfile_password"),tabUserInfo:o.g.getLang("myProfile_tabUserInfo"),tabPassword:o.g.getLang("myProfile_tabPassword"),tabPIN:o.g.getLang("myProfile_tabPIN"),tabUserMap:o.g.getLang("myProfile_tabUserMap"),myProfile_twoPINNotEqual:o.g.getLang("myProfile_twoPINNotEqual"),myProfile_newPINRequire:o.g.getLang("myProfile_newPINRequire"),myProfile_curPINRequire:o.g.getLang("myProfile_curPINRequire"),myProfile_confirmPINRequire:o.g.getLang("myProfile_confirmPINRequire"),myProfile_currentPassRequire:o.g.getLang("myProfile_currentPassRequire"),myProfile_repeatPassRequire:o.g.getLang("myProfile_repeatPassRequire"),myProfile_newPassRequire:o.g.getLang("myProfile_newPassRequire"),myProfile_twoPassNotEqual:o.g.getLang("myProfile_twoPassNotEqual"),changePassInvalidOldPass:o.g.getLang("changePassInvalidOldPass")};if(void 0!==e)return t;let a=this.state.infoA;a.title=o.g.getLang("myProfile_title"),a.des=o.g.getLang("myProfile_des"),a.lang_form.vi=o.g.getLang("myProfile_title"),a.lang_form.en=o.g.getLang("myProfile_title"),this.setState({languages:t,infoA:a}),this.changeLanguageTemplate(t)},this.btnUpdateClickHandler=(e,t)=>{Object(i.b)([{txcode:"#sys:bo-save-myProfile",input:{chat:this.state.chat,profile_app:this.getProfileAppData(),pass_old:"",pass_new_1:"",pass_new_2:""}}],{}).then(e=>{let t=o.g.foGetData("info",e);void 0!==t&&void 0!==t.saveProfile&&this.pushNotification(t.saveProfile,"saveProfileOk"===t.saveProfile)},e=>{console.log("error",e)}).catch(e=>{console.log("error catch",e)})},this.pushNotification=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a={},i=o.g.getLang(e);a={class_:!0===t?"success":"error",icon:"fa fa-check",title:i,time:(new Date).getTime()+"",description:i,data:{},action:{}},o.g.pushNotify("notifyToast",a,{}),o.g.pushNotify("notifyDefault",a,{}),o.g.callAllScreenListen()},this.btnSavePassClickHandler=(e,t)=>{let a=this.OBJ_LOGIC_PASSWORD[z].getPasswordDecode(this.getValueInput(z)),s=this.OBJ_LOGIC_PASSWORD[P].getPasswordDecode(this.getValueInput(P)),l=this.OBJ_LOGIC_PASSWORD[U].getPasswordDecode(this.getValueInput(U));if(this.isValidPassword(a,s,l)){let e=[{txcode:"bo-change-password",input:{token_webui:Object(o.y)(),current_pass:a,new_pass:s,confirm_new_pass:l}}];Object(i.b)(e,{}).then(e=>{var t,a;const i=o.g.foGetData("data",e)||{};let s=i.info;var l;(null===(t=i.api_info)||void 0===t?void 0:t.data.e)&&(s=null===(l=i.api_info)||void 0===l?void 0:l.data.e);let n=(null===(a=i.api_info)||void 0===a?void 0:a.data.t)||i.type;n?(this.btnClearClickHandler(),this.pushNotification(s,n)):(this.setErrorInput(z,s),this.pushNotification(s,"error"))})}},this.btnClearClickHandler=()=>{let{stateData:e}=this.state,{current_password:t,new_password:a,confirm_new_password:i}=this.state.stateData;t.dataFull.value="",t.dataFull.config.cmd.error.message="",a.dataFull.value="",a.dataFull.config.cmd.error.message="",i.dataFull.value="",i.dataFull.config.cmd.error.message="",this.setState({stateData:e})},this.btnSavePINClickHandler=e=>{let{stateData:t}=this.state,a=this.OBJ_LOGIC_PASSWORD[V].getPasswordDecode(this.getValueInput(V)),s=this.OBJ_LOGIC_PASSWORD[B].getPasswordDecode(this.getValueInput(B)),l=this.OBJ_LOGIC_PASSWORD[H].getPasswordDecode(this.getValueInput(H));this.isValidPIN(a,s,l)&&Object(i.b)([{txcode:"#sys:bo-change-PIN",input:{pin_old:a,pin_new_1:s,pin_new_2:l}}],{}).then(e=>{let a=o.g.foGetData("info",e);if(void 0!==a&&void 0!==a.savePin)switch(a.savePin){case"savePinOk":t.current_PIN.dataFull.config.cmd.visible=!0,t.current_PIN.dataFull.value="",t.new_PIN.dataFull.value="",t.repeat_PIN.dataFull.value="",this.pushNotification(a.savePin,!0),this.setState({stateData:t});break;case"savePinFalse":this.pushNotification(a.savePin,!1);break;case"incorrectPIN":this.pushNotification(a.savePin,!1),this.setErrorInput(V,a.savePin)}},e=>{console.log("error",e)}).catch(e=>{console.log("error catch",e)})},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.onChangeValue=(e,t)=>{let{stateData:a}=this.state;a[t].dataFull.value=e.target.value,this.setState({stateData:a})},this.onChangeValuePassword=(e,t)=>{let{stateData:a}=this.state;this.OBJ_LOGIC_PASSWORD[t].setPassword(e.target.value),a[t].dataFull.value=this.OBJ_LOGIC_PASSWORD[t].getPasswordDisplay(e.target.value),this.setState({stateData:a})},this.onChangeValueSelect=(e,t,a)=>{let{stateData:i}=this.state;if(void 0!==i[a]){let e=[],o=[];e=i[a].dataFull.data.filter(e=>e.selected),o=i[a].dataFull.data.filter((e,a)=>a===t),e.length>0&&(e[0].selected=!1),o.length>0&&(o[0].selected=!0),this.setState({stateData:i})}},this.key_form="myProfile",this.notificationTimeOut=5e3,this.formRender=Object(O.c)("jwebui_myProfile"),this.LOGIC_PASSWORD_oldpwd=new q,this.LOGIC_PASSWORD_newpwd=new q,this.LOGIC_PASSWORD_confirm_newpwd=new q,this.LOGIC_PASSWORD_oldPIN=new q,this.LOGIC_PASSWORD_newPIN=new q,this.LOGIC_PASSWORD_confirmNewPIN=new q,this.OBJ_LOGIC_PASSWORD={},this.LANGS=o.g.getConfigUser("list_lang_config"),this.list_lang_datafull=[];for(const i of this.LANGS)this.list_lang_datafull.push({title:i.view,value:i.key});let s={};void 0!==this.props.profile.chat&&(s=this.props.profile.chat);let l={};void 0!==this.props.profile.profile_app&&(l=this.props.profile.profile_app);let n=e.profile.user_map||{},r=this.changeKeyLanguage("start");this.state={userMap:n,chat:s,visibility:"",data_lang:o.g.getConfigUser("list_lang_config"),profile_app:l,check_password:"",infoA:{lang_form:{vi:o.g.getLang("myProfile_title"),en:o.g.getLang("myProfile_title")},title:"User information",des:"Thay \u0111\u1ed5i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng!",openOne:"true",ofModal:!1},languages:r,show_toast:"snackbar",check_msg:!1,stateData:{form:{dataFull:{config:{default:{title:r.title_,title_sub:r.des_}},cmd:{visibility:""}}},tab:{data:(null===(t=Object.keys(e.profile.user_map))||void 0===t||t.length,[{title:r.tabUserInfo},{title:r.tabPassword},{title:r.tabPIN}])},save_PIN:{dataFull:{config:{default:{title:r.btn_save,type:"primary",class:""}}},abs_Click:this.btnSavePINClickHandler},full_name:{dataFull:{config:{default:{title:r.full_name,type:"text",class:"col-md-12",code_form_component:I},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:l[Y]},abs_Change:this.onChangeValue},status:{dataFull:{config:{default:{title:r.status,type:"text",class:"col-md-12",code_form_component:F},cmd:{disable:!1,visible:!1,error:{message:"",type:""}}},value:l[Q]},abs_Change:this.onChangeValue},language_default:{dataFull:{config:{default:{search:{placeholder:"Search"},data_status:"No result",title:r.profile_app,type:"text",class:"col-md-12",code_form_component:L},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},data:this.getConfigSelectItem(this.list_lang_datafull,l.lang)},abs_Change:this.onChangeValueSelect},avatar:{dataFull:{config:{default:{title:r.avatar,type:"text",class:"col-md-12",code_form_component:j},cmd:{disable:!1,visible:!1,error:{message:"",type:""}}},value:l[J]},abs_Change:this.onChangeValue},lock_screen_image:{dataFull:{config:{default:{title:r.bgre_login,type:"text",class:"col-md-12",code_form_component:R},cmd:{disable:!1,visible:!1,error:{message:"",type:""}}},value:l[W]},abs_Change:this.onChangeValue},update:{dataFull:{config:{default:{title:r.btn_update,type:"primary",class:"col-sm-2"}}},abs_Click:this.btnUpdateClickHandler},current_password:{dataFull:{config:{default:{title:r.old_password,type:"text",class:"col-md-12",code_form_component:z,required:!0},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},new_password:{dataFull:{config:{default:{title:r.new_password,type:"text",class:"col-md-12",code_form_component:P,required:!0},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},confirm_new_password:{dataFull:{config:{default:{title:r.new_password_again,type:"text",class:"col-md-12",code_form_component:U,required:!0},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},save:{dataFull:{config:{default:{title:r.btn_save,type:"primary",class:""}}},abs_Click:this.btnSavePassClickHandler},clear:{dataFull:{config:{default:{title:r.btn_clear,type:"",class:""}}},abs_Click:this.btnClearClickHandler},current_PIN:{dataFull:{config:{default:{title:r.pin_present,type:"text",class:"col-md-12",code_form_component:V,required:!0},cmd:{disable:!1,visible:!0===(null===(a=this.props.profile)||void 0===a?void 0:a.isHasPin),error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},new_PIN:{dataFull:{config:{default:{title:r.new_pin,required:!0,type:"text",class:"col-md-12",code_form_component:B},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},repeat_PIN:{dataFull:{config:{default:{title:r.new_pin_again,type:"text",class:"col-md-12",code_form_component:H,required:!0},cmd:{disable:!1,visible:!0,error:{message:"",type:""}}},value:""},abs_Change:this.onChangeValuePassword},user_map:this.getConfigUserMap(e.profile.user_map,r),button_user_map:{dataFull:{config:{default:{title:r.btn_save,type:"primary",class:""}}},abs_Click:this.onSaveUserMap}}},this.OBJ_LOGIC_PASSWORD[z]=this.LOGIC_PASSWORD_oldpwd,this.OBJ_LOGIC_PASSWORD[P]=this.LOGIC_PASSWORD_newpwd,this.OBJ_LOGIC_PASSWORD[U]=this.LOGIC_PASSWORD_confirm_newpwd,this.OBJ_LOGIC_PASSWORD[V]=this.LOGIC_PASSWORD_oldPIN,this.OBJ_LOGIC_PASSWORD[B]=this.LOGIC_PASSWORD_newPIN,this.OBJ_LOGIC_PASSWORD[H]=this.LOGIC_PASSWORD_confirmNewPIN}getConfigSelectItem(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(t=>({title:t.title,value:t.value,selected:t.value===e}))}getConfigUserMap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{data:Object.keys(e).map((a,i)=>{var o;return{title:(null===(o=e[a])||void 0===o?void 0:o.app_name)||t[a]||a,id:i,username:{title:t.username,value:e[a].username,code_form_component:`${i}.${a}.username`,cmd:{error:{message:"",type:""}},abs_Change:this.onChangeInputUserMap},password:{title:t.password,value:e[a].password,code_form_component:`${i}.${a}.password`,cmd:{error:{message:"",type:""}},abs_Change:this.onChangeInputUserMap}}})}}changeLanguageTemplate(e){let{stateData:t}=this.state;t.form.dataFull.config.default.title=e.title_,t.form.dataFull.config.default.title_sub=e.des_,t.full_name.dataFull.config.default.title=e.full_name,t.status.dataFull.config.default.title=e.status,t.language_default.dataFull.config.default.title=e.profile_app,t.avatar.dataFull.config.default.title=e.avatar,t.lock_screen_image.dataFull.config.default.title=e.bgre_login,t.update.dataFull.config.default.title=e.btn_update,t.current_password.dataFull.config.default.title=e.old_password,t.new_password.dataFull.config.default.title=e.new_password,t.confirm_new_password.dataFull.config.default.title=e.new_password_again,t.save.dataFull.config.default.title=e.btn_save,t.clear.dataFull.config.default.title=e.btn_clear,t.current_PIN.dataFull.config.default.title=e.pin_present,t.new_PIN.dataFull.config.default.title=e.new_pin,t.repeat_PIN.dataFull.config.default.title=e.new_pin_again,t.save_PIN.dataFull.config.default.title=e.btn_save,t.tab.data[0].title=e.tabUserInfo,t.tab.data[1].title=e.tabPassword,t.tab.data[2].title=e.tabPIN,t.tab.data.length>3&&(t.tab.data[3].title=e.tabUserMap),Object.keys(this.props.profile.user_map).forEach((a,i)=>{t.user_map.data[i].title=e[a]||a,t.user_map.data[i].username.title=e.username,t.user_map.data[i].password.title=e.password}),t.button_user_map.dataFull.config.default.title=e.btn_save,t.current_password.dataFull.config.cmd.error.message=e[t.current_password.dataFull.config.cmd.error.titleLang],t.new_password.dataFull.config.cmd.error.message=e[t.new_password.dataFull.config.cmd.error.titleLang],t.confirm_new_password.dataFull.config.cmd.error.message=e[t.confirm_new_password.dataFull.config.cmd.error.titleLang],t.current_PIN.dataFull.config.cmd.error.message=e[t.current_PIN.dataFull.config.cmd.error.titleLang],t.new_PIN.dataFull.config.cmd.error.message=e[t.new_PIN.dataFull.config.cmd.error.titleLang],t.repeat_PIN.dataFull.config.cmd.error.message=e[t.repeat_PIN.dataFull.config.cmd.error.titleLang],this.setState({stateData:t})}getConfigTemplate(){}isValidPassword(e,t,a){let i=!1;return""===e?this.setErrorInput(z,"myProfile_currentPassRequire"):this.clearErrorInput(z),""===t?this.setErrorInput(P,"myProfile_newPassRequire"):this.clearErrorInput(P),""===a?this.setErrorInput(U,"myProfile_repeatPassRequire"):this.clearErrorInput(U),""!==e&&""!==t&&""!==a&&(t!==a?(this.setErrorInput(P," "),this.setErrorInput(U,"myProfile_twoPassNotEqual")):i=!0),i}isValidPIN(e,t,a){let i=!1;return""===e&&!0===this.props.profile.isHasPin?this.setErrorInput(V,"myProfile_curPINRequire"):this.clearErrorInput(V),""===t?this.setErrorInput(B,"myProfile_newPINRequire"):this.clearErrorInput(B),""===a?this.setErrorInput(H,"myProfile_confirmPINRequire"):this.clearErrorInput(H),""===e&&this.props.profile.isHasPin||""===a||""===t||(a!==t?(this.setErrorInput(B," "),this.setErrorInput(H,"myProfile_twoPINNotEqual")):""===e&&!0===this.props.profile.isHasPin?this.setErrorInput(V,"myProfile_curPINRequire"):(this.clearErrorInput(V),i=!0)),i}getProfileAppData(){var e;let{profile_app:t}=this.state;return t[Y]=this.getValueInput(I),t[Q]=this.getValueInput(F),t[G]=null===(e=this.getValueDropdown(L)[0])||void 0===e?void 0:e.value,t[J]=this.getValueInput(j),t[W]=this.getValueInput(R),t}render(){const e=this.formRender;return c.a.createElement("div",{style:{display:this.state.visibility}},c.a.createElement(e,{stateData:this.state.stateData}))}componentDidMount(){o.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),o.g.form_addMapping(this.key_form,this.props.mapping_key)}getValueInput(e){return this.state.stateData[e].dataFull.value}getValueDropdown(e){return this.state.stateData[e].dataFull.data.filter(e=>void 0!==e.selected&&!0===e.selected)}setErrorInput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",{stateData:a}=this.state;a[e].dataFull.config.cmd.error.message=this.state.languages[t],a[e].dataFull.config.cmd.error.titleLang=t,this.setState({stateData:a})}clearErrorInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{stateData:t}=this.state;t[e].dataFull.config.cmd.error.message="",t[e].dataFull.config.cmd.error.titleLang="",this.setState({stateData:t})}}var Z=K;class X extends r.Component{constructor(e){super(e),this.getTXName=e=>{let t=e.type,a=e.trace,i="";var o;if("request"===t)i=(null===a||void 0===a||null===(o=a[0])||void 0===o?void 0:o.txcode)||"--";else if("response"===t){var s,l,n;i=(null===a||void 0===a||null===(s=a.ob_all_fo)||void 0===s||null===(l=s.fo)||void 0===l||null===(n=l[0])||void 0===n?void 0:n.txcode)||"--"}let r=["bo-load-txFo","fo-container","fo-msg-toast","-load-"];for(const c of r)i.includes(c)&&(i="---");return i},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.key_form="mangerFeedback";let t=this.props.feedback;for(let a=0;a<t.length;a++)if(void 0!==t[a].feedback.feed_id){t[a].feedback.feed_id_data=[];let e=t[a].feedback.feed_id.split(";");for(let i=0;i<e.length;i++)t[a].feedback.feed_id_data.push({feed_id:e[i]})}this.key_feedback_color={aa:"#ffffff"},this.state={visibility:"",data:t,infoA:{title:"Qu\u1ea3n tr\u1ecb ph\u1ea3n h\u1ed3i ng\u01b0\u1eddi d\xf9ng",des:"\u0110\u01a1n gi\u1ea3n h\xf3a d\u1eef li\u1ec7u y\xeau c\u1ea7u h\u1ed7 tr\u1ee3 l\u1ed7i c\u1ee7a ng\u01b0\u1eddi d\xf9ng, n\u1ebfu IT c\xf3 trong tay d\u1eef li\u1ec7u ng\u01b0\u1eddi d\xf9ng \u0111\xe3 thao t\xe1c!",openOne:"true",ofModal:!1},icon_copy:"fa-clone",icon_default:"fa-clipboard",index_select_copy:"aa"}}fortmatDateOfFeedback(e){let t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"->"+t.getMilliseconds()}createRamdomColor_keyFeedback(e){if(void 0===this.key_feedback_color[e]){var t=this.createRandomColor();let a=JSON.stringify(this.key_feedback_color);for(;a.includes(t);)t=this.createRandomColor();this.key_feedback_color[e]=t}return this.key_feedback_color[e]}createRandomColor(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}renderTableDetailFeedId(e,t){return void 0!==e.feed_detail&&e.feed_detail.map((e,a)=>c.a.createElement("tr",{key:a},c.a.createElement("td",null,e.form_name),c.a.createElement("td",null,e.from_action_name),c.a.createElement("td",{style:{backgroundColor:this.createRamdomColor_keyFeedback(e.key_feedback),color:"#ffffff"}},c.a.createElement("i",{className:"fa "+("request"===e.type?"fa-paper-plane":"fa-download"),"aria-hidden":"true"}),"\xa0",e.type,"\xa0",this.getTXName(e)),c.a.createElement("td",null,c.a.createElement("button",{style:{color:"#83c76d",cursor:"pointer"},onClick:i=>{o.g.copyToClipboard(JSON.stringify(e.trace));let s=t+"-"+a;this.setState({index_select_copy:s})}},(this.state.index_select_copy,"copy")),"\xa0",c.a.createElement("button",{style:{color:"#83c76d",cursor:"pointer"},onClick:i=>{o.g.copyToClipboard(e.key_feedback);let s=t+"-"+a;this.setState({index_select_copy:s})}},this.state.index_select_copy===t+"-"+a?"copy":"key")),c.a.createElement("td",null,this.fortmatDateOfFeedback(e.time))))}render(){const e=Object(O.b)("uForm");return c.a.createElement(e,{dataFull:{config:{default:{title:"Feedback Managerment"}},cmd:{visibility:"block"===this.state.visibility}}},c.a.createElement("div",{className:"form-style",style:{display:this.state.visibility}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},c.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},c.a.createElement("div",{className:"prtm-block"},c.a.createElement("div",{className:"prtm-block-title mrgn-b"},c.a.createElement("h3",null,this.state.infoA.title),c.a.createElement("p",null,c.a.createElement("span",{className:"note-box bg-danger"},"Note !"),this.state.infoA.des)),c.a.createElement("div",{className:"row full-lg-md"},c.a.createElement("div",{style:{marginBottom:20}},c.a.createElement("div",{className:"table-responsive"},c.a.createElement("table",{className:"table table-bordered table-middle jwebui-table-email-myDevice"},c.a.createElement("thead",null,c.a.createElement("tr",{className:"bg-info base-reverse"},c.a.createElement("th",null,"\u1ee8ng d\u1ee5ng"),c.a.createElement("th",null,"Ng\xe0y l\u01b0u"),c.a.createElement("th",null,"Ng\u01b0\u1eddi d\xf9ng \xfd ki\u1ebfn"),c.a.createElement("th",null,"Danh s\xe1ch m\xe3 g\xf3i tin"),c.a.createElement("th",null))),c.a.createElement("tbody",null,this.state.data.map((e,t)=>c.a.createElement("tr",{key:t},c.a.createElement("td",null,e.feedback.app),c.a.createElement("td",null,e.feedback.dayOfYear),c.a.createElement("td",null,e.feedback.info_end_user),c.a.createElement("td",null,c.a.createElement("table",{key:t,className:"table table-bordered table-middle jwebui-table-email-myDevice"},c.a.createElement("thead",null,c.a.createElement("tr",{className:"bg-info base-reverse"},c.a.createElement("th",null,"Form name"),c.a.createElement("th",null,"Action"),c.a.createElement("th",null,"Status"),c.a.createElement("th",null),c.a.createElement("th",null,"Time"))),c.a.createElement("tbody",null,e.feedback.feed_id_data.map((e,t)=>this.renderTableDetailFeedId(e,t))))),c.a.createElement("td",null,c.a.createElement("button",{className:"btn btn-danger",type:"button",onClick:e=>{}},"X\xf3a"),c.a.createElement("button",{className:"btn btn-danger",type:"button",onClick:a=>{Object(i.b)([{txcode:"#sys:bo-feedback-loadFeedbackDetail",input:{feedback:e.feedback}}],{}).then(a=>{if(void 0!==a.fo&&a.fo.length>0&&void 0!==a.fo[0].input&&void 0!==a.fo[0].input.feedback){let i=a.fo[0].input.feedback;if(void 0!==e.feedback.feed_id_data){let a=e.feedback.feed_id_data;for(let e=0;e<a.length;e++)if(void 0!==i[a[e].feed_id]){let t=i[a[e].feed_id];a[e].feed_detail=[];for(let i=0;i<t.length;i++)for(let o in t[i]){let s=t[i][o];a[e].feed_detail.push(s)}}let o=this.state.data,s=e;s.feedback.feed_id_data=a,o[t]=s,this.setState({data:o})}}},e=>{})}},"T\u1ea3i chi ti\u1ebft"))))))))))))))," ")}componentDidMount(){o.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),o.g.form_addMapping(this.key_form,this.props.mapping_key)}}var $=X;class ee extends s.a{constructor(){super(...arguments),this.loadFormMyProfile=()=>{var e=o.g.autoID(),t={};void 0!==this.input.profile&&(t=this.input.profile),o.g.newForm(c.a.createElement(r.Suspense,{key:e,fallback:Object(O.d)()},c.a.createElement(Z,{key:e,mapping_key:e,profile:t})))},this.loadMangerFeedback=()=>{var e=o.g.autoID(),t={};void 0!==this.input.feedback&&(t=this.input.feedback),o.g.newForm(c.a.createElement($,{key:e,mapping_key:e,feedback:t}))}}}var te=ee;class ae extends s.a{constructor(){super(...arguments),this.developer=()=>{},this.setOOPThis=()=>{o.g.getFormAppAuto(this.context.infoA.key_form).callDirFromSupport("setDataOOP",{codeHidden:this.context.componentConfigDefault.codeHidden},this.input.account)}}}var ie=ae;class oe extends s.a{constructor(){var e;super(...arguments),e=this,this.confirm=e=>{var t;const{infoA:a,componentConfigDefault:i}=this.context;let s;o.g.getFormAppAuto(a.key_form).props.conf.forEach(e=>{if(s)return;e.list_view.forEach(e=>{if(s)return;e.list_input.forEach(e=>{if(!s&&("cTableDefault"===e.inputtype||"jTableSearch"===e.inputtype||"jTableForm"===e.inputtype)){let t=o.g.parseJson(e.config.columns);s=t[0]}})})});let l=i.name||i.code,n=(null===a||void 0===a||null===(t=a.lang_form)||void 0===t?void 0:t[o.g.getLangKey()])||a.title||a.des,r=n.indexOf("-"),c=n.lastIndexOf("-");c===r&&(c=n.length),n=n.substring(r+1,c);let d=o.g.getLang("sysConfirmContent");d=d.replace("@button_action",o.g.getLang(l.toLowerCase())),d=d.replace("@table",n),d=d.replace("@col",s.title),d=d.replace("@val",o.g.getOOP(this.context.data,s.code));let h={title:e?o.g.getLang(e):o.g.getLang(l),content:d};var _=this.buildPackRollBack();return o.g.confirmInfo(h,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"warning",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0,keyboard:{enter:!0}}],_),"systemStop"},this.confirmDelete=e=>{const{infoA:t,componentConfigDefault:a}=this.context;let i;o.g.getFormAppAuto(t.key_form).props.conf.forEach(e=>{if(i)return;e.list_view.forEach(e=>{if(i)return;e.list_input.forEach(e=>{if(!i&&("cTableDefault"===e.inputtype||"jTableSearch"===e.inputtype||"jTableForm"===e.inputtype)){let t=o.g.parseJson(e.config.columns);i=t[0]}})})});let s=a.name||a.code,l=o.g.getLang("sysConfirmContent");l=l.replace("@button_action",o.g.getLang(s.toLowerCase())),l=l.replace("@table","item"),l=l.replace("@col",i.title),l=l.replace("@val",""),l=l.replace("?","");let n={title:e?o.g.getLang(e):o.g.getLang(s),content:l,main_content:o.g.getOOP(this.context.data,i.code)};var r=this.buildPackRollBack();return o.g.confirmInfo(n,[{name:"sysConfirmCancel",icon:"fa-floppy-o",color:"warning",val:!1},{name:"sysConfirmOk",color:"primary",icon:"fa-floppy-o",val:!0,keyboard:{enter:!0}}],r),"systemStop"},this.addnew=(e,t,a)=>{let i,s=this.context.infoA_parent;if(s&&s.key_form){let e=o.g.getFormAppAuto(s.key_form);e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(i=o.g.analyticsTable(e.getData("")))}var l="true";if(void 0!==a&&(l=a),void 0!==e&&void 0!==t){var n=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==n){if(n.hasOwnProperty("callDirFromSupport")&&(n.callDirFromSupport("checkValidate",{},{}),n.hasOwnProperty("getFormValidate"))){if(!n.getFormValidate()){var r;n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!0),n.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:l},{}),n.hasOwnProperty("getData")&&(this.input_action=o.g.analyticsTable(n.getData("")),i&&(this.input_action=Object.assign(i,this.input_action)));for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];if((null===this||void 0===this||null===(r=this.context)||void 0===r?void 0:r.data)&&"object"===typeof this.context.data){let e=o.g.cloneJson(this.context.data);this.input_action=Object.assign(e,this.input_action)}return o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!n.getFormValidate()+" data=>",o.g.cloneJson(this.input_action)),o.g.getParameterSystem("clipboardClearForFo")&&o.g.clearClipboardFo(),!0}n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1),n.hasOwnProperty("clearTimeOut")&&n.clearTimeOut()}}else o.g.AppException("#form.getData","form is undefined","system")}else o.g.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewNoValidate=(e,t,a)=>{let i,s=this.context.infoA_parent;if(s&&s.key_form){let e=o.g.getFormAppAuto(s.key_form);e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(i=o.g.analyticsTable(e.getData("")))}var l="true";if(void 0!==a&&(l=a),void 0!==e&&void 0!==t){var n=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==n){if(n.hasOwnProperty("callDirFromSupport")){var r;n.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:l},{}),n.hasOwnProperty("getData")&&(this.input_action=o.g.analyticsTable(n.getData("")),i&&(this.input_action=Object.assign(i,this.input_action)));for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];if((null===this||void 0===this||null===(r=this.context)||void 0===r?void 0:r.data)&&"object"===typeof this.context.data){let e=o.g.cloneJson(this.context.data);this.input_action=Object.assign(e,this.input_action)}return o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!n.getFormValidate()+" data=>",o.g.cloneJson(this.input_action)),o.g.getParameterSystem("clipboardClearForFo")&&o.g.clearClipboardFo(),!0}}else o.g.AppException("#form.getData","form is undefined","system")}else o.g.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewChild=(e,t,a)=>{let i=this.context.infoA_parent;var s="true";if(void 0!==a&&(s=a),void 0!==e&&void 0!==t){var l=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==l){if(l.setFormValidateFromFunctionClient(!1),l.hasOwnProperty("callDirFromSupport")&&(l.callDirFromSupport("checkValidate",{},{}),l.hasOwnProperty("getFormValidate"))){if(!l.getFormValidate()){var n;l.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:s},{}),l.hasOwnProperty("getData")&&(this.input_action=o.g.analyticsTable(l.getData("")),i&&(this.input_action=Object.assign(i,this.input_action)));for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];if((null===this||void 0===this||null===(n=this.context)||void 0===n?void 0:n.data)&&"object"===typeof this.context.data){let e=o.g.cloneJson(this.context.data);this.input_action=Object.assign(e,this.input_action)}return o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!l.getFormValidate()+" data=>",o.g.cloneJson(this.input_action)),o.g.getParameterSystem("clipboardClearForFo")&&o.g.clearClipboardFo(),!0}l.hasOwnProperty("setLoadingAction")&&l.setLoadingAction(!1),l.hasOwnProperty("clearTimeOut")&&l.clearTimeOut()}}else o.g.AppException("#form.getData","form is undefined","system")}else o.g.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewParent=(e,t,a)=>{let i,s=this.context.infoA_parent;if(s&&s.key_form){let e=o.g.getFormAppAuto(s.key_form);e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(i=o.g.analyticsTable(e.getData("")))}var l="true";if(void 0!==a&&(l=a),void 0!==e&&void 0!==t){var n=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==n){if(n.hasOwnProperty("callDirFromSupport")&&(n.callDirFromSupport("checkValidate",{},{}),n.hasOwnProperty("getFormValidate"))){if(!n.getFormValidate()){var r;n.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:l},{}),n.hasOwnProperty("getData")&&(this.input_action=o.g.analyticsTable(n.getData("")),i&&(this.input_action=Object.assign(i,this.input_action)));for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];if((null===this||void 0===this||null===(r=this.context)||void 0===r?void 0:r.data)&&"object"===typeof this.context.data){let e=o.g.cloneJson(this.context.data);this.input_action=Object.assign(e,this.input_action)}return o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!n.getFormValidate()+" data=>",o.g.cloneJson(this.input_action)),o.g.getParameterSystem("clipboardClearForFo")&&o.g.clearClipboardFo(),!0}n.hasOwnProperty("setLoadingAction")&&n.setLoadingAction(!1),n.hasOwnProperty("clearTimeOut")&&n.clearTimeOut()}}else o.g.AppException("#form.getData","form is undefined","system")}else o.g.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewSearch=(e,t,a)=>{let i={},s=this.context.infoA.key_form;do{var l;let e=o.g.getFormAppAuto(s),t=null===(l=e.props.infoA_parent)||void 0===l?void 0:l.key_form;e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{});let a=o.g.cloneJson(e.getData(""));i=Object.assign(a,i),s=t}while(s);var n="true";if(void 0!==a&&(n=a),void 0!==e&&void 0!==t){var r=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==r){if(r.hasOwnProperty("callDirFromSupport")&&(r.callDirFromSupport("checkValidate",{},{}),r.hasOwnProperty("getFormValidate"))){if(!r.getFormValidate()){if(r.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:n},{}),r.hasOwnProperty("getData")){let e=r.getData(""),t={};for(const a in e)e.hasOwnProperty(a)&&(Number.isInteger(Number(a))||Array.isArray(e[a])||(t[a]=e[a]));if(this.input_action=o.g.analyticsTable(t),i)for(const a in i)i.hasOwnProperty(a)&&(Number.isInteger(Number(a))||Array.isArray(i[a]&&!this.input_action[a])||(this.input_action[a]=i[a]))}for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];return o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!r.getFormValidate()+" data=>",o.g.cloneJson(this.input_action)),!0}r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!1),r.hasOwnProperty("clearTimeOut")&&r.clearTimeOut()}}else o.g.AppException("#form.getData","form is undefined","system")}else o.g.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewSearchAdvanced=(e,t,a)=>{let i={},s=this.context.infoA.key_form;do{var l;let e=o.g.getFormAppAuto(s),t=null===(l=e.props.infoA_parent)||void 0===l?void 0:l.key_form;e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{});let a=o.g.cloneJson(e.getData(""));i=Object.assign(a,i),s=t}while(s);var n="true";if(void 0!==a&&(n=a),void 0!==e&&void 0!==t){var r=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==r){if(r.hasOwnProperty("callDirFromSupport")&&(r.callDirFromSupport("checkValidate",{},{}),r.hasOwnProperty("getFormValidate"))){if(!r.getFormValidate()){if(r.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:n},{}),r.hasOwnProperty("getData")){let e=r.getData(""),t={};for(const a in e)e.hasOwnProperty(a)&&(Number.isInteger(Number(a))||Array.isArray(e[a])||(t[a]=e[a]));if(this.input_action=o.g.analyticsTable(t),i)for(const a in i)i.hasOwnProperty(a)&&(Number.isInteger(Number(a))||Array.isArray(i[a]&&!this.input_action[a])||(this.input_action[a]=i[a]))}for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];return o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!r.getFormValidate()+" data=>",o.g.cloneJson(this.input_action)),!0}r.hasOwnProperty("setLoadingAction")&&r.setLoadingAction(!1),r.hasOwnProperty("clearTimeOut")&&r.clearTimeOut()}}else o.g.AppException("#form.getData","form is undefined","system")}else o.g.AppException("#form.getData","parameter is undefined","system");return!1},this.addnewLookup=(e,t,a)=>{let i={};var s="true";if(void 0!==a&&(s=a),void 0!==e&&void 0!==t){var l=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==l){if(l.hasOwnProperty("callDirFromSupport")&&(l.callDirFromSupport("checkValidate",{},{}),l.hasOwnProperty("getFormValidate"))){if(!l.getFormValidate()){if(l.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:s},{}),l.hasOwnProperty("getData")){let e=l.getData(""),t={};for(const a in e)e.hasOwnProperty(a)&&(Number.isInteger(Number(a))||Array.isArray(e[a])||(t[a]=e[a]));if(this.input_action=o.g.analyticsTable(t),i)for(const a in i)i.hasOwnProperty(a)&&(Number.isInteger(Number(a))||Array.isArray(i[a]&&!this.input_action[a])||(this.input_action[a]=i[a]))}for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];return o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!l.getFormValidate()+" data=>",o.g.cloneJson(this.input_action)),!0}l.hasOwnProperty("setLoadingAction")&&l.setLoadingAction(!1),l.hasOwnProperty("clearTimeOut")&&l.clearTimeOut()}}else o.g.AppException("#form.getData","form is undefined","system")}else o.g.AppException("#form.getData","parameter is undefined","system");return!1},this.clearError=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e?(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("clearError",{},{})):o.g.AppException("#form.clearError","form is undefined","system")}else o.g.AppException("#form.clearError","key_form is undefined","system");else o.g.AppException("#form.clearError","infoA is undefined","system")},this.clearForm=()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e?(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")&&(e.callDirFromSupport("clearError",{},{}),e.clearForm(),e.hasOwnProperty("setStatusToForm_AndRunRule")&&e.setStatusToForm_AndRunRule(6))):o.g.AppException("#form.clearForm","form is undefined","system")}else o.g.AppException("#form.clearForm","key_form is undefined","system");else o.g.AppException("#form.clearForm","infoA is undefined","system")},this.view=e=>{if(void 0!==this.input[e])return Object(_.a)({form_code:this.input.form_key},{},{},{},this.input[e]),!0;{const t=this.context.infoA.key_form;o.g.persist_setFormError(t,!1,`Not found '${e}' in data response!`,"JWEBUI DEV")}},this.reloadData=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e?e.hasOwnProperty("reload")&&e.reload():o.g.AppException("#form.reloadData","form is undefined","system")}},this.reloadDataParent=()=>{var e,t,a,i;(null===(e=this.context)||void 0===e||null===(t=e.infoA_parent)||void 0===t?void 0:t.key_form)&&o.g.getFormAppAuto(null===(a=this.context)||void 0===a||null===(i=a.infoA_parent)||void 0===i?void 0:i.key_form).reload()},this.setDataInform=()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e?(e.putDataAll_andSet(this.input),document.getElementById("content").scrollTo(0,0)):o.g.AppException("#form.reloadData","form is undefined","system")}},this.setDataInFormParentModal=()=>{let e=o.g.modalDynamicFromFromCode_getRoleBack();if(void 0!==e.context.infoA&&void 0!==e.context.infoA.key_form){var t=o.g.getFormAppAuto(e.context.infoA.key_form);void 0!==t?t.putDataAll_andSet(this.input):o.g.AppException("#form.setDataInFormParentModal","form is undefined","system")}},this.addDataSelected=(e,t)=>void 0!==e&&""!==e.trim()&&(void 0!==this.context.data&&void 0!==this.context.data[e]&&(this.input_action={},this.input_action.table_code=e,this.input_action.table_col_key=t,this.input_action[e]=this.context.data[e],o.g.log("this.input_action",this.input_action),!0)),this.addSelected=()=>(this.input_action=this.context.data,!0),this.getDataView=function(){var t=o.g.getFormAppAuto(e.context.infoA.key_form);let a={};if(void 0!==t){let e=t.getData();for(const t in e)e.hasOwnProperty(t)&&(Number.isInteger(Number(t))||Array.isArray(e[t])||(a[t]=o.g.cloneJson(e[t])))}return e.input_action=Object.assign(a,e.context.data),!0},this.delete=function(){return e.input_action=e.context.data,!0},this.dataToStore=()=>{o.g.findData_Update(this.input)},this.dataToFormAML=async()=>{if(void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")&&e.putDataAll_andSet(this.input))}},this.dataToForm=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){if(e.setLoadingAction(!0),e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("callDirFromSupport")){let a="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(a=this.input.config_table.learn_api_data);var t=o.g.getDataOOPFormServer(this.input,a);let i=t[this.context.infoA.key_form];for(const e in i){const a=i[e];if(Array.isArray(a)){let i=[];for(let t=0;t<a.length;t++){const o=a[t];"object"===typeof o[e]?i.push(o):i.push({[e]:o})}t[e]=i}}let s=o.g.cloneJson(t),l=e.getData(),n={};for(const e in l)if("object"===typeof l[e]&&!Array.isArray(!l[e])){null===l[e]?null===t[e]?n[e]=null:n[e]=t[e]:n[e]=Object.assign(o.g.cloneJson(l[e]),o.g.cloneJson(t[e]||{}));for(const t in l[e]){const a=l[e][t];Array.isArray(a)&&(l[t]=o.g.cloneJson(a))}}for(const e in s)if("object"!==typeof s[e]||Array.isArray(!s[e])){if("total_items"===e||"search_advanced"===e){let t=!0;for(const a in this.input)if(void 0!==this.input[a]&&"object"===typeof this.input[a]&&void 0!==this.input[a][e]&&this.input[a][e]===s[e]){void 0===l[a]&&(l[a]={}),l[a][e]=s[e],t=!1;break}t&&(l.table_paging[e]=s[e])}}else for(const t in s[e])Array.isArray(!s[e][t])||(l[e]||(l[e]={}),l[e][t]=s[e][t]);e.putDataAll_andSet(l),e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut()}}else o.g.AppException("#form.dataToForm","form is undefined","system")}else o.g.AppException("#form.dataToForm","key_form is undefined","system");else o.g.AppException("#form.dataToForm","infoA is undefined","system")},this.dataToFormNew=async()=>{if(void 0!==this.context.infoA)if(void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){if(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut(),e.hasOwnProperty("callDirFromSupport")){let a="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(a=this.input.config_table.learn_api_data);var t=o.g.getDataOOPFormServer(this.input,a);let i=t[this.context.infoA.key_form];for(const e in i){const a=i[e];if(Array.isArray(a)){let i=[];for(let t=0;t<a.length;t++){const o=a[t];"object"===typeof o[e]?i.push(o):i.push({[e]:o})}t[e]=i}}let s=o.g.cloneJson(t),l=e.getData(),n={};for(const e in l)if("object"===typeof l[e]&&!Array.isArray(!l[e])){null===l[e]?null===t[e]?n[e]=null:n[e]=t[e]:n[e]=Object.assign(o.g.cloneJson(l[e]),o.g.cloneJson(t[e]||{}));for(const t in l[e]){const a=l[e][t];Array.isArray(a)&&(l[t]=o.g.cloneJson(a))}}for(const e in s)if("object"!==typeof s[e]||Array.isArray(!s[e])){if("total_items"===e||"search_advanced"===e){let t=!0;for(const a in this.input)if(void 0!==this.input[a]&&"object"===typeof this.input[a]&&void 0!==this.input[a][e]&&this.input[a][e]===s[e]){void 0===l[a]&&(l[a]={}),l[a][e]=s[e],t=!1;break}t&&(l.table_paging[e]=s[e])}}else{void 0!==l[e]&&Array.isArray(l[e])&&(l[e]=[]);for(const t in s[e])Array.isArray(!s[e][t])||(l[e]||(l[e]={}),l[e][t]=s[e][t])}e.putDataAll_andSet(l)}}else o.g.AppException("#form.dataToForm","form is undefined","system")}else o.g.AppException("#form.dataToForm","key_form is undefined","system");else o.g.AppException("#form.dataToForm","infoA is undefined","system")},this.dataToFormParent=async()=>{if(void 0!==this.context.infoA_parent)if(void 0!==this.context.infoA_parent.key_form){var e=o.g.getFormAppAuto(this.context.infoA_parent.key_form);if(void 0!==e){if(e.hasOwnProperty("setFormValidateFromFunctionClient")&&e.setFormValidateFromFunctionClient(!1),e.hasOwnProperty("setLoadingAction")&&e.setLoadingAction(!1),e.hasOwnProperty("clearTimeOut")&&e.clearTimeOut(),e.hasOwnProperty("callDirFromSupport")){let a="";void 0!==this.input.config_table&&void 0!==this.input.config_table.learn_api_data&&(a=this.input.config_table.learn_api_data);let i="";void 0!==this.input.table_reload&&(i=this.input.table_reload);var t=o.g.getDataOOPFormServer(this.input,a);i&&o.g.setData(i,t[i]);let s=t[this.context.infoA.key_form];for(const e in s){const a=s[e];if(Array.isArray(a)){let i=[];for(let t=0;t<a.length;t++){const o=a[t];"object"===typeof o[e]?i.push(o):i.push({[e]:o})}t[e]=i}}let l=o.g.cloneJson(t),n=e.getData(),r={};for(const e in n)if("object"===typeof n[e]&&!Array.isArray(!n[e])){null===n[e]?null===t[e]?r[e]=null:r[e]=t[e]:r[e]=Object.assign(o.g.cloneJson(n[e]),o.g.cloneJson(t[e]||{}));for(const t in n[e]){const a=n[e][t];Array.isArray(a)&&(n[t]=o.g.cloneJson(a))}}for(const e in l)if("object"!==typeof l[e]||Array.isArray(!l[e])){if("total_items"===e||"search_advanced"===e){let t=!0;for(const a in this.input)if(void 0!==this.input[a]&&"object"===typeof this.input[a]&&void 0!==this.input[a][e]&&this.input[a][e]===l[e]){void 0===n[a]&&(n[a]={}),n[a][e]=l[e],t=!1;break}t&&(n.table_paging[e]=l[e])}}else for(const t in l[e])Array.isArray(!l[e][t])||(n[e]||(n[e]={}),n[e][t]=l[e][t]);e.putDataAll_andSet(n)}}else o.g.AppException("#form.dataToForm","form is undefined","system")}else o.g.AppException("#form.dataToForm","key_form is undefined","system");else o.g.AppException("#form.dataToForm","infoA is undefined","system")},this.findAndRemove=()=>{if(void 0!==this.input.data){var e=this.input.data;if(void 0!==e.table){var t=e.pk_col,a=e.table;if(void 0!==e[a]&&e[a].length>0){var i={};i[a]=e[a][0],o.g.deleteData(a,i,t)}}else o.g.AppException("#form.findAndRemove","table is undefined","system")}else o.g.AppException("#form.findAndRemove","data is undefined","system")},this.update=(e,t,a)=>{var i="true";if(void 0!==a&&(i=a),void 0!==e&&void 0!==t){var s=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&s.hasOwnProperty("getFormValidate")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("setLoadingAction")&&s.setLoadingAction(!1),s.hasOwnProperty("clearTimeOut")&&s.clearTimeOut(),!s.getFormValidate()))return s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:i},{}),s.hasOwnProperty("getData")&&(this.input_action=o.g.analyticsTable(s.getData(""))),o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),o.g.getParameterSystem("clipboardClearForFo")&&o.g.clearClipboardFo(),!0}else o.g.AppException("#form.update","form is undefined","system")}else o.g.AppException("#form.update","parameter is undefined","system")},this.addErrorAPI=()=>{},this.callAPI=(e,t)=>{var a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,t),Object(i.b)(a,{}).then(e=>o.g.foGetData("data",e))},this.collectData=(e,t,a)=>{let i,s=this.context.infoA_parent;if(s&&s.key_form){let e=o.g.getFormAppAuto(s.key_form);e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(i=o.g.analyticsTable(e.getData("")))}if(void 0!==e&&void 0!==t){var l=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==l&&(this.input_action=o.g.analyticsTable(l.getData("")))}return i&&(this.input_action=Object.assign(i,this.input_action)),!0}}}var se=oe;class le extends s.a{constructor(){super(...arguments),this.addNew=(e,t,a)=>{if(e&&t){var i=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){let a=i.getDataAll(""),s=a[e]||{},l=o.g.getNodeJson(a,t)||[];if(void 0===s.AFGHkeyIndexWJ)s.AFGHkeyIndexWJ=o.g.autoID(),l.push({[e]:s}),a=o.g.setNodeJson(a,t,l),i.putDataAll_andSet(a),i.reload();else{for(let t=0;t<l.length;t++){l[t][e].AFGHkeyIndexWJ===s.AFGHkeyIndexWJ&&(l[t]={[e]:s})}i.putDataAll_andSet(a),i.reload()}return!0}o.g.AppException("#form.formChil","form is undefined","system")}else o.g.AppException("#form.formChil","parameter is undefined","system");return!1},this.add=(e,t,a)=>{if(e&&t){let n=t.split(".");const r=n[n.length-1];var i=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){var s;let n=i.getDataAll(""),c=o.g.cloneJson(n[e])||{};o.g.deleteNodeJson(c,(null===(s=t.split("."))||void 0===s?void 0:s[1])||t);let d=o.g.getNodeJson(n,t)||[];if(a){if(""===c[a]||null===c[a]||void 0===c[a])return;for(const e of d){let i=e;var l;if(1===Object.keys(i).length&&"object"===typeof Object.values(i)[0])i=o.g.getNodeJson(e,(null===(l=t.split("."))||void 0===l?void 0:l[1])||t);if(i[t]&&(i=i[t]),i[a]===c[a]){let e=i;void 0===e.AFGHkeyIndexWJ&&(e.AFGHkeyIndexWJ=o.g.autoID()),c.AFGHkeyIndexWJ=e.AFGHkeyIndexWJ;break}}}if(void 0===c.AFGHkeyIndexWJ)c.AFGHkeyIndexWJ=o.g.autoID(),d.push({[r]:o.g.cloneJson(c)}),n=o.g.setNodeJson(n,t,d),i.putDataAll_andSet(n),i.reload();else{for(let e=0;e<d.length;e++){const t=d[e];let a=t;1===Object.keys(a).length&&"object"===typeof Object.values(a)[0]&&(a=Object.values(t)[0]),a.AFGHkeyIndexWJ===c.AFGHkeyIndexWJ&&(d[e]={[r]:o.g.cloneJson(c)})}i.putDataAll_andSet(n),i.reload()}return!0}o.g.AppException("#form.formChil","form is undefined","system")}else o.g.AppException("#form.formChil","parameter is undefined","system");return!1},this.clear=(e,t)=>{if(e){var a=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==a){let i=a.getData("");if(t)for(const a in i[e])-1===t.indexOf(a)&&(i[e][a]=void 0);else i[e]={};a.putDataAll_andSet(i,!0),a.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{}),a.reload()}else o.g.AppException("#form.formChil","form is undefined","system")}else o.g.AppException("#form.formChil","parameter is undefined","system");return!1},this.clearParent=(e,t)=>{if(e){var a=o.g.getFormAppAuto(this.context.infoA_parent.key_form);if(void 0!==a){let i=a.getData("");if(t)for(const a in i[e])-1===t.indexOf(a)&&(i[e][a]=void 0);else i[e]={};a.putDataAll_andSet(i,!0),a.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{}),a.reload()}else o.g.AppException("#form.formChil","form is undefined","system")}else o.g.AppException("#form.formChil","parameter is undefined","system");return!1},this.select=e=>{if(e){var t=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let a=t.getDataAll("");for(const t in a[e]){const i=a[e][t];Array.isArray(i)&&(a[t]=o.g.cloneJson(i))}a[e]=Object.values(this.context.data)[0],o.g.log(this.context.data,"this.context.data==> "),o.g.log(a,"data_form ==>"),t.putDataAll_andSet(a)}else o.g.AppException("#form.formChil.select","form is undefined","system")}else o.g.AppException("#form.formChil.select","parameter is undefined","system");return!1},this.selectAndScroll=(e,t)=>{if(e){var a=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==a){let i=a.getDataAll("");for(const t in i[e]){const a=i[e][t];Array.isArray(a)&&(i[t]=o.g.cloneJson(a))}i[e]=Object.values(this.context.data)[0],t&&(i[e][t]=""),o.g.log(this.context.data,"this.context.data==> "),o.g.log(i,"data_form ==>"),a.putDataAll_andSet(i),document.getElementById("content").scrollTo(0,0)}else o.g.AppException("#form.formChil.select","form is undefined","system")}else o.g.AppException("#form.formChil.select","parameter is undefined","system");return!1},this.scrollTop=()=>(document.getElementById("content").scrollTo(0,0),!0),this.delete=e=>{var t=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let a=t.getDataAll("");for(const e in a)if("object"===typeof a[e]&&!Array.isArray(!a[e]))for(const t in a[e])Array.isArray(a[e][t])&&(a[t]=a[e][t]);if(e.includes(".")){let t=e.split(".");a[t[0]][t[1]]=a[t[0]][t[1]].filter(e=>{let t=e;1===Object.keys(e).length&&"object"===typeof Object.values(e)[0]&&(t=Object.values(e)[0]);let a=Object.values(this.context.data)[0];return!this.compareJson(t,a)})}else a[e]=a[e].filter(e=>{let t=Object.values(e)[0],a=Object.values(this.context.data)[0];return!this.compareJson(t,a)});t.putDataAll_andSet(a),t.reload()}},this.moveDataArray=(e,t,a,i)=>{var s=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){let l=s.getDataAll(""),n=l[e]||[],r=l[t]||[];if(Array.isArray(n)&&Array.isArray(r)){if(n=n.filter(e=>!this.compareJson(Object.values(e)[0],Object.values(this.context.data)[0])),0===r.length)r.push({[t]:Object.values(this.context.data)[0]});else{let e=Object.values(this.context.data)[0];const a=Object.values(r[0])[0];for(const t in e)void 0===(null===a||void 0===a?void 0:a[t])&&delete e[t];r.push({[t]:e})}if(l[e]=n,a){let e=[],s={};for(const l of r){const n=o.g.getOOP(l,t+"."+a);s[n]||(s[n]=!0,i&&delete l[t][i],e.push(l))}r=e}l[t]=r,s.putDataAll_andSet(l)}}},this.moveAllDataArray=(e,t,a,i)=>{var s=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){let l=s.getData(""),n=l[e]||[],r=l[t]||[];if(Array.isArray(n)&&Array.isArray(r)){for(const e of n)if(0===r.length)r.push({[t]:Object.values(e)[0]});else{let a=Object.values(e)[0];const i=Object.values(r[0])[0];for(const e in a)void 0===(null===i||void 0===i?void 0:i[e])&&delete a[e];r.push({[t]:a})}if(a){let e=[],s={};for(const l of r){const n=o.g.getOOP(l,t+"."+a);s[n]||(s[n]=!0,i&&delete l[t][i],e.push(l))}r=e}l[t]=r,l[e].length=0,s.putDataAll_andSet(l)}}},this.onClickButtonAdd=e=>{if(e){var t=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let a=t.getDataAll("");a[e]={},t.putDataAll_andSet(a,!0),t.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{})}else o.g.AppException("#form.formChil","form is undefined","system")}else o.g.AppException("#form.formChil","parameter is undefined","system");return!1},this.onClickButtonApply=(e,t,a)=>{let i=o.g.getFormAppAuto(this.context.infoA.key_form);if(!i)return!1;let s=i.getDataAll("");for(const o in s)if("object"===typeof s[o]&&!Array.isArray(!s[o]))for(const e in s[o])Array.isArray(s[o][e])&&(s[e]=s[o][e]);let l=s[e]||{};delete l[t];let n=s[t]||[];if(a)for(const o of n)if(o[t][a]===l[a]){l.AFGHkeyIndexWJ=o[t].AFGHkeyIndexWJ;break}if(void 0===l.AFGHkeyIndexWJ)l.AFGHkeyIndexWJ=o.g.autoID(),n.push({[t]:o.g.cloneJson(l)}),s[t]=o.g.cloneJson(n);else{for(let e=0;e<n.length;e++){const a=n[e];if(Object.values(a)[0].AFGHkeyIndexWJ===l.AFGHkeyIndexWJ){n[e][t]=o.g.cloneJson(l);break}}s[t]=n}i.putDataAll_andSet(s)},this.onClickButtonRemove=e=>{var t=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let a=t.getDataAll("");for(const e in a)if("object"===typeof a[e]&&!Array.isArray(!a[e]))for(const t in a[e])Array.isArray(a[e][t])&&(a[t]=a[e][t]);a[e]=a[e].filter(e=>Object.values(e)[0].AFGHkeyIndexWJ!==Object.values(this.context.data)[0].AFGHkeyIndexWJ),t.putDataAll_andSet(a)}},this.onClickButtonModify=e=>{var t=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let a=t.getDataAll("");for(const e in a)if("object"===typeof a[e]&&!Array.isArray(!a[e]))for(const t in a[e])Array.isArray(a[e][t])&&(a[t]=a[e][t]);let i=Object.values(this.context.data)[0];a[e]=i,t.putDataAll_andSet(a)}}}compareJson(e,t){for(const a in e)if(void 0!==e[a]&&String(e[a])!==String(t[a]))return!1;return!0}}var ne=le;class re extends s.a{constructor(){super(...arguments),this.call=()=>{}}}var ce=re;class de extends s.a{constructor(){super(...arguments),this.addMsgSystem=()=>{void 0!==this.input.listMsgSystem&&this.input.listMsgSystem.length>0&&void 0!==this.input.listMsgSystem[0].MsgSystem&&Object(o.G)(!0,this.input.listMsgSystem[0].MsgSystem)}}}var he=de;const _e=(e,t)=>{if(""===t||void 0===t||null===t||"null"===t||"undefined"===t||t.indexOf("null")>-1)return"&nbsp;";let a=e.mark,i="",o=[],s=0,l=t.length-1;if(void 0!==a){for(let e=a.length-1;e>=0;e--){const i=a[e];"#"===i?(o[s]=t[l],l--):o[s]=i,s++}for(let e=o.length-1;e>=0;e--)i+=o[e]}else i=t;return i},ue=(e,t)=>{if(""===t||void 0===t||null===t)return"&nbsp;";let a="",i=t.replace(/[^-0-9.]/g,""),o=!1;switch(e.decimal){case"1":a=parseFloat(i).toFixed(1),o=!0;break;case"2":a=parseFloat(i).toFixed(2),o=!0;break;case"3":a=parseFloat(i).toFixed(3),o=!0}if(o)switch(a=""+a,e.type){case"us":a=a.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");break;case"vn":a=a.replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}return a},ge=(e,t)=>{if((""+e).includes("e")){var a=(""+e).split("e"),i="";return+a[1]+t>0&&(i="+"),+(Math.round(+a[0]+"e"+i+(+a[1]+t))+"e-"+t)}return+(Math.round(e+"e+"+t)+"e-"+t)};var me=class{constructor(){this.changeNumericToWords=(e,t,a,i,o)=>{let s=e.toString();return this.changeToWords(s,!1,t,a,i,o)},this.changeCurrencyToWords=(e,t,a,i,o)=>""!==i&&void 0!==i&&null!==i?this.changeToWords(e,!0,i,o,i,o):this.changeToWords(e,!0,t,a,i,i),this.changeCurrencyToWords=(e,t,a)=>this.changeToWords(e,!0,t,a,"",""),this.changeNumericToWords=(e,t,a,i,o)=>this.changeToWords(e,!1,t,a,i,o),this.changeCurrencyToWords=(e,t,a)=>this.changeToWords(e.toString(),!0,t,a,"",""),this.changeCurrencyToWords=(e,t,a,i,o,s)=>{let l=e.toString();return s?this.changeToWordsCents(l,!0,t,a,i,i):""!==i&&void 0!==i&&null!==i?this.changeToWords(l,!0,i,o,i,o):this.changeToWords(l,!0,t,a,i,i)},this.changeToWords=(e,t,a,i,o,s)=>{let l="",n=e,r="",c="",d="",h=a;try{let o=e.indexOf(".");if(o>0){n=e.substring(0,o),parseFloat(n)<=1&&(h=i),r=e.substring(o+1),parseInt(r)>0?(c=t?"and":"point",d=this.translateWholeNumber(r)+this.translateNameCents(h)):(c="only",d="")}else c="only",d="";let s=this.translateWholeNumber(n).trim();" Kyat/ Kyat"!==a&&"Zero"===s&&(s=""),l=s+" "+this.translateNameCurrency(a)+" "+c+" "+d," Kyat/ Kyat"!==a&&(l=l.toLowerCase()),l=l.substring(0,1).toUpperCase()+l.substring(1,l.length),l=l.trim()}catch(_){}return l},this.changeToWordsCents=(e,t,a,i,o,s)=>{let l="",n=e,r="",c="",d="",h=a;try{let a=e.indexOf(".");if(a>0){n=e.substring(0,a),parseFloat(n)<=1&&(h=i),r=e.substring(a+1),parseInt(r),c=t?"and":"point",d=this.translateCents(r)}else c=t?"and":"point",d=this.translateCents(r);l=this.translateWholeNumberCents(n).trim()+" "+c+" "+d+" "+h,l=l.substring(0,1).toUpperCase()+l.substring(1,l.length),l=l.trim()}catch(_){}return l},this.translateNameCents=e=>{let t=" "+e.split("/")[0];try{switch(e){case"THB":t=" satang";break;case"USD":t=" cent(s)"}}catch(a){}return t},this.translateNameCurrency=e=>{let t=e.split("/")[0];try{switch(e){case"USD":t="Dollars";break;case"KHR":t="Riels";break;case"THB":t="Baht";break;case"EUR":t="Euro";break;case"GBG":t="Pound Sterling";break;case"CNY":t="Yuan Renminbi";break;case"HKD":t="HongKongDollar";break;case"JPY":t="Yen";break;case"LAK":t="Kip";break;case"SGD":t="Singapore Dollar";break;case"Pay/ Pay":t=""}}catch(a){}return t.trim()},this.translateWholeNumberCents=e=>{let t="";try{let a=!1,i=!1;if(parseFloat(e)>0){a=e.startsWith("0");let o=e.length,s=0,l="";switch(o){case 1:t=this.ones(e),i=!0;break;case 2:t=this.tens(e),i=!0;break;case 3:s=o%3+1,l=" Hundred ";break;case 4:case 5:case 6:s=o%4+1,l=" Thousand ";break;case 7:case 8:case 9:s=o%7+1,l=" Million ";break;case 10:s=o%10+1,l=" Billion ";break;default:i=!0}if(!i){let i=this.translateWholeNumberCents(e.toString().substring(0,s));null!==i&&""!==i&&(i=this.translateWholeNumberCents(e.toString().substring(0,s))+l),t=i+this.translateWholeNumberCents(e.toString().substring(s)),a&&(t=t.trim())}t.trim().equals(l.trim())&&(t="")}}catch(a){}return t.trim()},this.translateWholeNumber=e=>{let t="";try{let a=!1,i=!1,o=parseFloat(e);if(0===o)t="Zero";else if(o>0){a=e.startsWith("0");let o=e.length,s=0,l="";switch(o){case 1:t=this.ones(e),i=!0;break;case 2:t=this.tens(e),i=!0;break;case 3:s=o%3+1,l=" hundred ";break;case 4:case 5:case 6:s=o%4+1,l=" thousand ";break;case 7:case 8:case 9:s=o%7+1,l=" million ";break;case 10:s=o%10+1,l=" billion ";break;default:i=!0}if(!i){let i=this.translateWholeNumber(e.toString().substring(0,s));null!==i&&""!==i&&(i=this.translateWholeNumber(e.toString().substring(0,s))+l),t=i+this.translateWholeNumber(e.toString().substring(s)),a&&(t=t.trim())}t.trim().equals(l.trim())&&(t="")}}catch(a){}return t.trim()},this.tens=e=>{let t=parseInt(e),a="";switch(t){case 10:a="Ten";break;case 11:a="Eleven";break;case 12:a="Twelve";break;case 13:a="Thirteen";break;case 14:a="Fourteen";break;case 15:a="Fifteen";break;case 16:a="Sixteen";break;case 17:a="Seventeen";break;case 18:a="Eighteen";break;case 19:a="Nineteen";break;case 20:a="Twenty";break;case 30:a="Thirty";break;case 40:a="Forty";break;case 50:a="Fifty";break;case 60:a="Sixty";break;case 70:a="Seventy";break;case 80:a="Eighty";break;case 90:a="Ninety";break;default:t>0&&(a=this.tens(e.substring(0,1)+"0")+" "+this.ones(e.substring(1)))}return a.toLowerCase()},this.ones=e=>{let t="";switch(parseInt(e)){case 1:t="One";break;case 2:t="Two";break;case 3:t="Three";break;case 4:t="Four";break;case 5:t="Five";break;case 6:t="Six";break;case 7:t="Seven";break;case 8:t="Eight";break;case 9:t="Nine"}return t},this.translateCents=e=>{let t="";return null===e||0===e.length?t="00/100":1===e.length?t=e+"0/100":e.length<=2?t=e+"/100":3===e.length?t=e+"/1000":4===e.length&&(t=e+"/10000"),t}}};var pe=class{constructor(){this.changeNumericToWords=(e,t,a,i,o)=>{let s=e.toString();return this.changeToWords(s,!1,t,a,i,o)},this.changeCurrencyToWords=(e,t,a,i,o)=>""!==i&&void 0!==i&&null!==i?this.changeToWords(e,!0,i,o,i,o):this.changeToWords(e,!0,t,a,i,i),this.changeCurrencyToWords=(e,t,a)=>this.changeToWords(e,!0,t,a,"",""),this.changeNumericToWords=(e,t,a,i,o)=>this.changeToWords(e,!1,t,a,i,o),this.changeCurrencyToWords=(e,t,a)=>this.changeToWords(e.toString(),!0,t,a,"",""),this.changeCurrencyToWords=(e,t,a,i,o,s)=>{let l=e.toString();return s?this.changeToWordsCents(l,!0,t,a,i,i):""!==i&&void 0!==i&&null!==i?this.changeToWords(l,!0,i,o,i,o):this.changeToWords(l,!0,t,a,i,i)},this.changeToWords=(e,t,a,i,o,s)=>{let l="",n=e,r="",c="",d="";try{let i=e.indexOf(".");i>0?(n=e.substring(0,i),r=e.substring(i+1),parseInt(r)>0&&(c=t?" ":"point",d=this.readCurrency(a))):(c=t?" ":"point",d=this.readCurrency(a)),l=this.translateWholeNumber(n).trim()+c+d,l=l.trim()}catch(h){}return l},this.readCurrency=e=>{let t=" "+e.split("/")[0];try{switch(e){case"USD":t="Dollars";break;case"MMK":t="Pya";break;case"LAK":t="Kip";break;case"EUR":t="Euro";break;case"SGP":t="Singapore dollar";break;case"THB":t="Baht";break;case"KHR":t="Riel";break;case"VND":t="VN \u0111\u1ed3ng";break;case"HKD":t="HongKong Dollars"}}catch(a){}return t},this.translateWholeNumber=e=>{let t="";try{let a=!1,i=!1;if(parseFloat(e)>0){a=e.startsWith("0");let o=e.length,s=0,l="";switch(o){case 1:t=this.ones(e),i=!0;break;case 2:t=this.tens(e),i=!0;break;case 3:s=o%3+1,l=" Hundred ";break;case 4:case 5:case 6:s=o%4+1,l=" Thousand ";break;case 7:case 8:case 9:s=o%7+1,l=" Million ";break;case 10:s=o%10+1,l=" Billion ";break;default:i=!0}if(!i){let i=this.translateWholeNumber(e.toString().substring(0,s));null!==i&&""!==i&&(i=this.translateWholeNumber(e.toString().substring(0,s))+l),t=i+this.translateWholeNumber(e.toString().substring(s)),a&&(t=t.trim())}t.trim().equals(l.trim())&&(t="")}}catch(a){}return t.trim()},this.tens=e=>{let t=parseInt(e),a="";switch(t){case 10:a="Ten";break;case 11:a="Eleven";break;case 12:a="Twelve";break;case 13:a="Thirteen";break;case 14:a="Fourteen";break;case 15:a="Fifteen";break;case 16:a="Sixteen";break;case 17:a="Seventeen";break;case 18:a="Eighteen";break;case 19:a="Nineteen";break;case 20:a="Twenty";break;case 30:a="Thirty";break;case 40:a="Forty";break;case 50:a="Fifty";break;case 60:a="Sixty";break;case 70:a="Seventy";break;case 80:a="Eighty";break;case 90:a="Ninety";break;default:t>0&&(a=this.tens(e.substring(0,1)+"0")+" "+this.ones(e.substring(1)))}return a},this.ones=e=>{let t="";switch(parseInt(e)){case 1:t="One";break;case 2:t="Two";break;case 3:t="Three";break;case 4:t="Four";break;case 5:t="Five";break;case 6:t="Six";break;case 7:t="Seven";break;case 8:t="Eight";break;case 9:t="Nine"}return t},this.translateCents=e=>{let t="";return null===e||0===e.length?t="00/100":1===e.length?t=e+"0/100":e.length<=2?t=e+"/100":3===e.length?t=e+"/1000":4===e.length&&(t=e+"/10000"),t}}},fe=a(7);const ve='<div style="padding-right:24px"></div>',be='<div style="padding-right:8px"></div>';var ye=class{constructor(){this.checkRenderThead_O9=(e,t)=>{let a=this.ob_data[e.data]||[],i=!1;for(let o=0;o<a.length;o++)if("A3"!==a[o].prn){i=!0;break}return a.length>0&&i?"<div>Acc</div><div>Name</div><div>CRC</div><div>Amount DR</div><div>Amount CR</div>":""},this.checkRender=(e,t)=>{let a=e.data,i=o.g.getNodeJson(this.ob_data,a);return i&&i.length>0?t:""},this.getCUSTACNO_A1=(e,t)=>{let a=this.ob_data,i=a.txbody.str1,o="";return"PMT_IITT"!==a.txcode&&"PMT_IIT"!==a.txcode&&"PMT_IDT"!==a.txcode||(i=a.txbody.racno),"PMT_ODT"!==a.txcode&&"PMT_OIT"!==a.txcode&&"PMT_OITT"!==a.txcode||(i=a.txbody.sacno),""!==i&&void 0!==i||""===a.txbody.pdacc||void 0===a.txbody.pdacc||(i=a.txbody.pdacc),void 0!==i&&null!==i&&(i=i.replace("-",""),i=_e({mark:"####-##-##-######-#"},i),"DPT_TRF"!==a.txcode&&"DPT_CDT"!==a.txcode||(o=a.txbody.pdoacc,o=o.replace("-",""),i+=ve+"Credit A/C No:  "+_e({mark:"####-##-##-######-#"},o),i+=ve+a.txbody.cacnm2)),i||""},this.checkNumberZero=(e,t)=>0===t||"0"===t?"":ue({decimal:"2",type:"us"},t.toString()),this.getTotal_A801=(e,t)=>{let a=this.ob_data,i=a.txbody.psamt||0,o=a.txbody.cfamt||0,s=a.txbody.cvat||0;return ue({decimal:"2",type:"us"},ge(i+o+s,2).toString())},this.getTotal_A802=(e,t)=>{let a=this.ob_data,i=a.txbody.pramt||0,o=a.txbody.cfamt||0,s=a.txbody.cvat||0;return ue({decimal:"2",type:"us"},ge(i-o-s,2).toString())},this.getTotal_A803=(e,t)=>{let a=this.ob_data,i=a.txbody.psamt||0,o=a.txbody.cfamt||0;return ue({decimal:"2",type:"us"},ge(i+o,2).toString())},this.getTXINFO1_A2=(e,t)=>{let a=this.ob_data,i=a.txbody.str1;if("PMT_IITT"!==a.txcode&&"PMT_IIT"!==a.txcode&&"PMT_IDT"!==a.txcode||""!==a.txbody.racno&&void 0!==a.txbody.racno&&null!==a.txbody.racno&&(i=a.txbody.racno),"PMT_ODT"!==a.txcode&&"PMT_OIT"!==a.txcode&&"PMT_OITT"!==a.txcode||""!==a.txbody.sacno&&void 0!==a.txbody.sacno&&null!==a.txbody.sacno&&(i=a.txbody.sacno),void 0!==i&&null!==i&&""!==i){let e=i.replace("-","");i=15===e.length?"Cust. A/C No. "+_e({mark:"####-##-##-######-#"},e):"Cust. A/C No. "+i,""===a.txbody.acnm||void 0===a.txbody.acnm||Array.isArray(a.txbody.acnm)?""!==a.txbody.cacnm&&void 0!==a.txbody.cacnm&&(i+=be+a.txbody.cacnm):i+=be+a.txbody.acnm,""!==a.branchname&&void 0!==a.branchname&&(i+=be+"Branch:  "+a.branchname),""!==a.txdt&&void 0!==a.txdt&&(i+=be+a.txdt)}return i||""},this.getTXINFO2_A2=(e,t)=>{let a="",i=this.ob_data;return""!==i.txrefid&&void 0!==i.txrefid&&(a+="Ref: "+i.txrefid+be),""!==i.txbody.sysusrcd&&void 0!==i.txbody.sysusrcd&&(a+="Teller ID: "+i.txbody.sysusrcd+be),""!==i.txcode&&void 0!==i.txcode&&(a+="Tran code:  "+i.txcode),a},this.getTXDESCR_A2=(e,t)=>{let a=this.ob_data,i="",o="";return""!==a.txbody.pcsccr&&void 0!==a.txbody.pcsccr?i=a.txbody.pcsccr:""!==a.txbody.cccr&&void 0!==a.txbody.cccr&&(i=a.txbody.cccr),"PMT_ODT"!==a.txcode&&"PMT_OIT"!==a.txcode&&"PMT_OITT"!==a.txcode||(i=a.txbody.rccr),0!==a.txbody.acamt&&void 0!==a.txbody.acamt&&(o=i+be+ue({decimal:"2",type:"us"},a.txbody.acamt.toString())),"PMT_IITT"!==a.txcode&&"PMT_IIT"!==a.txcode&&"PMT_IDT"!==a.txcode||0!==a.txbody.psamt&&void 0!==a.txbody.psamt&&(o=i+be+ue({decimal:"2",type:"us"},a.txbody.psamt.toString())),"PMT_ODT"!==a.txcode&&"PMT_OIT"!==a.txcode&&"PMT_OITT"!==a.txcode||0!==a.txbody.pramt&&void 0!==a.txbody.pramt&&(o=i+be+ue({decimal:"2",type:"us"},a.txbody.pramt.toString())),o},this.getTXDESCR_A2_Lao=(e,t)=>{let a=this.ob_data,i="",o="";return""!==a.txbody.pcsccr&&void 0!==a.txbody.pcsccr?i=a.txbody.pcsccr:""!==a.txbody.cccr&&void 0!==a.txbody.cccr&&(i=a.txbody.cccr),"PMT_ODT"!==a.txcode&&"PMT_OIT"!==a.txcode&&"PMT_OITT"!==a.txcode||(i=a.txbody.rccr),0!==a.txbody.acamt&&void 0!==a.txbody.acamt&&(o=i+be+ue({decimal:"2",type:"us"},a.txbody.acamt.toString())),"PMT_IITT"!==a.txcode&&"PMT_IIT"!==a.txcode&&"PMT_IDT"!==a.txcode||0!==a.txbody.samt&&void 0!==a.txbody.samt&&(o=i+be+ue({decimal:"2",type:"us"},a.txbody.samt.toString())),"PMT_ODT"!==a.txcode&&"PMT_OIT"!==a.txcode&&"PMT_OITT"!==a.txcode||0!==a.txbody.ramt&&void 0!==a.txbody.ramt&&(o=i+be+ue({decimal:"2",type:"us"},a.txbody.ramt.toString())),"CRD_FCD"===a.txcode&&""!==a.txbody.pdacc&&void 0!==a.txbody.pdacc&&(o+=be+"Debit A/C No.  "+_e({mark:"####-##-##-######-#"},a.txbody.pdacc),o+=be+a.txbody.cacnm2),o},this.getTXINFO1_A203=(e,t)=>{let a=this.ob_data,i="";return""!==a.txbody.str1&&void 0!==a.txbody.str1&&(i+="A/C No. "+_e({mark:"####-##-##-######-#"},a.txbody.str1)),""!==a.txbody.acnm&&void 0!==a.txbody.acnm?i+=be+a.txbody.acnm:""!==a.txbody.cacnm2&&void 0!==a.txbody.cacnm2&&(i+=be+a.txbody.cacnm2),""!==a.branchname&&void 0!==a.branchname&&(i+=be+"Branch:  "+a.branchname),""!==a.txdt&&void 0!==a.txdt&&(i+=be+a.txdt),i},this.getTXINFO2_A203=(e,t)=>{let a="",i=this.ob_data;return""!==i.txrefid&&void 0!==i.txrefid&&(a+="Ref:  "+i.txrefid),a+=be+"Teller: "+i.txbody.usrcd,a+=be+"Tran code: "+i.txcode,a},this.getTXDESCR_A203=(e,t)=>{let a=this.ob_data,i="";return 0!==a.txbody.acamt&&void 0!==a.txbody.acamt&&(""!==a.txbody.cccr2&&void 0!==a.txbody.cccr2&&(i+=a.txbody.cccr2),i+=be+ue({decimal:"2",type:"us"},a.txbody.acamt.toString())),i},this.getTXINFO1_A204=(e,t)=>{let a=this.ob_data,i=a.txbody.str1;return"PMT_IITT"!==a.txcode&&"PMT_IIT"!==a.txcode&&"PMT_IDT"!==a.txcode||""!==a.txbody.racno&&void 0!==a.txbody.racno&&(i=a.txbody.racno),"PMT_ODT"!==a.txcode&&"PMT_OIT"!==a.txcode&&"PMT_OITT"!==a.txcode||""!==a.txbody.sacno&&void 0!==a.txbody.sacno&&(i=a.txbody.sacno),void 0!==i&&null!==i&&(i=i.replace("-",""),i="Cust. A/C No. "+_e({mark:"####-##-##-######-#"},i),""!==a.txbody.acnm&&void 0!==a.txbody.acnm?i+=be+a.txbody.acnm:""!==a.txbody.cacnm&&void 0!==a.txbody.cacnm&&(i+=be+a.txbody.cacnm),""!==a.branchname&&void 0!==a.branchname&&(i+=be+"Branch:  "+a.branchname+be),""!==a.txdt&&void 0!==a.txdt&&(i+=a.txdt)),i||""},this.getTXINFO2_A204=(e,t)=>{let a="",i=this.ob_data;return""!==i.txrefid&&void 0!==i.txrefid&&(a+="Ref: "+i.txrefid+be),""!==i.txbody.usrcd&&void 0!==i.txbody.usrcd&&(a+="Teller: "+i.txbody.usrcd+be),""!==i.txcode&&void 0!==i.txcode&&(a+="Tran code:  "+i.txcode),a},this.getTXDESCR_A204=(e,t)=>{let a=this.ob_data,i="",o="Debit Amount ",s="interest amount  ",l="WHT ";return""!==a.txbody.pcsccr&&void 0!==a.txbody.pcsccr?i=a.txbody.pcsccr:""!==a.txbody.cccr&&void 0!==a.txbody.cccr&&(i=a.txbody.cccr),0!==a.txbody.acamt&&void 0!==a.txbody.acamt&&(o=o+i+be+ue({decimal:"2",type:"us"},a.txbody.acamt.toString())+ve),0!==a.txbody.ctint&&void 0!==a.txbody.ctint&&(s=s+i+be+ue({decimal:"2",type:"us"},a.txbody.ctint.toString())+ve),0!==a.txbody.cwhta&&void 0!==a.txbody.cwhta&&(l=l+i+be+ue({decimal:"2",type:"us"},a.txbody.cwhta.toString())),o+s+l},this.getToday=()=>Object(fe.d)((new Date).getTime(),"DD/MM/YYYY"),this.getTXINFO1_A202=(e,t)=>{let a=this.ob_data,i="",o="",s="",l="",n="";return""!==a.txbody.pdacc&&void 0!==a.txbody.pdacc&&(i="Debit A/C No.  "+_e({mark:"####-##-##-######-#"},a.txbody.pdacc)),""!==a.txbody.acnm&&void 0!==a.txbody.acnm&&(o=ve+a.txbody.acnm),""!==a.txbody.cfrser&&void 0!==a.txbody.cfrser&&(s=ve+"Cheque no.  "+a.txbody.cfrser),""!==a.branchname&&void 0!==a.branchname&&(l=ve+"Branch:  "+a.branchname),""!==a.txdt&&(n=ve+a.txdt),i+o+s+l+n},this.getTXINFO2_A202=(e,t)=>{let a=this.ob_data,i="",o="",s="";return""!==a.txrefid&&void 0!==a.txrefid&&(i="Ref:  "+a.txrefid),""!==a.txbody.usrcd&&void 0!==a.txbody.usrcd&&(o=ve+"Teller:  "+a.txbody.usrcd),""!==a.txcode&&void 0!==a.txcode&&(s=ve+"Tran code:  "+a.txcode),i+o+s},this.getTXDESCR_A202=(e,t)=>{let a=this.ob_data,i="",o="",s="",l="",n="";return 0!==a.txbody.acamt&&void 0!==a.txbody.acamt&&(s=ue({decimal:"2",type:"us"},a.txbody.acamt.toString())),""!==a.txbody.pcsccr&&void 0!==a.txbody.pcsccr&&"DPT_CWC"!==a.txcode?i=a.txbody.pcsccr:""!==a.txbody.cccr&&void 0!==a.txbody.cccr&&(i=a.txbody.cccr),""!==s&&(s=i+"  "+s),0!==a.txbody.cfamt&&void 0!==a.txbody.cfamt&&(l=ue({decimal:"2",type:"us"},a.txbody.cfamt.toString()),l=ve+"Fee. "+i+"  "+l),""!==a.txbody.pdoacc&&void 0!==a.txbody.pdoacc?o=a.txbody.pdoacc:""!==a.txbody.pcacc&&void 0!==a.txbody.pcacc&&(o=a.txbody.pcacc),""!==o&&(o=ve+"Credit A/C No. "+_e({mark:"####-##-##-######-#"},o)),"DPT_CDT"!==a.txcode&&"DPT_TRF"!==a.txcode||(n=ve+a.txbody.cacnm2),s+l+o+n},this.getTXCFNMS_A17=(e,t)=>{let a=this.ob_data,i="";if(""!==a.txbody.cfnms&&void 0!==a.txbody.cfnms){var o;let e=null===(o=a.txbody.cfnms)||void 0===o?void 0:o.split("|");if(void 0!==e)for(const t of e)""!==t&&(i+=t+"<br/>")}return i},this.getLISTCFAMT_A17=(e,t)=>{let a=this.ob_data,i="";if(""!==a.txbody.cfamts&&void 0!==a.txbody.cfamts){var o;let e=null===(o=a.txbody.cfamts)||void 0===o?void 0:o.split("|");if(void 0!==e)for(const t of e)""!==t&&(i+=ue({decimal:"2",type:"us"},ge(t,2).toString())+"<br/>")}return i},this.getCurrency_A17=(e,t)=>{var a,i;let o=this.ob_data,s=0,l=null===(a=o.txbody.cfamts)||void 0===a?void 0:a.split("|");if(void 0!==l)for(const _ of l)""!==_&&(s+=parseFloat(ge(_,2).toString()));let n=new me,r="";var c,d,h;""!==(null===(i=o.txbody.rccr)||void 0===i?void 0:i.trim())&&void 0!==o.txbody.rccr?r=o.txbody.rccr.toString():""!==(null===(c=o.txbody.cccr)||void 0===c?void 0:c.trim())&&void 0!==o.txbody.cccr?r=o.txbody.cccr.toString():"ACT_ACT"===o.txcode||"CSH_CSH"===o.txcode||"ACT_CSH"===o.txcode||"CSH_ACT"===o.txcode||"ACT_DPT"===o.txcode||"CSH_DPT"===o.txcode||"DPT_ACT"===o.txcode||"DPT_CSH"===o.txcode||"DPT_DPT"===o.txcode?""!==(null===(d=o.txbody.pgccr)||void 0===d?void 0:d.trim())&&void 0!==o.txbody.pgccr&&(r=o.txbody.pgccr.toString()):""!==(null===(h=o.txbody.pcsccr)||void 0===h?void 0:h.trim())&&void 0!==o.txbody.pcsccr&&(r=o.txbody.pcsccr.toString());return"(Total amount in words:  "+n.changeCurrencyToWords(ge(s,2).toFixed(2),r,r)+")"},this.getTotal_A17=(e,t)=>{var a;let i="",o=0,s=null===(a=this.ob_data.txbody.cfamts)||void 0===a?void 0:a.split("|");if(void 0!==s)for(const l of s)""!==l&&(o+=parseFloat(ge(l,2).toString()));return i=ue({decimal:"2",type:"us"},ge(o,2).toString()),i},this.getTotal_A171=(e,t)=>{var a;let i="",o=0,s=null===(a=this.ob_data.txbody.cfamts)||void 0===a?void 0:a.split("|");if(void 0!==s)for(const l of s)""!==l&&(o+=parseFloat(ge(l,2).toString()));return i=ue({decimal:"2",type:"us"},ge(o,2).toString()),i},this.getTXCFNMS_A171=(e,t)=>{let a=this.ob_data,i="";if(""!==a.txbody.cfnms&&void 0!==a.txbody.cfnms){var o;let e=null===(o=a.txbody.cfnms)||void 0===o?void 0:o.split("|");if(void 0!==e)for(const t of e)""!==t&&(i+=t+"<br/>")}return i},this.getLISTCFAMT_A171=(e,t)=>{let a=this.ob_data,i="";if(""!==a.txbody.cfamts&&void 0!==a.txbody.cfamts){var o;let e=null===(o=a.txbody.cfamts)||void 0===o?void 0:o.split("|");if(void 0!==e)for(const t of e)""!==t&&(i+=ue({decimal:"2",type:"us"},ge(t,2).toString())+"<br/>")}return i},this.getCurrency_A171=(e,t)=>{var a,i;let o=this.ob_data,s=0,l=null===(a=o.txbody.cfamts)||void 0===a?void 0:a.split("|");if(void 0!==l)for(const _ of l)""!==_&&(s+=parseFloat(ge(_,2).toString()));let n=new me,r="";var c,d,h;""!==(null===(i=o.txbody.rccr)||void 0===i?void 0:i.trim())&&void 0!==o.txbody.rccr?r=o.txbody.rccr.toString():""!==(null===(c=o.txbody.cccr)||void 0===c?void 0:c.trim())&&void 0!==o.txbody.cccr?r=o.txbody.cccr.toString():"ACT_ACT"===o.txcode||"CSH_CSH"===o.txcode||"ACT_CSH"===o.txcode||"CSH_ACT"===o.txcode||"ACT_DPT"===o.txcode||"CSH_DPT"===o.txcode||"DPT_ACT"===o.txcode||"DPT_CSH"===o.txcode||"DPT_DPT"===o.txcode?""!==(null===(d=o.txbody.pgccr)||void 0===d?void 0:d.trim())&&void 0!==o.txbody.pgccr&&(r=o.txbody.pgccr.toString()):""!==(null===(h=o.txbody.pcsccr)||void 0===h?void 0:h.trim())&&void 0!==o.txbody.pcsccr&&(r=o.txbody.pcsccr.toString());return"(Total amount in words:  "+n.changeCurrencyToWords(ge(s,2).toFixed(2),r,r)+")"},this.getTotal_A172=(e,t)=>{var a;let i="",o=0,s=null===(a=this.ob_data.txbody.cfamts)||void 0===a?void 0:a.split("|");if(void 0!==s)for(const l of s)""!==l&&(o+=parseFloat(ge(l,2).toString()));return i=ue({decimal:"2",type:"us"},ge(o,2).toString()),i},this.getTXCFNMS_A172=(e,t)=>{let a=this.ob_data,i="";if(""!==a.txbody.cfnms&&void 0!==a.txbody.cfnms){var o;let e=null===(o=a.txbody.cfnms)||void 0===o?void 0:o.split("|");if(void 0!==e)for(const t of e)""!==t&&(i+=t+"<br/>")}return i},this.getLISTCFAMT_A172=(e,t)=>{let a=this.ob_data,i="";if(""!==a.txbody.cfamts&&void 0!==a.txbody.cfamts){var o;let e=null===(o=a.txbody.cfamts)||void 0===o?void 0:o.split("|");if(void 0!==e)for(const t of e)""!==t&&(i+=ue({decimal:"2",type:"us"},ge(t,2).toString())+"<br/>")}return i},this.getCurrency_A172=(e,t)=>{var a,i;let o=this.ob_data,s=0,l=null===(a=o.txbody.cfamts)||void 0===a?void 0:a.split("|");if(void 0!==l)for(const _ of l)""!==_&&(s+=parseFloat(ge(_,2).toString()));let n=new me,r="";var c,d,h;""!==(null===(i=o.txbody.rccr)||void 0===i?void 0:i.trim())&&void 0!==o.txbody.rccr?r=o.txbody.rccr.toString():""!==(null===(c=o.txbody.cccr)||void 0===c?void 0:c.trim())&&void 0!==o.txbody.cccr?r=o.txbody.cccr.toString():"ACT_ACT"===o.txcode||"CSH_CSH"===o.txcode||"ACT_CSH"===o.txcode||"CSH_ACT"===o.txcode||"ACT_DPT"===o.txcode||"CSH_DPT"===o.txcode||"DPT_ACT"===o.txcode||"DPT_CSH"===o.txcode||"DPT_DPT"===o.txcode?""!==(null===(d=o.txbody.pgccr)||void 0===d?void 0:d.trim())&&void 0!==o.txbody.pgccr&&(r=o.txbody.pgccr.toString()):""!==(null===(h=o.txbody.pcsccr)||void 0===h?void 0:h.trim())&&void 0!==o.txbody.pcsccr&&(r=o.txbody.pcsccr.toString());return"(Total amount in words:  "+n.changeCurrencyToWords(ge(s,2).toFixed(2).toString(),r,r)+")"},this.getCurrency_A16=(e,t)=>{let a=this.ob_data,i=new me,o=a.txbody.amount;return i.changeCurrencyToWords(ge(o,2).toString(),!0,!1,a.txbody.cccr+"/"+a.txbody.cccr,a.txbody.cccr+"/"+a.txbody.cccr)},this.getCustomerNo_A201=(e,t)=>""!==t&&void 0!==t?"Customer A/C no :":"",this.getCustomerName_A201=(e,t)=>""!==t&&void 0!==t?"Customer A/C name :":"",this.getCurrency_A201=(e,t)=>""!==t&&void 0!==t?"Currency :":"",this.getCurrency_A10=(e,t)=>{let a=this.ob_data,i=new me,o=a.txbody.txamt;return i.changeCurrencyToWords(ge(o,2).toString(),!0,!0," Kyat/ Kyat"," Pya/ Pya").replace(" and "," ")},this.getCurrency_A15=(e,t)=>{let a=this.ob_data;return(new me).changeCurrencyToWords(ge(t,2).toString(),a.txbody.pcsccr,a.txbody.pcsccr,a.txbody.pcsccr,a.txbody.pcsccr,!0)},this.getCurrency_A13=(e,t)=>{let a=this.ob_data,i=new me,o=a.result.balance;return i.changeCurrencyToWords(ge(o,2).toString(),a.result.ccr,a.result.ccr)},this.getCurrency_A14=(e,t)=>{let a=this.ob_data,i=new me,o=a.voucher.amt1;return i.changeCurrencyToWords(ge(o,2).toString(),!0,!0," Kyat/ Kyat"," Pya/ Pya").replace(" and "," ")},this.getNumber_A13=(e,t)=>{let a=this.ob_data,i=new me,o=a.result.balance;return i.changeCurrencyToWords(ge(o,2).toString(),a.txbody.cccr,"")},this.getNumber_A13_SBILH=(e,t)=>{let a=this.ob_data,i=new pe,o=a.result.balance;return i.changeCurrencyToWords(ge(o,2).toString(),a.txbody.cccr,"")},this.getCurrency_A12=(e,t)=>{let a=this.ob_data,i=new me,o=a.txbody.samt;return i.changeCurrencyToWords(ge(o,2).toString(),!0,!0," Kyat/ Kyat"," Pya/ Pya")},this.checkValueCFAMT_A801=(e,t)=>{let a=this.ob_data;return 0!==a.txbody.cfamt&&a.txbody.cccr,"<br/>",0!==a.txbody.cvat&&a.txbody.cccr,""},this.checkValueCFAMT_A803=(e,t)=>{let a=this.ob_data;return 0!==a.txbody.cfamt&&a.txbody.sccr,""},this.checkValueCFAMT_A802=(e,t)=>{let a=this.ob_data;return 0!==a.txbody.cfamt&&a.txbody.rccr,"<br/>",0!==a.txbody.cvat&&a.txbody.rccr,""},this.formatDate=(e,t)=>t.split(" ")[0],this.checkValue_A801=(e,t)=>""===t||void 0===t||null===t||"null"===t||"undefined"===t?"&nbsp;":this.ob_data.txbody.acnm,this.checkValue_A802=(e,t)=>""===t||void 0===t||null===t||"null"===t||"undefined"===t?"&nbsp;":t,this.getInfoA1=(e,t)=>{let a=e.data,i=[],o=this.ob_data[a];for(let l=0;l<o.length;l++){var s;"A3"!==(null===(s=o[l][a])||void 0===s?void 0:s.prn)&&i.push(o[l])}return i},this.formatCurrency_A13=(e,t)=>{let a=parseFloat(t.replace("%",""));return ue({decimal:"2",type:"us"},ge(a,2).toString())+"%"},this.getApprove_A1=(e,t)=>{var a,i;let o=this.ob_data,s=0,l=0;if(void 0!==o.postings_debit&&(null===(a=o.postings_debit[0])||void 0===a?void 0:a.postings_debit.branchid)===o.txbody.branchid&&void 0!==o.txbody.branchid&&(s=o.postings_debit[0].postings_debit.amt),void 0!==o.postings_credit&&(null===(i=o.postings_credit[0])||void 0===i?void 0:i.postings_credit.branchid)===o.txbody.branchid&&void 0!==o.txbody.branchid&&(l=o.postings_credit[0].postings_credit.amt),s+l>0){let e=s+l;return(new me).changeCurrencyToWords(ge(e,2).toString(),!0,!0,o.txbody.ccrname+"/ "+o.txbody.ccrname,o.txbody.ccrunit+"/ "+o.txbody.ccrunit)}return""},this.getInfoA5=(e,t)=>{let a=e.data,i=[],o=this.ob_data[a];for(let s=0;s<o.length;s++){let e=o[s];e[a].amt=e[a].balance,0===e[a].balance&&0===e[a].credit&&0===e[a].debit&&(e[a].amt=null),i.push(e)}return i},this.getDefaultTable=(e,t)=>{let a=e.data,i=[],s=o.g.getNodeJson(this.ob_data,a),l=a.split("."),n=l[l.length-1];if(Array.isArray(s))for(let r=0;r<s.length;r++){const e=s[r];for(const t in e){const a=e[t];if("object"!==typeof a){let e=o.g.cloneJson(s[r]);s[r]={},s[r][n]=e,s[r][n].AFGHkeyIndexWJ=o.g.autoID();break}void 0===a.AFGHkeyIndexWJ&&(s[r][t].AFGHkeyIndexWJ=o.g.autoID())}}for(let o=0;o<s.length;o++)i.push(s[o]);return i},this.getInfoA3=(e,t)=>{let a=e.data,i=[],o=this.ob_data[a];for(let l=0;l<o.length;l++){var s;"A3"===(null===(s=o[l][a])||void 0===s?void 0:s.prn)&&i.push(o[l])}return i},this.Summary=(e,t)=>{let a=o.g.getNodeJson(this.ob_data,e.data),i=0,s=!1,l="";for(let o=0;o<a.length;o++)"A3"===a[o][e.data].prn&&(i+=a[o][e.data].amt);if(0===i)return l;switch(e.decimal){case"1":l=parseFloat(ge(i,1)).toFixed(1),s=!0;break;case"2":l=parseFloat(ge(i,2)).toFixed(2),s=!0;break;case"3":l=parseFloat(ge(i,3)).toFixed(3),s=!0}if(s)switch(l=""+l,e.type){case"us":l=l.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");break;case"vn":l=l.replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}return-1!=="CSH_CSH;CSH_ACT;CSH_DPT;ACT_ACT;ACT_CSH;ACT_DPT;DPT_DPT;DPT_ACT;DPT_CSH".indexOf(this.ob_data.txcode)&&(l="&nbsp;"),l},this.checkValueAndReplace=(e,t)=>t?e.replace:"",this.checkValueAndReplaceNumber=(e,t)=>t?ue({decimal:"2",type:"us"},ge(e.replace,2).toString()):"",this.checkNumberAndReplace=(e,t)=>Number(t)<0||Number(t)>0?e.replace:"",this.checkValueZero=(e,t)=>t||"",this.getValueFromTo=(e,t)=>{if(t)return t.toString().substring(parseInt(e.from),parseInt(e.from)+parseInt(e.index))},this.checkValue=(e,t)=>{let a="";if(""===t||void 0===t||null===t)return"&nbsp;";let i=e.condition.split(";");switch(i[2]=""!==i[2]?i[2]:"&nbsp;",i[3]=""!==i[3]?i[3]:"&nbsp;",i[0]){case"=":t=t===i[1]?i[2]:i[3];break;case"!=":t=t!==i[1]?i[2]:i[3];break;case">":t=t>i[1]?i[2]:i[3];break;case"<":t=t<i[1]?i[2]:i[3];break;case">=":t=t>=i[1]?i[2]:i[3];break;case"<=":t=t<=i[1]?i[2]:i[3];break;default:t=i[3]}if(isNaN(t))return t;return-1==="CSH_CSH;CSH_ACT;CSH_DPT;ACT_ACT;ACT_CSH;ACT_DPT;DPT_DPT;DPT_ACT;DPT_CSH".indexOf(this.ob_data.txcode)?"&nbsp;":(a=void 0!==e.decimal||null!==e.decimal||""!==e.decimal?parseFloat(o.g.condition_checkDynamicNoData(t)).toFixed(parseInt(e.decimal)):parseFloat(o.g.condition_checkDynamicNoData(t)),a=a.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),a)},this.formatMark=(e,t)=>{if(""===t||void 0===t||null===t||"null"===t||"undefined"===t||t.indexOf("null")>-1)return"&nbsp;";{let a=e.mark,i="",o=[],s=0,l=t.length-1;if(void 0!==a){for(let e=a.length-1;e>=0;e--){const i=a[e];"#"===i?(t[l]+""!=="undefined"?o[s]=t[l]:o[s]=0,l--):o[s]=i,s++}for(let e=l;e>=0;e--)o[s]=t[e],s++;for(let e=o.length-1;e>=0;e--)i+=o[e]}else i=t;return i}},this.Insert=(e,t)=>{if(""===t||void 0===t||null===t)return"";let a=e["config-insert"].split(";"),i=parseInt(a[0]),o=a[1];switch(a[2]){case"false":for(let e=0;e<t.length;e++)e%(i+1)||(t=t.substring(0,e)+o+t.substring(e));t=t.substring(1);break;default:t=t.substr(0,i)+o+t.substr(i+1)}return t},this.Substring=(e,t)=>{if(""===t||void 0===t||null===t)return t;let a=parseInt(e["start-character"]),i=parseInt(e["end-character"]);return t=t.substring(a,i)},this.formatCurrency=(e,t)=>{if(""===t||void 0===t||null===t)return"&nbsp;";let a="",i=t.replace(/[^-0-9.]/g,""),o=!1;switch(e.decimal){case"0":a=parseFloat(ge(i,0)).toFixed(0),o=!0;break;case"1":a=parseFloat(ge(i,1)).toFixed(1),o=!0;break;case"2":a=parseFloat(ge(i,2)).toFixed(2),o=!0;break;case"3":a=parseFloat(ge(i,3)).toFixed(3),o=!0;break;case"4":a=Object(fe.i)(ge(i,4),4);break;case"5":a=Object(fe.i)(ge(i,5),5);break;case"6":a=Object(fe.i)(ge(i,6),6);break;case"7":a=Object(fe.i)(ge(i,7),7);break;case"8":a=Object(fe.i)(ge(i,8),8);break;case"9":a=Object(fe.i)(ge(i,9),9)}if(o)switch(a=""+a,e.type){case"us":a=a.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");break;case"vn":a=a.replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}return a},this.ToCurrencyWords_O9=(e,t)=>{let a=0,i="";if(void 0!==this.ob_data.postings_debit&&void 0!==this.ob_data.txbody){let e=this.ob_data;if(void 0!==e.branchid){for(let t=0;t<this.ob_data.postings_debit.length;t++){let i=this.ob_data.postings_debit[t];i.branchid===e.branchid&&(a+=i.amt)}for(let t=0;t<this.ob_data.postings_credit.length;t++){let i=this.ob_data.postings_credit[t];i.branchid===e.branchid&&(a+=i.amt)}}}let o,s,l,n,r,c,d,h,_,u,g,m,p=a.toString().split("."),f=p[0].toString();if(0===parseInt(f))return"Zero";for(o=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],s=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],l=["","thousand","million","billion","trillion"],n=f.length,c=[];n>0;)r=n,c.push(f.slice(n=Math.max(0,n-3),r));if(d=c.length,d>l.length)return"";for(m=[],u=0;u<d;u++)h=parseInt(c[u]),h&&(_=c[u].split("").reverse().map(parseFloat),1===_[1]&&(_[0]+=10),(g=l[u])&&m.push(g),(g=o[_[0]])&&m.push(g),(g=s[_[1]])&&m.push(g),(g=o[_[2]])&&m.push(g+" hundred"));let v="";if(void 0!==e.show&&"true"===e.show){let t=" "+e.dollars+" "+e.cents;if(void 0!==p[1])switch(p[1].length){case 0:v+=m.reverse().join(" ")+" "+t;break;case 1:v+=m.reverse().join(" ")+" and "+p[1]+"/10"+t;break;case 2:v+=m.reverse().join(" ")+" and "+p[1]+"/100"+t;break;case 3:v+=m.reverse().join(" ")+" and "+p[1]+"/1000"+t}else v+=m.reverse().join(" ")+" "+t}if(void 0!==e.uppercase&&"true"===e.uppercase)for(let b of v.split(" "))i+=b.charAt(0).toUpperCase()+b.slice(1)+" ";return i},this.renderCheckBox=(e,t)=>{let a=e.data.split(";"),i=e.selected,o="";for(let s=0;s<a.length;s++){let e=a[s].split("|"),t=e[0];o+=e[1]===i?'<div style="display:flex;align-items:center; margin-right:40px;margin-bottom:10px"><div style="width:15px;height:15px;border:1px solid transparent;border-radius:50%;background-color:#4085F7"><div style="width: 15px;height: 15px;background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iI0ZGRkZGRiI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTkgMTYuMTdMNC44MyAxMmwtMS40MiAxLjQxTDkgMTkgMjEgN2wtMS40MS0xLjQxTDkgMTYuMTd6Ii8+PC9zdmc+);border-radius: 50%;background-repeat: no-repeat;background-position: center;background-size:cover"></div></div><div style="padding-left:10px">'+t+"</div></div>":'<div style="display:flex;align-items:center; margin-right:40px;margin-bottom:10px"><div style="width:15px;height:15px;border:1px solid black;border-radius:50%"></div><div style="padding-left:10px">'+t+"</div></div>"}return'<div style="display: -webkit-box;display: -ms-flexbox;display: flex;-ms-flex-wrap: wrap;flex-wrap: wrap;">'+o+"</div>"},this.ToCurrencyWords=(e,t)=>{if(""===t||void 0===t||null===t)return"&nbsp;";let a,i,o,s,l,n,r,c,d,h,_,u,g="",m=t.split("."),p=m[0].toString();if(0===parseInt(p))return"Zero";for(a=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],i=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],o=["","thousand","million","billion","trillion"],s=p.length,n=[];s>0;)l=s,n.push(p.slice(s=Math.max(0,s-3),l));if(r=n.length,r>o.length)return"";for(u=[],h=0;h<r;h++)c=parseInt(n[h]),c&&(d=n[h].split("").reverse().map(parseFloat),1===d[1]&&(d[0]+=10),(_=o[h])&&u.push(_),(_=a[d[0]])&&u.push(_),(_=i[d[1]])&&u.push(_),(_=a[d[2]])&&u.push(_+" hundred"));let f="";if(void 0!==e.show&&"true"===e.show){let t=" "+e.dollars+" "+e.cents;if(void 0!==m[1])switch(m[1].length){case 0:f+=u.reverse().join(" ")+" "+t;break;case 1:f+=u.reverse().join(" ")+" and "+m[1]+"/10"+t;break;case 2:f+=u.reverse().join(" ")+" and "+m[1]+"/100"+t;break;case 3:f+=u.reverse().join(" ")+" and "+m[1]+"/1000"+t}else f+=u.reverse().join(" ")+" "+t}if(void 0!==e.uppercase&&"true"===e.uppercase)for(let v of f.split(" "))g+=v.charAt(0).toUpperCase()+v.slice(1)+" ";return g}}environmentVariables(e){void 0!==e&&(this.ob_data=e)}},De=a(18);class Ce extends s.a{constructor(){super(...arguments),this.windowPrint=(e,t)=>{var a=window.open("",o.g.autoID(),"height=650,width=1000");let i='\x3c!-- Button Event --\x3e<div class="event-button div-no-print"><div class="malibu-list-button-div"><div class="malibu-list-button">\n        <div style="display:none" class="voucher-button" id="print_mode" onclick="getColor(\'print_mode\');hiddenText()">Print mode</div>\n        <div style="display:none" class="voucher-button" id="view_mode" onclick="getColor(\'view_mode\');viewText()">View mode</div>\n        <div style="display:none" class="voucher-button" id="print" onclick="getColor(\'print\');print()">Print</div></div>\n       </div> <div class="voucher-guide-div"><div class="voucher-guide"><div style="padding-right:5px">Use</div> <span class="voucher-guide-button">Ctrl</span> <span class="voucher-guide-button">P</span> <div style="padding-left:5px;padding-right:5px">(or</div><span class="voucher-guide-button"><img src=\'@{iconCtrl_macOS}\' style="width:14px;height:14px"/></span> <span class="voucher-guide-button">P</span> <div style="padding-left:5px">for macOS)</div> <div style="padding-left:5px">to print voucher</div></div></div></div>';i=i.replace("@{iconCtrl_macOS}","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADrSURBVHgBnVKLDYJADD2MA7ABbAAj3Ca6gW4CbsAmsAE4ATgBblBf4ZU0GBNik5e7/l+bBhHJgVZWGYEy7ERtQM8Yjc2DSzLHDKQuKWVBcbFt2D5rUE09usRIW019aXDGfwAiHQXjLy4541vAVuHVUSbjb1SOyLztgXNo14bOO/XIv9AXbX6lGpIkeePpHL0Bto5FbdzJbCqn8KecjSqHtkWUrpMtLCOjYWHI5cxyXEbNSfSDKjnwYHWt2gAv6wRcdQfAE7hpVzuAnpQr6tF4yvcBtKr4k2sdlf3J2SjbvarDH3kvv498dA3yDwrUrlg4T/oiAAAAAElFTkSuQmCC");return a&&a.document&&(a.document.write("<html><head><style>"),a.document.write(e+"body{margin:unset !important}.voucher-button:hover{background:#F0F0F0;border:1.5px solid#E3E4E5;}.voucher-button.button-active:hover{background:#06429B;border:1px solid transparent;}.voucher-button.button-active{background:#0052CC;color:#FFFFFF;border:1px solid transparent;}.voucher-button{padding:10px;background:#FFFFFF;margin-left:8px;color:#0052CC;border:1.5px solid#E3E4E5;border-radius:3px;width:fit-content;cursor:pointer;opacity:0.96;font-family:Arial,Helvetica,sans-serif;}.malibu-list-button{display:flex;margin-left:auto;margin-right:0px;width:fit-content;}.voucher-guide-div{width:21cm;margin:5px auto;background:#F3F9FF;border-radius:3px;display:flex;align-items:center;height:42px;}.voucher-guide{padding:0px 16px;font-weight:500;font-size:14px;line-height:16px;color:#494F59;display:flex;align-items:center;}.voucher-guide{padding:0px 16px;font-weight:500;font-size:14px;line-height:16px;color:#494F59;display:flex;align-items:center;}.voucher-guide-button{height:26px;left:0px;top:0px;background:#1283DA;border-radius:3px;font-weight:500;font-size:14px;line-height:16px;color:#FFFFFF;display:flex;align-items:center;padding:0px 8px;margin:0px 2px;}.malibu-list-button-div{width:21cm;margin:0px auto;}.event-button{width:calc(100%);background:unset!important;z-index:100}.voucher{padding-top:50px!important}.page-A1,.page-A11,.page-A15,.page-A2,.page-A201,.page-A202,.page-A203,.page-A203,.page-A204,.page-A205,.page-A3,.page-A7,.page-A8{border-radius:3px;box-shadow:0px 0px 10px rgba(0,0,0,0.25);}@media print{.event-button{display:none}.div-no-print{display:none}.voucher{padding-top:unset!important}}"),a.document.write("</style></head><body>"),a.document.write(i),a.document.write('<div id="voucher" class="voucher">'),a.document.write(t),a.document.write("</div>"),a.document.write("<script>"),a.document.write('getColor(\'print_mode\');function getColor(id){var x=document.getElementsByClassName("voucher-button");for(i=0;i<x.length;i++){x[i].classList.remove("button-active")};document.getElementById(id).classList.add("button-active")};function print(){var style_=document.styleSheets[0].cssRules;var str="";for(var i=0;i<style_.length;i++){if(str.indexOf(style_[i].cssText)==-1){str+=style_[i].cssText;}};str=str.replace("body { width: 600px; }","");str=str.replace(".embrace { margin-bottom: 15px; float: left; font-size: 13px; box-shadow: grey 3px 3px 5px; max-height: 842px; max-width: 595px; }","");var contents=document.getElementById("voucher").innerHTML;var frame1=document.createElement(\'iframe\');frame1.name="frame1";frame1.style.position="absolute";frame1.style.top="-1000000px";document.body.appendChild(frame1);var frameDoc=frame1.contentWindow?frame1.contentWindow:frame1.contentDocument.document?frame1.contentDocument.document:frame1.contentDocument;frameDoc.document.open();frameDoc.document.write(\'<html><head><style type="text/css">\');frameDoc.document.write(str);frameDoc.document.write(".div-no-print{opacity: 0}");frameDoc.document.write(\'</style></head><body>\');frameDoc.document.write(contents);frameDoc.document.write(\'</body></html>\');frameDoc.document.close();setTimeout(function(){window.frames["frame1"].focus();window.frames["frame1"].print();document.body.removeChild(frame1);},200);return false;};function viewText(){var height=document.getElementsByClassName("div-no-print");for(var i=0;i<height.length;i++){height[i].style.opacity=null;}};function hiddenText(){var height=document.getElementsByClassName("div-no-print");for(var i=0;i<height.length;i++){height[i].style.opacity=0;}};var beforePrint=function(){console.log(\'Functionality to run before printing.\');};var afterPrint=function(){console.log(\'Functionality to run after printing\');};window.onload=function(){if(window.matchMedia){var mediaQueryList=window.matchMedia(\'print\');mediaQueryList.addListener(function(mql){if(mql.matches){beforePrint();}else{afterPrint();}});};};window.onbeforeprint=beforePrint;window.onafterprint=afterPrint;'),a.document.write("<\/script>"),a.document.write("</body></html>"),a.document.close(),a.focus()),!0},this.printTemplate=()=>{let e=this.context.ob_data||{},t=o.g.getFormAppAuto(this.context.infoA.key_form),{template_code:a,template_condition:i}=this.input,s={};if(!0===this.input.is_get_new&&t.hasOwnProperty("getDataAll")&&(s=t.getDataAll(),e=Object.assign(e,s)),!1!==this.input.is_get&&(s=t.getData(),e=Object.assign(e,s)),!0===this.input.is_get_table&&t.hasOwnProperty("getDataAll"))for(const l in s)if("object"===typeof s[l]&&!Array.isArray(!s[l]))for(const t in s[l]){const a=s[l][t];Array.isArray(a)&&(e[t]=o.g.cloneJson(a),s[t]=o.g.cloneJson(a))}if(this.input.queries&&this.input.queries.split(";").forEach(t=>{if(t){var a;let i=(null===(a=o.g.getDataLimited(t,0,9999999))||void 0===a?void 0:a.data)||[];if(i.length>0){let t=Object.keys(i[0])[0];e[t]=i}}}),a=o.g.convertCondition(a,e),i=o.g.convertCondition(i,e),"A5"===a||"A5F"===a){let t=e[this.context.infoA.form_code].frline,a=e.dataset;if(t&&parseInt(t)>0){t=parseInt(t);for(let e=1;e<t;e++)a.unshift({dataset:{balance:" ",credit:" ",debit:" "}})}let i=e[this.context.infoA.form_code].pbline;i=!i||parseInt(i)<=0?22:parseInt(i);let o=e[this.context.infoA.form_code].pgprint;o=!o||parseInt(o)<=0?1:parseInt(o),e.dataset=a.slice(i*(o-1),i*o);let s=e[this.context.infoA.form_code].pgbtfrom;if(s&&parseInt(s)>0){s=parseInt(s);let t=[],a=[];e.dataset_top=[],e.dataset_bottom=[],t=e.dataset.slice(0,s-1),a=e.dataset.slice(s-1,e.dataset.length);for(const i of t)e.dataset_top.push({dataset_top:i.dataset});for(const i of a)e.dataset_bottom.push({dataset_bottom:i.dataset})}}this.context.ob_data=e,o.g.isDebug()&&(console.log("===================DEBUG TEMPLATE====================="),console.log("data template: ",o.g.cloneJson(e)),console.log("template_code: ",a),console.log("condition: ",i),console.log("-------------------DEBUG TEMPLATE--------------------"));return De.a(a,e=>{this.context.ob_data=Object.assign(this.context.ob_data,e);let t=[],i="",s="",l="",n=a.split(";");for(let a of n){let e=o.g.template_getFromStore(a);void 0!==e&&t.push(e)}for(let a of t)void 0!==a.id&&(l=this.getTemplate(a),i+=l.voucher,s+=l.style);return this.windowPrint(s,i)},this.input,s),!0},this.printMultiTemplate=()=>{let e=this.context.ob_data||{},t=o.g.getFormAppAuto(this.context.infoA.key_form),{template_code:a,template_condition:i}=this.input,s={};if(!0===this.input.is_get_new&&t.hasOwnProperty("getDataAll")&&(s=t.getDataAll(),e=Object.assign(e,s)),!1!==this.input.is_get&&(s=t.getData(),e=Object.assign(e,s)),!0===this.input.is_get_table&&t.hasOwnProperty("getDataAll"))for(const n in s)if("object"===typeof s[n]&&!Array.isArray(!s[n]))for(const t in s[n]){const a=s[n][t];Array.isArray(a)&&(e[t]=o.g.cloneJson(a),s[t]=o.g.cloneJson(a))}if(this.input.queries&&this.input.queries.split(";").forEach(t=>{if(t){var a;let i=(null===(a=o.g.getDataLimited(t,0,9999999))||void 0===a?void 0:a.data)||[];if(i.length>0){let t=Object.keys(i[0])[0];e[t]=i}}}),a=o.g.convertCondition(a,e),i=o.g.convertCondition(i,e),"A5"===a||"A5F"===a){let t=e[this.context.infoA.form_code].frline,a=e.dataset;if(t&&parseInt(t)>0){t=parseInt(t);for(let e=1;e<t;e++)a.unshift({dataset:{balance:" ",credit:" ",debit:" "}})}let i=e[this.context.infoA.form_code].pbline;i=!i||parseInt(i)<=0?22:parseInt(i);let o=e[this.context.infoA.form_code].pgprint;o=!o||parseInt(o)<=0?1:parseInt(o),e.dataset=a.slice(i*(o-1),i*o);let s=e[this.context.infoA.form_code].pgbtfrom;if(s&&parseInt(s)>0){s=parseInt(s);let t=[],a=[];e.dataset_top=[],e.dataset_bottom=[],t=e.dataset.slice(0,s-1),a=e.dataset.slice(s-1,e.dataset.length);for(const i of t)e.dataset_top.push({dataset_top:i.dataset});for(const i of a)e.dataset_bottom.push({dataset_bottom:i.dataset})}}this.context.ob_data=e,o.g.isDebug()&&(console.log("===================DEBUG TEMPLATE====================="),console.log("data template: ",o.g.cloneJson(e)),console.log("template_code: ",a),console.log("condition: ",i),console.log("-------------------DEBUG TEMPLATE--------------------"));let l=a.split(";");for(let n of l){const e=e=>{this.context.ob_data=Object.assign(this.context.ob_data,e);let t=[],a="",i="",s="",l=o.g.template_getFromStore(n);void 0!==l&&t.push(l);for(let o of t)void 0!==o.id&&(s=this.getTemplate(o),a+=s.voucher,i+=s.style);return this.windowPrint(i,a)};De.a(n,e,this.input,s)}return!0},this.printVoucher=()=>{let e="",t="",a="",i=this.context,o=i.ob_data.txbody.cfrser,s=i.ob_data.txbody.ctoser,l=i.node_print.split(",").filter(e=>-1!==e.indexOf("n*")),n=1,r=0,c=0,d=!1;void 0!==o&&void 0!==s&&(r=parseInt(o.replace(/[^0-9]+/,"")),c=parseInt(s.replace(/[^0-9]+/,"")),n=c-r+1);for(let h of i.templates)if(d=!0,void 0!==h.id)if(0!==l.length)for(let i of l)if(-1!==i.indexOf(h.id)){let i=r,s=o.replace(/[^0-9]+/,""),l="";for(let o=0;o<n;o++)l=s.substring(0,s.length-i.toString().length)+i,a=this.getTemplate(h,l),e+=a.voucher,t+=a.style,i++;this.windowPrint(t,e)}else a=this.getTemplate(h),this.windowPrint(a.style,a.voucher);else a=this.getTemplate(h),this.windowPrint(a.style,a.voucher);return d||this.windowPrint(t,e),!0},this.printReport=e=>{let t="",a="",i="",s=o.g.getFormAppAuto(this.context.infoA.key_form),l=[];this.context.data.list_template_code.forEach(e=>{let t=o.g.template_getFromStore(e);void 0!==t&&l.push(t)}),void 0!==s&&s.hasOwnProperty("getDataAll")&&(this.context.ob_data=s.getDataAll(),this.context.templates=l),e.split(";").forEach(e=>{var t;let a=(null===(t=o.g.getDataLimited(e,0,9999999))||void 0===t?void 0:t.data)||[];if(a.length>0){let e=Object.keys(a[0])[0];this.context.ob_data[e]=a}});let n=this.context;for(let o of n.templates)void 0!==o.id&&(i=this.getTemplate(o),t+=i.voucher,a+=i.style);return this.windowPrint(a,t),!0},this.getTemplate=(e,t)=>{o.g.isDebug()&&console.log("Data voucher",this.context.ob_data);let a="",i="",s=void 0!==t?e.print_html.replace(/sys-auto-sernum/g,t):e.print_html,l=e.print_status;if(void 0!==l&&("A"===l||""===l||null===l)&&void 0!==s){let e=(new DOMParser).parseFromString(s,"text/html");for(let t of e.all[2].sheet.cssRules)-1===i.indexOf(t.cssText)&&(i+=t.cssText);if(-1===s.indexOf("jwebui_list_data")){a=this.setDataByParam(e.body.innerHTML)}else{let t=e.body.getElementsByClassName("jwebui_list_data"),i=e.body.innerHTML,o=[];for(let e=0;e<t.length;e++){let a=t[e].getAttribute("jwebui-list-data"),i=t[e].getAttribute("jwebui-data");o.push({param:"jwebui_list_data_"+e,template:t[e].outerHTML,list_data:a,data:i})}for(let e=0;e<t.length;e++)i=i.replace(t[e].outerHTML,"jwebui_list_data_"+e);if(o.length>0)for(let e=0;e<o.length;e++)if("true"===o[e].list_data){let t=this.renderDataList(o[e].template,o[e].data);i=i.replace(o[e].param,t)}else i=i.replace(o[e].param,"");i=this.setDataByParam(i),a=i}}return{voucher:a,style:i}},this.setDataByParam=e=>{var t=new ye;let a=e,i=o.g.component_getListCode(e);t.environmentVariables(this.context.ob_data);for(let o of i){let e=this.getValueByParam(o.code);if(void 0!==e&&null!==e&&"null"!==e&&"undefined"!==e||(e=""),void 0!==e)if("string"===typeof e)a=a.replace(o.key,e.replace(/[\u00A0-\u9999<>\\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"})));else{let e="<div></div>";a=a.replace(o.key,e)}}let s=(new DOMParser).parseFromString(a,"text/html"),l=s.body.getElementsByClassName("jwebui-data-format");for(let n of l)if(n.hasAttribute("jwebui-function")&&t.hasOwnProperty(n.getAttribute("jwebui-function"))){let e=n.attributes,a={};for(let t=0;t<e.length;){let i=e[t];-1!==i.name.indexOf("jwebui")&&"jwebui-function"!==i.name?(a=o.g.copyJsonObject(a,JSON.parse(JSON.stringify({[i.name.substr(7)]:i.value}))),n.removeAttribute(i.name)):t++}n.innerHTML=t[n.getAttribute("jwebui-function")](a,n.innerText.trim()),"checkRender"===n.getAttribute("jwebui-function")&&""!==n.innerHTML&&n.classList.add(a.class),n.removeAttribute("jwebui-function")}return s.body.outerHTML},this.getValueByParam=e=>{let t=this.context.ob_data;if("sys-branch"===e)return o.g.context_get("user_acc.branchname");if(void 0!==t&&0!==t.length){if(-1===e.indexOf("."))return void 0!==t[e]?0!==t[e].length?t[e]:"":{code:e};{let a=e.split(".");if(void 0!==t[a[0]]&&void 0!==t[a[0]][a[1]]){let e=""+t[a[0]][a[1]];return 0!==e.length?e:""}return{code:e}}}},this.renderDataList=(e,t)=>{var a=new ye;a.environmentVariables(this.context.ob_data);let i=o.g.getNodeJson(this.context.ob_data,t);if(0===t.length||void 0===i){return"<div></div>"}let s=i,l=e,n=(new DOMParser).parseFromString(l,"text/html").body.getElementsByClassName("jwebui_list_data");for(let f of n)if(f.hasAttribute("jwebui-function")&&a.hasOwnProperty(f.getAttribute("jwebui-function"))){let e=f.attributes,t={};for(let a=0;a<e.length;){let i=e[a];-1!==i.name.indexOf("jwebui")&&"jwebui-function"!==i.name?(t=o.g.copyJsonObject(t,JSON.parse(JSON.stringify({[i.name.substr(7)]:i.value}))),f.removeAttribute(i.name)):a++}let i=f.innerText.trim();s=a[f.getAttribute("jwebui-function")](t,i)}let r="",c=t.split("."),d=c[c.length-1],h=o.g.component_getListCode(e);for(let f=0;f<s.length;f++){let t=e;for(let e of h){var _,u,g;let a=null===(_=s)||void 0===_||null===(u=_[f])||void 0===u||null===(g=u[d])||void 0===g?void 0:g[e.code];var m,p;if(void 0===a||null===a)a=null===(m=s)||void 0===m||null===(p=m[f])||void 0===p?void 0:p[e.code];if(void 0!==a&&null!==a||(a=""),void 0===a){let a="<div></div>";t=t.replace(e.key,a)}else t=t.replace(e.key,""!==a&&a?a.toString().replace(/[\u00A0-\u9999<>\\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"})):"")}let i=(new DOMParser).parseFromString(t,"text/html"),l=i.body.getElementsByClassName("jwebui_list_data");for(let e of l)if(e.hasAttribute("jwebui-function")&&a.hasOwnProperty(e.getAttribute("jwebui-function"))){let t=e.attributes,i={};for(let a=0;a<t.length;){let s=t[a];-1!==s.name.indexOf("jwebui")&&"jwebui-function"!==s.name?(i=o.g.copyJsonObject(i,JSON.parse(JSON.stringify({[s.name.substr(7)]:s.value}))),e.removeAttribute(s.name)):a++}let s=e.innerText.trim();a[e.getAttribute("jwebui-function")](i,s),e.removeAttribute("jwebui-function")}r+=i.body.getElementsByClassName("jwebui_list_data")[0].outerHTML}return r}}}var Ae=Ce;class ke extends s.a{constructor(){super(...arguments),this.gotoSearch=()=>{o.g.callDirFromSupport("globalSearch","openSearch");const e=new Date;var t={class_:"success",icon:"fa fa-search",title:o.g.getLang("systemTitle"),time:e.getTime()+"",description:o.g.getLang("systemStartSearch"),data:{},action:{}};o.g.pushNotify("notifyToast",t,{}),o.g.callAllScreenListen()},this.gotoOpenForm=e=>{u.a.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:e}}],this.input);const t=new Date;var a={class_:"warning",icon:"fa fa-folder-open",title:o.g.getLang("systemTitle"),time:t.getTime()+"",description:o.g.getLang("systemStartOpenForm"),data:{},action:{}};o.g.pushNotify("notifyToast",a,{}),o.g.callAllScreenListen()},this.gotoDebug=()=>{let e=!o.g.isDebug(),t="",a="";e?(t="langKeyboardDebugOpen",a="success",Object(o.i)({open_chat:!0,mode_chat:"debug"})):(t="langKeyboardDebugClose",a="warning",Object(o.i)({open_chat:!1,mode_chat:"debug"}));const i=new Date;var s={class_:a,icon:"fa fa-check",title:o.g.getLang("systemTitle"),time:i.getTime()+"",description:o.g.getLang(t),data:{},action:{}};o.g.pushNotify("notifyToast",s,{}),o.g.callAllScreenListen(),o.g.setDebug(e),o.g.changeForDebug(e)},this.gotoAssistantCMD=()=>{console.log("=========gotoAssistant============")},this.gotoAssistantVoice=()=>{console.log("=========gotoAssistant============")},this.openFormKeyboardConfig=()=>(o.g.setModalOpenKeyboard(),!0)}}var Me=ke;class xe extends s.a{constructor(){var e;super(...arguments),e=this,this.openLatestTransaction=()=>{let e,t="fof_transaction_journal";if(void 0!==this.input[t]){let a=o.g.cloneJson(this.input[t][t]),i="FO_"+a.txcode;";CSH_CSH;DPT_CSH;ACT_CSH;CSH_ACT;DPT_ACT;ACT_ACT;CSH_DPT;ACT_DPT;DPT_DPT;".includes(";"+a.txcode+";")?(i="BO_013003",e="BO_013003"):";ACT_MAN;".includes(";"+a.txcode+";")&&(i="act_internal_transaction",e="BO_012003");let s=a;if(void 0!==s.txbody){for(const e in s.txbody)void 0===s[e]&&(s[e]=s.txbody[e]);delete s.txbody}let l={[i]:s};if(Array.isArray(l[i].ifcfees)){let e=[];for(const t in l[i].ifcfees){const a=l[i].ifcfees[t];a.ifcbamt=a.ifcamt+a.ramt,a.valtypect="Percentage",e.push({ifcfees:a})}l.ifcfees=e}if(Array.isArray(l[i].cash_denom)){let e=[];for(const t in l[i].cash_denom){const a=l[i].cash_denom[t];e.push({cash_denom:a})}l.cash_denom=e}return e&&(l.O9_F2_ACT_ACT=l[i]),Object(_.a)({form_code:e||i},{},{},{},l),!0}},this.viewFormF8=e=>{let t;if(void 0!==this.input[e]){let a=o.g.cloneJson(this.input[e][e]),i="FO_"+a.txcode;";CSH_CSH;DPT_CSH;ACT_CSH;CSH_ACT;DPT_ACT;ACT_ACT;CSH_DPT;ACT_DPT;DPT_DPT;".includes(";"+a.txcode+";")?(i="BO_013003",t="BO_013003"):";ACT_MAN;".includes(";"+a.txcode+";")&&(i="act_internal_transaction",t="BO_012003");let s=a;if(void 0!==s.txbody){for(const e in s.txbody)void 0===s[e]&&(s[e]=s.txbody[e]);delete s.txbody}let l={[i]:s};if(Array.isArray(l[i].ifcfees)){let e=[];for(const t in l[i].ifcfees){const a=l[i].ifcfees[t];a.ifcbamt=a.ifcamt+a.ramt,a.valtypect="Percentage",e.push({ifcfees:a})}l.ifcfees=e}if(Array.isArray(l[i].cash_denom)){let e=[];for(const t in l[i].cash_denom){const a=l[i].cash_denom[t];e.push({cash_denom:a})}l.cash_denom=e}return t&&(l.O9_F2_ACT_ACT=l[i]),l.form_status="open_from_form_other",Object(_.a)({form_code:t||i},{},{},{},l),!0}},this.act_internal_transaction_add=()=>{var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.reload()},this.act_internal_transaction_apply=()=>{var e=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){var t;e.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true"},{});let a=e.getData("");const i=a.form;let s=(null===(t=i.table_child)||void 0===t?void 0:t.filter(e=>e.table_child&&e.table_child.pacnos===i.account_number))||[];if(i.amount&&""!==i.account_number&&i.accname&&("ADD"===i.actiontype&&0===s.length||"MODIFY"===i.actiontype)){let t=("D"===i.type?i.amount:0).toFixed(2),s=("C"===i.type?i.amount:0).toFixed(2),l={table_child:{pdorcs:i.type,pacnos:i.account_number,currency:i.currency,debit:t,credit:s,acname:i.accname,cccd:i.cccd,prdcd:i.prdcd,intercomp:i.intercomp}};if(void 0===i.AFGHkeyIndexWJ)a.form.table_child.push(o.g.cloneJson(l)),a.form.AFGHkeyIndexWJ=void 0;else for(const e in a.form.table_child){if(a.form.table_child[e].table_child.AFGHkeyIndexWJ===i.AFGHkeyIndexWJ){a.form.table_child[e]=l,a.form.AFGHkeyIndexWJ=void 0;break}}e.putDataAll_andSet(a)}}},this.act_internal_transaction_modify=()=>{var e=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e){e.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true"},{});let t=e.getData(""),a=o.g.cloneJson(this.context.data.table_child);t.form.type=a.pdorcs,t.form.account_number=a.pacnos,t.form.currency=a.currency,t.form.amount="D"===a.pdorcs?a.debit:a.credit,t.form.accname=a.acname,t.form.AFGHkeyIndexWJ=a.AFGHkeyIndexWJ,t.form.actiontype="MODIFY",t.form.cccd=a.cccd,t.form.prdcd=a.prdcd,t.form.intercomp=a.intercomp,e.putDataAll_andSet(t),e.callDirFromSupport("setCMD",{list_component:"combobox;Account number;Amount;cccd;prdcd;intercomp;btn_apply",list_view:""},{disabled:"false"})}},this.printVoucher=()=>{let e=this.input.fof_transaction_journal.fof_transaction_journal,t=this.getValueByParam("prn");0!==e.length&&void 0!==t&&""!==t&&Object(De.b)(t,e,this.context)},this.getValueByParam=e=>{let t=this.input.fof_transaction_journal.fof_transaction_journal;if(void 0!==t&&0!==t.length){if(-1===e.indexOf("."))return void 0!==t[e]&&0!==t[e].length?t[e]:"";{let a=e.split(".");if(void 0!==t[a[0]]&&void 0!==t[a[0]][a[1]]){let e=""+t[a[0]][a[1]];return 0!==e.length?e:""}return""}}},this.acceptF2O9=(e,t,a)=>{var i="true";if(void 0!==a&&(i=a),void 0!==e&&void 0!==t){var s=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==s){if(s.hasOwnProperty("callDirFromSupport")&&(s.callDirFromSupport("checkValidate",{},{}),s.hasOwnProperty("getFormValidate")&&!s.getFormValidate())){s.callDirFromSupport("get",{list_component:e,list_view:t,inform:"true",checkError:i},{}),s.hasOwnProperty("getData")&&(this.input_action=o.g.analyticsTable(s.getData(""))),o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!s.getFormValidate()+" data=>",this.input_action),this.input.learn_api="";let a=this.input_action[this.context.infoA.form_code].dacttype,l=this.input_action[this.context.infoA.form_code].cacttype;return this.input.learn_api=`O9_F2_${a}_${l}`,!0}}else o.g.AppException("#form.getData","form is undefined","system")}else o.g.AppException("#form.getData","parameter is undefined","system");return!1},this.clearCtrlF2=()=>{o.g.removeForm("BO_013003"),u.a.fo([{txcode:"#sys:fo-sys-sliderbarCallForm",input:{form_code:"BO_013003"}}],{})},this.resetPassUserProfile=()=>{var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.callDirFromSupport("setAdvanced",{list_component:"isResetPassword"},!0)},this.uncheckLeaderCTM=()=>{var e,t,a,i;if((null===(e=this.context.data)||void 0===e||null===(t=e.data_cpn)||void 0===t||null===(a=t.ctm_customer_group_account_of_group)||void 0===a?void 0:a.isleader)||"all_left"===(null===(i=this.context.componentConfigDefault)||void 0===i?void 0:i.code)){var s,l;const e=null===(s=this.context)||void 0===s||null===(l=s.infoA_parent)||void 0===l?void 0:l.key_form;var n=o.g.getFormAppAuto(e);if(!n)return;n.callDirFromSupport("setAdvanced",{list_component:"group_leader_1"},"")}},this.CTM_GRP_003002_rebuildTable=function(){var t,a;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"customer_group_member_infomation",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ctm_customer_group_account_of_group";const l=null===(t=e.context)||void 0===t||null===(a=t.infoA)||void 0===a?void 0:a.key_form;var n=o.g.getFormAppAuto(l);const r=n.getDataAdvanced(),c=r.group_leader_1;var d=o.g.getFormAppAuto(i);if(d){let e=d.getDataAll(),t=(null===e||void 0===e?void 0:e[s])||[];for(let a of t)a[s].isleader=a[s].customercd===c;d.putDataAll_andSet(e)}},this.checkLeaderCTM=function(){var t,a,i,s,l,n;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"group_leader_1",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ctm_customer_group_account_of_group",d=null===(t=e.context)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data_cpn,h=null===d||void 0===d||null===(i=d.rown_data)||void 0===i||null===(s=i[c])||void 0===s?void 0:s.customercd;const _=null===(l=e.context)||void 0===l||null===(n=l.infoA_parent)||void 0===n?void 0:n.key_form;var u=o.g.getFormAppAuto(_);u&&u.callDirFromSupport("setAdvanced",{list_component:r},h)},this.openAprove=e=>{let t,a=this.context.infoA_parent;if(a&&a.key_form){let e=o.g.getFormAppAuto(a.key_form);e.hasOwnProperty("getFormValidate")&&(e.getFormValidate()||(e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(t=o.g.analyticsTable(e.getData("")))))}var i=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){if(i.hasOwnProperty("callDirFromSupport")&&(i.callDirFromSupport("checkValidate",{},{}),i.hasOwnProperty("getFormValidate")&&!i.getFormValidate())){i.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,i.hasOwnProperty("getData")&&(this.context.data=o.g.analyticsTable(i.getData("")),t&&(this.context.data=Object.assign(t,this.context.data)));var s=this.buildPackRollBack();o.g.modalDynamicFromFromCode(e,s)}}else o.g.AppException("#form.getData","form is undefined","system")},this.modalAppoveLater=()=>{let e=o.g.cloneJson(o.g.modalDynamicFromFromCode_getRoleBack()),t=o.g.getFormAppAuto(e.context.infoA.key_form),a={};return void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&(t.setFormValidateFromFunctionClient(!1),t.clearError(),a=t.getDataAll()),void 0!==e&&void 0!==e.context&&(this.input=e.context.input,this.context.infoA=e.context.infoA,this.input_action=Object.assign(a,e.context.input),this.input_action.user_approve={},this.input_action.user_approve.usrid=-1),o.g.modalDynamicFromFromCode_close(),!0},this.modalAppoveApprove=()=>{},this.CRD_ACC_006002_Payment_schedule_apply=(e,t,a)=>{if(void 0,e&&t){let a=t.split(".");const l=a[a.length-1];var i=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){var s;i.callDirFromSupport("get",{list_component:"*",list_view:"*",inform:"true"},{});let a=i.getData(""),n=o.g.cloneJson(a[e])||{};o.g.deleteNodeJson(n,(null===(s=t.split("."))||void 0===s?void 0:s[1])||t);let r=o.g.getNodeJson(a,t)||[];if(void 0===n.AFGHkeyIndexWJ)n.AFGHkeyIndexWJ=o.g.autoID(),r.push({[l]:o.g.cloneJson(n)}),a=o.g.setNodeJson(a,t,r),i.putDataAll_andSet(a),i.reload();else{for(let e=0;e<r.length;e++){const t=r[e];let a=t;1===Object.keys(a).length&&"object"===typeof Object.values(a)[0]&&(a=Object.values(t)[0]),a.AFGHkeyIndexWJ===n.AFGHkeyIndexWJ&&(n.moddt=o.g.context_get("user_acc.workingdate"),r[e]={[l]:o.g.cloneJson(n)})}i.putDataAll_andSet(a),i.reload()}return!0}o.g.AppException("#form.formChil","form is undefined","system")}else o.g.AppException("#form.formChil","parameter is undefined","system");return!1},this.modalReject_007021=()=>{var e=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&(e.setFormValidateFromFunctionClient(!1),e.clearError(),e.callDirFromSupport("checkValidate",{},{}),!e.getFormValidate())){var t;const a=e.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{});let i=o.g.context_get("user_acc.loginname");if((null===i||void 0===i?void 0:i.trim())===(null===(t=a.username)||void 0===t?void 0:t.trim()))return o.g.persist_setFormError(this.context.infoA.key_form,!0,o.g.getLang("007021_reject_invalid_account")),!1;let s=e.getDataAll();return this.input_action=s,!0}return!1},this.BO_015004001_GetLastCalendarDate=()=>{var e,t;let a=o.g.getDataLimited("select * from O9_GET_LIST_CALENDAR_YEAR",0,99999).data;if(!(null===a||void 0===a?void 0:a.length))return;let i=Number(null===(e=a[a.length-1])||void 0===e||null===(t=e.O9_GET_LIST_CALENDAR_YEAR)||void 0===t?void 0:t.cdid),s=new Date("12/31/"+i).getTime();o.g.getFormAppAuto(this.context.infoA.key_form).callDirFromSupport("setAdvanced",{list_component:"last_date",list_view:"",inform:"true",checkError:"false"},s)},this.BO_015004001_selectYear=()=>{var e=o.g.getFormAppAuto(this.context.infoA.key_form);let t=e.callDirFromSupport("getAdvanced",{list_component:"select_year",list_view:"",inform:"true",checkError:"false"},{}),a=new Date("1/1/"+t.select_year).getTime();e.callDirFromSupport("goToDate",{list_component:"9ec128b2b6b14969",list_view:"",inform:"true",checkError:"false"},a)},this.checkCaution=(e,t)=>{var a=o.g.getFormAppAuto(this.context.infoA.key_form);let i=a.callDirFromSupport("getAdvanced",{list_component:e,list_view:"",inform:"true",checkError:"false"},{});a.callDirFromSupport("setCMD",{list_component:t,list_view:"",inform:"true",checkError:"false"},{disabled:i[e]?"false":"true"})}}compareJson(e,t){for(const a in e)if(void 0!==e[a]&&String(e[a])!==String(t[a]))return!1;return!0}}var Ne=xe;class we extends s.a{constructor(){super(...arguments),this.loadData=()=>{let e=o.g.getFormAppAuto(this.context.infoA.key_form),t={};e&&(t=e.getDataAll(!0),o.g.isDebug()&&console.log("data_form calendar",o.g.cloneJson(t))),this.input_action=Object.assign(this.input,t),o.g.isDebug()&&console.log("input action calendar",o.g.cloneJson(this.input_action))},this.setData=()=>{if(void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("set",{list_component:"*",inform:"true",checkError:!1},this.input)}},this.addEventToCalender=()=>{if(void 0!==this.input.calender&&void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("set",{list_component:"*",inform:"true",checkError:!1},this.input.calender)}},this.removeEvent=()=>(this.input_action=this.input,!0)}}var Se=we;class Te extends s.a{constructor(){super(...arguments),this.loadData=()=>{this.input_action=this.input},this.setData=()=>{if(void 0!==this.context&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var e=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&e.callDirFromSupport("set",{list_component:"*",inform:"true",checkError:!1},this.input)}}}}var Ee=Te;class Oe extends s.a{constructor(){super(...arguments),this.openForm=e=>"systemStop",this.testFee=(e,t)=>{if(void 0!==this.context.data&&void 0!==this.context.data.ruleFunction&&void 0!==this.context.data.ruleFunction.component_result&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var a=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==a&&a.hasOwnProperty("callDirFromSupport")&&a.callDirFromSupport("set",{},{table1:{recvalue:e}})}},this.goiFuntion1111=(e,t)=>{if(void 0!==this.context.data&&void 0!==this.context.data.ruleFunction&&void 0!==this.context.data.ruleFunction.component_result&&void 0!==this.context.infoA&&void 0!==this.context.infoA.key_form){var a=o.g.getFormAppAuto(this.context.infoA.key_form);void 0!==a&&a.hasOwnProperty("callDirFromSupport")&&a.callDirFromSupport("set",{},{table1:{recvalue:e}})}}}}var Ie=Oe,Fe={pcsamt:2010,pcsccr:"KHR",cccr:"KHR",listFeeInfo:[],listIFC:[],tempIFC:null,rules:{CCL_FEE:ze(),GET_FEE:Pe()}};let Le={totalfee:0,totalcsh:0,totaldpt:0,totalact:0,totalint:0,totalprn:0,totalper:0,totalflat:0,totalsamt:0,totalramt:0,ttsfper:0};class je extends s.a{constructor(){var e;super(...arguments),e=this,this.autoFeeGetDataForm=()=>{let e=o.g.getFormAppAuto(this.context.infoA.key_form);if(!e)return!1;let t=e.getDataAll("")[this.context.infoA.form_code];if(t){const a=e.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{});let i=o.g.getFormAppAuto(a.form_fee);if(!i)return!1;let s=i.getDataAll(""),l=JSON.parse(s.data_fee.data_fee),n=JSON.parse(l.list_AUTO_FEE)||[];if(1===n.length){let e=n[0];if(e.value){let a="USD",i=0,o=e.txcode;return e.value.includes("|")?e.value.split("|").forEach(e=>{e.includes("ccr")?a=t[e]:i=t[e]}):i=t[e.value],this.input_action={AUTO_FEE:{txcode:o,balance:i,sccr:a}},!0}}else o.g.isDebug()&&console.log("getDataAutoFee ===> list auto_fee rulefunc is not equal to 1",n.length)}return!1},this.isRunCCLFee=()=>{let e=o.g.getFormAppAuto(this.context.infoA.key_form);if(e){if(e.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true"},{}).txrefid)return!1}let t=this.context.infoA.form_code;if(t){let e=o.g.getFormAppAuto(t);if(e){if(e.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true"},{}).txrefid)return!1}}return!0},this.autoFeeCalFee=()=>{let e=this.input.O9_AUTOFEE_POST_GET_IFC_INFO||[],t=o.g.getFormAppAuto(this.context.infoA.key_form),a=this.context.infoA.form_code,i=t.getDataAll("");if(t.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true"},{}).txrefid)return;i.key_form=a;const s=t.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{});let l=o.g.getFormAppAuto(s.form_fee);if(!l)return!1;let n=l.getDataAll(""),r=JSON.parse(n.data_fee.data_fee),c=JSON.parse(r.list_CCL_FEE)||[],d=[];for(let u of e){var h,_;u.paysrc=(null===(h=n.form_child)||void 0===h?void 0:h.paysrc)||"CSH",u.valtypect=null===(_=n.form_child)||void 0===_?void 0:_.valtypect,u.rule_ccl=r.list_CCL_FEE,u.ifccd=u.ifccd.toString(),u.AFGHkeyIndexWJ=o.g.autoID(),c.forEach(e=>{u.paysrc.toLowerCase()===e.relf.split(";")[0]&&(u.rule_ccl_0=i[a][e.relf.split(";")[2]],u.rule_ccl_1=u.ccrcd)}),d.push({ifcfees:u})}return i[a].ifcfees=d,this.input_action=o.g.analyticsTable(i),!0},this.convertData=e=>{var t;let a=o.g.getFormAppAuto(this.context.infoA.key_form),i=this.context.infoA.form_code,s=a.getDataAll("");s.key_form=i;let l=(null===(t=s[i])||void 0===t?void 0:t.ifcfees)||[];for(let o=0;o<l.length;o++){const e=l[o].ifcfees;if(e.rule_ccl){const t=JSON.parse(e.rule_ccl);for(let a=0;a<t.length;a++){const n=t[a];e.paysrc.toLowerCase()===n.relf.split(";")[0]&&(l[o].ifcfees.rule_ccl_0=s[i][n.relf.split(";")[2]],l[o].ifcfees.rule_ccl_1=e.ccrcd)}}}return this.input_action=o.g.analyticsTable(s),!0},this.refreshAllFee=async()=>{var e;let t=o.g.getFormAppAuto(this.context.infoA.key_form),a=this.input.data||{};a.ifcfees=(null===(e=a[this.context.infoA.form_code])||void 0===e?void 0:e.ifcfees)||[],await t.putDataAll_andSet(a);const i=t.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{});let s=o.g.getFormAppAuto(i.form_fee);s&&s.callDirFromSupport("runFO",{list_component:"btn_add",list_view:"",inform:"true",checkError:"false"},{action:[{function:"own_O9_fee.FeeCCL",status:"A",para:[]}]})},this.feeCaculatorDataConvert=async()=>{var e,t;if(!this.isRunCCLFee())return;let a=o.g.getFormAppAuto(this.context.infoA.key_form),i=this.input.data||{};i.ifcfees=(null===(e=i[this.context.infoA.form_code])||void 0===e?void 0:e.ifcfees)||[],await a.putDataAll_andSet(i);const s=a.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{});let l=o.g.getFormAppAuto(s.form_fee);if(!l)return;const n=null===(t=this.context.componentConfigDefault)||void 0===t?void 0:t.code;l.callDirFromSupport("runFO",{list_component:"btn_add",list_view:"",inform:"true",checkError:"false"},{action:[{function:"own_O9_fee.FeeCCL",status:"A",para:[n]}]})},this.FeeAdd=e=>{if(e){let t=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let a=t.getData("");a[e]={},t.putDataAll_andSet(a,!0),t.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{})}else o.g.AppException("#form.formChil","form is undefined","system")}else o.g.AppException("#form.formChil","parameter is undefined","system");return!1},this.FeeApply=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form_child",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ifcfees",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ifccd";const s=e.context.infoA.key_form;let l=o.g.getFormAppAuto(s);if(!l)return!1;let n=l.getDataAll(""),r=l.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"*",inform:"true"},{}),c=n[t]||{};delete c[a];let d=n[a]||[];if(!(null===r||void 0===r?void 0:r.ifccd)||!(null===r||void 0===r?void 0:r.ifcname))return void((null===r||void 0===r?void 0:r.ifccd)&&o.g.persist_setFormError(s,!1,"[Interest/fee/charge code] not exist","Fee"));if(i)for(const e of d)if(e[a][i]===c[i]){c.AFGHkeyIndexWJ=e[a].AFGHkeyIndexWJ;break}if(c.rule_ccl=JSON.parse(n.data_fee.data_fee).list_CCL_FEE,void 0===c.AFGHkeyIndexWJ)c.AFGHkeyIndexWJ=o.g.autoID(),d.push({[a]:o.g.cloneJson(c)}),n[a]=o.g.cloneJson(d);else{for(let e=0;e<d.length;e++){const t=d[e];if(Object.values(t)[0].AFGHkeyIndexWJ===c.AFGHkeyIndexWJ){d[e][a]=o.g.cloneJson(c);break}}n[a]=d}const h=e.context.infoA_parent.form_code;let _=o.g.getFormAppAuto(e.context.infoA_parent.key_form),u=_.getDataAll("")||{};u[h]||(u[h]={}),u[h].ifcfees=n.ifcfees,u.key_form=h;let g=u[h].ifcfees;for(let e=0;e<g.length;e++){const t=g[e].ifcfees,a=JSON.parse(t.rule_ccl);for(let i=0;i<a.length;i++){const o=a[i];t.paysrc.toLowerCase()===o.relf.split(";")[0]&&(g[e].ifcfees.rule_ccl_0=u[h][o.relf.split(";")[2]],g[e].ifcfees.rule_ccl_1=t.ccrcd)}}return e.input_action=o.g.analyticsTable(u),!0},this.FeeCCL_FO=async()=>{var e;let t=o.g.getFormAppAuto(this.context.infoA.key_form);void 0===this.input.data&&(this.input.data={}),await t.putDataAll_andSet({ifcfees:null===(e=this.input.data[this.context.infoA_parent.form_code])||void 0===e?void 0:e.ifcfees}),this.FeeCCL()},this.FeeRemove=e=>{let t=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let a=t.getData("");a[e]=a[e].filter(e=>Object.values(e)[0].AFGHkeyIndexWJ!==Object.values(this.context.data)[0].AFGHkeyIndexWJ),t.putDataAll_andSet(a),this.FeeCCL()}},this.FeeModify=e=>{let t=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let a=t.getData(""),i=Object.values(this.context.data)[0];a[e]=i,t.putDataAll_andSet(a)}},this.FeeCCL=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=o.g.getFormAppAuto(e.context.infoA.key_form);if(!a)return!1;let i=a.getDataForm(""),s=[];if(Array.isArray(i.ifcfees))for(const e of i.ifcfees)s.push(e.ifcfees);let l=o.g.getFormAppAuto(e.context.infoA_parent.key_form),n=l.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}),r=JSON.parse(i.data_fee.data_fee);Fe={listFeeInfo:[],listIFC:s,tempIFC:null,rules:{CCL_FEE:JSON.parse(r.list_CCL_FEE)||[],GET_FEE:JSON.parse(r.list_GET_FEE)||[]},totalFee:{}};for(const e in n)"object"!==typeof n[e]&&(Fe[e]=n[e]);let c=Pe(t),d=o.g.cloneJson(i[e.context.infoA_parent.key_form]);d||(d=o.g.cloneJson(i));for(const e in n)"object"!==typeof n[e]&&n[e]&&(d[e]=n[e]);let h=ze(t);h.length>0&&(h.forEach(t=>{e.CCL_FEE(t)}),Ye()),c.length>0&&e.GET_FEE(d);let _=[];for(const e of Fe.listIFC)_.push({ifcfees:o.g.cloneJson(e)});i.ifcfees=_,i.FEE=Le,a.putDataAll_andSet(i)},this.FeeCCLFromParent=()=>{var e;let t=o.g.getFormAppAuto(this.context.infoA.key_form);if(!t)return;const a=t.callDirFromSupport("getKeyForm",{list_component:"form_fee",list_view:"",inform:"true",checkError:"false"},{});let i=o.g.getFormAppAuto(a.form_fee);if(!i)return;const s=null===(e=this.context.componentConfigDefault)||void 0===e?void 0:e.code;i.callDirFromSupport("runFO",{list_component:"btn_add",list_view:"",inform:"true",checkError:"false"},{action:[{function:"own_O9_fee.FeeCCL",status:"A",para:[s]}]})},this.CCL_FEE=e=>{!e||e.actcdt&&!o.g.persist_checkCondition(e.actcdt,this.context.infoA.key_form,this.context.infoA_parent.key_form)||(function(e){let t,a,i=!1;if(e.relf){let o=e.relf.toLowerCase().split(";");if(3===o.length){let s=o[0],l=o[1],n=o[2],r=Fe.listFeeInfo;for(let e=0;e<r.length;e++)if(r[e].paysrc===s){t=r[e],i=!0;break}i||(t={damt:0,dccrcd:"",paysrc:""},r.push(t)),t.paysrc=s,e.value&&(a=We(e.value)),a?t.damt=a:Fe[l]&&(t.damt=Fe[l]),Fe[o[2]]&&(t.dccrcd=Fe[n])}}}(e),function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Fe.listIFC;if(t&&t.length>0){let{pval:a,famt:i}=e?Qe():{pval:0,famt:0};t.forEach(t=>{let o=!1;Fe.listFeeInfo.forEach(s=>{if(!o){switch(t.valtype){case"P":t.iscal=!(!t.paysrc||!s.paysrc||t.paysrc.toUpperCase()!==s.paysrc.toUpperCase()),t.damt=Ge(t,s,e,i,a);break;case"F":t.iscal=!!s.paysrc,t.damt=t.ifcval;break;default:console.log("Error=======")}o=t.iscal,t.dccrcd=t.iscal?s.dccrcd:"",t.dbrate=t.iscal?qe(t):0,t.ccrrate=t.iscal?Ke(t):0,t.ibrate=t.iscal?qe(t):0,t.ccrid=s.dccrcd,t.equiamt=Ve(t),t.ifcbamt=He(t),t.ifcamt=Ue(t)}})}),Je()}}(!1))},this.autoClearFee=e=>{if(e){var t=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==t){let a=t.callDirFromSupport("getAdvanced",{list_component:e,isGetOOP:!1},{});for(const e in a)if(Object.hasOwnProperty.call(a,e)){"object"!==typeof a[e]?a[e]=0:a[e].ifcfees=[]}t.callDirFromSupport("setAdvanced",{list_component:e},a),t.callDirFromSupport("clearError",{list_component:"*",list_view:"*",inform:"true"},{})}else o.g.AppException("#form.formChil","form is undefined","system")}else o.g.AppException("#form.formChil","parameter is undefined","system");return!1}}showTotalFee(){let e=o.g.getFormAppAuto(this.context.infoA_parent.key_form);e&&Le&&e.callDirFromSupport("setAdvanced",{list_component:"totalcsh;totaldpt;totalact;totalint;totalprn"},Le)}GET_FEE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,a=Fe.rules.GET_FEE,i=o.g.getFormAppAuto(this.context.infoA_parent.key_form);a&&i&&a.forEach(a=>{var s;if(a.relf&&(!a.actcdt||o.g.persist_checkCondition(a.actcdt,this.context.infoA.key_form,null===(s=this.context.infoA_parent)||void 0===s?void 0:s.key_form))){switch(a.value){case"TOTALFEE":t=Le.totalfee;break;case"TOTALCSH":t=Le.totalcsh;break;case"TOTALDPT":t=Le.totaldpt;break;case"TOTALACT":t=Le.totalact;break;case"TOTALINT":t=Le.totalint;break;case"TOTALPRN":t=Le.totalprn;break;case"TOTALFLAT":t=Le.totalflat;break;case"TOTALSAMT":t=Le.totalsamt;break;case"TOTALRAMT":t=Le.totalramt;break;case"TTSFPER":t=Le.ttsfper;break;default:Fe[a.relf]=t,e[a.relf]=t,a.value&&(t=We(a.value,e))}i.callDirFromSupport("setAdvanced",{list_component:a.relf},t),e[a.relf]=t}})}}var Re=je;function ze(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var t,a;return""===e?(null===(t=Fe)||void 0===t||null===(a=t.rules)||void 0===a?void 0:a.CCL_FEE)||[]:Fe&&Fe.rules&&Fe.rules.CCL_FEE?Fe.rules.CCL_FEE.filter(t=>t.actf&&t.actf.includes(e)):[]}function Pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var t,a;return""===e?(null===(t=Fe)||void 0===t||null===(a=t.rules)||void 0===a?void 0:a.GET_FEE)||[]:Fe&&Fe.rules&&Fe.rules.GET_FEE?Fe.rules.GET_FEE.filter(t=>t.actf.includes(e)):[]}function Ue(e){let t=0,a=0;return 1===e.sfappl?(e.srate>=0&&(t=e.ifcbamt*e.srate/100),a=e.ifcbamt-t):(t=0,a=0),e.ifcbamt-a}function Ve(e){let t,a=0;if(0!==e.damt&&e.valtype)switch(e.valtype.toUpperCase()){case"P":a=Math.abs(e.damt)*Math.abs(e.ifcval)/100,a*=e.ccrrate,t=a>0?e.ceival>0&&a>Math.abs(e.ceival)?Math.abs(e.ceival):e.flrval>0&&a<Math.abs(e.flrval)?Math.abs(e.flrval):a:0;break;case"F":t=e.damt;break;default:console.log("Error=======")}else t=0;return t}function Be(e,t){let a=Math.pow(10,t);return Math.floor(e*a)/a}function He(e){let t=0;if(0!==e.dbrate)if(0!==e.ccrrate&&(t=e.equiamt/e.ccrrate),e.rndrule)switch(e.rndrule){case"U":t=function(e,t){let a=Math.pow(10,t);return Math.ceil(e*a)/a}(t,e.rndnum);break;case"D":t=Be(t,e.rndnum);break;case"T":a=t,i=e.rndnum,t=Be(Be(a,i+1),i);break;case"R":default:t=t.toFixed(e.rndnum)}else t=t.toFixed(e.rndnum);else t=0;var a,i;return Number.parseFloat(t)}function Ye(){let e=Fe.listIFC;Le={totalfee:0,totalcsh:0,totaldpt:0,totalact:0,totalint:0,totalprn:0,totalper:0,totalflat:0,totalsamt:0,totalramt:0,ttsfper:0},e&&(e.forEach(e=>{switch(e.paysrc){case"CSH":Le.totalcsh+=e.ifcbamt;break;case"DPT":Le.totaldpt+=e.ifcbamt;break;case"ACT":Le.totalact+=e.ifcbamt;break;case"INT":Le.totalint+=e.ifcbamt;break;case"PRN":Le.totalprn+=e.ifcbamt;break;default:console.log("Error=======")}switch(e.valtype){case"P":Le.totalper+=e.ifcbamt;break;case"F":Le.totalflat+=e.ifcbamt;break;default:console.log("Error=======")}1===e.sfappl&&(Le.totalsamt+=e.samt,Le.totalramt+=e.ramt,"P"===e.valtype&&(Le.ttsfper+=e.samt))}),Le.totalfee=Le.totalact+Le.totalcsh+Le.totaldpt+Le.totalint+Le.totalprn)}function Qe(){let e=0;return Fe.listIFC.forEach(t=>{switch(t.valtype){case"P":e+=t.ifcval;break;case"F":e+=t.ifcbamt;break;default:console.log("Error=======")}}),{pval:e,famt:0}}function Ge(e,t,a,i,o){let s;return s=e.iscal?a?t.damt-i>0?(t.damt-i)/(1+o/100):0:t.damt:0,s}function Je(){let e;Fe.listIFC.forEach(t=>{t.ifccond&&!o.g.persist_checkCondition(t.ifccond,this.context.infoA.key_form,this.context.infoA_parent.key_form)||t.valbas&&(t.iscal=!1,t.damt=0,e=We(t.valbas),e&&(t.iscal=!0,t.damt=e,t.dccrcd=t.ccrid,t.dbrate=qe(t),t.ccrrate=Ke(t),t.ibrate=qe(t)))})}function We(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){let a=o.g.component_getListCode(e);for(let i=0;i<a.length;i++){const o=a[i].code;let s=o;void 0!==t[o]&&(s=t[o]),e=isNaN(s)||""===s?e.repeat(a[i].key,s+""):e.replace(a[i].key,s+"")}return o.g.paramStringCaculator(e)}return null}function qe(e){return e.baserate}function Ke(e){return e.crossrate}class Ze extends s.a{constructor(){super(...arguments),this.runScheduleJob=e=>{void 0!==e&&p.runSchedule(e,this.context)},this.runExtendToken=()=>!0}}var Xe=Ze;class $e extends s.a{constructor(){super(...arguments),this.getErrorMess=()=>{let e=o.g.modalDynamicFromFromCode_getRoleBack();var t=o.g.getFormAppAuto(this.context.infoA.key_form),a=o.g.getFormAppAuto(e.context.infoA.key_form);if(void 0!==t&&void 0!==a&&a.hasOwnProperty("getContext_FormOpenModal")){let e=a.getContext_FormOpenModal();if(t.hasOwnProperty("showErrorFromServer")){if(e.list_error[0]){let t=e.list_error[0].info;t.includes("]")&&(t=t.substring(t.indexOf("]")+1,t.length)),e.list_error[0].info=t}t.showErrorFromServer(e.list_error)}}},this.openAproveCondition=e=>{var t,a,i=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){let e=i.getData("");e.user_approve&&delete e.user_approve}if(!0!==(null===(t=this.input)||void 0===t||null===(a=t.JWEBUI_O9_approve)||void 0===a?void 0:a.isOpen))return;let s,l=this.context.infoA_parent;if(l&&l.key_form){let e=o.g.getFormAppAuto(l.key_form);e.hasOwnProperty("getFormValidate")&&(e.getFormValidate()||(e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(s=o.g.analyticsTable(e.getData("")))))}if(void 0!==i){if(i.hasOwnProperty("callDirFromSupport")&&(i.callDirFromSupport("checkValidate",{},{}),i.hasOwnProperty("getFormValidate")&&!i.getFormValidate())){i.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,i.hasOwnProperty("getData")&&(this.context.data=o.g.analyticsTable(i.getData("")),s&&(this.context.data=Object.assign(s,this.context.data)));var n=this.buildPackRollBack();o.g.modalDynamicFromFromCode(e,n)}}else o.g.AppException("#form.getData","form is undefined","system")},this.openAproveDelete=e=>{this.context.input=o.g.cloneJson(this.input);var t=this.buildPackRollBack();return o.g.modalDynamicFromFromCode(e,t),"systemStop"},this.openCopyModal=e=>{var t=o.g.getFormAppAuto(this.context.infoA.key_form);let a={};if(void 0!==t){let e=t.getData();for(const t in e)e.hasOwnProperty(t)&&(Number.isInteger(Number(t))||Array.isArray(e[t])||(a[t]=o.g.cloneJson(e[t])))}for(const o in a)a.hasOwnProperty(o)&&this.context.data.hasOwnProperty(o)&&(this.context.data[o]=Object.assign(a[o],this.context.data[o]));this.input_action=Object.assign(a,this.context.data),this.context.input=o.g.cloneJson(this.input);var i=this.buildPackRollBack();return o.g.modalDynamicFromFromCode(e,i),"systemStop"},this.closeModalDynamicRollback=e=>{o.g.modalDynamicFromClose_Rollback(e)},this.openAprove=e=>{let t,a=this.context.infoA_parent;if(a&&a.key_form){let e=o.g.getFormAppAuto(a.key_form);e.hasOwnProperty("getFormValidate")&&(e.getFormValidate()||(e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(t=o.g.analyticsTable(e.getData("")))))}var i=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){if(i.hasOwnProperty("callDirFromSupport")&&(i.setFormValidateFromFunctionClient(!1),i.clearError(),i.callDirFromSupport("checkValidate",{},{}),i.hasOwnProperty("getFormValidate")&&!i.getFormValidate())){i.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,i.hasOwnProperty("getData")&&(this.context.data=o.g.analyticsTable(i.getData("")),t&&(this.context.data=Object.assign(t,this.context.data)));var s=this.buildPackRollBack();o.g.modalDynamicFromFromCode(e,s)}}else o.g.AppException("#form.getData","form is undefined","system")},this.modelApproveOpen=e=>{let t,a=this.context.infoA_parent;if(a&&a.key_form){let e=o.g.getFormAppAuto(a.key_form);e.hasOwnProperty("getFormValidate")&&(e.getFormValidate()||(e.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:!1},{}),e.hasOwnProperty("getData")&&(t=o.g.analyticsTable(e.getData("")))))}var i=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==i){if(i.hasOwnProperty("callDirFromSupport")&&(i.callDirFromSupport("checkValidate",{},{}),i.hasOwnProperty("getFormValidate")&&!i.getFormValidate())){i.callDirFromSupport("get",{list_component:"*",list_view:"code",inform:"true",checkError:"true"},{}),this.context.input=this.input,i.hasOwnProperty("getData")&&(this.context.data=o.g.analyticsTable(i.getData("")),t&&(this.context.data=Object.assign(t,this.context.data)));var s=this.buildPackRollBack();o.g.modalDynamicFromFromCode(e,s)}}else o.g.AppException("#form.getData","form is undefined","system")},this.modalApproveTable=()=>{let e=o.g.modalDynamicFromFromCode_getRoleBack();var t=o.g.getFormAppAuto(e.context.infoA.key_form);return void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&(t.setFormValidateFromFunctionClient(!1),t.clearError()),void 0!==e&&void 0!==e.context&&(this.input_action=Object.assign(e.context.data,e.context.input),this.input_action=Object.assign(this.input_action,o.g.cloneJson(this.input)),this.context.infoA=e.context.infoA,this.context.componentConfigDefault=e.context.componentConfigDefault,this.context.infoA_parent=e.context.infoA_parent),o.g.modalDynamicFromFromCode_close(),!0},this.modalCopyTable=()=>{let e=o.g.modalDynamicFromFromCode_getRoleBack();var t=o.g.getFormAppAuto(e.context.infoA.key_form);return void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&(t.setFormValidateFromFunctionClient(!1),t.clearError()),void 0!==e&&void 0!==e.context&&(this.input_action=Object.assign(e.input_action,e.context.data),this.input_action=Object.assign(this.input_action,e.context.input),this.input_action=Object.assign(this.input_action,o.g.cloneJson(this.input)),this.context.infoA=e.context.infoA,this.context.componentConfigDefault=e.context.componentConfigDefault,this.context.infoA_parent=e.context.infoA_parent),o.g.modalDynamicFromFromCode_close(),!0},this.modalAppoveApproveOke=()=>{let e=o.g.modalDynamicFromFromCode_getRoleBack();var t=o.g.getFormAppAuto(e.context.infoA.key_form);let a={};return void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&(t.setFormValidateFromFunctionClient(!1),t.clearError(),a=t.getDataAll()),void 0!==e&&void 0!==e.context&&(this.input_action=Object.assign(a,e.context.input),this.input_action=Object.assign(this.input_action,o.g.cloneJson(this.input)),this.context.infoA=e.context.infoA,this.context.componentConfigDefault=e.context.componentConfigDefault,this.context.infoA_parent=e.context.infoA_parent),o.g.modalDynamicFromFromCode_close(),!0},this.modalAppoveApprove=()=>{var e=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&(e.setFormValidateFromFunctionClient(!1),e.clearError(),e.callDirFromSupport("checkValidate",{},{}),!e.getFormValidate())){let t=e.getDataAll();return this.input_action=t,!0}return!1},this.modalCopyOk=()=>{var e=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==e&&e.hasOwnProperty("callDirFromSupport")&&(e.setFormValidateFromFunctionClient(!1),e.clearError(),e.callDirFromSupport("checkValidate",{},{}),!e.getFormValidate())){let t=e.getDataAll();return this.input_action=t,!0}return!1},this.modalAppoveLater=()=>{let e=o.g.modalDynamicFromFromCode_getRoleBack();return void 0!==e&&void 0!==e.context&&(this.input=e.context.input,this.context.infoA=e.context.infoA,this.input_action=Object.assign(e.context.data,e.context.input)),o.g.modalDynamicFromFromCode_close(),!0},this.openForm=e=>{this.context.data={test:"C\xf3 g\u1eedi data l\xean form n\xe8, gi\u1edd nh\u1ea5n g\u1eedi th\xf4i nha aaaaaaa"};var t=this.buildPackRollBack();o.g.modalDynamicFromFromCode(e,t)},this.actionForm=()=>{let e=o.g.modalDynamicFromFromCode_getRoleBack();void 0!==e&&void 0!==e.context&&e.context.data,o.g.modalDynamicFromFromCode_close()},this.closeForm=()=>{o.g.modalDynamicFromFromCode_close()},this.modalAppoveApprove_007021=()=>{const e=o.g.modalDynamicFromFromCode_getRoleBack().context.infoA.key_form;var t=o.g.getFormAppAuto(this.context.infoA.key_form),a=o.g.getFormAppAuto(e);if(void 0!==t&&t.hasOwnProperty("callDirFromSupport")&&(t.setFormValidateFromFunctionClient(!1),t.clearError(),t.callDirFromSupport("checkValidate",{},{}),!t.getFormValidate())){const e=t.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}),i=a.callDirFromSupport("getAdvanced",{list_component:"*",list_view:"",inform:"true",checkError:"false"},{}),s=i.iamt,l=i.raccno,n=e.input_amount;if(e.input_account!==l)return o.g.persist_setFormError(this.context.infoA.key_form,!0,o.g.getLang("007021_approve_invalid_account")),!1;if(n!==s)return o.g.persist_setFormError(this.context.infoA.key_form,!0,o.g.getLang("007021_approve_invalid_amount")),!1;let r=t.getDataAll();return this.input_action=r,!0}return!1}}}var et=$e;class tt extends s.a{constructor(){super(...arguments),this.loadChartJs=()=>{let e=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0===window.google){let t="/app/gstatic/loader.js";o.g.loadJs(t).then(t=>{window.google.charts.load("current",{packages:["corechart"]}),window.google.charts.setOnLoadCallback(()=>{this.drawChart(e)})},e=>{})}else this.drawChart(e)},this.drawChart=e=>{e.callDirFromSupport("drawChart",{list_component:"*",list_view:"code"},{})}}}var at=tt;class it extends s.a{constructor(){super(...arguments),this.clear=()=>{o.g.getParameterSystem("clipboardClearForFo")&&o.g.clearClipboardFo()}}}var ot=it;class st extends s.a{constructor(){super(...arguments),this.setFileName=()=>{void 0!==this.input.file_name&&o.g.setResponseFile_fileName(this.input.file_name)},this.setFileData=()=>{if(o.g.getResponseFile()){let e=o.g.getResponseFile();const t=URL.createObjectURL(e.buffer_data),a=document.createElement("a");a.href=t,a.download=e.file_name,a.setAttribute("hidden",!0),document.body.appendChild(a),a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(a),o.g.removeResponseFile()}},this.getDataDownload=(e,t,a,i,s)=>{if(void 0!==e&&void 0!==t){var l=o.g.getFormAppAuto(this.context.infoA.key_form);if(void 0!==l){if(l.hasOwnProperty("callDirFromSupport")&&(l.callDirFromSupport("checkValidate",{},{}),l.hasOwnProperty("getFormValidate")&&!l.getFormValidate())){var n;l.hasOwnProperty("getData")&&(this.input_action=o.g.analyticsTable(l.getData("")));let r=l.callDirFromSupport("getAdvanced",{list_component:e,list_view:t,inform:"true",checkError:!1},{});if(void 0!==r[a]&&Array.isArray(r[a]))for(let e=0;e<r[a].length;e++)void 0!==r[a][e]&&void 0!==r[a][e][a]&&void 0!==r[a][e][a][i]&&(void 0===this.input_action[s]?this.input_action[s]=""+r[a][e][a][i]:this.input_action[s]+=","+r[a][e][a][i]);for(const e in this.input_action)(Number.isInteger(Number(e))||Array.isArray(this.input_action[e]))&&delete this.input_action[e];if((null===this||void 0===this||null===(n=this.context)||void 0===n?void 0:n.data)&&"object"===typeof this.context.data){let e=o.g.cloneJson(this.context.data);this.input_action=Object.assign(e,this.input_action)}return o.g.isDebug()&&console.log(this.context.infoA.title+" return=>"+!l.getFormValidate()+" data=>",o.g.cloneJson(this.input_action)),o.g.getParameterSystem("clipboardClearForFo")&&o.g.clearClipboardFo(),!0}}else o.g.AppException("#form.getData","form is undefined","system")}else o.g.AppException("#form.getData","parameter is undefined","system");return!1}}}var lt=st;class nt extends s.a{constructor(){super(...arguments),this.updateProcess=()=>{},this.onStopProcess=()=>{var e=o.g.getFormAppAuto(this.input.form_code);e.callDirFromSupport("setCMD",{list_component:"start"},{disabled:"false"}),e.callDirFromSupport("setCMD",{list_component:"stop"},{disabled:"true"}),e.getDataAll()},this.stopProcessClick=()=>{var e=o.g.getFormAppAuto(this.context.infoA.key_form);for(let t in this.input)this.input_action[t]=this.input[t];e.callDirFromSupport("setCMD",{list_component:"start"},{disabled:"false"}),e.callDirFromSupport("setCMD",{list_component:"stop"},{disabled:"true"}),setTimeout(()=>{0},2e3)},this.refreshTableProcess=()=>{this.input_action={};var e=o.g.getFormAppAuto(this.context.infoA.key_form);return void 0!==e&&e.getDataAll(),!0},this.setDataInformJobProcessInterval=()=>{var e=o.g.getFormAppAuto(this.input.form_code);void 0!==e?e.putDataAll_andSet(this.input):o.g.AppException("#form.reloadData","form is undefined","system")},this.onClickStartProcess=e=>{let t=o.g.modalDynamicFromFromCode_getRoleBack();o.g.modalDynamicFromFromCode_close();var a=o.g.getFormAppAuto(t.context.infoA.key_form);a.getDataAll(),this.input_action={};let i=a.callDirFromSupport("getAdvanced",{list_component:"date_range"},""),s=parseInt(i.date_range);if(isNaN(s))return!1;a.callDirFromSupport("setCMD",{list_component:"start"},{disabled:"true"}),a.callDirFromSupport("setCMD",{list_component:"stop"},{disabled:"false"}),this.input_action.days=s>0?s:1,this.input_action.form_code=t.context.infoA.key_form,this.input_action.workingdate=o.g.context_get("user_acc").workingdate;for(let o in this.input)this.input_action[o]=this.input[o];return!0},this.getJobRowCheckBox=()=>{if(this.input_action={},o.g.getFormAppAuto(this.context.infoA.key_form).getDataAll(),void 0!==this.context.data){let e=this.context.data,t={S:""};if(e.length>0)for(let a=0;a<e.length;a++)t.S+=e[a].O9_job_process_refesh_table_summary.stepname+",";this.input_action=t;for(let a in this.input)this.input_action[a]=this.input[a];return!0}return o.g.AppException("#form.getJobRowCheckBox"),!1}}}var rt=nt;const ct="form_status",dt="start_after_hour",ht="start_after_minute",_t="start_after_seconds",ut="steps_summary",gt="o9_admin_sync",mt="START",pt={role_system:0,user_info:1,user_role:2,user_password:3,role_cache_fo:4,role_cache_bo:5,role_cache_jwebui:6,data_cdlist:7,data_country:8,data_currency:9,fo_form:10,fo_menu:11},ft={start_count_down:void 0,get_info:void 0};function vt(e){var t;const a=null===e||void 0===e||null===(t=e.infoA)||void 0===t?void 0:t.key_form;if(a)return o.g.getFormAppAuto(a)}function bt(e,t,a){e.callDirFromSupport("setAdvanced",{list_component:t},a)}class yt{static handleStart(e,t){const a=vt(e),i=function(e){return e.callDirFromSupport("getAdvanced",{list_component:"*"},{})}(a);bt(a,ct,mt);const o=i[dt],s=i[ht];let l=1e3*i[_t]+60*s*1e3+60*o*60*1e3;ft.start_count_down=setInterval(()=>{if(l<=0)clearInterval(ft.start_count_down),a.setLoadingAction(!0),t();else{l-=1e3;let e=new Date(l);bt(a,dt,e.getUTCHours()),bt(a,ht,e.getUTCMinutes()),bt(a,_t,e.getUTCSeconds())}},1e3)}static handleSelectFeature(e,t,a){const i=vt(e),o=i.getDataForm();let s=o[gt][ut]||[];!0===o[gt][t]?(s=s.map(e=>e[ut]),s.push({code:t,name:a,status:"N",process:0,info:""}),s=s.sort((e,t)=>pt[e.code]>pt[t.code]?1:-1)):s=s.filter(e=>e[ut].code!==t),o[gt][ut]=s,i.putDataAll_andSet(o)}static updateInfo(e,t,a){const i=vt(e);let o=i.getDataForm(),s=o[gt][ut]||[],l=!0;for(const d in s){var n,r,c;let e=s[d][ut];const i=e.code;e.info=(null===(n=t.info)||void 0===n?void 0:n[i])||"";let o=(null===(r=t.error)||void 0===r?void 0:r[i])||"";e.info+=o,100!==e.process&&(l=!1);const h=(null===(c=t.process)||void 0===c?void 0:c[i])||0;e.process=h,h>=100?e.status="S":(h>0||0===d)&&(e.status="R"),o&&(e.status="F",a())}l?a():i.putDataAll_andSet(o)}static getData(e){return vt(e).getDataForm()}}yt.handleStop=e=>{bt(vt(e),ct,"STOP"),ft.start_count_down&&clearInterval(ft.start_count_down)};class Dt{static async callBO(e){let t=[{txcode:e,input:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}];return Object(i.b)(t,{}).then(e=>o.g.foGetData("data",e))}static async callFunction(e,t){return t.function_name=e,this.callBO("bo-sync-optimal9",t)}static async getInfo(){return this.callFunction("getInfo",{})}static handleStop(){console.log("Stop sync")}static startSync(e){console.log("Start sync"),this.callFunction("syncAll",e)}static notifyAllUser(){console.log("notifyBeginSync")}static logoutAllUser(){console.log("notifyBeginSync")}}class Ct{}Ct.getListHTML=(e,t)=>{},Ct.saveListForm=(e,t)=>{let a=o.g.cloneJson(e),i={},s=Object.keys(a.list_form);for(let o=0;o<10;o++)if(s[e.startIndexBuild+o]){let t=s[e.startIndexBuild+o];i[t]=a.list_form[t]}a.list_form=i,delete a.list_form_data_j,0!==e.startIndexBuild&&delete a.list_menu};var At=Ct,kt=a(6);const Mt={view_name:0,cpn_name:1,cpn_child_name:2,key_name:4,function:7,is_group:8,cpn_type:9,mask:10,no_modify:11,hidden:12,disable:13,data_default:14,min_value:15,max_value:16,max_length:17,required:18,condition:20,cdlist:21,is_get_api:22,value_type:24,api_main_node:25,api_main_node_chil:26,api_main_addr:27,api_cpn_node:28,api_cpn_addr:29,node_data:30,flow_data:31,list_CCL_FEE:32,list_GET_FEE:33,fee_active_fields:34,ftags:35,list_AUTO_FEE:36,auto_fee_active_fields:37,rulefunc:38,component_code:-1,codeHidden:-1,table_node:-1,api_cpn_id:-1,action_fo:-1,request_url:-1,api_method:-1,action_fo_name:-1,sum_name:-1,mutiform_code:-1},xt={config:{structable:"",structable_read:"",data_default:""},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:""},Nt=()=>Object(kt.a)({},xt),wt={Search:{color:"primary",icon:"fa-search"},Save:{color:"success",icon:"fa-save"},View:{color:"info",icon:"fa-eye"},Delete:{color:"danger",icon:"fa-trash-o"},Import:{color:"primary",icon:"fa-upload"},Add:{color:"primary",icon:"fa-plus"},Accept:{color:"primary",icon:"fa-plus"},Modify:{color:"warning",icon:"fa-pencil-square-o"},Clear:{color:"default",icon:"fa-trash-o"},Copy:{color:"primary",icon:"fa-files-o"}},St={default:{name:"errorJWebUI",code:"errorJWebUI_code",codeHidden:"c2a97a17e41cb223",class:"col-sm-12 col-md-12",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"",structable:"errorJWebUI.count",structable_read:"errorJWebUI.count",data_default:"",isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_disabled:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"cTextInput"},Tt={info:{title:"O9_FEE",des:"O9_FEE",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"false",url_input:"",form_code:"O9_FEE",ruleStrong:[{code:"visibility",config:{component_event:"on_click",component_action:"btn_add;btn_modify",component_result:"table_fee;ifccd;ifcval;btn_apply",condition:"",visible:"not_use",ena_dis:"false",view_result:"code",list_config:[]},inUse:!0,order:1,isStart:!1},{code:"visibility",config:{component_event:"on_click",component_action:"btn_add;btn_modify",component_result:"btn_add",condition:"",visible:"not_use",ena_dis:"true",view_result:"",list_config:[]},inUse:!0,order:1,isStart:!1},{code:"visibility",config:{component_event:"on_click",component_action:"btn_apply",component_result:"btn_add",condition:"",visible:"not_use",ena_dis:"false",view_result:"",list_config:[]},inUse:!0,order:1,isStart:!0},{code:"visibility",config:{component_event:"on_click",component_action:"btn_apply",component_result:"*;btn_apply",condition:"",visible:"not_use",ena_dis:"true",view_result:"",list_config:[]},inUse:!0,order:1,isStart:!0},{code:"visibility",config:{component_event:"all",component_action:"btn_modify",component_result:"ifccd;ifcval;btn_apply",condition:"",visible:"not_use",ena_dis:"false",view_result:"",list_config:[]},inUse:!0,order:1},{code:"setValue",config:{component_event:"all",component_action:"valtype",component_result:"",isGetOOP:"true",getOOPFormat:'{\n    "valtypect": "c_cdlist.caption"\n}'},inUse:!0,order:2,isStart:!0},{code:"visibility",config:{component_event:"on_change",component_action:"",component_result:"valtype;valtypect;data_fee;paysrc",condition:"",visible:"false",ena_dis:"not_use",view_result:"",list_config:[]},inUse:!0,order:3,isStart:!0}],lang_form:{},mode_form:{mode:"1",col_text:"",col_input:""}},list_layout:[{name:"Fee",des:"",class:"",lang:{en:"Fee",vi:"Fee"},lang_des:{vi:"",en:""},codeHidden:"2016bef2e4e3edbe",inputtype:"cLayout",list_view:[{name:"M?u view",code:"code",codeHidden:"1aee1cb6ec37f32b",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Interest/fee/charge code",code:"ifccd",codeHidden:"a52314186a1a99a5",class:"",condition:"",ofgroup:"ifccd",class_ofgroup:"",role:""},config:{txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',useAction:"true",is_upperCase:"false",action:"",structable:"form_child.ifccd",structable_read:"form_child.ifccd",data_default:"",isLookup:"true",callform:"FO_DPT_CDPifccd",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_password:"false",is_upper:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"cTextInput"},{default:{name:"ifcname",code:"ifcname",codeHidden:"6230b0f3664a3530",class:"",condition:"",ofgroup:"ifccd",class_ofgroup:"",role:""},config:{action:"",structable:"form_child.ifcname",structable_read:"form_child.ifcname",data_default:"",isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:""},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jLabel"},{default:{name:"Payment source",code:"paysrc",codeHidden:"033d396504dd7b26",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.paysrc",structable_read:"form_child.paysrc",cdlist:{query:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='PAYSRC' orderby c_cdlist.cdidx",cdgrp:"IFC",cdname:"PAYSRC"},data_default:"",data_mode:"cdlist",query_data:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='PAYSRC' orderby c_cdlist.cdidx",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',col_format:"@c_cdlist.caption",json_data:"[]",key_selected:"c_cdlist.cdid",useAction:"true"},role:{disabled:"",visible:"",other:"",other2:""},property:{},validate:{request:!1},lang:{ui:{vi:{"Payment source":"Payment source"},en:{"Payment source":"Payment source"}}},configAVD:{},inputtype:"jSelect"},{default:{name:"Value",code:"ifcval",codeHidden:"399d64cdf7409c9a",class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.ifcval",structable_read:"form_child.ifcval",data_default:"",format:"#,###.00",decimal_length:"5"},role:{visible:"",disabled:""},property:{},validate:{request:!1,min:0,max_length:16},lang:{},configAVD:{},inputtype:"jCurrency"},{default:{name:"Value Type",code:"valtype",codeHidden:"ef35ff134e49edbd",class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.valtype",structable_read:"form_child.valtype",cdlist:{query:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='VALTYPE' orderby c_cdlist.cdidx",cdgrp:"IFC",cdname:"VALTYPE"},data_default:"",data_mode:"cdlist",query_data:"select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='IFC'&&wf.c_cdlist.cdname==='VALTYPE' orderby c_cdlist.cdidx",is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",table_format:'[\n        {\n            "title": "Name",\n            "code": "col.col_name"\n        },\n        {\n            "title": "ID",\n            "code": "col.col_id"\n        }\n    ]',col_format:"@c_cdlist.caption",json_data:"[]",key_selected:"c_cdlist.cdid",useAction:"false"},role:{disabled:"",visible:"",other:"",other2:""},property:{},validate:{request:!1},lang:{ui:{vi:{"Value Type":"Value Type"},en:{"Value Type":"Value Type"}}},configAVD:{},inputtype:"jSelect"},{default:{name:"valtypect",code:"valtypect",codeHidden:"19aaddd5d0ee664c",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',useAction:"true",is_upperCase:"false",action:"",structable:"form_child.valtypect",structable_read:"form_child.valtypect",data_default:"",isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_disabled:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"cTextInput"}]},{name:"M?u view",code:"code",codeHidden:"ed54c39ee7144f0b",inputtype:"cView",isTab:"false",class:"col-sm-12",list_input:[{default:{name:"Add",code:"btn_add",codeHidden:"p5685f65655469i59",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"default_save",txFoActions:'[\n    {\n        "function": "own_O9_fee.FeeAdd",\n        "status": "A",\n        "para": [\n            "form_child"\n        ]\n    }\n]',txFo:'[\n    {\n        "txcode": "#sys:fo-clearDataFormChild",\n        "input": {\n            "node_clear": "linkage_detail"\n        }\n    }\n]',useAction:"true",icon:"fa-plus",color:"primary",onTable:"",isMasterData:"false",tableMasterData:"word_typing",privateKeyTableMasterData:"id"},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{default:{name:"Apply",code:"btn_apply",codeHidden:"3261a21a29bfc6f5",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"",txFoActions:"",txFo:'[\n    {\n        "txcode": "fo-convert-dataFee-formchild",\n        "input": {}\n    }\n]',useAction:"false",icon:"fa-floppy-o",color:"success",onTable:"",isMasterData:"false",tableMasterData:"",privateKeyTableMasterData:""},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{default:{name:"",code:"table_fee",codeHidden:"p6d5o69he73n34",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:"form_child.ifcfees",query_data:"ifcfees",paging_record:"5",columns:'[{ "code": "ifcfees.ifccd", "title": "IFC code",  "inputtype": "ColumnString",  "config": {}   }, { "code": "ifcfees.valtype",     "title": "Value type", "inputtype": "ColumnCdlist", "config": {"cdgrp": "IFC","cdname": "VALTYPE"}    },    {        "code": "ifcfees.ifcval",        "title": "Value",        "inputtype": "columnCurrency",        "config": {            "decimal_length": "5"        }    },    {        "code": "ifcfees.ifcbamt",        "title": "Fee",  "isSum": true,  "sumTitle": "Total Amount",        "inputtype": "columnCurrency",        "config": {            "decimal_length": "2"        }    },    {        "code": "ifcfees.flrval",        "title": "Floor",        "inputtype": "columnCurrency",        "config": {            "decimal_length": "2"        }    },    {        "code": "ifcfees.ceival",        "title": "Ceiling",        "inputtype": "columnCurrency",        "config": {            "decimal_length": "2"        }    },    {        "code": "ifcfees.ccrcd",        "title": "Currency",        "inputtype": "ColumnString",        "config": {}    }]'},role:{},property:{},validate:{},lang:{vi:{"IFC code":"IFC code","Value type":"Value type",Value:"Value",Fee:"Fee",Floor:"Floor",Ceiling:"Ceiling",Currency:"Currency"},en:{"IFC code":"IFC code","Value type":"Value type",Value:"Value",Fee:"Fee",Floor:"Floor",Ceiling:"Ceiling",Currency:"Currency"}},configAVD:{},inputtype:"jTableForm"}]},{name:"M?u view",code:"formchild",codeHidden:"1cacae7586c074d8",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Modify",code:"btn_modify",codeHidden:"p6d988np4t55480",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"default_view",txFoActions:'[\n    {\n        "function": "own_O9_fee.FeeModify",\n        "status": "A",\n        "para": [\n            "form_child"\n        ]\n    }\n]',txFo:'[\n    {\n        "txcode": "#sys:fo-selectDataFormChild",\n        "input": {\n            "node_set": "linkage_detail"\n        }\n    }\n]',useAction:"true",icon:"fa-edit",color:"warning",onTable:"table_fee",isMasterData:"true",tableMasterData:"word_typing",privateKeyTableMasterData:"id"},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{default:{name:"Remove",code:"btn_remove",codeHidden:"sp5555D4c33A84j",class:"",condition:"",ofgroup:"false",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"default_delete",txFoActions:'[\n    {\n        "function": "own_O9_fee.FeeRemove",\n        "status": "A",\n        "para": [\n            "ifcfees"\n        ]\n    }\n]',txFo:"[]",useAction:"true",icon:"fa-trash",color:"danger",onTable:"table_fee",isMasterData:"true",tableMasterData:"word_typing",privateKeyTableMasterData:"id"},role:{visible:"",disabled:""},property:{danger:"",warning:""},validate:{},lang:{},configAVD:{},inputtype:"cButton"}]}]}],react_txt:""};var Et={error:[]};class Ot{static readComponentCode(e){return e.split(" ").join("")}static exceptionAuto(e,t,a){Et.error.push({key:e,content:t,priority:a})}static getParaAPI(e){if("string"!==typeof e)return[];let t=[];var a=new RegExp("{([^@{}]*)}","g");let i=a.exec(e);for(;i;)t.push({key:i[0],code:i[1]}),i=a.exec(e);return t}static getParaFunction(e){if("string"!==typeof e)return[];let t=[];var a=new RegExp("\\((.*)\\)","g");let i=a.exec(e);for(;i;)t.push({key:i[0],code:i[1]}),i=a.exec(e);return t}}Ot.convertComponentType=e=>{switch(e.cpn_type){case"LBL":e.cpn_type="Label",e.cpn_name=e.api_main_node,e.value_type="Text";break;case"TXT":e.cpn_type="Text box",e.value_type="Text";break;case"CBO":e.cpn_type="Combo box";break;case"MKD":e.cpn_type="Date",e.value_type="Long Date",e.mask="DD/MM/YYYY";break;case"CCY":e.cpn_type="Currency",e.value_type="Number",e.mask=e.fdec+"";break;case"MKN":e.cpn_type="Number",e.value_type="Number",e.mask=e.mask.replace(/#/g,"_");break;case"MKT":e.cpn_type="MaskNumber",e.value_type="Text",e.mask=e.mask.replace(/#/g,"_");break;case"TET":e.cpn_type="Text box",e.value_type="Text",e.mask.length>0&&(e.cpn_type="MaskNumber",e.mask=e.mask.replace(/#/g,"_"));break;case"CHK":e.cpn_type="Check box"}return e},Ot.convertMask=e=>(""===e.mask&&0===e.cpn_type.indexOf("Mask")&&(e.cpn_type="Text box"),e),Ot.convertValuetype=(e,t)=>{let a=e.value_type;switch(a){case"J":e.value_type="Text",t&&(null===t||void 0===t?void 0:t.cpn_child_name)?e.cpn_type="Mutivalue":e.cpn_type="Text box";break;case"D":e.value_type="Long Date";break;case"C":e.value_type="Text";break;case"N":e.value_type="Number";break;case"L":e.value_type="";break;default:console.error(e,"convertValuetype==>",a)}return e},Ot.convertDefaultFO=e=>{let t=e.data_default||"";switch(t){case"#ADD_MONTHS(O9SYS.O9CORE.GETBUSDATE,12)":e.data_default='libDate_cal(${user_acc.workingdate},{"M":12})';break;case"#ADD_MONTHS(O9SYS.O9CORE.GETBUSDATE,1)":e.data_default='libDate_cal(${user_acc.workingdate},{"M":1})';break;case"#LAST_DAY(O9SYS.O9CORE.GETBUSDATE)":case"#O9CORE.GETBUSDATE":case"@O9BUSDATE":case"#O9SYS.O9CORE.GETBUSDATE":e.data_default="${user_acc.workingdate}";break;case"@CRRUSRCD":e.data_default="${user_acc.usrcode}";break;case"@CRRUSRID":e.data_default="${user_acc.usrid}";break;case"@CRRLGNAME":e.data_default="${user_acc.loginname}";break;case"@CRRBRID":e.data_default="${user_acc.branchid}";break;case"@CRRBRCD":e.data_default="${user_acc.branchcode}";break;default:(t.includes("%")||t.includes("@")||t.includes("#"))&&(console.log("error mask =>",t),"@CRRBCY"!==t&&console.log("row_json error===",e))}return e},Ot.convertRuleFunc=e=>{let t="",a=e.rulefunc;if(e.rulefunc)for(let i=0;i<a.length;i++){""!==t&&(t+="<br>");const e=a[i];t+=`${e.rule}(${JSON.stringify(e)})`}return e.function=t,e},Ot.convertMaxLength=e=>{let t=Number.parseInt(e.max_length);return e.min_value="",t<0?(e.max_length=-t,e.min_value=""):e.min_value=0,e.max_length=e.max_length.toString(),e.min_value=e.min_value.toString(),"descs"===e.key_name&&(e.max_length="250"),"cacnm2"===e.key_name&&(e.max_length="250"),"acnm"===e.key_name&&(e.max_length="250"),e},Ot.convertOfGroup=e=>(e.mtdata&&"Yes"===e.mtdata&&(e.is_group=e.api_main_node),e.api_main_node&&0===e.api_main_node.indexOf("txb_")&&(e.is_group=e.api_main_node.replace("txb_","")),e),Ot.addComponentHidden=e=>e,Ot.convertFdec=e=>(e.fdec&&!isNaN(e.fdec)&&(e.cpn_type="Currency",e.mask="#number."+e.fdec),e),Ot.convertDataFormFO=e=>{for(let o=0;o<e.length;o++){let s=e[o],l=e[o+1];var t,a,i;if("Button"!==s.cpn_type)(null===(t=s)||void 0===t?void 0:t.api_main_node)&&(null===(a=s)||void 0===a?void 0:a.key_name)&&!(null===(i=s)||void 0===i?void 0:i.cpn_name)&&(s.cpn_name=s.api_main_node),s=Ot.convertValuetype(s,l),s=Ot.convertComponentType(s),s=Ot.convertMask(s),s=Ot.convertDefaultFO(s),s=Ot.convertRuleFunc(s),s=Ot.convertMaxLength(s),s=Ot.convertOfGroup(s),s=Ot.convertFdec(s)}return e=Ot.addComponentHidden(e)},Ot.convertHtmlTableToArray=(e,t)=>{let a=e;a=Ot.convertDataFormFO(a);let i=[[t],[],[],[t],[t]],o=Mt;for(const s of a){let e=[];for(const t in o)if(o.hasOwnProperty(t)){const a=o[t];a>=0&&(s.hasOwnProperty(t)?("object"===typeof s[t]&&(s[t]=JSON.stringify(s[t])),e[a]=s[t].toString()):e[a]="")}i.push(e)}for(const s of i)for(let e=0;e<32;e++)s[e]||(s[e]="");return i},Ot.getCodeSmooth=e=>e=(e=(e=e.replace(/[\W]+/g," ")).toLowerCase().trim()).replace(/[\W]+/g,"_"),Ot.removeSpace=e=>e=e.replace(/ /g,""),Ot.convertArrayToJsonCPN=(e,t,a)=>{let i={};for(const o in Mt)if(Mt.hasOwnProperty(o)){const t=Mt[o];let s=e[a][t];i[o]=void 0!==s?s.trim():""}if(i.data_default=Ot.convertDataDefault(i.data_default),i.cpn_type=Ot.removeSpace(i.cpn_type),"Number"===i.cpn_type&&""!==i.mask&&(i.cpn_type="Currency"),i.api_main_node.includes("=")){let e=i.api_main_node.split("=");i.api_main_node=e[0].trim(),i.api_main_node_src=e[1].trim()}if(i.codeHidden=o.g.autoID(),""===i.key_name?i.component_code=Ot.getCodeSmooth(i.cpn_name+i.cpn_child_name):i.component_code=Ot.getCodeSmooth(i.key_name),""===i.api_main_node&&""===i.api_main_node_chil?i.table_node=Ot.getCodeSmooth(i.cpn_name+i.cpn_child_name):i.table_node=i.api_main_node+i.api_main_node_chil,""!==i.api_main_addr||""!==i.api_cpn_addr){let a=i.api_main_addr+i.api_cpn_addr,o=a.indexOf(" ");i.api_method=a.substring(0,o).trim(),i.request_url=a.replace(i.api_method,"").trim(),i.api_cpn_id=Ot.getCodeSmooth(e[0][0]+"_"+t+"_"+i.component_code+"_"+i.api_main_addr+i.api_cpn_addr)}return i.action_fo_name=Ot.removeSpace("Action"+i.cpn_type+i.cpn_name+i.cpn_child_name+"FormFO"),i.sum_name=i.cpn_name+i.cpn_child_name,"Mutivalue"===i.cpn_type&&(i.mutiform_code=Ot.getCodeSmooth(e[0][0]+"_"+i.component_code)),"Label"===i.cpn_type&&(i.no_modify="Yes"),i},Ot.convertTableToArrayJson=(e,t)=>{let a=[];for(let i=4;i<e.length;i++){let o=Ot.convertArrayToJsonCPN(e,t,i);a.push(o)}return a},Ot.getComponentWithName=(e,t)=>{for(let a=0;a<e.length;a++){const i=e[a];if(i.cpn_name===t)return i}console.error("Cant not find component --\x3e",t)},Ot.getComponentWithCode=(e,t)=>{for(let a=0;a<e.length;a++){const i=e[a];if(i.component_code===t)return i}console.error("Cant not find component --\x3e",t)},Ot.replaceRequestUrl=(e,t,a)=>{let i=e,o=Ot.getParaAPI(e);for(let s=0;s<o.length;s++){const e=o[s];let l=Ot.getComponentWithName(t,e.code);i=void 0!==l?i.replace(e.key,`@{${a}.${l.table_node}}`):i.replace(e.key,`@{${a}.${e.code}}`)}return i},Ot.buildMappingMainAPI=(e,t)=>{if(""===e.api_main_addr)return{};let a={},i="";for(let o=0;o<e.length;o++){const s=e[o];""!==s.api_main_node?(i=s.api_main_node,"Yes"!==s.no_modify&&!1===s.function.includes("auto create after save successfully")&&(a[i]=Ot.getMapFunction(e,o,i,t))):""!==s.api_main_node_chil&&("string"!==typeof a[i]&&void 0!==a[i]||(a[i]={}),"Yes"!==s.no_modify&&!1===s.function.includes("auto create after save successfully")&&(a[i][s.api_main_node_chil]=Ot.getMapFunction(e,o,i,t)||""))}return a},Ot.getMapFunction=(e,t,a,i)=>{let o=e[t];if(""!==o.cpn_child_name)switch(o.value_type){case"Text":return`MapS.dataS(${i.table+"."+a+"."+o.api_main_node_chil})`;case"Number":return`MapS.dataN(${i.table+"."+a+"."+o.api_main_node_chil})`;case"Long Date":return`MapS.dateDDMMYYYY(${i.table+"."+a+"."+o.api_main_node_chil})`;case"Text Date":return`MapS.dataS(${i.table+"."+a+"."+o.api_main_node_chil})`;default:console.error("Error MAP ====>",o)}else if(""!==o.api_main_node)switch(o.value_type){case"Text":return o.api_main_node_src?"MapS.Text"+o.api_main_node_src:`MapS.dataS(${i.table+"."+o.api_main_node})`;case"Number":return o.api_main_node_src?"MapS.Number"+o.api_main_node_src:`MapS.dataN(${i.table+"."+o.api_main_node})`;case"Long Date":return`MapS.dateDDMMYYYY(${i.table+"."+o.api_main_node})`;case"Text Date":return`MapS.dataS(${i.table+"."+o.api_main_node})`;default:return console.error("Error MAP ====>",o),`MapS.Error(data_login.${o.api_main_node})`}},Ot.countComponent=e=>{let t=0;for(let a=0;a<e.length;a++){let i=e[a];for(let e=0;e<i.list_view.length;e++){let a=i.list_view[e];for(let e=0;e<a.list_input.length;e++)t++}}return t},Ot.convertDataDefault=e=>{if(!1===e.includes("#"))return e;switch(e){case"#userbranch":return"${user_acc.branchid}";case"#usercode":return"${user_acc.usrcode}";case"#default_value":return"";default:return console.error("Error Default ====>",e),""}},Ot.convertCode=(e,t)=>{const a=/(\w+)/gm;let i,o=e;for(;null!==(i=a.exec(e));)i.index===a.lastIndex&&a.lastIndex++,t.includes(i[1].trim())&&(o=o.replace(i[1],`@{${i[1].toLocaleLowerCase()}}`));return o},Ot.convertSUBSTRING=e=>{const t=/SUBSTRING\((\w+),(\d+),(\d+)\)=(\w+)/gm;let a;for(;null!==(a=t.exec(e));)a.index===t.lastIndex&&t.lastIndex++,e=`'@{${a[1]}}'.substring(${a[2]},${a[3]})='@{${a[4]}}'`;return e},Ot.convertConditionVBtoJS=(e,t,a)=>{let i=t.split(";");if("string"!==typeof e||""===e)return"";e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/'NULL'/g," null ")).replace(/ AND /g," && ")).replace(/ OR /g," || ")).replace(/ and /g," && ")).replace(/ or /g," || ")).replace(/=/g," === ")).replace(/<>/g," !== ")).replace(/< ===/g," <= ")).replace(/=== >/g," >= ");let s=o.g.getArrayWithRegex(e,"(\\w+)");if(void 0!==s&&s.length>0)for(const g of s){let t=g.key,a=g.code;if(i.includes(a.toLowerCase())){let i=!1,s=o.g.getArrayWithRegex(e,"'([^']*)'");for(const e of s){const t=o.g.getArrayWithRegex(e.code,"(\\w+)");for(const e of t)e.code.toLocaleLowerCase()===a.toLocaleLowerCase()&&(i=!0)}!1===i&&(e=e.replace(t,`@{${a.toLowerCase()}}`))}else e=!1===isNaN(a)&&""!==a?e.replace(t,a+""):e.replace(t,""+a)}let l=o.g.getArrayWithRegex(e,"CONTAINS\\(([^)]*)\\)");if(void 0!==l&&l.length>0)for(const o of l){let t=o.key,a=o.code;e=e.replace(t,`${a.split(",")[0].trim()}.split("|").includes('${a.split(",")[1].trim()}')===true`)}let n,r=/(@{[^'}]+})([ ]*===[ ]*null)/gm,c=e;for(;null!==(n=r.exec(e));)n.index===r.lastIndex&&r.lastIndex++,c=c.replace(n[1]+n[2],`!'${n[1]}'`);for(r=/(@{[^'}]+})([ ]*!==[ ]*null)/gm;null!==(n=r.exec(e));)n.index===r.lastIndex&&r.lastIndex++,c=c.replace(n[1]+n[2],`!!'${n[1]}'`);const d=/(@{[^'}]+})([ ]*===[ ]*')/gm;for(;null!==(n=d.exec(e));)n.index===d.lastIndex&&d.lastIndex++,c=c.replace(n[1]+n[2],`'${n[1]}'${n[2]}`);const h=/(@{[^'}]+})([ ]*!==[ ]*')/gm;let _=c;for(;null!==(n=h.exec(c));)n.index===h.lastIndex&&h.lastIndex++,_=_.replace(n[1]+n[2],`'${n[1]}'${n[2]}`);_=Ot.convertSubstring_1(_),_=Ot.convertSubstring_2(_),_=Ot.convertFloor(_);let u=o.g.getArrayWithRegex(_,"(@{[^}]+})");for(const o of u)_=_.replace(o.key,o.key.toLowerCase());if((null===a||void 0===a?void 0:a.length)>0){let e=o.g.getArrayWithRegex(_,"@{([^}]+)}");_=" "+_+" ";for(const t of e){let i=Ot.getComponentWithCode(a,t.code);void 0===i&&(console.log("string_cd==",e),console.log("data_arr_json==",a),console.log("cd====",t)),void 0!==i&&"Text"===i.value_type&&(_=_.replace(` ${t.key} `,` '${t.key}' `))}}return _=_.replace(/===/g,"=="),_},Ot.convertSubstring_1=e=>{const t=/SUBSTRING\(([^,]+),(\d+),(\d+)\) === (@{\w+})/gm;let a,i=e;for(;null!==(a=t.exec(e));)a.index===t.lastIndex&&t.lastIndex++,i=i.replace(a[0],`'${a[1]}'.substring(${a[2]},${a[3]}) === '${a[4]}'`);return i},Ot.convertSubstring_2=e=>{const t=/SUBSTRING\(([^,]+),(\d+),(\d+)\) === '/gm;let a,i=e;for(;null!==(a=t.exec(e));)a.index===t.lastIndex&&t.lastIndex++,i=i.replace(a[0],`'${a[1]}'.substring(${a[2]},${a[3]}) === '`);return i},Ot.convertFloor=e=>e.replace(/FLOOR/g,"Math.floor");class It{}It.validateFormName=(e,t)=>{""===e[0][0].trim()&&t.push({row:1,col:"A",content:"Can not blank"})},It.validateFormView=(e,t)=>{""===e[4][1].trim()&&""===e[4][2].trim()||t.push({row:4,col:"A",content:'View Name Only"'})},It.validCPNName=(e,t,a)=>{""===t[0].trim()&&""===t[1].trim()&&""===t[2].trim()&&t["System"!==Mt.value_type]&&a.push({row:e,col:"A|B|C",content:"Cant not blank all"})},It.validCPNType=(e,t,a)=>{""===t[Mt.cpn_type].trim()&&""===t[0]&&t["System"!==Mt.value_type]&&a.push({row:e,col:"",value:"",content:"Cant not determined Component type"})},It.validCPNCdlist=(e,t,a)=>{let i=t[Mt.cdlist];if(""===i.trim())return;i=i.replace(/\W+/g," ").trim();let s=i.split(" ");if(2!==s.length)return void a.push({row:e,col:"",value:i,content:"Cant not determined Cdlist"});let l=s[0].trim(),n=s[1].trim();0===o.g.data_cdList(n,l).length&&a.push({row:e,col:"",value:i,content:"Don't have data CDLIST"})},It.validateDataTable=(e,t)=>{if(void 0===e||0===e.length)return[{form_name:t,row:"",col:"",value:"",content:"Not find data"}];let a=[];It.validateFormName(e,a),It.validateFormView(e,a);for(let i=4;i<e.length;i++){const t=e[i];It.validCPNName(i,t,a),It.validCPNType(i,t,a)}return a.forEach(e=>{void 0===e.form_name&&(e.form_name=t)}),a};var Ft=It;a(200);var Lt=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt();return l.inputtype="cTextInput",l.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:this.buildClass(o),condition:"",role:"",ofgroup:o.is_group},l.config={action:"",structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:o.data_default,isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:""},l.validate={request:"Yes"===o.required,min:""===o.min_value?void 0:parseInt(o.min_value),max:""===o.max_length?void 0:parseInt(o.max_length)},"descs"===l.default.component_code&&Number(l.validate.max)<100&&(l.validate.max="100"),l},this.buildClass=e=>{let t=e.max_length;return""===t||(t=parseInt(t)),"col-sm-12 col-md-6"}}};var jt=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a];let l=Ot.getComponentWithName(e,"Search")||{},n=[{txcode:"#sys:fo-delete-dataAPI",input:{table_code:s.table,table_col_key:"",learn_api:o.api_cpn_id,learn_api_search:l.api_cpn_id}}];return JSON.stringify(n)}}};var Rt=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a];let l=[{txcode:"#sys:fo-search-API",input:{list_component:o.component_code,list_view:"code",table_code:s.table,learn_api:o.api_cpn_id}}];return JSON.stringify(l)}}};var zt=class{constructor(){this.build=(e,t,a,i)=>{let o="",s=i.Add;void 0!==s&&(o=s.form_code);let l=[{txcode:"#sys:fo-open-form",input:{form_key:o}}];return JSON.stringify(l)}}};var Pt=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a];let l="",n=i.View;void 0!==n&&(l=n.form_code);let r=[{txcode:"#sys:fo-view-openForm",input:{table_code:s.table,table_col_key:"",form_key:l,learn_api:o.api_cpn_id}}];return JSON.stringify(r)}}};var Ut=class{constructor(){this.build=(e,t,a,i)=>{i.Add;return JSON.stringify([{txcode:"#sys:fo-form-clear",input:{}}])}}};var Vt=class{constructor(){this.build=(e,t,a,i)=>{const o=i[a];let s=[{txcode:"#sys:fo-copy-thisForm",input:{listDelete:this.buildListDelete(e,o)}}];return JSON.stringify(s)},this.buildListDelete=(e,t)=>{let a="";for(const i of e)i.function.includes("auto create after save successfully")&&(a+=t.table+"."+i.api_main_node+";");return a}}};var Bt=class{constructor(){this.build=(e,t,a,i)=>{let o="",s=i.Search;void 0!==s&&(o=s.form_code);let l=[{txcode:"#sys:fo-open-form",input:{form_key:o}}];return JSON.stringify(l)}}};var Ht=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t];let s=[{txcode:"#sys:fo-create-dataAPI",input:{list_component:"*",list_view:"",table_code:i[a].table,learn_api:o.api_cpn_id}}];return JSON.stringify(s)}}};var Yt=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t];let s=[{txcode:"#sys:fo-create-dataAPI",input:{list_component:"*",list_view:"",table_code:i[a].table,learn_api:o.api_cpn_id}}];return JSON.stringify(s)}}};var Qt=class{constructor(){this.build=(e,t,a,i)=>{const o=i[a];let s="",l=i.Add;void 0!==l&&(s=l.form_code);let n=[{txcode:"#sys:fo-copy-thisForm",input:{listDelete:this.buildListDelete(e,o),form_code:s}}];return JSON.stringify(n)},this.buildListDelete=(e,t)=>{let a="";for(const i of e)i.function.includes("auto create after save successfully")&&(a+=t.table+"."+i.api_main_node+";");return a}}};var Gt=class{constructor(){this.build=(e,t,a,i)=>{let o="",s=i.Search;void 0!==s&&(o=s.form_code);let l=[{txcode:"#sys:fo-open-form",input:{form_key:o}}];return JSON.stringify(l)}}};var Jt=class{constructor(){this.build=(e,t,a,i)=>{let o="",s=i.Add;void 0!==s&&(o=s.form_code);let l=[{txcode:"#sys:fo-open-form",input:{form_key:o}}];return JSON.stringify(l)}}};var Wt=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t];let s=[{txcode:"#sys:fo-create-dataAPI",input:{list_component:"*",list_view:"",table_code:i[a].table,learn_api:o.api_cpn_id}}];return JSON.stringify(s)}}};var qt=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t];let s=[{txcode:"fo-create-dataAPI-sanction",input:{list_component:"*",list_view:"",table_code:i[a].table,learn_api:o.api_cpn_id,check_sanction_api:"O9_check_sanction",check_sanction_rules:this.buildCheckSanctionRule(o)}}];return JSON.stringify(s)},this.buildCheckSanctionRule=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(e.rulefunc)||[];return t.map(e=>({value:e.value,error:e.error}))}}};var Kt={ActionButtonSearchFormSearch:Rt,ActionButtonDeleteFormSearch:jt,ActionButtonAddFormSearch:zt,ActionButtonSearchFormAdd:Bt,ActionButtonCopyFormAdd:Vt,ActionButtonClearFormAdd:Ut,ActionButtonSaveFormAdd:Ht,ActionButtonViewFormSearch:Pt,ActionButtonAcceptFormAdd:Yt,ActionButtonCopyFormView:Qt,ActionButtonSearchFormView:Gt,ActionButtonAddFormView:Jt,ActionButtonSaveFormView:Wt,ActionButtonAcceptFormFO:qt,ActionButtonClearFormFO:class{constructor(){this.build=(e,t,a,i)=>{i.Add;return JSON.stringify([{txcode:"#sys:fo-form-clear",input:{}}])}}}};var Zt=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt(),n=o.cpn_name+o.cpn_child_name;l.default={name:n,code:o.component_code,codeHidden:o.codeHidden,class:"",condition:"",role:""};let r=wt[n]||{};return l.config={useAction:"false",action:"",structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:"",color:r.color||"",icon:r.icon||"",txFo:this.buidTxFO(e,t,a,i),onTable:this.buildOnTable(e,t,a,i)},l.inputtype="cButton",l.config.onTable&&(l.default.class="",l.default.name=""),l},this.buildOnTable=(e,t,a,i)=>{const o=e[t];let s=Ot.getParaFunction(o.function);if(s.length>0){let t=Ot.getComponentWithName(e,s[0].code);if(void 0!==t)return t.component_code}return""},this.buidTxFO=(e,t,a,i)=>{const o=e[t];if(Kt[o.action_fo_name]){return(new Kt[o.action_fo_name]).build(e,t,a,i)}}}};var Xt=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a].table;return this.component_config=Nt(),this.component_config.inputtype="jTableForm",this.component_config.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:"col-sm-12 col-md-12",condition:"",role:""},this.component_config.config={structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,query_data:`${s}.${o.component_code}`,columns:this.getListCol(e,t+1,s,o)},this.component_config},this.getListCol=(e,t,a,i)=>{let o=[],s=e[t];for(;void 0!==s&&""===s.cpn_name&&""!==s.cpn_child_name;)o.push(this.buildColConfig(e,t,a,i)),s=e[++t];return JSON.stringify(o)},this.buildColConfig=(e,t,a,i)=>{let o=e[t],s={code:i.component_code+"."+o.table_node,title:o.cpn_child_name,inputtype:"ColumnString",config:{}};switch(o.cpn_type){case"TableColMedia":s.inputtype="columnImg";break;case"TableColMask":s.config.mask=o.mask,s.inputtype="columnMask";break;case"Currency":s.inputtype="columnCurrency"}return s}}};var $t=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt();return l.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:o.is_group},l.config={structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:o.data_default,data_type:"edit",mask_format:o.mask,mask_data_format:"",value_type:"all",mask_mode:"default"},l.validate={request:"Yes"===o.required},l.inputtype="jMaskInput",l}}};var ea=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt();return l.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:o.is_group},l.config={structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:o.data_default,data_type:"edit",mask_format:o.mask,mask_data_format:"",value_type:"number",mask_mode:"default"},l.validate={request:"Yes"===o.required},l.inputtype="jMaskInput",("cfrser"===o.component_code||"ctoser"===o.component_code||o.mask.includes("AA"))&&(l.config.value_type="all",l.config.mask_format=l.config.mask_format.replace(">AA","__"),l.config.mask_format=l.config.mask_format.replace("AA","__")),l}}};var ta=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt();return l.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:o.is_group},l.config={structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:o.data_default,data_type:"edit",mask_format:o.mask,mask_data_format:"YYYY-MM-DD",value_type:"number",mask_mode:"date"},l.validate={request:"Yes"===o.required},l.inputtype="jMaskInput",l}}};var aa=class{constructor(){this.build=(e,t,a,i)=>""!==e[t].api_cpn_addr?this.buildAPI(e,t,a,i):this.buildCdlist(e,t,a,i),this.buildAccountListO9=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt();return l.inputtype="jSelect",l.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:o.is_group},l.config={structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:o.data_default,data_mode:"query",cdlist:{query:"",cdgrp:"",cdname:""},is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",col_format:"@c_cdlist.caption",table_format:"",key_selected:"c_cdlist.cdid",json_data:"[]"},l.validate={request:"Yes"===o.required,min:o.min_value,max:o.max_length},l},this.buildCdlist=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt(),n=o.cdlist;n=n.replace(/\W+/g," "),n=n.trim();let r=n.split(" "),c="",d="";return 2===r.length&&(c=r[1].trim(),d=r[0].trim()),l.inputtype="jSelect",l.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:""},l.config={structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:o.data_default,data_mode:""!==o.cdlist?"cdlist":"query",cdlist:{query:`select c_cdlist.cdid,c_cdlist.cdname,c_cdlist.caption,c_cdlist.cdval,c_cdlist.cdidx from c_cdlist where wf.c_cdlist.cdgrp==='${c}'&&wf.c_cdlist.cdname==='${d}'`,cdgrp:c,cdname:d},is_multi_select:"false",is_multi_col:"false",get_data_format:"c_cdlist.cdid",selected_view_format:"@c_cdlist.caption",col_format:"@c_cdlist.caption",table_format:'[\n                {\n                    "title": "Name",\n                    "code": "c_cdlist.caption"\n                },\n                {\n                    "title": "ID",\n                    "code": "c_cdlist.cdid"\n                }\n            ]',key_selected:"c_cdlist.cdid",json_data:"[]"},l.validate={request:"Yes"===o.required,min:o.min_value,max:o.max_length},l},this.buildAPI=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt();return l.inputtype="jSelect",l.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:""},l.config={structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:o.data_default,data_mode:"query",query_data:"select * from "+o.component_code,is_multi_select:"false",is_multi_col:"false",get_data_format:o.component_code+".cdid",selected_view_format:`@${o.component_code}.caption`,col_format:`@${o.component_code}.caption`,table_format:"[]",key_selected:o.component_code+".cdid",json_data:"[]"},l.validate={request:"Yes"===o.required,min:o.min_value,max:o.max_length},l}}};var ia=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt();return l.inputtype="jMutiValue",l.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:"col-sm-12 col-md-12",condition:"",role:""},l.config={structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:"",callform:o.mutiform_code,is_open:"false",has_default:"false"},l.validate={},l}}};var oa=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt();return l.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:o.is_group},l.config={structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:o.data_default,decimal_length:this.getRounding(o.mask),format:"#,###.00"},l.validate={request:"Yes"===o.required,max:o.max_value,min:o.min_value,max_length:o.max_length},l.inputtype="jCurrency",l},this.getRounding=e=>e.includes("#number")?e.split(".")[1]:e}};var sa=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt();return l.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:"col-sm-12 col-md-3",condition:"",role:"",ofgroup:o.is_group},l.config={structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:o.data_default,decimal_length:"0",format:"#,###.00"},l.validate={request:"Yes"===o.required,min:o.min_value,max:o.max_value,max_length:o.max_length},l.inputtype="jCurrency",l},this.getRounding=e=>e.includes("#number")?e.split(".")[1]:e}};var la=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt();return l.inputtype="jCheckbox",l.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:this.buildClass(o),condition:"",role:""},l.config={structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:o.data_default},l.validate={request:"Yes"===o.required,min:o.min_value,max:o.max_length},l},this.buildClass=e=>{let t=e.max_length;return""===t?"col-sm-12 col-md-3":(t=parseInt(t),t>=100?"col-sm-12 col-md-6":"col-sm-12 col-md-3")}}};var na=class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt();return l.inputtype="jLabel",l.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:this.buildClass(o),condition:"",role:"",ofgroup:o.is_group},l.config={action:"",structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:o.data_default},l.validate={min:o.min_value,max:o.max_length},l},this.buildClass=e=>"col-sm-12 col-md-3"}};var ra={Textbox:Lt,Button:Zt,Table:Xt,MaskText:$t,Date:ta,Combobox:aa,Mutivalue:ia,Currency:oa,Number:sa,MaskNumber:ea,Checkbox:la,Label:na,Lookup:class{constructor(){this.build=(e,t,a,i)=>{const o=e[t],s=i[a].table;let l=Nt();return l.inputtype="cTextInput",l.default={name:o.cpn_name+o.cpn_child_name,code:o.component_code,codeHidden:o.codeHidden,class:this.buildClass(o),condition:"",role:"",ofgroup:o.is_group},l.config={action:"",structable:s+"."+o.table_node,structable_read:s+"."+o.table_node,data_default:o.data_default,isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:""},l.validate={request:"Yes"===o.required,min:""===o.min_value?void 0:parseInt(o.min_value),max:""===o.max_length?void 0:parseInt(o.max_length)},l},this.buildClass=e=>{let t=e.max_length;return""===t?"col-sm-12 col-md-3":(t=parseInt(t),t>=100?"col-sm-12 col-md-6":"col-sm-12 col-md-3")}}}};var ca=class{constructor(){this.build=(e,t,a)=>{let i=a.table,o=a.name_input;const s=e[t];let l={},n=Date.now(),r=s.api_cpn_id;if(void 0!==r&&""!==r)return l={learn_api_name:i+" "+s.cpn_child_name+s.cpn_name+" "+o,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+Ot.replaceRequestUrl(s.request_url,e,i),learn_api_data:i,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:s.api_method,learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:this.buildMapping(e,t,a),learn_api_id:r,AFGHkeyIndexWJ:r,AFGHkeyTime:n,AFGHkeyWorkFlow:"",AFGHTimeWJ:n,app_code:"o9_fo",save_to:this.build_save_to(s)},l},this.build_save_to=e=>{switch(e.cpn_type){case"Table":return"form";case"Combobox":return"client"}},this.buildMapping=(e,t,a)=>{if(""===e[t].api_main_addr)return"{}";let i=Ot.buildMappingMainAPI(e,a);return"btn_accept"===e[t].component_code&&(i.approverid="MapS.dataN(user_approve.usrid)"),JSON.stringify(i)}}};var da=class{constructor(){this.build=(e,t,a)=>{let i=a.table,o=a.name_input;const s=e[t];let l={},n=Date.now(),r=s.api_cpn_id;if(void 0!==r&&""!==r)return l={learn_api_name:i+" "+s.cpn_child_name+s.cpn_name+" "+o,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+Ot.replaceRequestUrl(s.request_url,e,i),learn_api_data:i,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:s.api_method,learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:this.buildMapping(e,t,a),learn_api_id:r,AFGHkeyIndexWJ:r,AFGHkeyTime:n,AFGHkeyWorkFlow:"",AFGHTimeWJ:n,app_code:"o9",save_to:this.build_save_to(s)},l},this.build_save_to=e=>{switch(e.cpn_type){case"Table":return"form";case"Combobox":return"client"}},this.buildMapping=(e,t,a)=>{if(""===e[t].api_main_addr)return"{}";return JSON.stringify(Ot.buildMappingMainAPI(e,a))},this.buildLearnAPIdata=()=>{}}};var ha=class{constructor(){this.build=(e,t,a)=>{let i=a.table,o=a.name_input;const s=e[t];let l={},n=Date.now(),r=s.api_cpn_id;if(void 0!==r&&""!==r)return l={learn_api_name:i+" "+o+"-"+s.cpn_child_name+s.cpn_name,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+Ot.replaceRequestUrl(s.request_url,e,i),learn_api_data:this.buildLearnAPIdata(s,i),learn_api_node_data:""!==s.node_data?s.node_data:"data",learn_api_app:"BO",learn_api_method:s.api_method,learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:"",learn_api_id:r,AFGHkeyIndexWJ:r,AFGHkeyTime:n,AFGHkeyWorkFlow:"",AFGHTimeWJ:n,app_code:"o9",save_to:this.build_save_to(s)},l},this.build_save_to=e=>{switch(e.cpn_type){case"Table":return"form";case"Combobox":return"client"}},this.buildLearnAPIdata=(e,t)=>""!==e.api_main_addr||"Button"===e.cpn_type?t:e.component_code}};var _a={POST:ca,PUT:da,GET:ha,DELETE:class{constructor(){this.build=(e,t,a)=>{let i=a.table,o=a.name_input;const s=e[t];let l={},n=Date.now(),r=s.api_cpn_id;if(void 0!==r&&""!==r)return l={learn_api_name:i+" "+s.cpn_child_name+s.cpn_name+" "+o,learn_api_link:"$API_SERVER$:$API_PORT_DATA$"+Ot.replaceRequestUrl(s.request_url,e,i),learn_api_data:i,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:s.api_method,learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:"",learn_api_id:r,AFGHkeyIndexWJ:r,AFGHkeyTime:n,AFGHkeyWorkFlow:"",AFGHTimeWJ:n,app_code:"o9",save_to:this.build_save_to(s)},l},this.build_save_to=e=>{switch(e.cpn_type){case"Table":return"form";case"Combobox":return"client"}}}}};var ua={AUTO_CLEAR_FEE:class{constructor(){this.build=(e,t,a,i)=>{let o=e[t],s=this.buildCondition(e,t,a,i);return{rule_config:{code:"runFo",config:{component_action:o.component_code,component_event:"enter_tab",txFoActions:'[{"function": "own_O9_fee.autoClearFee","status": "A","para": ["'+s.component_result+'"]}]',useAction:"true",condition:"'@{txrefid}' === \"\"",component_result:""},isStart:!1,inUse:!0,order:1}}},this.buildCondition=(e,t,a,i)=>{let s=Ot.getParaFunction(i)||[];if(0===s.length)return{};let l=s[0].code||"";return{content:l,component_result:(o.g.parseJson(l)||{}).relf+";form_fee;form_fee(table_fee)"}}}},startDisable:class{constructor(){this.build=(e,t)=>({code:"visibility",config:{component_event:"on_change",component_action:"",component_result:this.buildComponentResult(e),condition:"",visible:"not_use",ena_dis:"true",view_result:""},isStart:!0,inUse:!0,order:1}),this.buildComponentResult=e=>{let t="";for(let a=0;a<e.length;a++){const i=e[a];"Yes"!==i.disable&&"Yes"!==i.no_modify||(t+=i.component_code+";")}return t}}},startHidden:class{constructor(){this.build=(e,t)=>({code:"visibility",config:{component_event:"on_change",component_action:"",component_result:this.buildComponentResult(e)+";errorJWebUI_code;txrefid;btn_printVoucher",condition:"",visible:"false",ena_dis:"not_use",view_result:""},isStart:!0,inUse:!0,order:1}),this.buildComponentResult=e=>{let t="";for(let a=0;a<e.length;a++){const i=e[a];"Yes"===i.hidden&&(t+=i.component_code+";")}return t}}},startModify:class{constructor(){this.build=(e,t)=>({code:"visibility",config:{component_event:"on_click",component_action:this.buildComponenAction(e),component_result:this.buildComponentResult(e),condition:"",visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:1}),this.buildComponentResult=e=>{let t="";for(let a=0;a<e.length;a++){const i=e[a];"Yes"===i.disable&&"Yes"!==i.no_modify&&(t+=i.component_code+";")}return t},this.buildComponenAction=e=>{for(let t=0;t<e.length;t++){const a=e[t];if("Modify"===a.cpn_name)return a.component_code}return""}}},only:class{constructor(){this.build=(e,t,a,i)=>{let o=e[t],s=this.buildCondition(e,t,a,i);return{code:"managerComponent",config:{component_event:"on_change",component_action:s.component_action,is_use_block:"false",component_manager:JSON.stringify({[o.component_code]:s.content})},isStart:!0,inUse:!0,order:1}},this.buildCondition=(e,t,a,i)=>{let s=Ot.getParaFunction(i)||[];if(0===s.length)return{content:i};let l=s[0].code||"",n=l.split("AND"),r="";for(let c of n){let i="",s="";c.includes("#")?(i=c.split("#")[0].trim(),s=c.split("#")[1].trim()):c.includes("=")&&(i=c.split("=")[0].trim(),s=c.split("=")[1].trim());let n=Ot.getComponentWithName(e,i)||{},d=n.component_code||i,h=[],_=s;if(void 0!==n.cdlist&&""!==n.cdlist){let e=n.cdlist.split(",");h=o.g.data_cdList(e[1].trim(),e[0].trim());let i=!1;for(let t=0;t<h.length;t++){const e=h[t];e.c_cdlist.caption.toLowerCase()===s.trim().toLowerCase()&&(_=e.c_cdlist.cdid,i=!0)}!1===i&&console.error(a.name_input,"--\x3e",t,"Not Find==>",s)}l=l.replace(i,`'@{${d}}'`),l=l.replace(s,`'${_}'`);let u=n.cdlist||"";u=u.replace(",",";"),r+=d+";"}return l=l.replace(/=/g,"==="),l=l.replace(/#/g,"!=="),l=l.replace(/ AND /g,"&&"),{content:l,component_action:r}}}},auto_create_after_save_successfully:class{constructor(){this.build=(e,t,a,i)=>[this.buildUndisableRule(e,t,a,i),this.buildDisableRule(e,t,a,i)],this.buildUndisableRule=(e,t,a,i)=>{let o=e[t];return{code:"visibility",config:{component_event:"on_change",component_action:o.component_code,component_result:"copy",condition:`'@{${o.component_code}}'!==""`,visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:1}},this.buildDisableRule=(e,t,a,i)=>{let o=e[t];return{code:"visibility",config:{component_event:"on_change",component_action:o.component_code,component_result:"*;clear;save",condition:`'@{${o.component_code}}'!==""`,visible:"not_use",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:1}}}},this_is_parent_of:class{constructor(){this.build=(e,t,a,i)=>{let o=this.buildContext(e,t,a,i);return{code:"setDataGB",config:{component_event:"on_change",component_action:o.component_action,component_result:o.component_result,data_type:o.data_type,query:o.query,filter_condition:o.filter_condition},isStart:!0,inUse:!0,order:1}},this.buildContext=(e,t,a,i)=>{let o=e[t],s=Ot.getParaFunction(i)[0]||{};s=s.code||"",s=s.trim();let l=void 0;for(let r=t;r<e.length;r++){const t=e[r];if(t.sum_name===s){l=t;break}}if(void 0===l)return{};let n=l.cdlist;return n=n.replace(/\W/g," "),n=n.trim(),n=n.replace(" ",";"),{component_action:o.component_code,component_result:l.component_code,data_type:"query",query:n,filter_condition:this.filter_condition(n,o)}},this.filter_condition=(e,t)=>{let a=["DISTRICT","COMMUNE","VILLAGE"];for(const i of a)return e.includes(i)?`{ "c_cdlist.cdid": "^@{${t.component_code}}\\\\w{2,2}$" }`:`{ "c_cdlist.cdid": "^@{${t.component_code}}" }`}}},errorJWebUI:class{constructor(){this.build=(e,t,a,i)=>[this.buildUndisableRule(e,t,a,i),this.buildDisableRule(e,t,a,i)],this.buildUndisableRule=(e,t,a,i)=>({code:"visibility",config:{component_event:"on_change",component_action:"errorJWebUI_code",component_result:"copy",condition:"'@{errorJWebUI_code}'==\"0\"",visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:1}),this.buildDisableRule=(e,t,a,i)=>({code:"visibility",config:{component_event:"on_change",component_action:"errorJWebUI_code",component_result:"*;clear;save",condition:"'@{errorJWebUI_code}'==\"0\"",visible:"not_use",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:1})}},startClear:class{constructor(){this.build=(e,t)=>({code:"visibility",config:{component_event:"on_click",component_action:this.buildComponenAction(e),component_result:this.buildComponentResult(e)+";btn_accept",condition:"",visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:1}),this.buildComponentResult=e=>{let t="";for(let a=0;a<e.length;a++){const i=e[a];"Yes"!==i.disable&&(t+=i.component_code+";")}return t},this.buildComponenAction=e=>{for(let t=0;t<e.length;t++){const a=e[t];if("Clear"===a.cpn_name)return a.component_code}return""}}},GET_SIG:class{constructor(){this.build=(e,t,a,i)=>{let o=e[t],s=this.buildCondition(e,t,a,i);const l=o.component_code;let n={default:{name:l+"sign",code:l+"sign",codeHidden:"f9df3c6d3aecec48",class:"",condition:"",ofgroup:o.component_code,class_ofgroup:"col-sm-12 col-md-12",role:""},config:{action:"",structable:"table.col",structable_read:"",data_default:""},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jSignature"};return{rule_config:{code:"getInfo",config:{component_event:"enter_tab",component_action:o.component_code,component_result:`{"${l}sign":"${s.api_config.learn_api_data}.MEDIA"}`,isSetCode:"true",data_type:"api",api_id:s.api_config.learn_api_id,sql_id:"",data_table:"",exception:"",api_bo:"",sql_bo:"",data_bo:""},inUse:!0,order:1,isStart:!1},api_config:s.api_config,new_component:n}},this.buildCondition=(e,t,a,i)=>{let s=Ot.getParaFunction(i)||[];if(0===s.length)return{};let l=s[0].code||"";const n=o.g.parseJson(l)||{};return{api_config:this.buildAPI(n,e,t,a)}},this.buildAPI=(e,t,a,i)=>{const o=e.api,s=Ot.getCodeSmooth(o.split(" ")[1]);let l=this.buildMapping(t,a,i),n=e.data.split(";"),r={};return n.forEach(e=>{l[e]?r[e]=l[e]:r.MDL=e.toUpperCase()}),{learn_api_name:s,learn_api_link:"$API_SERVER$:$API_PORT_DATA$/"+o.split(" ")[1],learn_api_data:s,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:o.split(" ")[0],learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(r),learn_api_id:s,AFGHkeyIndexWJ:s,AFGHkeyTime:1577163079652,AFGHkeyWorkFlow:"",AFGHTimeWJ:1577163079974,app_code:"o9"}},this.buildMapping=(e,t,a)=>Ot.buildMappingMainAPI(e,a),this.converMaplogin=e=>{switch(e){case"crrbrid":return"branchid";case"crrbrcd":return"branchcode";case"o9busdate":return"workingdate";case"crrusrid":return"usrid";case"crrusrcd":return"usrcode";case"crrlgname":return"loginname";default:console.log("Key error=>",e)}}}},GET_INFO:class{constructor(){this.checkIsStart=(e,t)=>{let a=!1;for(const i of e){i.component_code===t&&"Combobox"===i.cpn_type&&(a=!0)}return a},this.build=(e,t,a,i)=>{let o=e[t],s=this.buildCondition(e,t,a,i),l="'@{txrefid}' === \"\"";return s.condition&&(l+=" && ("+s.condition+")"),{rule_config:{code:"getInfo",config:{component_event:"enter_tab",component_action:o.component_code,component_result:s.component_result,isSetCode:"true",data_type:"api",api_id:s.api_config.learn_api_id,condition:l,isAutoDefault:s.isAutoDefault},isStart:this.checkIsStart(e,o.component_code),isDidStart:this.checkIsStart(e,o.component_code),inUse:!0,order:s.index},api_config:s.api_config}},this.buildCondition=(e,t,a,i)=>{let s=Ot.getParaFunction(i)||[];if(0===s.length)return{};let l=s[0].code||"";const n=o.g.parseJson(l)||{};let r=this.buildAPI(n,e,t,a),c=n.relf.split(";"),d={};return c.forEach(e=>{d[e]=r.learn_api_data+"."+e}),{condition:Ot.convertConditionVBtoJS(n.actcdt,n.ftags,e),component_result:JSON.stringify(d),api_config:r,index:n.index,isAutoDefault:"Yes"===n.is_set_default}},this.buildAPI=(e,t,a,i)=>{const o=e.api,s=Ot.getCodeSmooth(o.split(" ")[1]);let l=this.buildMapping(t,a,i),n=e.data.split(";"),r={};n.forEach(e=>{l[e]?r[e]=l[e]:void 0!==this.converMaplogin(e)&&(r[e]=`MapS.context(${this.converMaplogin(e)})`)}),"ifccd"===t[a].key_name&&r.ifccd&&(r.ifccd=r.ifccd.replace(i.table+".ifccd","form_child.ifccd"));let c=i.form_code+"_"+s;return{learn_api_name:c,learn_api_link:"$API_SERVER$:$API_PORT_DATA$/"+o.split(" ")[1],learn_api_data:i.form_code+s,learn_api_node_data:"",learn_api_app:"BO",learn_api_method:o.split(" ")[0],learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(r),learn_api_id:c,AFGHkeyIndexWJ:c,AFGHkeyTime:1577163079652,AFGHkeyWorkFlow:"",AFGHTimeWJ:1577163079974,app_code:"o9"}},this.buildMapping=(e,t,a)=>Ot.buildMappingMainAPI(e,a),this.converMaplogin=e=>{switch(e){case"crrbrid":return"branchid";case"crrbrcd":return"branchcode";case"o9busdate":return"workingdate";case"crrusrid":return"usrid";case"crrusrcd":return"usrcode";case"crrlgname":return"loginname";default:console.log("Key error=>",e)}}}},LKP_DATA:class{constructor(){this.build=(e,t,a,i)=>{let s=e[t],l=this.buildContent(e,t,a,i);for(this.lookup_form='{"info":{"title":"@{key_form}_lookup","des":"@{key_form}_lookup","data":"","learnapi":"@{learnapi}","learnsql":"","openOne":"true","node_position":[],"flow_layout":[],"form_code":"@{key_form}","ruleStrong":[{"code":"runFo","config":{"component_action":"search_input","component_result":"","component_event":"enter","txFoActions":"","txFo":"[{\\"txcode\\":\\"#sys:fo-search-API\\",\\"input\\":{\\"list_component\\":\\"*\\",\\"list_view\\":\\"code\\",\\"table_code\\":\\"@{key_form}\\",\\"learn_api\\":\\"@{learnapi}\\"}}]","useAction":"false","condition":""},"inUse":true,"order":1,"isStart":true}],"key_form":"@{key_form}","ofModal":false,"bodata":""},"list_layout":[{"name":"","des":"","class":"","codeHidden":"@{codeHidden}","inputtype":"cLayout","list_view":[{"name":"","code":"code","codeHidden":"@{codeHidden}","inputtype":"cView","isTab":"false","list_input":[{"default":{"name":"Search","code":"search_input","class":"col-xl-9 col-lg-9 col-md-8 col-sm-8","role":"","condition":"","ofgroup":"","class_ofgroup":"col-sm-12 col-md-12","codeHidden":"01df544303b8bc4a"},"config":{"useAction":"true","txFoActions":"[\\n    {\\n        \\"function\\": \\"\\",\\n        \\"status\\": \\"A\\",\\n        \\"para\\": []\\n    }\\n]","txFo":"[\\n    {\\n        \\"txcode\\": \\"\\",\\n        \\"input\\": {}\\n    }\\n]","structable":"lookup.search_input","structable_read":"lookup.search_input","data_default":"","isLookup":"false","is_upperCase":"false","callform":"","callform_detail":"","callform_detail_mode":"modal","data_view":"","data_value":"","is_password":"false","is_upper":"false","action":"","autoWrap":"false","isSearch":"true"},"role":{"visible":"","disabled":""},"property":{},"validate":{"request":false,"min":"","max":"","regex_format":"","validate_html":"true"},"lang":{"vi":"","en":""},"configAVD":{},"inputtype":"cTextInput"},{"config":{"onTable":"","icon":"fa-search","color":"primary","action":"","useAction":"false","txFoActions":"[]","txFo":"[{\\"txcode\\":\\"#sys:fo-search-API\\",\\"input\\":{\\"list_component\\":\\"*\\",\\"list_view\\":\\"code\\",\\"table_code\\":\\"@{key_form}\\",\\"learn_api\\":\\"@{learnapi}\\"}}]","isMasterData":"false","tableMasterData":"","privateKeyTableMasterData":"","isLookup":"","cmd":"","callform":"","uploadfile":{"active":"false","filetype":""}},"role":{"visible":"","disabled":""},"property":{},"validate":{"request":false},"lang":{"vi":"","en":""},"configAVD":{},"inputtype":"cButton","default":{"name":"Search","code":"search_button","class":"","role":"","condition":"","ofgroup":"","class_ofgroup":"col-sm-12 col-md-12","codeHidden":"ed4481f418acd092"}},{"default":{"name":"","code":"view","codeHidden":"@{codeHidden}","class":"","condition":"","ofgroup":"false","class_ofgroup":"col-sm-12col-md-12","role":""},"config":{"action":"","txFoActions":"[{\\"function\\":\\"\\",\\"status\\":\\"A\\",\\"para\\":[]}]","txFo":"[{\\"txcode\\":\\"#sys:fo-lookup-selectData\\",\\"input\\":{}}]","useAction":"false","icon":"fa-hand-o-right","color":"info","onTable":"table_name","isMasterData":"false","tableMasterData":"","privateKeyTableMasterData":""},"role":{"visible":"","disabled":""},"property":{"danger":"","warning":""},"validate":{},"lang":{},"configAVD":{},"inputtype":"cButton"}]},{"name":"Search","code":"code","codeHidden":"@{codeHidden}","inputtype":"cView","isTab":"false","list_input":[{"config":{"structable":"","structable_read":"","query_data":"select * from @{learnapi}","columns":"[{\\"code\\":\\"@{learnapi}.0\\",\\"title\\":\\"Code\\",\\"inputtype\\":\\"ColumnString\\",\\"config\\":{}},{\\"code\\":\\"@{learnapi}.1\\",\\"title\\":\\"Name\\",\\"inputtype\\":\\"ColumnString\\",\\"config\\":{}}]"},"role":{"visible":"","disabled":""},"property":{},"validate":{"request":false},"lang":{},"configAVD":{},"inputtype":"cTableDefault","default":{"name":"","code":"table_name","codeHidden":"@{codeHidden}","class":"col-sm-12col-md-12","condition":"","role":""}}]}]}],"react_txt":""}';!0===this.lookup_form.includes("@{codeHidden}");)this.lookup_form=this.lookup_form.replace("@{codeHidden}",o.g.autoID());this.lookup_form=this.lookup_form.replace(/@{key_form}/g,a.form_code+s.component_code),this.lookup_form=this.lookup_form.replace(/@{learnapi}/g,l.API.learn_api_data);let n={isLookup:"true",callform:a.form_code+s.component_code,callform_detail:"",callform_detail_mode:"modal",data_view:l.API.learn_api_data+".1",data_value:l.API.learn_api_data+".0"},r={api_config:l.API,form:JSON.parse(this.lookup_form),cpn_config:n},c=Ot.getParaFunction(i)||[];if(0===c.length)return{};let d=c[0].code||"";let h=(o.g.parseJson(d)||{}).relf.split(";");if(h.length>1){let e={};for(let t=1;t<h.length;t++)e[h[t]]=`${l.API.learn_api_data}.${t}`;r.rule_config={code:"setValue",config:{component_event:"enter_tab",component_action:h[0],component_result:"",isGetOOP:"true",getOOPFormat:JSON.stringify(e)},inUse:!0,order:-1}}return r},this.buildContent=(e,t,a,i)=>{let s=Ot.getParaFunction(i)||[];if(0===s.length)return{};let l=s[0].code||"";const n=o.g.parseJson(l)||{};return{API:this.buildAPI(n,e,t,a)}},this.convertContent=e=>{e=(e=e.replace(/ AND /g," && ")).replace(/ OR /g," || ");let t=o.g.getArrayWithRegex(e,"[\\w]+");for(const a of t)e=e.replace(a.key,`@{${a.key}}`);return e},this.buildAPI=(e,t,a,i)=>{const o=e.api,s=Ot.getCodeSmooth(o.split(" ")[1]);let l=this.buildMapping(t,a,i),n=e.data.split(";"),r={term:"MapS.dataS(lookup.search_input)",page:0};n.forEach(e=>{l[e]?r[e]=l[e]:void 0!==this.converMaplogin(e)&&(r[e]=`MapS.context(${this.converMaplogin(e)})`)});let c=i.form_code+"_"+s;return{learn_api_name:c,learn_api_link:"$API_SERVER$:$API_PORT_DATA$/"+o.split(" ")[1],learn_api_data:c,learn_api_node_data:"data",learn_api_app:"BO",learn_api_method:o.split(" ")[0],learn_api_header:"Content-Type:application/json\nAuthorization:MapS.getToken(Bearer )",learn_api_mapping:JSON.stringify(r),learn_api_id:c,AFGHkeyIndexWJ:c,AFGHkeyTime:1577163079652,AFGHkeyWorkFlow:"",AFGHTimeWJ:1577163079974,app_code:"o9"}},this.buildMapping=(e,t,a)=>Ot.buildMappingMainAPI(e,a),this.converMaplogin=e=>{switch(e){case"crrbrid":return"branchid";case"crrbrcd":return"branchcode";case"o9busdate":return"workingdate";case"crrusrid":return"usrid";case"crrusrcd":return"usrcode";case"crrlgname":return"loginname";default:console.log("Key error=>",e)}}}},VSB_ITEM:class{constructor(){this.build=(e,t,a,i)=>{let o=e[t],s=this.buildContent(e,t,a,i),l="",n="",r="",c="";return void 0!==s&&(l=s.component_result,n=s.filter_context,r=s.cdlist,c=s.index),{rule_config:{code:"setDataGB",config:{component_event:"enter_tab",component_action:o.component_code,component_result:l,data_type:"query",query:r,query_db:"",mode_filter:"js_condition",filter_condition:"",js_condition:n},inUse:!0,order:c,isStart:!0}}},this.buildContent=(e,t,a,i)=>{let s=Ot.getParaFunction(i)||[];if(0===s.length)return{};let l=s[0].code||"";const n=o.g.parseJson(l)||{};let r=` data_gb = data_gb.filter(data=>{\n      return (${Ot.convertConditionVBtoJS(n.actcdt,n.ftags,e)}) === true;\n      })`,c=Ot.getComponentWithCode(e,n.relf);if(void 0!==c){let e=c.cdlist.split(",");e=e[0]+";"+e[1];let t=`'@{${n.relf}}'`;for(;r.includes(t);)r=r.replace(t,"data.c_cdlist.cdid");let a=`@{${n.relf}}`;for(;r.includes(a);)r=r.replace(a,"data.c_cdlist.cdid");for(;r.includes("'@{data.c_cdlist.cdid}'");)r=r.replace("'@{data.c_cdlist.cdid}'","data.c_cdlist.cdid");for(;r.includes("'data.c_cdlist.cdid'");)r=r.replace("'data.c_cdlist.cdid'","data.c_cdlist.cdid");return{cdlist:e,component_result:n.relf,index:n.index,condition:"",filter_context:r}}}}},DAB_CTL:class{constructor(){this.build=(e,t,a,i)=>{let o=e[t],s=this.buildContent(e,t,a,i);return{rule_config:[{code:"visibility",config:{component_event:"all",component_action:o.component_code,component_result:s.component_result,condition:s.condition,visible:"not_use",ena_dis:"true",view_result:""},isStart:!0,inUse:!0,order:s.index},{code:"visibility",config:{component_event:"enter_tab",component_action:o.component_code,component_result:s.component_result,condition:`(${s.condition})===false`,visible:"not_use",ena_dis:"false",view_result:""},isStart:!0,inUse:!0,order:s.index}]}},this.buildContent=(e,t,a,i)=>{let s=Ot.getParaFunction(i)||[];if(0===s.length)return{};let l=s[0].code||"";const n=o.g.parseJson(l)||{};let r=Ot.convertConditionVBtoJS(n.actcdt,n.ftags,e);return{component_result:n.relf,index:n.index,condition:r}}}},ENB_CTL:class{constructor(){this.build=(e,t,a,i)=>{let o=e[t],s=this.buildContent(e,t,a,i);return{rule_config:{code:"visibility",config:{component_event:"enter_tab",component_action:o.component_code,component_result:s.component_result,condition:s.condition,visible:"not_use",ena_dis:"false",view_result:""},isStart:!0,inUse:!0,order:s.index}}},this.buildContent=(e,t,a,i)=>{let s=Ot.getParaFunction(i)||[];if(0===s.length)return{};let l=s[0].code||"";const n=o.g.parseJson(l)||{};let r=Ot.convertConditionVBtoJS(n.actcdt,n.ftags,e);return{component_result:n.relf,index:n.index,condition:r}}}},CCL_NUMB:class{constructor(){this.build=(e,t,a,i)=>{let o=e[t],s=this.buildContent(e,t,a,i);return{rule_config:{code:"calculator",config:{component_event:"enter_tab",component_action:o.component_code,component_result:s.component_result,function_cal:s.function_cal,condition:s.condition},isStart:!1,inUse:!0,order:s.index}}},this.buildContent=(e,t,a,i)=>{let s=Ot.getParaFunction(i)||[];if(0===s.length)return{};let l=s[0].code||"";const n=o.g.parseJson(l)||{};return{function_cal:this.convertContent(n.value,n.ftags),condition:Ot.convertConditionVBtoJS(n.actcdt,n.ftags,e),component_result:n.relf,index:n.index}},this.convertContent=(e,t)=>{e=(e=e.replace(/ AND /g," && ")).replace(/ OR /g," || ");let a=o.g.getArrayWithRegex(e,"[\\w]+"),i=e;for(const o of a){let e=o.key.toLocaleLowerCase();t.split(";").includes(e)&&(i=i.replace(o.key,`@{${e.toLocaleUpperCase()}}`))}return i=i.toLocaleLowerCase(),i=this.convertROUND(i),i=this.convertIF(i),i},this.convertROUND=e=>{const t=/round\(([^,]+),(\d+)\)/gm;let a;for(;null!==(a=t.exec(e));)a.index===t.lastIndex&&t.lastIndex++,e=`Number(${a[1]}).toFixed(${a[2]})`;return e},this.convertIF=e=>{const t=/if\(([^,]+),([^,]+),([^\)]+)/gm;let a;for(;null!==(a=t.exec(e));)a.index===t.lastIndex&&t.lastIndex++,e=`(${a[1]}?${a[2]}:${a[3]})`;return e}}}};class ga{constructor(e){var t=this;this.buildDefault=()=>{this.name_input="",this.url="",this.form_code="",this.table="",this.data_arr_json=[],this.list_API=[],this.config={info:{title:"",des:"",data:"",learnapi:"",learnsql:"",openOne:"false",node_position:[],flow_layout:[],form_code:"",ruleStrong:[],key_form:"",ofModal:!1,bodata:""},list_layout:[{name:"",des:"",class:"",codeHidden:o.g.autoID(),inputtype:"cLayout",list_view:[{name:"",code:"code",codeHidden:o.g.autoID(),inputtype:"cView",isTab:"false",list_input:[]}]}],react_txt:""}},this.buildInfoForm=(e,t)=>{this.buildDefault(),this.name_input="muti",this.data_arr_json=t,this.form_code=e.mutiform_code,this.table="muti",this.config.info.title=e.mutiform_code,this.config.info.des=e.mutiform_code,this.config.info.form_code=e.mutiform_code,this.config.info.key_form=e.mutiform_code},this.AutoBuildForm=e=>{const t=this.data_arr_json;0===this.config.list_layout.length&&this.addLayout();for(let a=0;a<t.length;a++)this.addComponent(t,a,e),this.addMutiForm(t,a,this),this.addRule(t,a),this.addAPI(t,a)},this.addMutiForm=(e,t,a)=>{},this.addLayout=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.config.list_layout.push({name:"",des:"",class:e.class||"",codeHidden:o.g.autoID(),inputtype:"cLayout",list_view:e.list_view||[]})},this.addView=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.config.list_layout;for(let t=0;t<a.length;t++){let i=a[t];for(let t=0;t<i.list_view.length;t++){let a=i.list_view[t];if(e.view_name===a.name)return}}void 0!==a&&0!==a.length||t.addLayout(),a[a.length-1].list_view.push({name:e.view_name||"",code:e.code||"code",codeHidden:o.g.autoID(),inputtype:"cView",isTab:e.isTab||"true",list_input:e.list_input||[]})},this.addRule=(e,t,a)=>{let i=e[t].function;if(""!==i){let o=i.split("<br>");for(let i=0;i<o.length;i++){let s=o[i].split("(")[0];if(s=Ot.getCodeSmooth(s),ua[s]){let l=new ua[s](e,t,a).build(e,t,a,o[i]);Array.isArray(l)?this.config.info.ruleStrong.concat(l):this.config.info.ruleStrong.push(l)}}}},this.addAPI=(e,t)=>{const a=e[t];if(_a[a.api_method]){let i=(new _a[a.api_method]).build(e,t,this.table,this.name_input);void 0!==i&&this.list_API.push(i)}},this.addComponent=(e,t,a)=>{const i=e[t];"Table"===i.cpn_type&&this.addView({view_name:"Table"});let o=this.config.list_layout.length,s=this.config.list_layout[o-1].list_view.length;if(""!==i.view_name)return void this.addView({view_name:i.view_name});let l=this.buildComponent(e,t,a);void 0!==l&&!1===this.replaceComponent(l)&&this.config.list_layout[o-1].list_view[s-1].list_input.push(l)},this.buildComponent=(e,t,a)=>{const i=e[t];if(""!==i.cpn_child_name&&ra[i.cpn_type]){return(new ra[i.cpn_type]).build(e,t,"muti",a)}},this.replaceComponent=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.config,i=a,o=i.list_layout;for(let s=0;s<o.length;s++){let a=o[s];for(let i=0;i<a.list_view.length;i++){let o=a.list_view[i];for(let a=0;a<o.list_input.length;a++){let l=o.list_input[a];if(e.default&&e.default.name===l.default.name&&e.inputtype===l.inputtype&&!0!==l.isReplaced)return void 0!==l.default.class&&(e.default.class=l.default.class),l.validate&&void 0!==l.validate.request&&(e.validate.request=l.validate.request),e.isReplaced=!0,t.config.list_layout[s].list_view[i].list_input[a]=e,!0}}}return!1},this.buildDefault()}}let ma=[];const pa=["TOTALFEE","TOTALCSH","TOTALDPT","TOTALACT","TOTALINT","TOTALPRN","TOTALFLAT","TOTALSAMT","TOTALRAMT","TTSFPER"];class fa extends class{constructor(e){var t=this;this.buildDefault=()=>{this.name_input="",this.url="",this.form_code="",this.table="",this.data_arr_json=[],this.list_API=[],this.list_form_chil=[],this.config={info:{title:"",des:"",data:"",learnapi:"",learnsql:"",openOne:"false",node_position:[],flow_layout:[],form_code:"",ruleStrong:[],key_form:"",ofModal:!1,bodata:""},list_layout:[],react_txt:""}},this.buildInfoForm=(e,t,a)=>{this.buildDefault();const i=t[a][0][0],o=Ot.getCodeSmooth(i+"_"+a);this.name_input=a,this.data_arr_json=e,this.form_code=o,this.table=Ot.getCodeSmooth(i),this.config.info.title=i+" "+a,this.config.info.des=i+" "+a,this.config.info.form_code=o,this.config.info.key_form=o},this.AutoBuildForm=e=>{const t=this.data_arr_json;0===this.config.list_layout.length&&this.addLayout(),this.addRuleStart(t,this);for(let a=0;a<t.length;a++)""===t[a].cpn_child_name&&(this.addComponent(t,a,e),this.addMutiForm(t,a,this),this.addRule(t,a,this),this.addAPI(t,a));this.config.list_layout[0].list_view[0].list_input.push(Object(kt.a)({},St))},this.addMutiForm=(e,t,a)=>{let i=e[t];if("Mutivalue"!==i.cpn_type)return;let o=new ga({}),s=[];for(;""!==e[t+1].cpn_child_name&&""===e[t+1].cpn_name;)s.push(Object(kt.a)({},e[t+1])),t++;o.buildInfoForm(i,s),o.AutoBuildForm({muti:o}),this.list_form_chil.push(o.config)},this.addLayout=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.config.list_layout.push({name:e.name||t.config.title,des:e.des||t.config.des,class:e.class||"",codeHidden:o.g.autoID(),inputtype:"cLayout",list_view:e.list_view||[]})},this.addView=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.config.list_layout;for(let t=0;t<a.length;t++){let i=a[t];for(let t=0;t<i.list_view.length;t++){let a=i.list_view[t];if(e.view_name===a.name)return}}void 0!==a&&0!==a.length||t.addLayout(),a[a.length-1].list_view.push({name:e.view_name||"",code:e.code||"code",codeHidden:o.g.autoID(),inputtype:"cView",isTab:e.isTab||"true",list_input:e.list_input||[]})},this.addRuleStart=(e,t)=>{let a=["startDisable","startHidden"];for(let i=0;i<a.length;i++){let o=(new ua[a[i]]).build(e,t);Array.isArray(o)?this.config.info.ruleStrong=this.config.info.ruleStrong.concat(o):o&&this.config.info.ruleStrong.push(o)}},this.addRule=(e,t,a)=>{let i=e[t].function;if(""!==i){let o=i.split("<br>");for(let i=0;i<o.length;i++){let s=o[i].split("(")[0];if(s=Ot.getCodeSmooth(s),ua[s]){let l=new ua[s](e,t,a).build(e,t,a,o[i]);Array.isArray(l)?this.config.info.ruleStrong=this.config.info.ruleStrong.concat(l):this.config.info.ruleStrong.push(l)}}}},this.addAPI=(e,t)=>{const a=e[t];if(_a[a.api_method]){let i=(new _a[a.api_method]).build(e,t,this);void 0!==i&&i.learn_api_id&&this.list_API.push(i),""!==a.api_cpn_addr&&(""===this.config.info.learnapi?this.config.info.learnapi=i.learn_api_id:this.config.info.learnapi+=";"+i.learn_api_id)}},this.addComponent=(e,t,a)=>{const i=e[t];let o=this.config.list_layout.length,s=this.config.list_layout[o-1].list_view.length;if(""!==i.view_name)return void this.addView({view_name:i.view_name});let l=this.buildComponent(e,t,a);void 0!==l&&!1===this.replaceComponent(l)&&this.config.list_layout[o-1].list_view[s-1].list_input.push(l)},this.buildComponent=(e,t,a)=>{const i=e[t];if(i.cpn_name+i.cpn_child_name!==""&&ra[i.cpn_type]){return(new ra[i.cpn_type]).build(e,t,this.name_input,a)}},this.replaceComponent=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.config,i=a,o=i.list_layout;for(let s=0;s<o.length;s++){let a=o[s];for(let i=0;i<a.list_view.length;i++){let o=a.list_view[i];for(let a=0;a<o.list_input.length;a++){let l=o.list_input[a];if(e.default&&e.default.name===l.default.name&&e.inputtype===l.inputtype&&!0===l.isReplace)return void 0!==l.default.class&&(e.default.class=l.default.class),l.validate&&void 0!==l.validate.request&&(e.validate.request=l.validate.request),t.config.list_layout[s].list_view[i].list_input[a]=e,!0}}}return!1},this.buildDefault()}}{constructor(e){var t,a;return ma=e.menu,super(e),t=a=this,this.buildDefault=()=>{this.name_input="",this.url="",this.form_code="",this.table="",this.data_arr_json=[],this.list_API=[],this.config={info:{mode_form:{mode:"1",col_text:"",col_input:""},title:"",des:"",data:"",learnapi:"",learnsql:"",openOne:"false",node_position:[],flow_layout:[],form_code:"",ruleStrong:[{code:"visibility",config:{component_event:"all",component_action:"txrefid",component_result:"txrefid",condition:"'@{txrefid}'!==\"\"",visible:"true",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:1},{code:"visibility",config:{component_event:"all",component_action:"txrefid",component_result:"*;btn_accept",condition:"'@{txrefid}'!==\"\"",visible:"not_use",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:1},{code:"setValue",config:{component_event:"all",component_action:"btn_accept",component_result:"btn_printVoucher",isGetOOP:"false",getOOPFormat:'{\n    "component_code_1": "col.col_1",\n    "component_code_2": "col.col_2"\n}'},inUse:!0,order:10}],key_form:"",ofModal:!1,bodata:"",responseType:"1"},list_layout:[{name:"",des:"",class:"",codeHidden:o.g.autoID(),inputtype:"cLayout",list_view:[{name:"Button",code:"",codeHidden:o.g.autoID(),inputtype:"cView",isTab:"false",list_input:[{isReplace:!0,default:{name:"Accept",code:"btn_accept",codeHidden:o.g.autoID(),class:"",condition:"",role:""},config:{},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"cButton"},{isReplace:!0,default:{name:"Clear",code:"btn_clear",codeHidden:o.g.autoID(),class:"",condition:"",role:""},config:{},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"cButton"}]}]},{name:"",des:"",class:"",codeHidden:o.g.autoID(),inputtype:"cLayout",list_view:[]}],react_txt:""},this.fee_context={isUse:!1}},this.addRuleStart=(e,t)=>{let a=["startDisable","startHidden","startClear"];for(let i=0;i<a.length;i++){let o=(new ua[a[i]]).build(e,t);Array.isArray(o)?this.config.info.ruleStrong=this.config.info.ruleStrong.concat(o):o&&this.config.info.ruleStrong.push(o)}},this.buildInfoForm=(e,t,a)=>{this.buildDefault();const i=a,o=i;this.name_input=a,this.data_arr_json=e,this.form_code=o,this.table=i;let s=i;for(let l=0;l<ma.length;l++){const e=ma[l];s==="FO_"+e.menuid&&(s=e.caption)}this.config.info.title=s,this.config.info.des=s,this.config.info.form_code=o,this.config.info.key_form=o},this.addRule=(e,t,a)=>{const i=e[t];let o=i.function;if(""!==o){let s=o.split("<br>");for(let o=0;o<s.length;o++){let l=s[o].split("(")[0];if(ua[l]){let n=new ua[l](e,t,a).build(e,t,a,s[o]),r=n.rule_config,c=n.api_config,d=n.form,h=n.cpn_config,_=n.new_component;if(r&&("getInfo"===r.code?Array.isArray(r)?this.list_rule_func_getInfor=this.list_rule_func_getInfor.concat(r):this.list_rule_func_getInfor.push(r):Array.isArray(r)?this.config.info.ruleStrong=this.config.info.ruleStrong.concat(r):this.config.info.ruleStrong.push(r)),c&&(Array.isArray(c)?this.list_API=this.list_API.concat(c):this.list_API.push(c)),d&&(Array.isArray(d)?this.list_form_chil=this.list_form_chil.concat(d):this.list_form_chil.push(d)),h){let e=this.config.list_layout.length,t=this.config.list_layout[e-1].list_view.length,a=this.config.list_layout[e-1].list_view[t-1].list_input.length;for(const i in h)if(h.hasOwnProperty(i)){const o=h[i];this.config.list_layout[e-1].list_view[t-1].list_input[a-1].config[i]=o}i.mask?this.config.list_layout[e-1].list_view[t-1].list_input[a-1].inputtype="jMaskInput":this.config.list_layout[e-1].list_view[t-1].list_input[a-1].inputtype="cTextInput"}if(_){let e=this.config.list_layout.length,t=this.config.list_layout[e-1].list_view.length;this.config.list_layout[e-1].list_view[t-1].list_input.push(_)}}}}},this.addView=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.config.list_layout;for(let a=0;a<t.length;a++){let i=t[a];for(let t=0;t<i.list_view.length;t++){let a=i.list_view[t];if(e.view_name===a.name)return}}void 0!==t&&0!==t.length||a.addLayout(),t[t.length-1].list_view.push({name:e.view_name||"",code:e.code||"code",codeHidden:o.g.autoID(),inputtype:"cView",class:"col-sm-12 col-md-12",isTab:"fasle",list_input:e.list_input||[]})},this.addComponent=(e,t,a)=>{const i=e[t];let o=this.config.list_layout.length,s=this.config.list_layout[o-1].list_view.length;if(""!==i.view_name)return void this.addView({view_name:i.view_name});let l=this.buildComponent(e,t,a);"ifccd"===i.key_name&&(this.fee_context.isUse=!0,this.fee_context.data_fee=i),void 0!==l&&!1===this.replaceComponent(l)&&(l.inputtype,l.default.class="",this.config.list_layout[o-1].list_view[s-1].list_input.push(l))},this.addFee=()=>{if(!0===this.fee_context.isUse){let e=this.config.list_layout,t=this.config.info.ruleStrong.filter(e=>"ifccd"===e.config.component_action&&"getInfo"===e.code);if(1===t.length){this.config.info.ruleStrong.splice(this.config.info.ruleStrong.indexOf(t[0]),1),t[0].config.is_data_to_form="false",t[0].config.component_event="all";let e=o.g.cloneJson(t[0]);e.config.component_event="enter_tab",e.config.component_result="",e.config.api_id="POST_getinfo_fee_ifccd",e.config.condition=" !!'@{ifcname}' ",e.order=Number(e.order)+1,e.config.is_data_to_form="true",t.push(e)}e.forEach(e=>{e.list_view.forEach(e=>{e.list_input.forEach(e=>{if("ifccd"===e.default.code){this.fee_context.cpn=o.g.cloneJson(e),e.default={name:"ifcfees",code:"form_fee",codeHidden:o.g.autoID(),class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},e.config={action:"",structable:this.form_code+".ifcfees",structable_read:this.form_code+".ifcfees",data_default:"{}",callform:this.form_code+"_O9_FEE",callData:"form_child.ifcfees"},e.inputtype="jSameMain",this.fee_context.cpn.config.structable="form_child.ifccd",this.fee_context.cpn.config.structable_read="form_child.ifccd",this.fee_context.cpn.default.ofgroup="ifccd",this.fee_context.cpn.inputtype="cTextInput";let s=o.g.cloneJson(Tt);s.info.title=this.form_code+"_O9_FEE",s.info.des=this.form_code+"_O9_FEE",s.info.form_code=this.form_code+"_O9_FEE",s.list_layout[0].list_view[0].list_input[0]=this.fee_context.cpn,s.info.ruleStrong=s.info.ruleStrong.concat(t);let l=[],n=this.fee_context.data_fee.ftags;try{l=JSON.parse(this.fee_context.data_fee.list_CCL_FEE)}catch(a){console.log("error when parsing list cclFees",a)}for(let e of l)e.actcdt=Ot.convertConditionVBtoJS(e.actcdt,n);let r=[];try{r=JSON.parse(this.fee_context.data_fee.list_GET_FEE)}catch(a){console.log("error when parsing list get fee",a)}for(let e of r)e.actcdt=Ot.convertConditionVBtoJS(e.actcdt,n),pa.includes(e.value)||(e.value=Ot.convertConditionVBtoJS(e.value,n));let c=[];try{c=JSON.parse(this.fee_context.data_fee.list_AUTO_FEE);for(let e of c)e.actcdt=Ot.convertConditionVBtoJS(e.actcdt,n),e.value&&(e.value=e.value.toLowerCase())}catch(i){console.log("error when parsing list AUTO_FEE")}s.list_layout[0].list_view[0].list_input.push({default:{name:"data_fee",code:"data_fee",codeHidden:"data_fee",class:"",condition:"",ofgroup:"",class_ofgroup:"",role:""},config:{is_upperCase:"false",action:"",structable:"data_fee.data_fee",structable_read:"data_fee.data_fee",data_default:JSON.stringify({list_CCL_FEE:JSON.stringify(l),list_GET_FEE:JSON.stringify(r),list_AUTO_FEE:JSON.stringify(c)}),isLookup:"false",callform:"",callform_detail:"",callform_detail_mode:"modal",data_view:"",data_value:"",is_password:"false",is_upper:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"cTextInput"}),this.list_form_chil.push(s)}})})});let a=this.fee_context.data_fee.fee_active_fields,i=this.fee_context.data_fee.auto_fee_active_fields;i.split(";").forEach(e=>{if(e)for(;a.includes(e);)a=a.replace(e,"")}),this.config.info.ruleStrong=this.config.info.ruleStrong.concat([{code:"runFo",config:{component_action:a,component_result:"",component_event:"enter_tab",txFoActions:"",txFo:'[\n    {\n        "txcode": "fo-convert-dataFee",\n        "input": {}\n    }\n]',useAction:"false",condition:"'@{txrefid}' === \"\""},inUse:!0,order:98,isStart:!1},{code:"runFo",config:{component_action:i,component_result:"",component_event:"enter_tab",txFoActions:"",txFo:'[\n    {\n        "txcode": "fo-ruleFunc-AutoFee",\n        "input": {"learn_api": "O9_AUTOFEE_POST_GET_IFC_INFO"}\n    }\n]',useAction:"false",condition:""},inUse:!0,order:99,isStart:!1},{code:"managerComponent",config:{component_event:"all",component_action:"txrefid",component_manager:"{\n    \"form_fee;form_fee(ifccd;ifcval;btn_add;btn_apply)\": \" '@{txrefid}' === '' \"\n}",is_use_block:"false"},inUse:!0,order:5,isStart:!0},{code:"visibility",config:{component_event:"all",component_action:"txrefid",component_result:"form_fee;form_fee(table_fee)",condition:"'@{txrefid}'!==\"\"",visible:"not_use",ena_dis:"true",view_result:""},isStart:!1,inUse:!0,order:5},{code:"visibility",config:{component_event:"all",component_action:"txrefid",component_result:"form_fee;form_fee(table_fee)",condition:"'@{txrefid}'===\"\"",visible:"not_use",ena_dis:"false",view_result:""},isStart:!1,inUse:!0,order:5}]);for(let o=0;o<this.list_API.length;o++){const e=this.list_API[o];if(e.learn_api_id.includes("_btn_accept_post_api_fo_")){let t=JSON.parse(e.learn_api_mapping);t.ifcfees=`MapS.arrayJson(${e.learn_api_data}.ifcfees|{"sfappl":"MapS.dataN(ifcfees.sfappl)","ifccd":"MapS.dataN(ifcfees.ifccd)","payrate":"MapS.dataN(ifcfees.payrate)","ifcval":"MapS.dataN(ifcfees.ifcval)","ifcamt":"MapS.dataN(ifcfees.ifcamt)","ccrid":"MapS.dataS(ifcfees.ccrid)","flrval":"MapS.dataN(ifcfees.flrval)","ceival":"MapS.dataN(ifcfees.ceival)","srate":"MapS.dataN(ifcfees.srate)","samt":"MapS.dataN(ifcfees.samt)","rrate":"MapS.dataN(ifcfees.rrate)","ramt":"MapS.dataN(ifcfees.ramt)","ccrcd":"MapS.dataS(ifcfees.ccrcd)","paysrc":"MapS.dataS(ifcfees.paysrc)"})`,this.list_API[o].learn_api_mapping=JSON.stringify(t)}}}},this.AutoBuildForm=e=>{const t=this.data_arr_json;0===this.config.list_layout.length&&this.addLayout(),this.list_rule_func_getInfor=[],this.addRuleStart(t,this);for(let o=0;o<t.length;o++)""===t[o].cpn_child_name&&(this.addComponent(t,o,e),this.addMutiForm(t,o,this),this.addRule(t,o,this),this.addAPI(t,o));let a,i;a=new RegExp("{([^}]*)}","gm"),i=new RegExp("{([^}]*)}","gm");for(let o=0;o<this.list_rule_func_getInfor.length;o++){let e=this.list_rule_func_getInfor[o];for(let t=o+1;t<this.list_rule_func_getInfor.length;){let o=this.list_rule_func_getInfor[t];if(e.config.api_id===o.config.api_id&&e.config.condition===o.config.condition){let s,l,n,r;for(;null!==(s=a.exec(e.config.component_result));)s.index===a.lastIndex&&a.lastIndex++,n=s[1];for(;null!==(l=i.exec(o.config.component_result));)l.index===i.lastIndex&&l.lastIndex++,r=l[1];e.config.component_result="{"+n+","+r+"}",e.config.component_action=e.config.component_action+";"+o.config.component_action,this.list_rule_func_getInfor.splice(t,1)}else t++}}this.config.info.ruleStrong=this.config.info.ruleStrong.concat(this.list_rule_func_getInfor),this.addFee(),this.config.list_layout[0].list_view[0].list_input.push(Object(kt.a)({},St));const s=o.g.cloneJson(this.config.list_layout[0].list_view[0]);this.config.list_layout.shift(),this.config.list_layout[0].list_view.push(s),this.config.info.ruleStrong.push({code:"managerComponent",config:{component_event:"on_change",component_action:"postings_debit;postings_credit",component_manager:'{\n    "postings;postings()": "@{postings_debit}.length > 0 || @{postings_credit}.length > 0", \n    "postings_debit": "false",\n    "postings_credit": "false",\n    "dataset": "@{dataset}.length > 0",\n    "txrefid": "\'@{txrefid}\'!== \'\'"\n}',is_use_block:"false"},isStart:!0,inUse:!0,order:1}),this.config.list_layout[this.config.list_layout.length-1].list_view.push({name:"",lang:{},code:"code",class:"col-sm-6 col-md-6",codeHidden:"cbc85eefe8610f4a",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Debit",code:"postings_debit",codeHidden:"6cfe880d0ff85ea2",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:this.form_code+".postings_debit",query_data:this.form_code+".postings_debit",paging_record:"5",columns:'[\n    {\n        "code": "postings_debit.acgrp",\n        "title": "Group",\n        "inputtype": "ColumnNumber",\n        "config": {}\n    },\n    {\n        "code": "postings_debit.bacno",\n        "title": "Account number",\n        "inputtype": "columnMask",\n        "config": {\n            "mask": "$FO_ACNO_POSTING$"\n        }\n    },\n    {\n        "code": "postings_debit.amt",\n        "title": "Amount",\n        "inputtype": "columnCurrency",\n        "config": {\n            "decimal": 2\n        }\n    }\n]'},role:{},property:{},validate:{},lang:{vi:{Group:"Group","Account number":"Account number",Amount:"Amount"},en:{Group:"Group","Account number":"Account number",Amount:"Amount"},lo:{Group:"Group","Account number":"Account number",Amount:"Amount"},km:{Group:"Group","Account number":"Account number",Amount:"Amount"},th:{Group:"Group","Account number":"Account number",Amount:"Amount"},mg:{Group:"Group","Account number":"Account number",Amount:"Amount"},ja:{Group:"Group","Account number":"Account number",Amount:"Amount"},ko:{Group:"Group","Account number":"Account number",Amount:"Amount"}},configAVD:{},inputtype:"jTableForm"},{default:{name:"Print",code:"btn_printVoucher",codeHidden:o.g.autoID(),class:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{node_data_print:"prn",json_path:this.form_code,auto_print:"true",txFoActions:'[\n    {\n        "function": "",\n        "status": "A",\n        "para": []\n    }\n]',txFo:'[\n    {\n        "txcode": "#sys:fo-print-voucher",\n        "input": {}\n    }\n]',useAction:"false"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jPrintVoucher"}]}),this.config.list_layout[this.config.list_layout.length-1].list_view.push({name:"",lang:{},code:"code",class:"col-sm-6 col-md-6",codeHidden:"7b43df2be7e7b1d1",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Credit",code:"postings_credit",codeHidden:"a1f900b0238b3b6f",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:this.form_code+".postings_credit",query_data:this.form_code+".postings_credit",paging_record:"5",columns:'[\n    {\n        "code": "postings_credit.acgrp",\n        "title": "Group",\n        "inputtype": "ColumnNumber",\n        "config": {}\n    },\n    {\n        "code": "postings_credit.bacno",\n        "title": "Account number",\n        "inputtype": "columnMask",\n        "config": {\n            "mask": "$FO_ACNO_POSTING$"\n        }\n    },\n    {\n        "code": "postings_credit.amt",\n        "title": "Amount",\n        "inputtype": "columnCurrency",\n        "config": {\n            "decimal": 2\n        }\n    }\n]'},role:{},property:{},validate:{},lang:{vi:{Group:"Group","Account number":"Account number",Amount:"Amount"},en:{Group:"Group","Account number":"Account number",Amount:"Amount"},lo:{Group:"Group","Account number":"Account number",Amount:"Amount"},km:{Group:"Group","Account number":"Account number",Amount:"Amount"},th:{Group:"Group","Account number":"Account number",Amount:"Amount"},mg:{Group:"Group","Account number":"Account number",Amount:"Amount"},ja:{Group:"Group","Account number":"Account number",Amount:"Amount"},ko:{Group:"Group","Account number":"Account number",Amount:"Amount"}},configAVD:{},inputtype:"jTableForm"}]});let l=this.form_code+"_posting";this.config.list_layout[this.config.list_layout.length-1].list_view.push({name:"",lang:{},code:"code",class:"col-sm-12 col-md-12",codeHidden:"7b43df2be7e7b1d1",inputtype:"cView",isTab:"false",list_input:[{config:{action:"",structable:this.form_code+".postings",structable_read:this.form_code+".postings",data_default:"{}",callform:l,callData:this.form_code+".postings"},role:{visible:"",disabled:""},property:{},validate:{request:!1},lang:{},configAVD:{},inputtype:"jSameMain",default:{name:"Postings",code:"postings",codeHidden:"cec06953d595ea8a",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""}}]}),this.list_form_chil.push({info:{title:l,des:l,data:"",learnapi:"",learnsql:"",openOne:"false",node_position:[],flow_layout:[],form_code:l,ruleStrong:[],key_form:l,ofModal:!1,bodata:"",responseType:"1"},list_layout:[{name:"Posting",des:"Posting",class:"",codeHidden:"9c9f62eedf51a184",inputtype:"cLayout",list_view:[{name:"",lang:{},code:"code",class:"col-md-6 col-sm-12 ",codeHidden:"cbc85eefe8610f4a",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Debit",code:"postings_debit",codeHidden:"6cfe880d0ff85ea2",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:this.form_code+".postings_debit",query_data:this.form_code+".postings_debit",paging_record:"5",columns:'[\n    {\n        "code": "postings_debit.acgrp",\n        "title": "Group",\n        "inputtype": "ColumnNumber",\n        "config": {}\n    },\n    {\n        "code": "postings_debit.bacno",\n        "title": "Account number",\n        "inputtype": "columnMask",\n        "config": {\n            "mask": "$FO_ACNO_POSTING$"\n        }\n    },\n    {\n        "code": "postings_debit.amt",\n        "title": "Amount",\n        "inputtype": "columnCurrency",\n        "config": {\n            "decimal": 2\n        }\n    }\n]'},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"jTableForm"}]},{name:"",lang:{},code:"code",class:"col-md-6 col-sm-12 ",codeHidden:"7b43df2be7e7b1d1",inputtype:"cView",isTab:"false",list_input:[{default:{name:"Credit",code:"postings_credit",codeHidden:"a1f900b0238b3b6f",class:"col-sm-12 col-md-12",condition:"",ofgroup:"",class_ofgroup:"col-sm-12 col-md-12",role:""},config:{structable:this.form_code+".postings_credit",query_data:this.form_code+".postings_credit",paging_record:"5",columns:'[\n    {\n        "code": "postings_credit.acgrp",\n        "title": "Group",\n        "inputtype": "ColumnNumber",\n        "config": {}\n    },\n    {\n        "code": "postings_credit.bacno",\n        "title": "Account number",\n        "inputtype": "columnMask",\n        "config": {\n            "mask": "$FO_ACNO_POSTING$"\n        }\n    },\n    {\n        "code": "postings_credit.amt",\n        "title": "Amount",\n        "inputtype": "columnCurrency",\n        "config": {\n            "decimal": 2\n        }\n    }\n]'},role:{},property:{},validate:{},lang:{},configAVD:{},inputtype:"jTableForm"}]}]}],react_txt:""})},t}}var va=function(e){return c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"row mrgn-all-none"},e.children))};class ba extends r.Component{constructor(e){super(e),this.initContextAuto=()=>{this.context_auto={url_version:`${(new Date).getFullYear()}/${(new Date).getMonth()+1}/${(new Date).getDate()}/${(new Date).toString().replace(/:/g,".")}`,menu:{group_menu_lang:{vi:"",en:"",thai:"",lao:"",cam:"",mya:"",han:""},group_menu_name:"",group_menu_order:"1",group_menu_parent:"7cb65792dc18d127",group_menu_function_code:"",group_menu_id:"",AFGHkeyIndexWJ:"e741731311fbdde6",AFGHkeyTime:1575879644845,AFGHkeyWorkFlow:"",AFGHTimeWJ:1575879644942},id:o.g.autoID(),name:"",table:"",list_form:{}}},this.setStateLogic=(e,t)=>{this.prevStateLogic=o.g.cloneJson(this.state),this.state=Object.assign(this.state,e),t&&t(),this.props.abs_update&&this.props.abs_update()},this.onClickAutoBuild=e=>{this.initContextAuto(),this.context_auto.list_form_data_j=o.g.parseJson(this.state.list_form_data),this.setStateLogic({isBlock:!0},()=>{this.callBackGetHTML()})},this.onClickClear=()=>{this.initContextAuto(),this.setStateLogic({isAutoSuccess:!1,isSaveSuccess:!1,list_error:[]})},this.callBackSaveListForm=e=>{this.context_auto.startIndexBuild+10>=this.context_auto.lastIndexBuild?e?this.setStateLogic({isBlock:!1,isAutoSuccess:!1,isErrorSave:!1,isSaveSuccess:!0,list_error:[]}):this.setStateLogic({isBlock:!1,isErrorSave:!0,list_error:[]}):(e&&(this.context_auto.startIndexBuild+=10),this.showToast("",e),this.setStateLogic({update:!this.state.update},()=>{setTimeout(()=>{At.saveListForm(this.context_auto,this.callBackSaveListForm)},2e3)}))},this.buildListAuthen=e=>{let t={};for(const a of e)void 0!==a.type&&void 0!==a.isauthen&&"FO"===a.type&&"1"===a.isauthen?t["FO_"+a.menuid]=!0:t["FO_"+a.menuid]=!1;return t},this.buildListMenu=e=>{let t=[];for(const a of e){let e={};if("0"===a.parentid)e={group_menu_lang:{vi:a.lang.vi,en:a.lang.en},group_menu_name:a.lang.en,group_menu_order:a.order.toString(),group_menu_parent:"0",group_menu_status:"A",group_menu_function_code:"",group_menu_visible:"FO"===a.type?"F":"T",group_menu_id:a.menuid,AFGHkeyIndexWJ:a.menuid,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime()};else switch(a.type){case"BO":e=1===a.is_has_child?{group_menu_lang:{vi:a.lang.vi,en:a.lang.en},group_menu_name:a.lang.en,group_menu_order:a.order.toString(),group_menu_parent:a.parentid,group_menu_status:"A",group_menu_function_code:"",group_menu_visible:"T",group_menu_id:a.menuid,AFGHkeyIndexWJ:a.menuid,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime()}:{group_menu_lang:{vi:a.lang.vi,en:a.lang.en},group_menu_name:a.lang.en,group_menu_order:a.order.toString(),group_menu_parent:a.parentid,group_menu_status:"A",group_menu_function_code:"BO_"+a.menuid,group_menu_visible:"T",group_menu_id:"BO_"+a.menuid,AFGHkeyIndexWJ:"BO_"+a.menuid,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime()};break;case"FO":e={group_menu_lang:{vi:a.lang.vi,en:a.lang.en},group_menu_name:a.lang.en,group_menu_order:"1",group_menu_parent:a.parentid,group_menu_status:"A",group_menu_function_code:"FO_"+a.menuid,group_menu_visible:"F",group_menu_id:"FO_"+a.menuid,AFGHkeyIndexWJ:"FO_"+a.menuid,AFGHkeyTime:(new Date).getTime(),AFGHkeyWorkFlow:"",AFGHTimeWJ:(new Date).getTime()};break;default:console.log("****** Menu type: ",a.type)}t.push(e)}return t},this.callBackGetHTML=e=>{let t=[],a={},i=o.g.parseJson(this.state.list_form_data)||{},s=i.menu;this.list_menu_data=o.g.cloneJson(s),this.context_auto.list_menu=this.buildListMenu(s),this.list_form_authen=this.buildListAuthen(s);let l=i.forms,n=[],r={};for(const o in l)l.hasOwnProperty(o)&&!1===t.includes(o)&&(r["FO_"+o]=l[o]);for(const o in r){let e=Ot.convertHtmlTableToArray(r[o],o);n=n.concat(Ft.validateDataTable(e,o)),a[o]=e,this.context_auto.list_form[o]=new fa({menu:this.list_menu_data})}n.length>0?this.setStateLogic({list_error:n,isBlock:!1}):(this.context_auto.name="Form FO",this.buildConfigDefaultFormAuto(a),this.AutoBuildListForm(),this.setStateLogic({isAutoSuccess:!0,isBlock:!1}))},this.buildConfigDefaultFormAuto=e=>{let t=this.context_auto.list_form;for(const a in t){let i=t[a],o=e[a],s=Ot.convertTableToArrayJson(o,a);i.buildInfoForm(s,e,a)}},this.AutoBuildListForm=()=>{let e=this.context_auto.list_form;for(const t in e){e[t].AutoBuildForm(e)}},this.getFormSelected=e=>{let t=this.props.data[this.state.formAutoSelected]||{};this.context_auto=t.autoform||{};let a=this.context_auto.list_form;this.setStateLogic({isAutoSuccess:!0,isSaveSuccess:!0,urlAdd:a.Add.url,urlView:a.View.url,urlSearch:a.Search.url})},this.showToast=(e,t)=>{console.log("Show l\u1ed7i",e,t)},this.renderFormCreate=()=>!0===this.state.isAutoSuccess?null:c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"prtm-block",style:{padding:"30px"}},c.a.createElement("div",{className:"horizontal-form-style"},c.a.createElement("div",{className:"prtm-block-title mrgn-b-lg"},c.a.createElement("h3",null,"Quick Build Form"),c.a.createElement("p",null,"Auto build form from google sheet link.")),!0===this.state.isSaveSuccess&&c.a.createElement("div",{className:"alert alert-success"},c.a.createElement("strong",null,"Save successfully")),c.a.createElement("form",{className:"form-horizontal"},this.renderInput(),this.renderListButton())))),this.renderListError=()=>0===this.state.list_error.length?null:c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"table-style"},c.a.createElement("div",{className:"prtm-block pos-relative"},c.a.createElement("div",{className:"prtm-block-title mrgn-b-lg"},c.a.createElement("div",{className:"caption"},c.a.createElement("h3",{className:"text-capitalize"},"Error"))),c.a.createElement("div",{className:"prtm-block-content"},c.a.createElement("div",{className:"table-responsive"},c.a.createElement("div",{className:"unseen"},c.a.createElement("table",{className:"table table-hover table-bordered table-striped"},c.a.createElement("thead",null,c.a.createElement("tr",{className:"bg-danger"},c.a.createElement("th",null,"Form Name"),c.a.createElement("th",null,"Row"),c.a.createElement("th",null,"Col"),c.a.createElement("th",null,"Value"),c.a.createElement("th",null,"Content"))),c.a.createElement("tbody",null,this.renderInfoError())))))))),this.renderInfoError=()=>this.state.list_error.map((e,t)=>c.a.createElement("tr",{key:t},c.a.createElement("td",null,e.form_name),c.a.createElement("td",null,e.row),c.a.createElement("td",null,e.col),c.a.createElement("td",null,e.value),c.a.createElement("td",null,e.content))),this.rederListForm=()=>!1===this.state.isAutoSuccess?null:c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"table-style"},c.a.createElement("div",{className:"prtm-block pos-relative"},c.a.createElement("div",{className:"prtm-block-title mrgn-b-lg"},c.a.createElement("div",{className:"caption"},c.a.createElement("h3",{className:"text-capitalize"},"List Form Auto"))),!0===this.state.isErrorSave&&c.a.createElement("div",{class:"note note-danger"},c.a.createElement("p",{class:"mrgn-all-none"},"Save Error,Try Again. ")),c.a.createElement("div",{className:"prtm-block-content"},c.a.createElement("div",{className:"table-responsive"},c.a.createElement("div",{className:"unseen"},c.a.createElement("table",{className:"table table-hover table-bordered table-striped"},c.a.createElement("thead",null,c.a.createElement("tr",{className:"bg-primary"},c.a.createElement("th",null,"Form"),c.a.createElement("th",null,"Form Name"),c.a.createElement("th",null,"Form Code"),c.a.createElement("th",null,"Component Amount"),c.a.createElement("th",null,"API Amount"),c.a.createElement("th",null,"Form Muti Amount"))),c.a.createElement("tbody",null,this.renderInfoListForm()))))),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"row mrgn-all-none"},c.a.createElement("div",{className:"col-sm-10"},c.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:e=>this.onClickClear(e),style:{marginLeft:"10px"}}," ",c.a.createElement("i",{className:"fa fa-trash fa-lg"})," Clear"," "),c.a.createElement("button",{type:"button",className:"btn btn-success",onClick:e=>this.onClickSave(e),style:{marginLeft:"10px"}}," ",c.a.createElement("i",{className:"fa fa-floppy-o fa-lg",style:{marginRight:"10px"}})," ","Save"," "))))))),this.renderInfoListForm=()=>{let e=[];for(let t in this.context_auto.list_form){let a=this.context_auto.list_form[t],i=a.config;e.push(c.a.createElement("tr",{key:t,onClick:()=>{this.setStateLogic({form_select:t})},style:t===this.state.form_select?{background:"LightBlue"}:{}},c.a.createElement("td",null,t),c.a.createElement("td",null,i.info.title),c.a.createElement("td",null,i.info.form_code),c.a.createElement("td",null,Ot.countComponent(i.list_layout)),c.a.createElement("td",null,a.list_API.length),c.a.createElement("td",null,a.list_form_chil.length)))}return e},this.setData=e=>{this.setStateLogic({list_form_data:e},()=>{this.initContextAuto(),this.context_auto.list_form_data_j=o.g.parseJson(this.state.list_form_data),this.setStateLogic({isBlock:!0},()=>{this.callBackGetHTML()})})},this.getData=()=>this,this.renderListButton=()=>c.a.createElement(c.a.Fragment,null,c.a.createElement(va,null,c.a.createElement("div",{className:"col-sm-offset-2 col-sm-10"},c.a.createElement("label",{htmlFor:"file-upload",className:"custom-file-upload"},c.a.createElement("i",{className:"fa fa-cloud-upload"})," Custom Upload"),c.a.createElement("input",{id:"file-upload",type:"file",accept:".json",onChange:e=>{e.preventDefault(),this.setStateLogic({isBlock:!0});const t=new FileReader;t.onload=async e=>{const t=e.target.result;this.setStateLogic({list_form_data:t,isBlock:!1})},t.readAsText(e.target.files[0])}}),c.a.createElement("button",{type:"button",className:"btn btn-primary",style:{marginLeft:"15px"},onClick:e=>this.onClickAutoBuild(e)},c.a.createElement("i",{className:"fa fa-rocket fa-lg",style:{marginRight:"10px"}})," ","Auto Build"," ")))),this.key_form="autoBuildForm",this.list_menu_data=[],this.list_form_authen={},this.context_auto={list_menu:[],startIndexBuild:0,lastIndexBuild:0,menu:{group_menu_lang:{vi:"",en:"",thai:"",lao:"",cam:"",mya:"",han:""},group_menu_name:"",group_menu_order:"1",group_menu_parent:"e40394be28bb7ca4",group_menu_function_code:"",group_menu_id:"",AFGHkeyIndexWJ:o.g.autoID(),AFGHkeyTime:1575879644845,AFGHkeyWorkFlow:"",AFGHTimeWJ:1575879644942},id:o.g.autoID(),name:"",table:"",list_form:{},list_form_data_j:{}},this.state={visibility:"",data:this.props.data,infoA:{title:"Qu\u1ea3n l\xfd autoBuildForm FO",des:"Ki\u1ec3m so\xe1t c\xe1c thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp!",openOne:"true",ofModal:!1},list_error:[],isAutoSuccess:!1,form_select:"",isBlock:!1,isErrorSave:!1,isSaveSuccess:!1,formAutoSelected:0,list_form_data:"",update:!0}}handleUrlChange(e){const t=e.target.value;this.setStateLogic({list_form_data:t})}onClickSave(){this.context_auto.startIndexBuild=0,this.context_auto.lastIndexBuild=Object.keys(this.context_auto.list_form).length,this.setStateLogic({isBlock:!0},()=>{At.saveListForm(this.context_auto,this.callBackSaveListForm)})}render(){return null}renderInput(){return c.a.createElement("div",{className:"form-group ",style:{marginBottom:"10px"}},c.a.createElement("div",{className:"row mrgn-all-none"},c.a.createElement("label",{className:"col-sm-2 control-label"},"Data List Form Json"),c.a.createElement("div",{className:"col-sm-10 col-lg-9"},c.a.createElement("textarea",{className:"form-control",onChange:e=>{this.handleUrlChange(e)},value:this.state.list_form_data,placeholder:"Data List Form Json",type:"text"}))))}}var ya=ba;class Da{static quickFix(e){return e=this.configMalibule(e)}static configMalibule(e){const t=function(e){let t="MUTI_FORM",a=e.list_layout,i=!1;return a.forEach(a=>{a.list_view.forEach(a=>{a.list_input.forEach(a=>{if("cButton"===a.inputtype){i=!0;const o=JSON.stringify(a.config),s=a.default;"MUTI_FORM"===t&&(s.name.toLowerCase().includes("accept")&&JSON.stringify(e).includes("Passw")&&JSON.stringify(e).includes("User Name")&&(t="APR_FORM"),o.includes("#sys:fo-open-form")&&(t="BO_FORM"),(o.includes("#sys:fo-create-dataAPI")||o.includes("fo-create-dataAPI-sanction"))&&s.name.toLowerCase().includes("accept")&&(t="FO_FORM"),o.includes("#sys:fo-lookup-selectData")&&(t="LKP_FORM"),s.name.toLowerCase().includes("apply")&&(t="SAME_FORM"))}})})}),!0===i&&"MUTI_FORM"===t?"BO_FORM":t}(e);return e.list_layout.forEach(a=>{a.list_view.forEach(a=>{let i=a.list_input;i.forEach((a,o)=>{a=function(e,t,a,i,o,s){if("jMutiValue"!==(null===e||void 0===e?void 0:e.inputtype))return e;e.default.name.includes("search")&&(e.config.is_open="true");return e}(a=function(e,t,a,i,o,s){if("cTextInput"!==e.inputtype)return e;Aa(o)&&e.default.code.includes("search")?(e.config.isSearch=!0,e.config.readOnly=!1,e.config.autoWrap=!1):(!e.validate.max||Number(e.validate.max)>50)&&(e.config.autoWrap=!0,e.config.isSearch=!1);return e}(a=function(e,t,a,i,o,s){"LKP_FORM"===t&&"cTableDefault"===e.inputtype&&(e.config.paging_mode="MIN");o.info.form_code.endsWith("Search")&&Aa(o)&&(e.config.isLoadDataStart="false");return e}(a=function(e,t,a,i,o,s){switch(e.inputtype){case"cButton":switch(t){case"MUTI_FORM":case"BO_FORM":case"FO_FORM":case"SAME_FORM":case"LKP_FORM":case"APR_FORM":break;default:console.log("Error cButton")}e.default.class="";break;case"cTextInput":switch(t){case"MUTI_FORM":e.default.class=Ca(e.default.class,i%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),o.info.form_code.toLowerCase().startsWith("fo_")&&(e.default.class=Ca(e.default.class,"col-12"));break;case"BO_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"SAME_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"LKP_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6");break;case"APR_FORM":e.default.class=Ca(e.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error cTextInput")}JSON.stringify(e).toLowerCase().includes("search_text")&&(e.default.class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 malibu-component-max_width");break;case"cTableDefault":e.default.class="col-12";break;case"jSelect":switch(t){case"MUTI_FORM":e.default.class=Ca(e.default.class,i%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),o.info.form_code.toLowerCase().startsWith("fo_")&&(e.default.class=Ca(e.default.class,"col-12"));break;case"BO_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"SAME_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"LKP_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":e.default.class=Ca(e.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error jSelect")}break;case"jMaskInput":switch(t){case"MUTI_FORM":e.default.class=Ca(e.default.class,i%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),o.info.form_code.toLowerCase().startsWith("fo_")&&(e.default.class=Ca(e.default.class,"col-12"));break;case"BO_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"SAME_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"LKP_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":e.default.class=Ca(e.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error jMaskInput")}break;case"jCheckbox":switch(t){case"MUTI_FORM":e.default.class=Ca(e.default.class,i%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),o.info.form_code.toLowerCase().startsWith("fo_")&&(e.default.class=Ca(e.default.class,"col-12"));break;case"BO_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"SAME_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"LKP_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":e.default.class=Ca(e.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error jCheckbox")}break;case"jMutiValue":switch(t){case"MUTI_FORM":e.default.class="col-12";break;case"BO_FORM":e.default.class=Ca(e.default.class,"col-xl-10 col-lg-10 col-md-11 col-sm-12 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"SAME_FORM":e.default.class=Ca(e.default.class,"col-xl-10 col-lg-10 col-md-11 col-sm-12 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"LKP_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;default:console.log("Error jMutiValue")}break;case"jCurrency":if(o.info.form_code.includes("_O9_FEE")&&o.info.title.includes("_O9_FEE")&&JSON.stringify(o).includes("Interest/fee/charge code")){if(["Total Cash","Total deposit","Total accounting","Total Interest","Total principal"].includes(e.default.name)){e.default.class="col-xl-3 col-lg-3 col-md-5 col-sm-6 offset-xl-1-right offset-lg-1-right offset-md-1-right";break}}switch(t){case"MUTI_FORM":e.default.class=Ca(e.default.class,i%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"),o.info.form_code.toLowerCase().startsWith("fo_")&&(e.default.class=Ca(e.default.class,"col-12"));break;case"BO_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"SAME_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"LKP_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":e.default.class=Ca(e.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error jCurrency")}break;case"jLabel":switch(t){case"MUTI_FORM":case"BO_FORM":case"FO_FORM":case"SAME_FORM":case"LKP_FORM":e.default.class="col-sm-4 col-12";break;default:console.log("Error jLabel")}break;case"jTableForm":case"jSameMain":e.default.class="col-12";break;default:switch(t){case"MUTI_FORM":e.default.class=Ca(e.default.class,i%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1");break;case"BO_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"FO_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"SAME_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right");break;case"LKP_FORM":e.default.class=Ca(e.default.class,"col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-8-right offset-lg-8-right offset-md-7-right offset-sm-6-right");break;case"APR_FORM":e.default.class=Ca(e.default.class,"col-xl-6 col-lg-6 col-md-8 col-sm-8 offset-xl-6-right offset-lg-6-right offset-md-4-right offset-sm-4-right");break;default:console.log("Error")}}if(e.default.ofgroup)if("false"===e.default.ofgroup)e.default.ofgroup="";else if(o.info.form_code.includes("_O9_FEE")&&o.info.title.includes("_O9_FEE")&&JSON.stringify(o).includes("Interest/fee/charge code"))e.default.class_ofgroup="col-xl-12 col-lg-12 col-md-12 col-sm-12","jLabel"===e.inputtype?e.default.class="col-xl-9 col-lg-9 col-md-8 col-sm-7 ":e.default.class="col-xl-3 col-lg-3 col-md-4 col-sm-5 ";else if("FO_FORM"===t)e.default.class_ofgroup="col-xl-12 col-lg-12 col-md-12 col-sm-12",e.default.class="col-xl-3 col-lg-3 col-md-4 col-sm-5 col-12";else{if("MUTI_FORM"===t){let t=0;for(let a=0;a<s.length;a++){const i=s[a];if(i.default.code===e.default.code)break;"jLabel"!==(null===i||void 0===i?void 0:i.inputtype)&&t++}e.default.class_ofgroup=t%2===0?"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1-right offset-lg-1-right":"col-xl-5 col-lg-5 col-md-6 col-sm-6 offset-xl-1 offset-lg-1"}else e.default.class_ofgroup="col-xl-4 col-lg-4 col-md-5 col-sm-6 offset-xl-2-right offset-lg-2-right offset-md-1-right";let a=s[i+1];"jLabel"!==(null===a||void 0===a?void 0:a.inputtype)&&"jLabel"!==(null===e||void 0===e?void 0:e.inputtype)?e.default.class="col-sm-6 col-12":"jLabel"!==(null===e||void 0===e?void 0:e.inputtype)&&(e.default.class="col-sm-8 col-12")}return e}(a,t,i[o-1],o,e,i),t,i[o-1],0,e),0,i[o-1],0,e),0,i[o-1])})})}),e}}function Ca(e,t){let a=e.replace(/(col[^ ]*|offset[^ ]+)/gm,"");return a=a+" "+t,a}function Aa(e){let t=!1;try{e.list_layout.forEach(e=>{e.list_view.forEach(e=>{e.list_input.forEach(e=>{"cButton"===e.inputtype&&e.default.code.includes("search")&&(t=!0)})})})}catch(a){return!1}return t}const ka={get_info:void 0};class Ma extends s.a{constructor(){super(...arguments),this.loopGetInfo=()=>{ka.get_info=setInterval(async()=>{const e=await Dt.getInfo();yt.updateInfo(this.context,e,this.handleStop)},2e3)},this.handleStart=()=>{Dt.notifyAllUser(),yt.handleStart(this.context,()=>{Dt.logoutAllUser();const e=yt.getData(this.context);Dt.startSync(e),this.loopGetInfo()})},this.handleStop=()=>{clearInterval(ka.get_info),yt.handleStop(this.context),Dt.handleStop()},this.handleCheckFeature=()=>{const e=this.context.componentConfigDefault,{code:t,name:a}=e;yt.handleSelectFeature(this.context,t,a)},this.addCautionToFO=e=>{let t=o.g.cloneJson(e),a={default:{name:o.g.getParameterSystem("CAUTION_FO"),code:"check_box_caution",class:"col-sm-12 col-md-12",role:"",condition:"",ofgroup:"",class_ofgroup:"col-sm-1 col-md-1",codeHidden:"1b3677dfcb939dcd"},config:{structable:"",structable_read:"",data_default:"false",action:"",checked_mode:"true_false"},role:{visible:"",disabled:""},property:{danger:"",warning:"true"},validate:{},lang:{vi:"",en:""},configAVD:{},inputtype:"jCheckbox"};return t.info.ruleStrong.push({code:"runFo",inUse:!0,isStart:!0,isStatus:-1,order:1,config:{component_action:"check_box_caution;btn_clear",component_event:"all",txFoActions:'[\n    {\n        "function": "own_O9.checkCaution",\n        "status": "A",\n        "para": ["check_box_caution","btn_accept"]\n    }\n]',txFo:'[\n    {\n        "txcode": "",\n        "input": {}\n    }\n]',useAction:"true",condition:"",component_result:"btn_accept"},isDidStart:!1,isOpenFromOther:!1}),t.info.ruleStrong.push({code:"calculator",inUse:!0,isStart:!0,isStatus:-1,order:6,config:{component_action:"txrefid",component_result:"check_box_caution",component_event:"all",function_cal:"'@{txrefid}'!==\"\" ? true : false",condition:""},isDidStart:!1,isOpenFromOther:!1}),t.info.ruleStrong.push({code:"visibility",inUse:!0,isStart:!1,isStatus:-1,order:1,config:{component_action:"btn_clear",component_result:"check_box_caution",view_result:"",condition:"",visible:"true",ena_dis:"false",component_event:"on_click",list_config:[]},isDidStart:!1,isOpenFromOther:!1}),t.list_layout[0].list_view[0].list_input.push(a),t},this.handleCheckFunctionFO=async()=>{var e,t;const a=null===(e=this.context)||void 0===e||null===(t=e.infoA)||void 0===t?void 0:t.key_form;if(!a)return;let i=o.g.getFormAppAuto(a);i.setLoadingRule(!0);let s=await this.callAPI("O9_ADMIN_SYNC_GET_FO_CONFIG"),l=new ya({});l.setData(JSON.stringify(s.data.data));let n=l.getData().context_auto;this.handleCheckFeature();let r=[],c=[],d=[],h=[];const _=n.list_form||[],u=n.list_menu||[],g=l.getData().list_form_authen;let m=i.callDirFromSupport("getAdvanced",{list_component:"*"},{}).fo_code_filter,p={};for(const o in _){if("*"!==m&&!m.split(";").includes(o.replace("FO_","")))continue;p[o]=!0;const e=_[o],t=e.list_API,a=e.list_form_chil;g[o]&&(e.config=this.addCautionToFO(e.config)),r.push({funtion_code:o.replace("FO_",""),funtion_name:e.config.info.title,api_amount:t.length,form_child_amount:a.length,form_code:o,form_config:Da.quickFix(e.config)});for(const i of a)c.push(Da.quickFix(i));d=d.concat(t)}h=u.filter(e=>p[e.group_menu_function_code]);let f=i.getData();f.form_fo_config=r,f.form_child_configs=c,f.api_fo_config=d,f.menu_fo_config=h,i.putDataAll_andSet(f),i.setLoadingRule(!1)},this.callAPI=(e,t)=>{var a=[{txcode:"#sys:bo-rule-getInfoAPI",input:{learn_api:e}}];return a[0].input=Object.assign(a[0].input,t),Object(i.b)(a,{}).then(t=>o.g.foGetData("data",t)||{[e]:[]}).finally(e=>{})}}}const xa={own_O9_sync:Ma,own_O9_fee:Re,own_O9:Ne,own_print:Ae,own_o9_calender:Ee,system:D,message:n,event:A,form:M,formsql:N,chat:S,masterdata:E,own:te,runFunc:ie,formAPI:se,formChild:ne,support:ce,msgSystem:he,supportKeyboard:Me,calender:Se,formJoin:Ie,schedule:Xe,formModal:et,chart:at,clipboard:ot,downloadFile:lt,jobProcess:rt};t.a=xa},function(e,t,a){"use strict";a.r(t);var i=a(0),o=a.n(i),s=a(1),l=a(2);class n extends i.Component{constructor(e){super(e);var t=!0;void 0!==this.props.hasSTT&&(t=this.props.hasSTT);var a=!0;void 0!==this.props.hasBtn&&(a=this.props.hasBtn);for(var i=this.props.columns,o=0;o<i.length;o++)i[o].search="";this.state={columns:i,openSearch:!1,hasSTT:t,hasBtn:a}}async onChangeSeacrh(e){void 0!==this.props.onChangeSeacrh&&this.props.onChangeSeacrh(e)}render(){return o.a.createElement("thead",null,o.a.createElement("tr",{onDoubleClick:()=>{var e=!this.state.openSearch;if(!1===e){for(var t=this.state.columns,a=0;a<t.length;a++)t[a].search="";this.setState({openSearch:e,columns:t}),this.onChangeSeacrh(t)}else this.setState({openSearch:e})},className:"bg-info base-reverse"},this.state.hasSTT&&o.a.createElement("th",{style:{width:"30px"}},s.g.getLang("stt")),this.state.columns.map((e,t)=>o.a.createElement("th",{key:t},s.g.getLang(e.title),this.state.openSearch&&o.a.createElement("input",{className:"form-control",value:e.search,onChange:e=>{var a=this.state.columns;a[t].search=e.target.value,this.setState({columns:a}),this.onChangeSeacrh(a)}}))),this.state.hasBtn&&o.a.createElement("th",null)))}}var r=n,c=a(5),d=a(8),h=a(4);class _ extends i.Component{constructor(e){super(e),this.changeKeyLanguage=e=>{let t={note:s.g.getLang("note"),title_:s.g.getLang("elearning_title"),des_:s.g.getLang("elearning_des"),role_system:s.g.getLang("elearning_roleSystem"),none_:s.g.getLang("elearning_none"),status:s.g.getLang("elearning_status"),active_:s.g.getLang("elearning_active"),inactive_:s.g.getLang("elearning_inactive"),info_des:s.g.getLang("elearning_infoDes"),form_code:s.g.getLang("elearning_formCode"),info_title:s.g.getLang("elearning_infoTitle"),code_:s.g.getLang("elearning_code"),content_title:s.g.getLang("elearning_contentTitle"),btn_save:s.g.getLang("elearning_btnSave"),btn_cancel:s.g.getLang("elearning_btnCancel"),column_title:s.g.getLang("elearning_columnTitle"),btn_view:s.g.getLang("elearning_btnView")};if(void 0!==e)return t;let a=this.state.infoA;a.title=s.g.getLang("elearning_title"),a.des=s.g.getLang("elearning_des"),a.lang_form.vi=s.g.getLang("elearning_title"),a.lang_form.en=s.g.getLang("elearning_title"),this.setState({languages:t,infoA:a})},this.getInfoA=()=>this.state.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=e=>{this.setState({visibility:e})},this.key_form="eLearning";let t=this.changeKeyLanguage("start");var a=s.g.getData("role_system"),i=[];if(void 0!==a)for(var o=0;o<a.length;o++){var l=a[o].role_system;i[i.length]={code:l.role_system_id,title:l.role_system_name}}var n=[];void 0!==this.props.data&&(n=this.props.data),this.state={disabled:!1,visibility:"",data:n,list_role:i,lang_system:s.g.getConfigUserDefault("list_lang_config"),infoA:{lang_form:{vi:s.g.getLang("elearning_title"),en:s.g.getLang("elearning_title")},title:"Training management",des:"T\u1ea5t c\u1ea3 th\xf4ng tin \u0111\xe0o t\u1ea1o!",openOne:"true",ofModal:!1},isPostButton:!1,auto_id:s.g.autoID(),eleaning_id_auto:s.g.autoID(),elearning_title:"",elearning_status:!0,elearning_old:!1,elearning_version:1,elearning_time:0,elearning_role:"none",form_id_select:s.g.autoID(),info:{title:"",des:"",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"true"},check_screen_width:void 0,languages:t}}UNSAFE_componentWillMount(){window.addEventListener("resize",()=>{window.innerWidth>=325&&window.innerWidth<996?this.setState({check_screen_width:!0}):this.setState({check_screen_width:!1})}),window.innerWidth>=325&&window.innerWidth<996?this.setState({check_screen_width:!0}):this.setState({check_screen_width:!1})}save_eLearning(){let e={},t=this.props.temple_elearning;for(let s of t.list_layout[0].list_view[0].list_input)"jeLearning"===s.inputtype&&(s.config.data_elearning=this.state.eleaning_id_auto);e.info=this.state.info,e.info.form_code=this.state.form_id_select,e.list_layout=t.list_layout,Object(h.b)([{txcode:"#sys:bo-save-formConfigId",input:{form_id:this.state.form_id_select,pack_send:e}}],{}),this.setState({isPostButton:!0}),setTimeout(()=>{this.setState({isPostButton:!1})},3e3);for(var a={eleaning_id_auto:this.state.eleaning_id_auto,elearning_title:this.state.elearning_title,elearning_status:this.state.elearning_status,elearning_user_create:Object(s.z)(),elearning_user_update:Object(s.z)(),elearning_old:this.state.elearning_old,elearning_version:this.state.elearning_version,elearning_time:this.state.elearning_time,elearning_role:this.state.elearning_role,info:this.state.info},i={},o=!1,l=0;l<this.state.lang_system.length;l++){var n=this.ob_mde[this.state.lang_system[l].key].value().trim();""===n||o||(o=!0),i[this.state.lang_system[l].key]=n}if(o){d.a.quickPost([{txcode:"#sys:bo-save-eLearning",input:{info_elearning:a,content_elearning:i}}],{});var r=this.state.data;if(this.state.elearning_old)for(var c=0;c<r.length;c++)r[c].eleaning_id_auto===this.state.eleaning_id_auto&&(r[c]=a);else r[r.length]=a;for(var _ in this.setState({elearning_title:"",elearning_status:!0,elearning_old:!1,elearning_version:1,elearning_time:0,elearning_role:"none",eleaning_id_auto:s.g.autoID(),data:r,form_id_select:s.g.autoID(),info:{title:"",des:"",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"true"}}),this.ob_mde)this.ob_mde[_].value("")}}downLoadOneELearning(e){for(var t="",a=0;a<this.state.lang_system.length;a++)t+=""===t?this.state.lang_system[a].key:";"+this.state.lang_system[a].key;Object(h.b)([{txcode:"#sys:bo-load-oneELearing",input:{eleaning_id:e,all_lang:t}}],{}).then(e=>{var t=s.g.foGetData("data",e);for(var a in t)this.ob_mde[a].value(t[a])},e=>{})}onChangeValue(e,t){var a=this.state.info;a[e]=t.target.value,this.setState({info:a})}render(){return o.a.createElement("div",{className:"form-style",style:{display:this.state.visibility}},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12 col-lg-12"},o.a.createElement("div",{className:"col-md-12 col-lg-12"},o.a.createElement("div",{className:"prtm-block"},o.a.createElement("div",{className:"prtm-block-title mrgn-b"},o.a.createElement("h3",null,this.state.languages.title_),o.a.createElement("p",null,o.a.createElement("span",{className:"note-box bg-danger"},this.state.languages.note),this.state.languages.des_)),o.a.createElement("div",{className:"row full-lg-md"},o.a.createElement("div",{className:"line-slide-tab"},o.a.createElement("ul",{className:"nav nav-tabs"},this.state.lang_system.map((e,t)=>o.a.createElement("li",{key:t,className:0===t?"active":""},o.a.createElement("a",{"data-toggle":"tab",href:"#tab-"+this.state.auto_id+t,"aria-expanded":"false"},e.view," ")))),o.a.createElement("div",{className:"tab-content pad-all-lg"},this.state.lang_system.map((e,t)=>o.a.createElement("div",{key:t,id:"tab-"+this.state.auto_id+t,className:0===t?"tab-pane fade active in":"tab-pane fade"},o.a.createElement("textarea",{ref:"context"+t,readOnly:!0,placeholde:e.view}))))),o.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},o.a.createElement(c.a,{class:"col-sm-12 col-md-4",name:this.state.languages.role_system,data:this.state.list_role,value:this.state.role_system_select,hasNew:!0,has_new_value:"none",has_new_name:this.state.languages.none_,onChange:e=>{this.setState({elearning_role:e.target.value})}}),o.a.createElement(c.a,{class:"col-sm-12 col-md-4",name:this.state.languages.status,data:[{title:this.state.languages.active_,code:"true"},{title:this.state.languages.inactive_,code:"false"}],value:this.state.elearning_status,hasNew:!1,onChange:e=>{this.setState({elearning_status:e.target.value})}}),o.a.createElement(l.a,{name:this.state.languages.info_des,class:"col-sm-12 col-md-4",value:this.state.info.des,onChange:e=>this.onChangeValue("des",e)}),o.a.createElement(l.a,{name:this.state.languages.form_code,class:"col-sm-12 col-md-3",disabled:this.state.disabled,onChange:e=>{this.setState({form_id_select:e.target.value})},value:this.state.form_id_select}),o.a.createElement(l.a,{name:this.state.languages.info_title,class:"col-sm-12 col-md-3",value:this.state.info.title,onChange:e=>this.onChangeValue("title",e)}),o.a.createElement(l.a,{name:this.state.languages.code_,class:"col-sm-12 col-md-3",disabled:this.state.disabled,onChange:e=>{this.setState({eleaning_id_auto:e.target.value})},value:this.state.eleaning_id_auto}),o.a.createElement(l.a,{name:this.state.languages.content_title,class:"col-sm-12 col-md-3",onChange:e=>{this.setState({elearning_title:e.target.value})},value:this.state.elearning_title})),o.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",style:{padding:"10px 5px 5px 30px"}},o.a.createElement("button",{className:"btn btn-success",type:"button",disabled:this.state.isPostButton,onClick:()=>{this.save_eLearning()}},this.state.languages.btn_save)," ",o.a.createElement("button",{className:"btn btn-danger",type:"button",onClick:()=>{this.setState({disabled:!1,eleaning_id_auto:this.state.disabled?s.g.autoID():this.state.eleaning_id_auto,elearning_title:"",elearning_status:!0,elearning_old:!1,elearning_version:0,elearning_time:0,elearning_role:"none",form_id_select:this.state.disabled?s.g.autoID():this.state.form_id_select,info:{title:"",des:"",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"true"}})}},this.state.languages.btn_cancel)))),o.a.createElement("div",{className:"prtm-block"},o.a.createElement("div",{className:"row full-lg-md"},o.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},o.a.createElement("div",{className:"table-responsive"},o.a.createElement("div",{className:void 0===this.state.check_screen_width||this.state.check_screen_width?"":"no-more-tables"},o.a.createElement("table",{className:"table table-bordered table-middle"},o.a.createElement(r,{hasSTT:!1,columns:[{code:"eleaning_id_auto",title:"ID"},{code:"elearning_title",title:this.state.languages.column_title}],onChangeSeacrh:e=>{}}),o.a.createElement("tbody",null,this.state.data.map((e,t)=>o.a.createElement("tr",{key:t},o.a.createElement("td",null,e.eleaning_id_auto),o.a.createElement("td",null,e.elearning_title),o.a.createElement("td",null,o.a.createElement("button",{className:"btn btn-warning",type:"button",onClick:()=>{this.setState({disabled:!0,eleaning_id_auto:e.eleaning_id_auto,elearning_title:e.elearning_title,elearning_status:e.elearning_status,elearning_old:!0,elearning_version:e.elearning_version+1,elearning_time:e.elearning_time,elearning_role:e.elearning_role,form_id_select:void 0!==e.info?e.info.form_code:"",info:void 0!==e.info?e.info:{title:"",des:"",data:"",learnapi:"",learnsql:"",bodata:"",openOne:"true"}}),this.downLoadOneELearning(e.eleaning_id_auto)}},this.state.languages.btn_view))))))))))),o.a.createElement("div",{className:"prtm-block"},o.a.createElement("div",{className:"row full-lg-md"},o.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-8"},o.a.createElement("h4",null,"Emphasis"),o.a.createElement("pre",null,"**",o.a.createElement("strong",null,"bold"),"**",o.a.createElement("br",null),"*",o.a.createElement("em",null,"italics"),"*",o.a.createElement("br",null),"~~",o.a.createElement("strike",null,"strikethrough"),"~~"),o.a.createElement("br",null),o.a.createElement("h4",null,"Headers"),o.a.createElement("pre",null,"# Big header",o.a.createElement("br",null),"## Medium header",o.a.createElement("br",null),"### Small header",o.a.createElement("br",null),"#### Tiny header"),o.a.createElement("br",null),o.a.createElement("h4",null,"Lists"),o.a.createElement("pre",null,"* Generic list item",o.a.createElement("br",null),"* Generic list item",o.a.createElement("br",null),"* Generic list item",o.a.createElement("br",null),o.a.createElement("br",null),"1. Numbered list item",o.a.createElement("br",null),"2. Numbered list item",o.a.createElement("br",null),"3. Numbered list item"),o.a.createElement("br",null),o.a.createElement("h4",null,"Links"),o.a.createElement("pre",null,"[Text to display](http://www.example.com)"),o.a.createElement("br",null),o.a.createElement("h4",null,"Quotes"),o.a.createElement("pre",null,"> This is a quote.",o.a.createElement("br",null),"> It can span multiple lines!"),o.a.createElement("br",null),o.a.createElement("h4",null,"Images \xa0 ",o.a.createElement("small",null,"Need to upload an image? ",o.a.createElement("a",{href:"http://imgur.com/",target:"blank"},"Imgur")," has a great interface.")),o.a.createElement("pre",null,"![](http://www.example.com/image.jpg)"),o.a.createElement("br",null),o.a.createElement("h4",null,"Tables"),o.a.createElement("pre",null,"| Column 1 | Column 2 | Column 3 |",o.a.createElement("br",null),"| -------- | -------- | -------- |",o.a.createElement("br",null),"| John     | Doe      | Male     |",o.a.createElement("br",null),"| Mary     | Smith    | Female   |",o.a.createElement("br",null),o.a.createElement("em",null,"Or without aligning the columns..."),o.a.createElement("br",null),"| Column 1 | Column 2 | Column 3 |",o.a.createElement("br",null),"| -------- | -------- | -------- |",o.a.createElement("br",null),"| John | Doe | Male |",o.a.createElement("br",null),"| Mary | Smith | Female |",o.a.createElement("br",null)),o.a.createElement("br",null),o.a.createElement("h4",null,"Displaying code"),o.a.createElement("pre",null,'`var example = "hello!";`',o.a.createElement("br",null),o.a.createElement("em",null,"Or spanning multiple lines..."),o.a.createElement("br",null),"```",o.a.createElement("br",null),'var example = "hello!";',o.a.createElement("br",null),"alert(example);",o.a.createElement("br",null),"```")),o.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-4"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{align:"left"},"Shortcut"),o.a.createElement("th",{align:"left"},"Action"))),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"Cmd-'")),o.a.createElement("td",{align:"left"},'"toggleBlockquote"')),o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"Cmd-B")),o.a.createElement("td",{align:"left"},'"toggleBold"')),o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"Cmd-E")),o.a.createElement("td",{align:"left"},'"cleanBlock"')),o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"Cmd-H")),o.a.createElement("td",{align:"left"},'"toggleHeadingSmaller"')),o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"Cmd-I")),o.a.createElement("td",{align:"left"},'"toggleItalic"')),o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"Cmd-K")),o.a.createElement("td",{align:"left"},'"drawLink"')),o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"Cmd-L")),o.a.createElement("td",{align:"left"},'"toggleUnorderedList"')),o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"Cmd-P")),o.a.createElement("td",{align:"left"},'"togglePreview"')),o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"Cmd-Alt-C")),o.a.createElement("td",{align:"left"},'"toggleCodeBlock"')),o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"Cmd-Alt-I")),o.a.createElement("td",{align:"left"},'"drawImage"')),o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"Cmd-Alt-L")),o.a.createElement("td",{align:"left"},'"toggleOrderedList"')),o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"Shift-Cmd-H")),o.a.createElement("td",{align:"left"},'"toggleHeadingBigger"')),o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"F9")),o.a.createElement("td",{align:"left"},'"toggleSideBySide"')),o.a.createElement("tr",null,o.a.createElement("td",{align:"left"},o.a.createElement("em",null,"F11")),o.a.createElement("td",{align:"left"},'"toggleFullScreen"')))))))))))}componentDidMount(){s.g.addAppAuto(this.key_form,this,this.state.infoA.ofModal),s.g.form_addMapping(this.key_form,this.props.mapping_key),this.ob_mde={};for(var e=0;e<this.state.lang_system.length;e++)this.ob_mde[this.state.lang_system[e].key]=new window.SimpleMDE({element:this.refs["context"+e],promptURLs:!0,spellChecker:!1,placeholder:"# This text \nwell come: "+this.state.lang_system[e].view})}}t.default=_},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(202)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){var i={"./designForm/LogicDesignForm/RuleFunction":[51,2,14],"./designForm/LogicDesignForm/RuleFunction/":[51,2,14],"./designForm/LogicDesignForm/RuleFunction/calculator":[41,9],"./designForm/LogicDesignForm/RuleFunction/calculator/":[41,9],"./designForm/LogicDesignForm/RuleFunction/calculator/index":[41,9],"./designForm/LogicDesignForm/RuleFunction/calculator/index.js":[41,9],"./designForm/LogicDesignForm/RuleFunction/constants":[69,32],"./designForm/LogicDesignForm/RuleFunction/constants.js":[69,32],"./designForm/LogicDesignForm/RuleFunction/get_info":[42,10],"./designForm/LogicDesignForm/RuleFunction/get_info/":[42,10],"./designForm/LogicDesignForm/RuleFunction/get_info/index":[42,10],"./designForm/LogicDesignForm/RuleFunction/get_info/index.js":[42,10],"./designForm/LogicDesignForm/RuleFunction/index":[51,2,14],"./designForm/LogicDesignForm/RuleFunction/index.js":[51,2,14],"./designForm/LogicDesignForm/RuleFunction/managerComponent":[47,11],"./designForm/LogicDesignForm/RuleFunction/managerComponent/":[47,11],"./designForm/LogicDesignForm/RuleFunction/managerComponent/index":[47,11],"./designForm/LogicDesignForm/RuleFunction/managerComponent/index.js":[47,11],"./designForm/LogicDesignForm/RuleFunction/numberCal":[46,12],"./designForm/LogicDesignForm/RuleFunction/numberCal/":[46,12],"./designForm/LogicDesignForm/RuleFunction/numberCal/index":[46,12],"./designForm/LogicDesignForm/RuleFunction/numberCal/index.js":[46,12],"./designForm/LogicDesignForm/RuleFunction/run_fo":[48,8],"./designForm/LogicDesignForm/RuleFunction/run_fo/":[48,8],"./designForm/LogicDesignForm/RuleFunction/run_fo/index":[48,8],"./designForm/LogicDesignForm/RuleFunction/run_fo/index.js":[48,8],"./designForm/LogicDesignForm/RuleFunction/setDataGB":[44,13],"./designForm/LogicDesignForm/RuleFunction/setDataGB/":[44,13],"./designForm/LogicDesignForm/RuleFunction/setDataGB/index":[44,13],"./designForm/LogicDesignForm/RuleFunction/setDataGB/index.js":[44,13],"./designForm/LogicDesignForm/RuleFunction/setFocus":[49,4],"./designForm/LogicDesignForm/RuleFunction/setFocus/":[49,4],"./designForm/LogicDesignForm/RuleFunction/setFocus/index":[49,4],"./designForm/LogicDesignForm/RuleFunction/setFocus/index.js":[49,4],"./designForm/LogicDesignForm/RuleFunction/setMask":[50,5],"./designForm/LogicDesignForm/RuleFunction/setMask/":[50,5],"./designForm/LogicDesignForm/RuleFunction/setMask/index":[50,5],"./designForm/LogicDesignForm/RuleFunction/setMask/index.js":[50,5],"./designForm/LogicDesignForm/RuleFunction/setValue":[45,6],"./designForm/LogicDesignForm/RuleFunction/setValue/":[45,6],"./designForm/LogicDesignForm/RuleFunction/setValue/index":[45,6],"./designForm/LogicDesignForm/RuleFunction/setValue/index.js":[45,6],"./designForm/LogicDesignForm/RuleFunction/visibility":[43,7],"./designForm/LogicDesignForm/RuleFunction/visibility/":[43,7],"./designForm/LogicDesignForm/RuleFunction/visibility/index":[43,7],"./designForm/LogicDesignForm/RuleFunction/visibility/index.js":[43,7],"./designForm/LogicDesignForm/component/baseComponent":[70,1],"./designForm/LogicDesignForm/component/baseComponent.js":[70,1],"./designForm/LogicDesignForm/component/cButton/config":[71,25],"./designForm/LogicDesignForm/component/cButton/config.js":[71,25],"./designForm/LogicDesignForm/component/cButton/essence":[83,33],"./designForm/LogicDesignForm/component/cButton/essence.js":[83,33],"./designForm/LogicDesignForm/component/cButton/lang":[82,34],"./designForm/LogicDesignForm/component/cButton/lang.js":[82,34],"./designForm/LogicDesignForm/component/cButton/role":[80,35],"./designForm/LogicDesignForm/component/cButton/role.js":[80,35],"./designForm/LogicDesignForm/component/cButton/validate":[81,36],"./designForm/LogicDesignForm/component/cButton/validate.js":[81,36],"./designForm/LogicDesignForm/component/cTableDefault/config":[127,37],"./designForm/LogicDesignForm/component/cTableDefault/config.js":[127,37],"./designForm/LogicDesignForm/component/cTableDefault/essence":[131,38],"./designForm/LogicDesignForm/component/cTableDefault/essence.js":[131,38],"./designForm/LogicDesignForm/component/cTableDefault/lang":[130,39],"./designForm/LogicDesignForm/component/cTableDefault/lang.js":[130,39],"./designForm/LogicDesignForm/component/cTableDefault/role":[128,40],"./designForm/LogicDesignForm/component/cTableDefault/role.js":[128,40],"./designForm/LogicDesignForm/component/cTableDefault/validate":[129,41],"./designForm/LogicDesignForm/component/cTableDefault/validate.js":[129,41],"./designForm/LogicDesignForm/component/cTextArea/config":[97,42],"./designForm/LogicDesignForm/component/cTextArea/config.js":[97,42],"./designForm/LogicDesignForm/component/cTextArea/essence":[101,43],"./designForm/LogicDesignForm/component/cTextArea/essence.js":[101,43],"./designForm/LogicDesignForm/component/cTextArea/lang":[100,44],"./designForm/LogicDesignForm/component/cTextArea/lang.js":[100,44],"./designForm/LogicDesignForm/component/cTextArea/role":[98,45],"./designForm/LogicDesignForm/component/cTextArea/role.js":[98,45],"./designForm/LogicDesignForm/component/cTextArea/validate":[99,46],"./designForm/LogicDesignForm/component/cTextArea/validate.js":[99,46],"./designForm/LogicDesignForm/component/cTextInput/config":[72,26],"./designForm/LogicDesignForm/component/cTextInput/config.js":[72,26],"./designForm/LogicDesignForm/component/cTextInput/essence":[87,47],"./designForm/LogicDesignForm/component/cTextInput/essence.js":[87,47],"./designForm/LogicDesignForm/component/cTextInput/lang":[86,48],"./designForm/LogicDesignForm/component/cTextInput/lang.js":[86,48],"./designForm/LogicDesignForm/component/cTextInput/role":[84,49],"./designForm/LogicDesignForm/component/cTextInput/role.js":[84,49],"./designForm/LogicDesignForm/component/cTextInput/validate":[85,50],"./designForm/LogicDesignForm/component/cTextInput/validate.js":[85,50],"./designForm/LogicDesignForm/component/componentDefault":[74,51],"./designForm/LogicDesignForm/component/componentDefault.js":[74,51],"./designForm/LogicDesignForm/component/component_config":[173,1,52],"./designForm/LogicDesignForm/component/component_config.js":[173,1,52],"./designForm/LogicDesignForm/component/jButtonSignature/config":[163,27],"./designForm/LogicDesignForm/component/jButtonSignature/config.js":[163,27],"./designForm/LogicDesignForm/component/jButtonSignature/essence":[164,53],"./designForm/LogicDesignForm/component/jButtonSignature/essence.js":[164,53],"./designForm/LogicDesignForm/component/jButtonSignature/lang":[167,54],"./designForm/LogicDesignForm/component/jButtonSignature/lang.js":[167,54],"./designForm/LogicDesignForm/component/jButtonSignature/role":[165,55],"./designForm/LogicDesignForm/component/jButtonSignature/role.js":[165,55],"./designForm/LogicDesignForm/component/jButtonSignature/validate":[166,56],"./designForm/LogicDesignForm/component/jButtonSignature/validate.js":[166,56],"./designForm/LogicDesignForm/component/jChart/config":[137,57],"./designForm/LogicDesignForm/component/jChart/config.js":[137,57],"./designForm/LogicDesignForm/component/jChart/essence":[141,58],"./designForm/LogicDesignForm/component/jChart/essence.js":[141,58],"./designForm/LogicDesignForm/component/jChart/lang":[140,59],"./designForm/LogicDesignForm/component/jChart/lang.js":[140,59],"./designForm/LogicDesignForm/component/jChart/role":[138,60],"./designForm/LogicDesignForm/component/jChart/role.js":[138,60],"./designForm/LogicDesignForm/component/jChart/validate":[139,61],"./designForm/LogicDesignForm/component/jChart/validate.js":[139,61],"./designForm/LogicDesignForm/component/jCheckbox/config":[92,62],"./designForm/LogicDesignForm/component/jCheckbox/config.js":[92,62],"./designForm/LogicDesignForm/component/jCheckbox/essence":[96,63],"./designForm/LogicDesignForm/component/jCheckbox/essence.js":[96,63],"./designForm/LogicDesignForm/component/jCheckbox/lang":[95,64],"./designForm/LogicDesignForm/component/jCheckbox/lang.js":[95,64],"./designForm/LogicDesignForm/component/jCheckbox/role":[93,65],"./designForm/LogicDesignForm/component/jCheckbox/role.js":[93,65],"./designForm/LogicDesignForm/component/jCheckbox/validate":[94,66],"./designForm/LogicDesignForm/component/jCheckbox/validate.js":[94,66],"./designForm/LogicDesignForm/component/jCurrency/config":[117,67],"./designForm/LogicDesignForm/component/jCurrency/config.js":[117,67],"./designForm/LogicDesignForm/component/jCurrency/essence":[121,68],"./designForm/LogicDesignForm/component/jCurrency/essence.js":[121,68],"./designForm/LogicDesignForm/component/jCurrency/lang":[120,69],"./designForm/LogicDesignForm/component/jCurrency/lang.js":[120,69],"./designForm/LogicDesignForm/component/jCurrency/role":[118,70],"./designForm/LogicDesignForm/component/jCurrency/role.js":[118,70],"./designForm/LogicDesignForm/component/jCurrency/validate":[119,71],"./designForm/LogicDesignForm/component/jCurrency/validate.js":[119,71],"./designForm/LogicDesignForm/component/jFullCalendar/config":[152,72],"./designForm/LogicDesignForm/component/jFullCalendar/config.js":[152,72],"./designForm/LogicDesignForm/component/jFullCalendar/essence":[156,73],"./designForm/LogicDesignForm/component/jFullCalendar/essence.js":[156,73],"./designForm/LogicDesignForm/component/jFullCalendar/lang":[155,74],"./designForm/LogicDesignForm/component/jFullCalendar/lang.js":[155,74],"./designForm/LogicDesignForm/component/jFullCalendar/role":[153,75],"./designForm/LogicDesignForm/component/jFullCalendar/role.js":[153,75],"./designForm/LogicDesignForm/component/jFullCalendar/validate":[154,76],"./designForm/LogicDesignForm/component/jFullCalendar/validate.js":[154,76],"./designForm/LogicDesignForm/component/jImage/config":[168,28],"./designForm/LogicDesignForm/component/jImage/config.js":[168,28],"./designForm/LogicDesignForm/component/jImage/essence":[169,77],"./designForm/LogicDesignForm/component/jImage/essence.js":[169,77],"./designForm/LogicDesignForm/component/jImage/lang":[172,78],"./designForm/LogicDesignForm/component/jImage/lang.js":[172,78],"./designForm/LogicDesignForm/component/jImage/role":[170,79],"./designForm/LogicDesignForm/component/jImage/role.js":[170,79],"./designForm/LogicDesignForm/component/jImage/validate":[171,80],"./designForm/LogicDesignForm/component/jImage/validate.js":[171,80],"./designForm/LogicDesignForm/component/jLabel/config":[142,81],"./designForm/LogicDesignForm/component/jLabel/config.js":[142,81],"./designForm/LogicDesignForm/component/jLabel/essence":[146,82],"./designForm/LogicDesignForm/component/jLabel/essence.js":[146,82],"./designForm/LogicDesignForm/component/jLabel/lang":[145,83],"./designForm/LogicDesignForm/component/jLabel/lang.js":[145,83],"./designForm/LogicDesignForm/component/jLabel/role":[143,84],"./designForm/LogicDesignForm/component/jLabel/role.js":[143,84],"./designForm/LogicDesignForm/component/jLabel/validate":[144,85],"./designForm/LogicDesignForm/component/jLabel/validate.js":[144,85],"./designForm/LogicDesignForm/component/jMaskInput/config":[73,86],"./designForm/LogicDesignForm/component/jMaskInput/config.js":[73,86],"./designForm/LogicDesignForm/component/jMaskInput/essence":[91,87],"./designForm/LogicDesignForm/component/jMaskInput/essence.js":[91,87],"./designForm/LogicDesignForm/component/jMaskInput/lang":[90,88],"./designForm/LogicDesignForm/component/jMaskInput/lang.js":[90,88],"./designForm/LogicDesignForm/component/jMaskInput/role":[88,89],"./designForm/LogicDesignForm/component/jMaskInput/role.js":[88,89],"./designForm/LogicDesignForm/component/jMaskInput/validate":[89,90],"./designForm/LogicDesignForm/component/jMaskInput/validate.js":[89,90],"./designForm/LogicDesignForm/component/jMutiValue/config":[112,91],"./designForm/LogicDesignForm/component/jMutiValue/config.js":[112,91],"./designForm/LogicDesignForm/component/jMutiValue/essence":[116,92],"./designForm/LogicDesignForm/component/jMutiValue/essence.js":[116,92],"./designForm/LogicDesignForm/component/jMutiValue/lang":[115,93],"./designForm/LogicDesignForm/component/jMutiValue/lang.js":[115,93],"./designForm/LogicDesignForm/component/jMutiValue/role":[113,94],"./designForm/LogicDesignForm/component/jMutiValue/role.js":[113,94],"./designForm/LogicDesignForm/component/jMutiValue/validate":[114,95],"./designForm/LogicDesignForm/component/jMutiValue/validate.js":[114,95],"./designForm/LogicDesignForm/component/jPrintVoucher/config":[75,29],"./designForm/LogicDesignForm/component/jPrintVoucher/config.js":[75,29],"./designForm/LogicDesignForm/component/jPrintVoucher/essence":[79,96],"./designForm/LogicDesignForm/component/jPrintVoucher/essence.js":[79,96],"./designForm/LogicDesignForm/component/jPrintVoucher/lang":[78,97],"./designForm/LogicDesignForm/component/jPrintVoucher/lang.js":[78,97],"./designForm/LogicDesignForm/component/jPrintVoucher/role":[76,98],"./designForm/LogicDesignForm/component/jPrintVoucher/role.js":[76,98],"./designForm/LogicDesignForm/component/jPrintVoucher/validate":[77,99],"./designForm/LogicDesignForm/component/jPrintVoucher/validate.js":[77,99],"./designForm/LogicDesignForm/component/jProgressBar/config":[33],"./designForm/LogicDesignForm/component/jProgressBar/config.js":[33],"./designForm/LogicDesignForm/component/jProgressBar/essence":[36],"./designForm/LogicDesignForm/component/jProgressBar/essence.js":[36],"./designForm/LogicDesignForm/component/jProgressBar/lang":[35],"./designForm/LogicDesignForm/component/jProgressBar/lang.js":[35],"./designForm/LogicDesignForm/component/jProgressBar/role":[157,100],"./designForm/LogicDesignForm/component/jProgressBar/role.js":[157,100],"./designForm/LogicDesignForm/component/jProgressBar/validate":[34],"./designForm/LogicDesignForm/component/jProgressBar/validate.js":[34],"./designForm/LogicDesignForm/component/jRadioBox/config":[102,30],"./designForm/LogicDesignForm/component/jRadioBox/config.js":[102,30],"./designForm/LogicDesignForm/component/jRadioBox/essence":[106,101],"./designForm/LogicDesignForm/component/jRadioBox/essence.js":[106,101],"./designForm/LogicDesignForm/component/jRadioBox/lang":[105,102],"./designForm/LogicDesignForm/component/jRadioBox/lang.js":[105,102],"./designForm/LogicDesignForm/component/jRadioBox/role":[103,103],"./designForm/LogicDesignForm/component/jRadioBox/role.js":[103,103],"./designForm/LogicDesignForm/component/jRadioBox/validate":[104,104],"./designForm/LogicDesignForm/component/jRadioBox/validate.js":[104,104],"./designForm/LogicDesignForm/component/jSameMain/config":[147,105],"./designForm/LogicDesignForm/component/jSameMain/config.js":[147,105],"./designForm/LogicDesignForm/component/jSameMain/essence":[151,106],"./designForm/LogicDesignForm/component/jSameMain/essence.js":[151,106],"./designForm/LogicDesignForm/component/jSameMain/lang":[150,107],"./designForm/LogicDesignForm/component/jSameMain/lang.js":[150,107],"./designForm/LogicDesignForm/component/jSameMain/role":[148,108],"./designForm/LogicDesignForm/component/jSameMain/role.js":[148,108],"./designForm/LogicDesignForm/component/jSameMain/validate":[149,109],"./designForm/LogicDesignForm/component/jSameMain/validate.js":[149,109],"./designForm/LogicDesignForm/component/jSelect/config":[107,110],"./designForm/LogicDesignForm/component/jSelect/config.js":[107,110],"./designForm/LogicDesignForm/component/jSelect/essence":[111,111],"./designForm/LogicDesignForm/component/jSelect/essence.js":[111,111],"./designForm/LogicDesignForm/component/jSelect/lang":[110,112],"./designForm/LogicDesignForm/component/jSelect/lang.js":[110,112],"./designForm/LogicDesignForm/component/jSelect/role":[108,113],"./designForm/LogicDesignForm/component/jSelect/role.js":[108,113],"./designForm/LogicDesignForm/component/jSelect/validate":[109,114],"./designForm/LogicDesignForm/component/jSelect/validate.js":[109,114],"./designForm/LogicDesignForm/component/jTableForm/config":[122,115],"./designForm/LogicDesignForm/component/jTableForm/config.js":[122,115],"./designForm/LogicDesignForm/component/jTableForm/essence":[126,116],"./designForm/LogicDesignForm/component/jTableForm/essence.js":[126,116],"./designForm/LogicDesignForm/component/jTableForm/lang":[125,117],"./designForm/LogicDesignForm/component/jTableForm/lang.js":[125,117],"./designForm/LogicDesignForm/component/jTableForm/role":[123,118],"./designForm/LogicDesignForm/component/jTableForm/role.js":[123,118],"./designForm/LogicDesignForm/component/jTableForm/validate":[124,119],"./designForm/LogicDesignForm/component/jTableForm/validate.js":[124,119],"./designForm/LogicDesignForm/component/jTableSearch/config":[132,120],"./designForm/LogicDesignForm/component/jTableSearch/config.js":[132,120],"./designForm/LogicDesignForm/component/jTableSearch/essence":[136,121],"./designForm/LogicDesignForm/component/jTableSearch/essence.js":[136,121],"./designForm/LogicDesignForm/component/jTableSearch/lang":[135,122],"./designForm/LogicDesignForm/component/jTableSearch/lang.js":[135,122],"./designForm/LogicDesignForm/component/jTableSearch/role":[133,123],"./designForm/LogicDesignForm/component/jTableSearch/role.js":[133,123],"./designForm/LogicDesignForm/component/jTableSearch/validate":[134,124],"./designForm/LogicDesignForm/component/jTableSearch/validate.js":[134,124],"./designForm/LogicDesignForm/component/jUploadFile/config":[158,31],"./designForm/LogicDesignForm/component/jUploadFile/config.js":[158,31],"./designForm/LogicDesignForm/component/jUploadFile/essence":[159,125],"./designForm/LogicDesignForm/component/jUploadFile/essence.js":[159,125],"./designForm/LogicDesignForm/component/jUploadFile/lang":[162,126],"./designForm/LogicDesignForm/component/jUploadFile/lang.js":[162,126],"./designForm/LogicDesignForm/component/jUploadFile/role":[160,127],"./designForm/LogicDesignForm/component/jUploadFile/role.js":[160,127],"./designForm/LogicDesignForm/component/jUploadFile/validate":[161,128],"./designForm/LogicDesignForm/component/jUploadFile/validate.js":[161,128],"./designForm/LogicDesignForm/configLayout":[174,129],"./designForm/LogicDesignForm/configLayout.js":[174,129],"./designForm/LogicDesignForm/configView":[175,130],"./designForm/LogicDesignForm/configView.js":[175,130],"./designForm/LogicDesignForm/designTxFo":[68,131],"./designForm/LogicDesignForm/designTxFo.js":[68,131],"./designForm/LogicDesignForm/form_begin":[176,1,2,3,132],"./designForm/LogicDesignForm/form_begin.js":[176,1,2,3,132],"./designForm/LogicDesignForm/form_design":[177,1,2,3],"./designForm/LogicDesignForm/form_design.js":[177,1,2,3],"./designForm/LogicDesignForm/form_preview":[178,133],"./designForm/LogicDesignForm/form_preview.js":[178,133],"./designForm/desktop_designForm":[179,1,2,3,16],"./designForm/desktop_designForm.js":[179,1,2,3,16],"./jWebUITemplateControl":[37],"./jWebUITemplateControl.js":[37],"./malibu/desktop_cms":[180,0,15],"./malibu/desktop_cms.js":[180,0,15],"./malibu/desktop_hub":[181,0,19],"./malibu/desktop_hub.js":[181,0,19],"./malibu/desktop_ncbs":[182,0,20],"./malibu/desktop_ncbs.js":[182,0,20],"./malibu/desktop_ncbsCbs":[183,0,21],"./malibu/desktop_ncbsCbs.js":[183,0,21],"./malibu/desktop_o9":[188,0,22],"./malibu/desktop_o9.js":[188,0,22],"./malibu/desktop_sys":[184,0,23],"./malibu/desktop_sys.js":[184,0,23],"./malibu/desktop_timekeeping":[185,0,24],"./malibu/desktop_timekeeping.js":[185,0,24],"./malibu1/desktop_o9":[186,0,17],"./malibu1/desktop_o9.js":[186,0,17],"./malibu2/desktop_o9":[187,0,18],"./malibu2/desktop_o9.js":[187,0,18]};function o(e){if(!a.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],o=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a(o)}))}o.keys=function(){return Object.keys(i)},o.id=199,e.exports=o},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t),a.d(t,"callLoadFinal",(function(){return C})),a.d(t,"callLoadTemplateCss",(function(){return A})),a.d(t,"callLoadComponent",(function(){return k})),a.d(t,"callStart",(function(){return M})),a.d(t,"processLoadingGUI",(function(){return x}));var i=a(1),o=a(0),s=a.n(o),l=a(14),n=a.n(l),r=a(6),c={start:{DOM_Html:null,current:0,max_pack:12},header:null};a(201);class d extends o.Component{constructor(e){let t;super(e),this.abstract_changeDevice=e=>{this.setState({device:e})},this.callBack=()=>{this.setState({class:"fade-in"},()=>{setTimeout(()=>{this.setState({visible:!1},this.stopAllAnination())},100)})},this.flagUnMount=!1,t=void 0===this.props.time_out?1e4:this.props.time_out,this.tree_item="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDggMTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMy4xMTI3OSA3LjY0NDg1QzMuMTEyNzkgNy42NDQ4NSAzLjMwMjA4IDMuNjg1NzQgNy4xODI2MiA0LjE0NTkyWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPHBhdGggZD0iTTIuMDE2NCAzLjg3NzI0QzMuMDg5MDMgMy44NzcyNCAzLjk1ODU4IDMuMDA5MjkgMy45NTg1OCAxLjkzODYyQzMuOTU4NTggMC44Njc5NTQgMy4wODkwMyAwIDIuMDE2NCAwQzAuOTQzNzU5IDAgMC4wNzQyMTg4IDAuODY3OTU0IDAuMDc0MjE4OCAxLjkzODYyQzAuMDc0MjE4OCAzLjAwOTI5IDAuOTQzNzU5IDMuODc3MjQgMi4wMTY0IDMuODc3MjRaIiBmaWxsPSIjNTU1N0U0Ii8+DQo8cGF0aCBkPSJNMi4yNDg0MiA1LjIwMzEySDEuNzAwMlY5LjAzMzcxSDIuMjQ4NDJWNS4yMDMxMloiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",this.state={device:this.props.device,skin_config:"",time_out:t,percent_before:0,percent_after:this.props.dataFull.percent,visible:!0}}stopAllAnination(){this.flagUnMount=!0,void 0!==this.ob_animationEye&&this.ob_animationEye.pause(),void 0!==this.ob_animationPercent_1&&this.ob_animationPercent_1.pause(),void 0!==this.ob_animationPercent_2&&this.ob_animationPercent_2.pause(),void 0!==this.ob_animationPercent_3&&this.ob_animationPercent_3.pause(),void 0!==this.animationBackground_1&&this.animationBackground_1.pause(),void 0!==this.animationBackground_2&&this.animationBackground_2.pause(),void 0!==this.animationBackground_3&&this.animationBackground_3.pause(),void 0!==this.animationBackground_4&&this.animationBackground_4.pause(),void 0!==this.animationBackground_5&&this.animationBackground_5.pause()}componentDidMount(){this.animationBackground(),this.animationPercent(),setTimeout(()=>{this.flagUnMount||this.animationEye()},500)}UNSAFE_componentWillUpdate(e){void 0!==e.dataFull&&void 0!==e.dataFull.percent&&this.props.dataFull.percent!==e.dataFull.percent&&this.state.percent_before!==e.dataFull.percent&&(e.dataFull.percent<100?this.setState({percent_before:this.props.dataFull.percent,percent_after:e.dataFull.percent},()=>{this.animationPercent()}):this.setState({percent_before:100,percent_after:100},()=>{this.animationPercent(this.callBack)}))}animationBackground(){this.animationBackground_1=window.anime({targets:".malibu-"+this.state.device+"-uLoading-tree",scale:3,loop:!0,duration:3e3,baseFrequency:0,direction:"alternate",easing:"linear"}),this.animationBackground_2=window.anime({targets:".malibu-"+this.state.device+"-uLoading-ground",scale:4,loop:!0,duration:3e3,baseFrequency:0,direction:"alternate",easing:"linear"}),this.animationBackground_3=window.anime({targets:".malibu-"+this.state.device+"-uLoading-sun",translateY:-170,loop:!0,duration:3e3,baseFrequency:0,opacity:[0,1],direction:"alternate",easing:"linear",background:["rgb(255,255,255)","#FF6584"]}),this.animationBackground_4=window.anime({targets:".malibu-"+this.state.device+"-uLoading-music",opacity:[0,1],translateY:-10,delay:window.anime.stagger(300,{grid:[14,5],from:"center"}),loop:!0,direction:"alternate"}),void 0!==this.props.dataFull.speed.title&&(this.animationBackground_5=window.anime({targets:".malibu-"+this.state.device+"-uLoading-rocket",translateY:-10,loop:!0,duration:1e3,baseFrequency:0,direction:"alternate",easing:"linear"}))}animationEye(){if(!this.flagUnMount){let e=window.anime.path(".malibu-"+this.state.device+"-uLoading-path path");this.ob_animationEye=window.anime({targets:".malibu-"+this.state.device+"-uLoading-chiken-eye",translateX:e("x"),translateY:e("y"),rotate:e("angle"),duration:6e3,easing:"linear",loop:!0})}}getColor(){let e="";return document.getElementsByTagName("body")[0].classList.toString().includes("kbank")?(e="#99ddb9",this.props.dataFull.percent<=100&&(e=this.props.dataFull.percent<=25?"#99ddb9":this.props.dataFull.percent<=50?"#33ba73":this.props.dataFull.percent<=75?"#1ab262":"#00A950")):(e="#5557E4",this.props.dataFull.percent<=100&&(e=this.props.dataFull.percent<=25?"#CACBF7":this.props.dataFull.percent<=50?"#A7A8F1":this.props.dataFull.percent<=75?"#8385EC":"#5557E4")),e}animationPercent(e){this.ob_animationPercent_1=window.anime({targets:".malibu-"+this.state.device+"-uLoading-progress",width:[this.state.percent_before+"%",this.state.percent_after+"%"],easing:"easeInOutQuart",background:[this.getColor(),this.getColor()],duration:100,complete:()=>{void 0!==this.props.f_callBack_animationPercent&&this.props.f_callBack_animationPercent()}}),void 0!==e?this.ob_animationPercent_2=window.anime({targets:".number-percent-input",value:[this.state.percent_before,this.state.percent_after],round:1,easing:"easeInOutQuart",duration:20,complete:()=>{setTimeout(()=>{e()},500)}}):this.ob_animationPercent_3=window.anime({targets:".number-percent-input",value:[this.state.percent_before,this.state.percent_after],round:1,easing:"easeInOutQuart",duration:100})}renderForDevice(){return"desktop"===this.state.device?s.a.createElement("div",{className:"malibu-desktop-uLoading "+this.state.class},s.a.createElement("div",{className:"malibu-desktop-uLoading-header"},s.a.createElement("div",{style:{position:"absolute",marginLeft:"320px",zIndex:"3"}},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMzIiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDEzMyAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02Ni4wODI4IDExNy4yNDVDOTUuNjg4NyAxMTcuMjQ1IDExOS42ODkgOTMuMjg5MSAxMTkuNjg5IDYzLjczNzRDMTE5LjY4OSAzNC4xODU4IDk1LjY4ODcgMTAuMjI5NSA2Ni4wODI4IDEwLjIyOTVDMzYuNDc2OSAxMC4yMjk1IDEyLjQ3NjYgMzQuMTg1OCAxMi40NzY2IDYzLjczNzRDMTIuNDc2NiA5My4yODkxIDM2LjQ3NjkgMTE3LjI0NSA2Ni4wODI4IDExNy4yNDVaIiBmaWxsPSIjM0YzRDU2Ii8+CjxwYXRoIGQ9Ik0zMi4zMzQ0IDY4LjAzMjZDMzMuNjY1OCA2Ni40NDE3IDM1LjMzMDkgNjUuMTYyIDM3LjIxMiA2NC4yODM4QzM5LjA5MzIgNjMuNDA1NiA0MS4xNDQ3IDYyLjk1MDUgNDMuMjIxNCA2Mi45NTA1QzQ1LjI5ODEgNjIuOTUwNSA0Ny4zNDk2IDYzLjQwNTYgNDkuMjMwNyA2NC4yODM4QzUxLjExMTkgNjUuMTYyIDUyLjc3NyA2Ni40NDE3IDU0LjEwODQgNjguMDMyNkM1Ni4zODY1IDY1Ljg2MTkgNTcuOTYxIDYzLjA1OTggNTguNjI5MSA1OS45ODc2QzU5LjI5NzIgNTYuOTE1NSA1OS4wMjgyIDUzLjcxNCA1Ny44NTY4IDUwLjc5NThDNTYuNjg1NCA0Ny44Nzc2IDU0LjY2NTIgNDUuMzc2NSA1Mi4wNTY3IDQzLjYxNDhDNDkuNDQ4MiA0MS44NTMxIDQ2LjM3MDkgNDAuOTExNiA0My4yMjE0IDQwLjkxMTZDNDAuMDcxOSA0MC45MTE2IDM2Ljk5NDYgNDEuODUzMSAzNC4zODYxIDQzLjYxNDhDMzEuNzc3NiA0NS4zNzY1IDI5Ljc1NzQgNDcuODc3NiAyOC41ODYgNTAuNzk1OEMyNy40MTQ2IDUzLjcxNCAyNy4xNDU2IDU2LjkxNTUgMjcuODEzNyA1OS45ODc2QzI4LjQ4MTggNjMuMDU5OCAzMC4wNTYzIDY1Ljg2MTkgMzIuMzM0NCA2OC4wMzI2VjY4LjAzMjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzQuOTA0IDY4LjAzMjZDNzYuMjM1MyA2Ni40NDE3IDc3LjkwMDQgNjUuMTYxOSA3OS43ODE2IDY0LjI4MzhDODEuNjYyOCA2My40MDU2IDgzLjcxNDIgNjIuOTUwNSA4NS43OTEgNjIuOTUwNUM4Ny44Njc3IDYyLjk1MDUgODkuOTE5MSA2My40MDU2IDkxLjgwMDMgNjQuMjgzOEM5My42ODE1IDY1LjE2MTkgOTUuMzQ2NSA2Ni40NDE3IDk2LjY3NzkgNjguMDMyNkM5OC45NTYgNjUuODYxOSAxMDAuNTMxIDYzLjA1OTggMTAxLjE5OSA1OS45ODc2QzEwMS44NjcgNTYuOTE1NSAxMDEuNTk4IDUzLjcxNCAxMDAuNDI2IDUwLjc5NThDOTkuMjU0OSA0Ny44Nzc2IDk3LjIzNDggNDUuMzc2NSA5NC42MjYzIDQzLjYxNDhDOTIuMDE3OCA0MS44NTMxIDg4Ljk0MDQgNDAuOTExNiA4NS43OTEgNDAuOTExNkM4Mi42NDE1IDQwLjkxMTYgNzkuNTY0MSA0MS44NTMxIDc2Ljk1NTYgNDMuNjE0OEM3NC4zNDcxIDQ1LjM3NjUgNzIuMzI3IDQ3Ljg3NzYgNzEuMTU1NiA1MC43OTU4QzY5Ljk4NDEgNTMuNzE0IDY5LjcxNTEgNTYuOTE1NSA3MC4zODMyIDU5Ljk4NzZDNzEuMDUxMyA2My4wNTk4IDcyLjYyNTkgNjUuODYxOSA3NC45MDQgNjguMDMyNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yNy40NTQ4IDgzLjQwOTRDMzAuOTM3OSA4My40MDk0IDMzLjc2MTQgODAuNTkxIDMzLjc2MTQgNzcuMTE0M0MzMy43NjE0IDczLjYzNzcgMzAuOTM3OSA3MC44MTkzIDI3LjQ1NDggNzAuODE5M0MyMy45NzE4IDcwLjgxOTMgMjEuMTQ4MiA3My42Mzc3IDIxLjE0ODIgNzcuMTE0M0MyMS4xNDgyIDgwLjU5MSAyMy45NzE4IDgzLjQwOTQgMjcuNDU0OCA4My40MDk0WiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNOTkuOTgwNyA4My40MDk0QzEwMy40NjQgODMuNDA5NCAxMDYuMjg3IDgwLjU5MSAxMDYuMjg3IDc3LjExNDNDMTA2LjI4NyA3My42Mzc3IDEwMy40NjQgNzAuODE5MyA5OS45ODA3IDcwLjgxOTNDOTYuNDk3NiA3MC44MTkzIDkzLjY3NDEgNzMuNjM3NyA5My42NzQxIDc3LjExNDNDOTMuNjc0MSA4MC41OTEgOTYuNDk3NiA4My40MDk0IDk5Ljk4MDcgODMuNDA5NFoiIGZpbGw9IiNGRjY1ODQiLz4KPHBhdGggZD0iTTYzLjcxNzcgNjQuNTI0MUw1OC45ODc4IDg0Ljk4MzFMNjYuODcxIDc3LjExNDRMNjMuNzE3NyA2NC41MjQxWiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNODguMDIxNiAxNDMuMjEyTDgyLjY1MTYgMTM4LjcxNEw4Mi43NzY3IDE0My4yMTJIODEuMTA4OEw4MC45NzU2IDEzOC40NTZMNzMuNzI1MiAxNDMuMjEySDcwLjY4OTlMODAuOTIxNCAxMzYuNUw4MC41MjUxIDEyMi40MDRMODAuMjI5MSAxMTEuNzU5TDgxLjg5MjggMTExLjcxM0w4Mi4xOTMgMTIyLjQwNEw4Mi41ODkgMTM2LjQ4N0w5MC42MTQ3IDE0My4yMTJIODguMDIxNloiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTYyLjc5MzEgMTQzLjIxMkw1Ny40MjMgMTM4LjcxNEw1Ny41NDgyIDE0My4yMTJINTUuODg0OEw1NS43NTEzIDEzOC40NTZMNDguNTAwOCAxNDMuMjEySDQ1LjQ2NTZMNTUuNjkyOSAxMzYuNUw1NS4yOTY5IDEyMi40MDRMNTUuMDAwOCAxMTEuNzU5TDU2LjY2ODQgMTExLjcxM0w1Ni45Njg3IDEyMi40MDRMNTcuMzYwNSAxMzYuNDg3TDY1LjM4NjUgMTQzLjIxMkg2Mi43OTMxWiIgZmlsbD0iIzNGM0Q1NiIvPgo8cGF0aCBkPSJNNjYuODcxMyA2LjI5NTAxQzY1LjQwMDQgNi4yOTUwMSA2NC4xMDI4IDcuNDM1NDggNjMuMjM1MyA5LjE4NzIzQzYyLjQ3MDYgNi41NTMxMiA2MC44NjQxIDQuNzIxMjcgNTguOTg4IDQuNzIxMjdDNTguODYwNSA0LjczMzkyIDU4LjczNCA0Ljc1NTEzIDU4LjYwOTMgNC43ODQ3NkM1Ny44ODgyIDEuOTcyMzYgNTYuMjEyMSAtMi40Nzk1NWUtMDUgNTQuMjU4IC0yLjQ3OTU1ZS0wNUM1MS42NDU3IC0yLjQ3OTU1ZS0wNSA0OS41MjgxIDMuNTIyOTkgNDkuNTI4MSA3Ljg2ODhDNDkuNTI4MSAxMi4yMTQ2IDUxLjY0NTcgMTUuNzM3NiA1NC4yNTggMTUuNzM3NkM1NC4zODU1IDE1LjcyNSA1NC41MTIxIDE1LjcwMzcgNTQuNjM2NyAxNS42NzQxQzU1LjM1NzkgMTguNDg2NSA1Ny4wMzM5IDIwLjQ1ODkgNTguOTg4IDIwLjQ1ODlDNjAuNDU4OSAyMC40NTg5IDYxLjc1NjUgMTkuMzE4NCA2Mi42MjQgMTcuNTY2N0M2My4zODg3IDIwLjIwMDggNjQuOTk1MSAyMi4wMzI2IDY2Ljg3MTMgMjIuMDMyNkM2OS40ODM2IDIyLjAzMjYgNzEuNjAxMiAxOC41MDk2IDcxLjYwMTIgMTQuMTYzOEM3MS42MDEyIDkuODE4MDEgNjkuNDgzNiA2LjI5NTAxIDY2Ljg3MTMgNi4yOTUwMVoiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTE1Ljc2NjYgODQuMDE0NUMxMy42OTYxIDg0LjAxNDUgMTEuNjQ1OSA4My42MDc0IDkuNzMzMDEgODIuODE2NkM3LjgyMDEyIDgyLjAyNTcgNi4wODIwMyA4MC44NjY1IDQuNjE3OTcgNzkuNDA1MUMzLjE1MzkxIDc3Ljk0MzcgMS45OTI1NiA3Ni4yMDg4IDEuMjAwMjEgNzQuMjk5NEMwLjQwNzg3MiA3Mi4zOTAxIDYuNDI5NWUtMDUgNzAuMzQzNiA2LjQyOTVlLTA1IDY4LjI3NjlMNi40Mjk1ZS0wNSA2MC40MDhDNi40Mjk1ZS0wNSA1Ni4yMzQyIDEuNjYxMTcgNTIuMjMxMyA0LjYxNzk3IDQ5LjI3OTlDNy41NzQ3NyA0Ni4zMjg1IDExLjU4NTEgNDQuNjcwNCAxNS43NjY2IDQ0LjY3MDRWNDQuNjcwNEwxNS43NjY2IDg0LjAxNDVaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMTYuMzk5IDQ0LjY3MDVDMTE4LjQ3IDQ0LjY3MDUgMTIwLjUyIDQ1LjA3NzYgMTIyLjQzMyA0NS44Njg1QzEyNC4zNDYgNDYuNjU5NCAxMjYuMDg0IDQ3LjgxODYgMTI3LjU0OCA0OS4yOEMxMjkuMDEyIDUwLjc0MTMgMTMwLjE3MyA1Mi40NzYyIDEzMC45NjYgNTQuMzg1NkMxMzEuNzU4IDU2LjI5NSAxMzIuMTY2IDU4LjM0MTQgMTMyLjE2NiA2MC40MDgxVjY4LjI3N0MxMzIuMTY2IDcwLjM0MzcgMTMxLjc1OCA3Mi4zOTAxIDEzMC45NjYgNzQuMjk5NUMxMzAuMTczIDc2LjIwODkgMTI5LjAxMiA3Ny45NDM4IDEyNy41NDggNzkuNDA1MUMxMjYuMDg0IDgwLjg2NjUgMTI0LjM0NiA4Mi4wMjU3IDEyMi40MzMgODIuODE2NkMxMjAuNTIgODMuNjA3NSAxMTguNDcgODQuMDE0NiAxMTYuMzk5IDg0LjAxNDZWODQuMDE0NlY0NC42NzA1SDExNi4zOTlaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMjQuNjYxIDYxLjY0NDZIMTIyLjE2QzEyMi4xNiAyOS45Nzc1IDk2LjM0OTIgNC4yMTQyMyA2NC42MjM3IDQuMjE0MjNDMzIuODk4MyA0LjIxNDIzIDcuMDg3NzUgMjkuOTc3NSA3LjA4Nzc1IDYxLjY0NDZINC41ODYxOEM0LjU4NjE4IDI4LjYwMDUgMzEuNTE4OSAxLjcxNzI2IDY0LjYyMzcgMS43MTcyNkM5Ny43Mjg2IDEuNzE3MjYgMTI0LjY2MSAyOC42MDA2IDEyNC42NjEgNjEuNjQ0NloiIGZpbGw9IiM1NTU3RTQiLz4KPC9zdmc+Cg==",alt:"chicken"}),s.a.createElement("div",{className:"malibu-desktop-uLoading-chiken-eye left"}),s.a.createElement("div",{className:"malibu-desktop-uLoading-chiken-eye right"}),s.a.createElement("div",{className:"malibu-desktop-uLoading-path"},s.a.createElement("svg",{width:"12",height:"3",xmlns:"http://www.w3.org/2000/svg",style:{visibility:"hidden"}},s.a.createElement("path",{d:"M 0 2 Q 6 -5 12 2 M 12 2 Q 6 -5 0 2",stroke:"black",fill:"transparent"})))),s.a.createElement("div",{className:"malibu-desktop-uLoading-ground",style:{position:"absolute",marginLeft:"350px"}},s.a.createElement("img",{src:"data:image/svg+xml;base64,DQo8c3ZnIHdpZHRoPSI4NyIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDI4NyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yODYuMzUxIDExLjY4Nkw4MS40MDg4IDE0Ljc3MDFMMC4wNTc2MTcyIDAuMzc4MTc0SDEyNy4wNThMMjg2LjM1MSAxMS42ODZaIiBmaWxsPSIjRTZFNkU2Ii8+DQo8L3N2Zz4NCg==",alt:"ground"})),s.a.createElement("div",{className:"malibu-desktop-uLoading-tree one"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-desktop-uLoading-tree two"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-desktop-uLoading-tree three"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-desktop-uLoading-tree four"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-desktop-uLoading-tree five"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-desktop-uLoading-sun"}),s.a.createElement("div",{className:"malibu-desktop-uLoading-music-list",style:{position:"absolute"}},s.a.createElement("div",{className:"malibu-desktop-uLoading-music six"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMiAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xOS42NDU5IDEyLjA5MDVMMTkuNjQ3IDEyLjA4ODJMMTYuODM3MiAxMC45MjAyTDUuMDkzNDUgNi4zNjMzNUw4LjA1NzQ1IDMuNzMxMTJDOC4wNTc0NSAzLjczMTEyIDEwLjAyOSAxLjAwMDU1IDEzLjE3NDEgMi44OTQ0OUwxMi4yNTQzIDEuNTI5OTVDMTIuMjU0MyAxLjUyOTk1IDEwLjUyNTEgLTAuNzU1MTU3IDguMTA0NjUgMS42NjI1NEM4LjEwNDY1IDEuNjYyNTQgNS4xMDk3NiA2LjA2OTU0IDAuNDA1NTE4IDQuOTQ2MTlMMTYuNDcxNCAxMS43MzM2TDE2LjU1NTcgMTEuODA5OUwxNS40NzMxIDE0LjM1NzlDMTUuMzI0OSAxNC41OTEgMTUuMTk4NSAxNC44MzcxIDE1LjA5NTQgMTUuMDkzM0MxNC4zMzcgMTcuMDA0NyAxNS43Njk0IDE4LjkwNTkgMTcuMTIzNCAxOS40NDEyQzE4LjQ3NzUgMTkuOTc2NiAyMC4xOTAxIDE4Ljg2MSAyMC45NDg1IDE2Ljk0OTZDMjEuNjk2NSAxNS4wNjQzIDIwLjk2NTQgMTIuNjY5MiAxOS42NDU5IDEyLjA5MDVaIiBmaWxsPSIjM0YzRDU2Ii8+DQo8L3N2Zz4NCg==",alt:"music"})),s.a.createElement("div",{className:"malibu-desktop-uLoading-music five"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAzMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yOS4yNjg5IDIwLjM2ODFDMjMuNDM2OCAxNy4wMzk3IDI0LjYwMzkgOS43MzU4NCAyNC42MDM5IDkuNzM1ODRDMjQuNDU3MSA0Ljk5MDg5IDIwLjUyOTcgNS42NjI1NiAyMC41Mjk3IDUuNjYyNTZMMTkuMTAwMyA1Ljk4ODE0QzE4LjQzNjMgNS42ODA1MSAxNy43MDUxIDUuNTQ1NTMgMTYuOTc0OCA1LjU5NTc1TDE0LjgwMDUgNS45NjFDMTkuNzUxNiA3LjEyMjE5IDE5LjM0NDggMTEuMjU2NCAxOS4zNDQ4IDExLjI1NjRMMjAuMDM4NCAxNi4wOTAzTDcuMDY1MTUgMTAuODY2NEw4LjU1NDY5IDcuMzYwNjdDOC43NjA1NSA3LjAzNjk2IDguOTM2MTggNi42OTUwNiA5LjA3OTM4IDYuMzM5MjhDMTAuMTMyNyAzLjY4NDUzIDguMTQzMyAxLjA0MzkxIDYuMjYyNTkgMC4zMDA0MkM0LjM4MTg5IC0wLjQ0MzA2NyAyLjAwMzM2IDEuMTA2MyAwLjk1MDAxOCAzLjc2MUMtMC4wODg5Nzk3IDYuMzc5NTIgMC45MjY0MDcgOS43MDYxNSAyLjc1OTExIDEwLjUwOTlMMi43NTc1NiAxMC41MTNMNi42NjAyMiAxMi4xMzUzTDYuNjg5MjcgMTIuMDQzNUwyOS4yNjg5IDIwLjM2ODFaTTIyLjY4MDkgMTEuODc0NkwyMy4wOTgzIDE2LjUxNzVDMjAuNjQ4OCAxMy4yNzE5IDIxLjE0OTUgOS40MTU3OCAyMS4xNDk1IDkuNDE1NzhDMjEuMTE1IDguNTIwMjkgMjAuODEyMyA3LjY1NTY5IDIwLjI4MDYgNi45MzM1OUMyMy4wOTQ0IDguNjE0MzIgMjIuNjgwOSAxMS44NzQ2IDIyLjY4MDkgMTEuODc0NkgyMi42ODA5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})),s.a.createElement("div",{className:"malibu-desktop-uLoading-music four"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxNyAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMC4yMjE3IDEzLjMzOUw5LjU5Mjc0IDE0LjgxOTJDOS41MDY2NSAxNC45NTQ2IDkuNDMzMjEgMTUuMDk3NiA5LjM3MzM0IDE1LjI0NjRDOC45MzI3NSAxNi4zNTY3IDkuNzY0ODQgMTcuNDYxMSAxMC41NTE0IDE3Ljc3MjFDMTEuMzM4IDE4LjA4MzEgMTIuMzMyOSAxNy40MzUxIDEyLjc3MzQgMTYuMzI0N0MxMy4yMDggMTUuMjI5NSAxMi43ODMzIDEzLjgzODIgMTIuMDE2OCAxMy41MDJMMTIuMDE3NCAxMy41MDA3TDEwLjM4NTEgMTIuODIyMkw0LjgwMTI2IDEwLjY1NTVMNy45OTE3NCAyLjYxNDYzTDcuNTE4ODggMi40Mjc2OEw0LjMyNzE5IDEwLjQ3MTZMMy42MzY3NSAxMC4yMDM3TDYuODQwODMgMi4xMjgzOUw2LjkyNTI1IDIuMTY0MDVMMTMuNDg4OCA0LjkzNjk4TDEzLjUzNzggNC45ODEyOEwxMi45MDg5IDYuNDYxNDNDMTIuODIyOSA2LjU5NjgyIDEyLjc0OTQgNi43Mzk4MiAxMi42ODk1IDYuODg4NjNDMTIuMjQ4OSA3Ljk5ODk5IDEzLjA4MSA5LjEwMzQyIDEzLjg2NzYgOS40MTQzOUMxNC42NTQyIDkuNzI1MzYgMTUuNjQ5MSA5LjA3NzM0IDE2LjA4OTYgNy45NjY5OEMxNi41MjQyIDYuODcxNzkgMTYuMDk5NSA1LjQ4MDQ0IDE1LjMzMyA1LjE0NDI4TDE1LjMzMzYgNS4xNDI5NEwxMy43MDEzIDQuNDY0NDVMNy4wMzA3OCAxLjY0OTc1TDcuMDMwNSAxLjY0OTYyTDYuODE0MTUgMS41NTgzNEw0LjM0NTQ4IDAuNTE2NjYzTDAuODM5ODQ0IDkuMzUxODVMMTAuMTcyNyAxMy4yOTQ3TDEwLjIyMTcgMTMuMzM5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})),s.a.createElement("div",{className:"malibu-desktop-uLoading-music three"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMyAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4yNDYzIDcuMDAyN0wxMS4yNDY5IDcuMDAxNDJMOS42MTQ2MSA2LjMyMjg4TDIuNzkyNTkgMy42NzU4MUw0LjUxNDQxIDIuMTQ2NzNDNC44NTEyNSAxLjY5ODUgNS4zNDg2OCAxLjM5NzYyIDUuOTAyNjQgMS4zMDcwNEM2LjQ1NjYgMS4yMTY0NiA3LjAyNDE5IDEuMzQzMTggNy40ODY3MSAxLjY2MDY5TDYuOTUyMzkgMC44NjgwNEM2Ljk1MjM5IDAuODY4MDQgNS45NDc5MSAtMC40NTkzNyA0LjU0MTgyIDAuOTQ1MDg2QzQuNTQxODIgMC45NDUwODYgMi44MDIwNyAzLjUwNTEzIDAuMDY5MzM1OSAyLjg1MjU2TDkuNDAyMTcgNi43OTU0NUw5LjQ1MTE1IDYuODM5NzVMOC44MjIyNiA4LjMxOTkxQzguNzM2MTQgOC40NTUyOSA4LjY2MjY4IDguNTk4MyA4LjYwMjgxIDguNzQ3MTFDOC4xNjIyNyA5Ljg1NzQzIDguOTk0MzQgMTAuOTYxOSA5Ljc4MDkzIDExLjI3MjhDMTAuNTY3NSAxMS41ODM4IDExLjU2MjMgMTAuOTM1OCAxMi4wMDI5IDkuODI1NDZDMTIuNDM3NSA4LjczMDI2IDEyLjAxMjggNy4zMzg5MiAxMS4yNDYzIDcuMDAyN1oiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",alt:"music"})),s.a.createElement("div",{className:"malibu-desktop-uLoading-music two"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMyAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4zNzkzIDMuODQ5NzdMMTEuMzc5NyAzLjg0ODg0TDEwLjIwNDUgMy4zNjAyOUw1LjI0NTggMS4yNjc4OEwzLjQ2ODM3IDAuNTE3OTE0TDMuMzMxOTYgMC44NjE2NTZMMC45NDQzMzYgNi44NzkxNUw3LjY2Mzg5IDkuNzE4MDJMNy42OTkxNiA5Ljc0OTkxTDcuMjQ2MzUgMTAuODE1NkM3LjE4NDM3IDEwLjkxMzEgNy4xMzE0OSAxMS4wMTYxIDcuMDg4MzYgMTEuMTIzMkM2Ljc3MTE3IDExLjkyMjYgNy4zNzAyNyAxMi43MTc4IDcuOTM2NjEgMTIuOTQxN0M4LjUwMjk1IDEzLjE2NTYgOS4yMTkyMyAxMi42OTkxIDkuNTM2NDIgMTEuODk5NkM5Ljg0OTMgMTEuMTExMSA5LjU0MzU0IDEwLjEwOTMgOC45OTE2MyA5Ljg2NzI4TDguOTkyMTEgOS44NjYzNEw3LjgxNjg3IDkuMzc3NzlMMy43OTY1MiA3LjgxNzhMNi4wOTM2NiAyLjAyODQyTDUuNzUzMTkgMS44OTM4NEwzLjQ1NTIzIDcuNjg1MzdMMi45NTgxIDcuNDkyNDZMNS4yNjUwNCAxLjY3ODMzTDUuMzI1ODEgMS43MDQwMUwxMC4wNTE1IDMuNzAwNUwxMC4wODY4IDMuNzMyMzlMOS42MzQwMiA0Ljc5ODEzQzkuNTcyMDMgNC44OTU2IDkuNTE5MTQgNC45OTg1NSA5LjQ3NjAzIDUuMTA1NjlDOS4xNTg4IDUuOTA1MTIgOS43NTc5IDYuNzAwMzMgMTAuMzI0MiA2LjkyNDE5QzEwLjg5MDYgNy4xNDgwNiAxMS42MDY5IDYuNjgxNTUgMTEuOTI0MSA1Ljg4MjExQzEyLjIzNjkgNS4wOTM1NiAxMS45MzEyIDQuMDkxODEgMTEuMzc5MyAzLjg0OTc3WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})),s.a.createElement("div",{className:"malibu-desktop-uLoading-music one"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDEzIDkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMTIuNjM2OSA4LjYyMjg0QzEwLjE5NzYgNy4yMzA3NiAxMC42ODU3IDQuMTc1ODcgMTAuNjg1NyA0LjE3NTg3QzEwLjYyNDMgMi4xOTEzMSA4Ljk4MTY5IDIuNDcyMjEgOC45ODE2OSAyLjQ3MjIxTDguMzgzODYgMi42MDg0MUM4LjEwNjE0IDIuNDc5NzUgNy44MDAzMiAyLjQyMzMgNy40OTQ4NyAyLjQ0NDMxTDYuNTg1NDYgMi41OTcwNUM4LjY1NjI2IDMuMDgyNzEgOC40ODYxMyA0LjgxMTg1IDguNDg2MTMgNC44MTE4NUw4Ljc3NjI1IDYuODMzNjZMMy4zNTAxNiA0LjY0ODcyTDMuOTczMTYgMy4xODI1QzQuMDU5MjYgMy4wNDcxMSA0LjEzMjcyIDIuOTA0MTEgNC4xOTI1OSAyLjc1NTNDNC42MzMxNCAxLjY0NDk0IDMuODAxMDcgMC41NDA1MDYgMy4wMTQ0OCAwLjIyOTU3NkMyLjIyNzg4IC0wLjA4MTQzMTQgMS4yMzMwNiAwLjU2NjYzMSAwLjc5MjQ3NiAxLjY3Njk1QzAuMzU3OTQ2IDIuNzcyMTQgMC43ODI2NDIgNC4xNjM0OCAxLjU0OTE2IDQuNDk5NjNMMS41NDg1MSA0LjUwMDk3TDMuMTgwOCA1LjE3OTQ2TDMuMTkyOTUgNS4xNDEwNEwxMi42MzY5IDguNjIyODRaTTkuODgxNDQgNS4wNzA0MUwxMC4wNTU0IDcuMDA1NjRDOS40NDEwNSA2LjE0NTE1IDkuMTUyNDMgNS4wOTUwMSA5LjI0MDkxIDQuMDQyMDVDOS4yMjY0OSAzLjY2NzUgOS4wOTk5MSAzLjMwNTg3IDguODc3NTEgMy4wMDM4NkM5LjIxOTQgMy4yMjI1IDkuNDk0MTEgMy41MzEyMSA5LjY3MTI3IDMuODk1ODlDOS44NDg0MyA0LjI2MDU4IDkuOTIxMTcgNC42NjcwNSA5Ljg4MTQ0IDUuMDcwNFY1LjA3MDQxWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"}))),s.a.createElement("div",{className:"malibu-desktop-uLoading-progress-bar "},s.a.createElement("div",{className:"malibu-desktop-uLoading-progress",style:{width:this.state.width}}),s.a.createElement("label",{className:"loading"},this.props.dataFull.title),s.a.createElement("label",{className:"number-percent"},s.a.createElement("input",{className:"number-percent-input",readOnly:!0}),"%")),this.props.dataFull.speed.title?s.a.createElement("div",{className:"row",style:{margin:"auto",marginTop:"150px",width:"fit-content"}},s.a.createElement("div",{className:"malibu-desktop-uLoading-rocket"},s.a.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfOSURBVHgBzZldbBzVFcf/dz722+t1SJOqH2RT6AMVNCsV+hKgS/pQlxRwGqlK3KjY6gMoqZT1S9SqlWyr5akPXktJVLVVsSVwTNUSC5IIPzSZUHho0hajBAWhAAYChJBk1/Z+785czp31rL27M7vrXQf4P/hez71z5zfnnnPuvbMMXwIlYn0hBZ7IoStq5FwG28AR4mARJiEk6nb3MHxBErAS/AME8BhhRAAeuloEhq7IEGUzfe7gS7E9UQ55mKpRu/ZW4T838MVY/wBN/0F6YKRZ31bgbzl4Mws7qRn8LQMvB5x/mAMxtKlG8LcEPBHrj8hgx6kaRodygE/KWGelhvYJP56haqhRP6lnI5mNepYaR2GACO8PcLyalpAyli9yvLmuFl+K7SPX4CNO7fIdd8Hd+1NIX98C5vWVGbIZlC78F4XZ4zBufuo4dpXlOdfWDbwRNPP64e7bB/X7DzQco/DS88jPPu/YbsF/XMD4urhKM0v7njgE5Z7vmfW8wfGf6zreWNRxccGATtO/ySOZbfKddwE0A/p7l23HsdzmgwJ/rmOLN4NW73sAnv4nzPrFBR3/uloy4VerW2XYs8VllkLp3w81dBsd+kMSOlB5UXGGFnL37jbLhSLHqY+KddBW2/R7hUqb+uCPGg2Jnvi0pmCNivbFQulCMrw9qIv9xZgIcSeJYGQbNpr10580zh4C/kJSx70bFIqFB5Gfecapqyb+tAQuYOHN04ZIesww8lFeAvbfZjS9T9rwlUr9/TRv2v9artxHZByJXti4ed2mF59sCi6AJV/hIEcxBi6ZeTmfL+AXPTq+qmJNsnORWuWa24L829BE6Qge3fNklLHi05yzsHWtVNJxGy9ioAVrC/FsulL/pl/CB+nG9212r+QKe2tDI/+eFxXJHnr/MGPyGdQs2dlsDo+3CC2kv33JXGCE7ulunnnvDpX76JcvOfQwxq2aZA/NRmqvl4olbJYN9AabT7klAV0893IZisBF4Dnp4a+plXRYPP9y/VjAfDB+bMYW3AlaKF8orMnalgq0EvLlad+xWTEBrQXHLTHc7pPMHH738oyIFy2e+3fdOAx8tPr/CvSTYXKPd+0ebhgGArk0jm3V0Y5EhvAd+F0lNTpJuEj2b2MV97IkrN0df3Zr1ZhWZdmnbSUyyTZv6y5SKxFomSN/qLhNrQRojvJ25shTddDm/eC7aq+ZFicXGSAXeRoOWlpK48/fKOJODzqWyNFiTyI2XiYULe3OwWhqIhh/drD2ohktBD1sc4PGDf46bYLmvusxwgQ9jBaVNhiuGRK2KvWuVd7G/q+lcYSL0DZs1K5NEfkaVtpjSHKDjSOnxLWZeNLqdCL285aOXwL4rykvTmdd+MvGRXQq4SJW3q6VAib1lZnZuJFRRlYDW6KI/kGzU94LGTemUx6kOcMOTwGb5LVnoNWizdtoT3xqzqldAWfbqNPgmekjE3Yd0i/8uI+/n4vyGyp4oj4PCysfS3vwIoELCeC9gRw6he6OT4006qOAXEP7+5GZ2obE8WjI5fKNMc4GWDgPdkcRsuylvawLhTkOI1WG/m0igHdLK6viXn+uI2sT9HgzaCHH+c+c2PkaFREKXCjdXigBd6VNQCf+z3DovL8K+lFfHr/syqJD6JbiSXGAHjOhZQnuTV0Q5WpJAeA3b1dDiwzSIfRoK5a2VAeeOvnwAI1ivrUdtNDkq25cvlYN/VRPCu2IPsslGYwhgp5Yy311VBIv53Q15LOFnr3gwuQrKytR5PYS/rg9Db+09pX1co5h7BMMBtcILVRl8aUXe6NUhAXwap+2dHVBMq1tafe9BRz4YRa8QIH6DsyyFaUoqP+ZoJm7KYvVL4k2VAVORzMzp0u+leMN51ysrGZ99qJqwgfcHId2ZnH/t8vnSOaiGfoO7QTnmj/wpQVGwBJu0KP9AQ/OPndUQxuqApeZyOmkkoHCjRSMog7F54IS9CKVZ3jlLRWPb89j9315E77q3i30EnOqsF7ICXh2keFCUYHb7YZXMWNEQ5uqAqfIDgu769llS5LLyF0r/jzWn64DtlTKZcF6WGj1IjWXYXidEs0/EhKykmwC+/0rQU2zOYn1ACeX0MoDYkCUKuVvy02cgE3oVB5cfJLq1pNIqBoZ4Oyvr0g4n5XGVFWB4lXhV+qObvNYPvi2o6q04d15clCnh5ovIaxNbmJJ+HpxsT5PC+DSQvk6+1ZmKBh/Zhdt+uOXEEBXMACP1wOlHloYZFKb/tM82lRdHq+kQ7K2JWFRAccUes/gynVOMZC/njJfyuB8PPDoqYlKo8rCcNY8beji6EBV4InjvWGIdEhnQWFtI18kK+eoLJnt4roJTKClpRz0pbxZJ2mBR05VL9W0eXPaUNAnj0G7XWjb4LKsRKxParkPkxZUlYS7rAIuW7oGunx+tf/Nh1xk9Myxwxo6VJWPS5LIKoROX52WwebIOqMSY+buUVi+RDNgWVnn7KE6S5dHisIB+vTU4RGsg6rTIWdzBuNDYDwpF1yad9fMvLieOfkT+j2Hz5v7Cs7P6pBmuh45odkNWLZ2/VGQXnXozNThjvx6tdb9x6sdew+M1fzSpnEyhjZ1tIV1tXWt+TNzI0X79x/kvAKtiQVGmz46gVugdbN49Ge/6mMyPyi+DFD6mdGmOw/ARvoMZ7pw6Vztu/cAAAAASUVORK5CYII=",alt:"rocket"})),s.a.createElement("div",{className:"malibu-desktop-uLoading-speed"},s.a.createElement("label",null,this.props.dataFull.speed.title),s.a.createElement("div",{className:"malibu-desktop-uLoading-speed-number "+(this.props.dataFull.cmd.error.message?"error":"")},s.a.createElement("div",{style:{margin:"auto"}},this.props.dataFull.speed.number_speed),s.a.createElement("img",{src:this.props.dataFull.cmd.error.message?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGiSURBVHgB7ZXRTcMwEIbvXPJStciEB6jUVMkG7QZlg44AE5QNygYdATahG8AGrQRSWx7AEhIvSDli5AQ3cWO7ooiHfpIlxz75fOf/LgAH/gPL0+hSDvgL1jwarcOI5Fjy7hA8YeALg2k+bSBOwBMvhyqNcf5NCMNV2LsGD9DVcMnPY8aCe92hQnyk70kihHA5xznCBgsmBmcS3mJt59Q6Raiim9fZpOln0hGrBVhwipBhMLXZNDC4BQesDr+FgjDS15BoBkSP+poUkEuZWFOa1ZtMZawtibPXpxM5eQmjN8reUNtbZHtJ3Xms3lnXJJRCjaTNFfE67N3ALg6lUBDQq8bUNcZzzrm3Q1kGpXTlFGu4Zb+uTIxvaCsDhEwwhEIKZZtNmtJFRzzPyutHJmPVUbZCgH2b3FSfnVXOLi+U+6UBKZQ7ObAqmp9LyTIx/MI27ikfu8naDxaHhfQNJVOxzfrsQO+zGxE2WWtsOcCXuMmON5ReROjSL3dEZH12kPfZIkL1N9gHXO+zekpHsCdIe6aiLCiFq5RRH/YBVcvjwK/xBRbpfbJqi9GHAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgB3ZZLUuMwEIa7pZqZ5eQInhMM3MBZThlqnBMQdiwIBScIuQFVAYodzgWIgQKW+AaEExBuEJYkZTUtB8dvEtuw4d9EVrr6a0ndagF8d+GqhjtD2/jx0zcF4l9F2NBzAmmiiB5nU+mdtdzxKn6WAnevN0yUsgsE5hJPHpAa9K1r52OzAu0P7Yb/i84ZZEM5ObMp9opWnAvcv7MNX9E9Dw2opjFDm3lQ/ALYAiqnuH7UcifxSZG2Ylj3E2BaRnAkKSWAnZvNNv+0oaKIaOADrvO+ufMJsHXSFQIBxRbUgB1vXLVPLXfE2Xq5cKkzPI4IB+9n9wQVFMJifhI5oEAaJ9bFsx4vVugr34QKWgYLbPxZMxwvgKRwLcffGGrCAghGvqMzRGjEjfj6Ouhbl384kB7UgAWuBf7OAtNGpIIAjjfdQ/7argpLKwISTFJRdffuWkHW9i3XCaFVYKToJQNEQaOsoXLiUN7eZpWVoRCjDFAK6UFudBGUt9crC9OaTcHLAI/+8UWL0R9F0LIwIkj0ykTSkJ+fkSG0c/t/yLAHKHHXIuIg8Z020E4r9MAiOVxaiQzPlIV8DbJxDPWle2JmxzJA3b+kwGZNaGEDzi18nUAaqmsOyopbk268pZ4YcXVu7DaDtxA/fkTpbATCXlg6xfGsqHk5gImg1gjmdyMCvRDQqMwz8fvrDeQ/QIleItNVAAAAAElFTkSuQmCC",alt:"icon"})))):null,this.props.dataFull.cmd.error.message?s.a.createElement("div",{className:"malibu-desktop-uLoading-message-error"},this.props.dataFull.cmd.error.message):null)):"tablet"===this.state.device?s.a.createElement("div",{className:"malibu-tablet-uLoading "+this.state.class},s.a.createElement("div",{className:"malibu-tablet-uLoading-header"},s.a.createElement("div",{style:{position:"absolute",marginLeft:"198px",zIndex:"3"}},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMzIiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDEzMyAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02Ni4wODI4IDExNy4yNDVDOTUuNjg4NyAxMTcuMjQ1IDExOS42ODkgOTMuMjg5MSAxMTkuNjg5IDYzLjczNzRDMTE5LjY4OSAzNC4xODU4IDk1LjY4ODcgMTAuMjI5NSA2Ni4wODI4IDEwLjIyOTVDMzYuNDc2OSAxMC4yMjk1IDEyLjQ3NjYgMzQuMTg1OCAxMi40NzY2IDYzLjczNzRDMTIuNDc2NiA5My4yODkxIDM2LjQ3NjkgMTE3LjI0NSA2Ni4wODI4IDExNy4yNDVaIiBmaWxsPSIjM0YzRDU2Ii8+CjxwYXRoIGQ9Ik0zMi4zMzQ0IDY4LjAzMjZDMzMuNjY1OCA2Ni40NDE3IDM1LjMzMDkgNjUuMTYyIDM3LjIxMiA2NC4yODM4QzM5LjA5MzIgNjMuNDA1NiA0MS4xNDQ3IDYyLjk1MDUgNDMuMjIxNCA2Mi45NTA1QzQ1LjI5ODEgNjIuOTUwNSA0Ny4zNDk2IDYzLjQwNTYgNDkuMjMwNyA2NC4yODM4QzUxLjExMTkgNjUuMTYyIDUyLjc3NyA2Ni40NDE3IDU0LjEwODQgNjguMDMyNkM1Ni4zODY1IDY1Ljg2MTkgNTcuOTYxIDYzLjA1OTggNTguNjI5MSA1OS45ODc2QzU5LjI5NzIgNTYuOTE1NSA1OS4wMjgyIDUzLjcxNCA1Ny44NTY4IDUwLjc5NThDNTYuNjg1NCA0Ny44Nzc2IDU0LjY2NTIgNDUuMzc2NSA1Mi4wNTY3IDQzLjYxNDhDNDkuNDQ4MiA0MS44NTMxIDQ2LjM3MDkgNDAuOTExNiA0My4yMjE0IDQwLjkxMTZDNDAuMDcxOSA0MC45MTE2IDM2Ljk5NDYgNDEuODUzMSAzNC4zODYxIDQzLjYxNDhDMzEuNzc3NiA0NS4zNzY1IDI5Ljc1NzQgNDcuODc3NiAyOC41ODYgNTAuNzk1OEMyNy40MTQ2IDUzLjcxNCAyNy4xNDU2IDU2LjkxNTUgMjcuODEzNyA1OS45ODc2QzI4LjQ4MTggNjMuMDU5OCAzMC4wNTYzIDY1Ljg2MTkgMzIuMzM0NCA2OC4wMzI2VjY4LjAzMjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzQuOTA0IDY4LjAzMjZDNzYuMjM1MyA2Ni40NDE3IDc3LjkwMDQgNjUuMTYxOSA3OS43ODE2IDY0LjI4MzhDODEuNjYyOCA2My40MDU2IDgzLjcxNDIgNjIuOTUwNSA4NS43OTEgNjIuOTUwNUM4Ny44Njc3IDYyLjk1MDUgODkuOTE5MSA2My40MDU2IDkxLjgwMDMgNjQuMjgzOEM5My42ODE1IDY1LjE2MTkgOTUuMzQ2NSA2Ni40NDE3IDk2LjY3NzkgNjguMDMyNkM5OC45NTYgNjUuODYxOSAxMDAuNTMxIDYzLjA1OTggMTAxLjE5OSA1OS45ODc2QzEwMS44NjcgNTYuOTE1NSAxMDEuNTk4IDUzLjcxNCAxMDAuNDI2IDUwLjc5NThDOTkuMjU0OSA0Ny44Nzc2IDk3LjIzNDggNDUuMzc2NSA5NC42MjYzIDQzLjYxNDhDOTIuMDE3OCA0MS44NTMxIDg4Ljk0MDQgNDAuOTExNiA4NS43OTEgNDAuOTExNkM4Mi42NDE1IDQwLjkxMTYgNzkuNTY0MSA0MS44NTMxIDc2Ljk1NTYgNDMuNjE0OEM3NC4zNDcxIDQ1LjM3NjUgNzIuMzI3IDQ3Ljg3NzYgNzEuMTU1NiA1MC43OTU4QzY5Ljk4NDEgNTMuNzE0IDY5LjcxNTEgNTYuOTE1NSA3MC4zODMyIDU5Ljk4NzZDNzEuMDUxMyA2My4wNTk4IDcyLjYyNTkgNjUuODYxOSA3NC45MDQgNjguMDMyNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yNy40NTQ4IDgzLjQwOTRDMzAuOTM3OSA4My40MDk0IDMzLjc2MTQgODAuNTkxIDMzLjc2MTQgNzcuMTE0M0MzMy43NjE0IDczLjYzNzcgMzAuOTM3OSA3MC44MTkzIDI3LjQ1NDggNzAuODE5M0MyMy45NzE4IDcwLjgxOTMgMjEuMTQ4MiA3My42Mzc3IDIxLjE0ODIgNzcuMTE0M0MyMS4xNDgyIDgwLjU5MSAyMy45NzE4IDgzLjQwOTQgMjcuNDU0OCA4My40MDk0WiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNOTkuOTgwNyA4My40MDk0QzEwMy40NjQgODMuNDA5NCAxMDYuMjg3IDgwLjU5MSAxMDYuMjg3IDc3LjExNDNDMTA2LjI4NyA3My42Mzc3IDEwMy40NjQgNzAuODE5MyA5OS45ODA3IDcwLjgxOTNDOTYuNDk3NiA3MC44MTkzIDkzLjY3NDEgNzMuNjM3NyA5My42NzQxIDc3LjExNDNDOTMuNjc0MSA4MC41OTEgOTYuNDk3NiA4My40MDk0IDk5Ljk4MDcgODMuNDA5NFoiIGZpbGw9IiNGRjY1ODQiLz4KPHBhdGggZD0iTTYzLjcxNzcgNjQuNTI0MUw1OC45ODc4IDg0Ljk4MzFMNjYuODcxIDc3LjExNDRMNjMuNzE3NyA2NC41MjQxWiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNODguMDIxNiAxNDMuMjEyTDgyLjY1MTYgMTM4LjcxNEw4Mi43NzY3IDE0My4yMTJIODEuMTA4OEw4MC45NzU2IDEzOC40NTZMNzMuNzI1MiAxNDMuMjEySDcwLjY4OTlMODAuOTIxNCAxMzYuNUw4MC41MjUxIDEyMi40MDRMODAuMjI5MSAxMTEuNzU5TDgxLjg5MjggMTExLjcxM0w4Mi4xOTMgMTIyLjQwNEw4Mi41ODkgMTM2LjQ4N0w5MC42MTQ3IDE0My4yMTJIODguMDIxNloiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTYyLjc5MzEgMTQzLjIxMkw1Ny40MjMgMTM4LjcxNEw1Ny41NDgyIDE0My4yMTJINTUuODg0OEw1NS43NTEzIDEzOC40NTZMNDguNTAwOCAxNDMuMjEySDQ1LjQ2NTZMNTUuNjkyOSAxMzYuNUw1NS4yOTY5IDEyMi40MDRMNTUuMDAwOCAxMTEuNzU5TDU2LjY2ODQgMTExLjcxM0w1Ni45Njg3IDEyMi40MDRMNTcuMzYwNSAxMzYuNDg3TDY1LjM4NjUgMTQzLjIxMkg2Mi43OTMxWiIgZmlsbD0iIzNGM0Q1NiIvPgo8cGF0aCBkPSJNNjYuODcxMyA2LjI5NTAxQzY1LjQwMDQgNi4yOTUwMSA2NC4xMDI4IDcuNDM1NDggNjMuMjM1MyA5LjE4NzIzQzYyLjQ3MDYgNi41NTMxMiA2MC44NjQxIDQuNzIxMjcgNTguOTg4IDQuNzIxMjdDNTguODYwNSA0LjczMzkyIDU4LjczNCA0Ljc1NTEzIDU4LjYwOTMgNC43ODQ3NkM1Ny44ODgyIDEuOTcyMzYgNTYuMjEyMSAtMi40Nzk1NWUtMDUgNTQuMjU4IC0yLjQ3OTU1ZS0wNUM1MS42NDU3IC0yLjQ3OTU1ZS0wNSA0OS41MjgxIDMuNTIyOTkgNDkuNTI4MSA3Ljg2ODhDNDkuNTI4MSAxMi4yMTQ2IDUxLjY0NTcgMTUuNzM3NiA1NC4yNTggMTUuNzM3NkM1NC4zODU1IDE1LjcyNSA1NC41MTIxIDE1LjcwMzcgNTQuNjM2NyAxNS42NzQxQzU1LjM1NzkgMTguNDg2NSA1Ny4wMzM5IDIwLjQ1ODkgNTguOTg4IDIwLjQ1ODlDNjAuNDU4OSAyMC40NTg5IDYxLjc1NjUgMTkuMzE4NCA2Mi42MjQgMTcuNTY2N0M2My4zODg3IDIwLjIwMDggNjQuOTk1MSAyMi4wMzI2IDY2Ljg3MTMgMjIuMDMyNkM2OS40ODM2IDIyLjAzMjYgNzEuNjAxMiAxOC41MDk2IDcxLjYwMTIgMTQuMTYzOEM3MS42MDEyIDkuODE4MDEgNjkuNDgzNiA2LjI5NTAxIDY2Ljg3MTMgNi4yOTUwMVoiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTE1Ljc2NjYgODQuMDE0NUMxMy42OTYxIDg0LjAxNDUgMTEuNjQ1OSA4My42MDc0IDkuNzMzMDEgODIuODE2NkM3LjgyMDEyIDgyLjAyNTcgNi4wODIwMyA4MC44NjY1IDQuNjE3OTcgNzkuNDA1MUMzLjE1MzkxIDc3Ljk0MzcgMS45OTI1NiA3Ni4yMDg4IDEuMjAwMjEgNzQuMjk5NEMwLjQwNzg3MiA3Mi4zOTAxIDYuNDI5NWUtMDUgNzAuMzQzNiA2LjQyOTVlLTA1IDY4LjI3NjlMNi40Mjk1ZS0wNSA2MC40MDhDNi40Mjk1ZS0wNSA1Ni4yMzQyIDEuNjYxMTcgNTIuMjMxMyA0LjYxNzk3IDQ5LjI3OTlDNy41NzQ3NyA0Ni4zMjg1IDExLjU4NTEgNDQuNjcwNCAxNS43NjY2IDQ0LjY3MDRWNDQuNjcwNEwxNS43NjY2IDg0LjAxNDVaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMTYuMzk5IDQ0LjY3MDVDMTE4LjQ3IDQ0LjY3MDUgMTIwLjUyIDQ1LjA3NzYgMTIyLjQzMyA0NS44Njg1QzEyNC4zNDYgNDYuNjU5NCAxMjYuMDg0IDQ3LjgxODYgMTI3LjU0OCA0OS4yOEMxMjkuMDEyIDUwLjc0MTMgMTMwLjE3MyA1Mi40NzYyIDEzMC45NjYgNTQuMzg1NkMxMzEuNzU4IDU2LjI5NSAxMzIuMTY2IDU4LjM0MTQgMTMyLjE2NiA2MC40MDgxVjY4LjI3N0MxMzIuMTY2IDcwLjM0MzcgMTMxLjc1OCA3Mi4zOTAxIDEzMC45NjYgNzQuMjk5NUMxMzAuMTczIDc2LjIwODkgMTI5LjAxMiA3Ny45NDM4IDEyNy41NDggNzkuNDA1MUMxMjYuMDg0IDgwLjg2NjUgMTI0LjM0NiA4Mi4wMjU3IDEyMi40MzMgODIuODE2NkMxMjAuNTIgODMuNjA3NSAxMTguNDcgODQuMDE0NiAxMTYuMzk5IDg0LjAxNDZWODQuMDE0NlY0NC42NzA1SDExNi4zOTlaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMjQuNjYxIDYxLjY0NDZIMTIyLjE2QzEyMi4xNiAyOS45Nzc1IDk2LjM0OTIgNC4yMTQyMyA2NC42MjM3IDQuMjE0MjNDMzIuODk4MyA0LjIxNDIzIDcuMDg3NzUgMjkuOTc3NSA3LjA4Nzc1IDYxLjY0NDZINC41ODYxOEM0LjU4NjE4IDI4LjYwMDUgMzEuNTE4OSAxLjcxNzI2IDY0LjYyMzcgMS43MTcyNkM5Ny43Mjg2IDEuNzE3MjYgMTI0LjY2MSAyOC42MDA2IDEyNC42NjEgNjEuNjQ0NloiIGZpbGw9IiM1NTU3RTQiLz4KPC9zdmc+Cg==",alt:"chicken"}),s.a.createElement("div",{className:"malibu-tablet-uLoading-chiken-eye left"}),s.a.createElement("div",{className:"malibu-tablet-uLoading-chiken-eye right"}),s.a.createElement("div",{className:"malibu-tablet-uLoading-path"},s.a.createElement("svg",{width:"12",height:"3",xmlns:"http://www.w3.org/2000/svg",style:{visibility:"hidden"}},s.a.createElement("path",{d:"M 0 2 Q 6 -5 12 2 M 12 2 Q 6 -5 0 2",stroke:"black",fill:"transparent"})))),s.a.createElement("div",{className:"malibu-tablet-uLoading-ground",style:{position:"absolute",marginLeft:"228px"}},s.a.createElement("img",{src:"data:image/svg+xml;base64,DQo8c3ZnIHdpZHRoPSI4NyIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDI4NyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yODYuMzUxIDExLjY4Nkw4MS40MDg4IDE0Ljc3MDFMMC4wNTc2MTcyIDAuMzc4MTc0SDEyNy4wNThMMjg2LjM1MSAxMS42ODZaIiBmaWxsPSIjRTZFNkU2Ii8+DQo8L3N2Zz4NCg==",alt:"ground"})),s.a.createElement("div",{className:"malibu-tablet-uLoading-tree one"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-tablet-uLoading-tree two"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-tablet-uLoading-tree three"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-tablet-uLoading-tree four"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-tablet-uLoading-tree five"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-tablet-uLoading-sun"}),s.a.createElement("div",{className:"malibu-tablet-uLoading-music-list",style:{position:"absolute"}},s.a.createElement("div",{className:"malibu-tablet-uLoading-music six"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMiAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xOS42NDU5IDEyLjA5MDVMMTkuNjQ3IDEyLjA4ODJMMTYuODM3MiAxMC45MjAyTDUuMDkzNDUgNi4zNjMzNUw4LjA1NzQ1IDMuNzMxMTJDOC4wNTc0NSAzLjczMTEyIDEwLjAyOSAxLjAwMDU1IDEzLjE3NDEgMi44OTQ0OUwxMi4yNTQzIDEuNTI5OTVDMTIuMjU0MyAxLjUyOTk1IDEwLjUyNTEgLTAuNzU1MTU3IDguMTA0NjUgMS42NjI1NEM4LjEwNDY1IDEuNjYyNTQgNS4xMDk3NiA2LjA2OTU0IDAuNDA1NTE4IDQuOTQ2MTlMMTYuNDcxNCAxMS43MzM2TDE2LjU1NTcgMTEuODA5OUwxNS40NzMxIDE0LjM1NzlDMTUuMzI0OSAxNC41OTEgMTUuMTk4NSAxNC44MzcxIDE1LjA5NTQgMTUuMDkzM0MxNC4zMzcgMTcuMDA0NyAxNS43Njk0IDE4LjkwNTkgMTcuMTIzNCAxOS40NDEyQzE4LjQ3NzUgMTkuOTc2NiAyMC4xOTAxIDE4Ljg2MSAyMC45NDg1IDE2Ljk0OTZDMjEuNjk2NSAxNS4wNjQzIDIwLjk2NTQgMTIuNjY5MiAxOS42NDU5IDEyLjA5MDVaIiBmaWxsPSIjM0YzRDU2Ii8+DQo8L3N2Zz4NCg==",alt:"music"})),s.a.createElement("div",{className:"malibu-tablet-uLoading-music five"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAzMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yOS4yNjg5IDIwLjM2ODFDMjMuNDM2OCAxNy4wMzk3IDI0LjYwMzkgOS43MzU4NCAyNC42MDM5IDkuNzM1ODRDMjQuNDU3MSA0Ljk5MDg5IDIwLjUyOTcgNS42NjI1NiAyMC41Mjk3IDUuNjYyNTZMMTkuMTAwMyA1Ljk4ODE0QzE4LjQzNjMgNS42ODA1MSAxNy43MDUxIDUuNTQ1NTMgMTYuOTc0OCA1LjU5NTc1TDE0LjgwMDUgNS45NjFDMTkuNzUxNiA3LjEyMjE5IDE5LjM0NDggMTEuMjU2NCAxOS4zNDQ4IDExLjI1NjRMMjAuMDM4NCAxNi4wOTAzTDcuMDY1MTUgMTAuODY2NEw4LjU1NDY5IDcuMzYwNjdDOC43NjA1NSA3LjAzNjk2IDguOTM2MTggNi42OTUwNiA5LjA3OTM4IDYuMzM5MjhDMTAuMTMyNyAzLjY4NDUzIDguMTQzMyAxLjA0MzkxIDYuMjYyNTkgMC4zMDA0MkM0LjM4MTg5IC0wLjQ0MzA2NyAyLjAwMzM2IDEuMTA2MyAwLjk1MDAxOCAzLjc2MUMtMC4wODg5Nzk3IDYuMzc5NTIgMC45MjY0MDcgOS43MDYxNSAyLjc1OTExIDEwLjUwOTlMMi43NTc1NiAxMC41MTNMNi42NjAyMiAxMi4xMzUzTDYuNjg5MjcgMTIuMDQzNUwyOS4yNjg5IDIwLjM2ODFaTTIyLjY4MDkgMTEuODc0NkwyMy4wOTgzIDE2LjUxNzVDMjAuNjQ4OCAxMy4yNzE5IDIxLjE0OTUgOS40MTU3OCAyMS4xNDk1IDkuNDE1NzhDMjEuMTE1IDguNTIwMjkgMjAuODEyMyA3LjY1NTY5IDIwLjI4MDYgNi45MzM1OUMyMy4wOTQ0IDguNjE0MzIgMjIuNjgwOSAxMS44NzQ2IDIyLjY4MDkgMTEuODc0NkgyMi42ODA5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})),s.a.createElement("div",{className:"malibu-tablet-uLoading-music four"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxNyAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMC4yMjE3IDEzLjMzOUw5LjU5Mjc0IDE0LjgxOTJDOS41MDY2NSAxNC45NTQ2IDkuNDMzMjEgMTUuMDk3NiA5LjM3MzM0IDE1LjI0NjRDOC45MzI3NSAxNi4zNTY3IDkuNzY0ODQgMTcuNDYxMSAxMC41NTE0IDE3Ljc3MjFDMTEuMzM4IDE4LjA4MzEgMTIuMzMyOSAxNy40MzUxIDEyLjc3MzQgMTYuMzI0N0MxMy4yMDggMTUuMjI5NSAxMi43ODMzIDEzLjgzODIgMTIuMDE2OCAxMy41MDJMMTIuMDE3NCAxMy41MDA3TDEwLjM4NTEgMTIuODIyMkw0LjgwMTI2IDEwLjY1NTVMNy45OTE3NCAyLjYxNDYzTDcuNTE4ODggMi40Mjc2OEw0LjMyNzE5IDEwLjQ3MTZMMy42MzY3NSAxMC4yMDM3TDYuODQwODMgMi4xMjgzOUw2LjkyNTI1IDIuMTY0MDVMMTMuNDg4OCA0LjkzNjk4TDEzLjUzNzggNC45ODEyOEwxMi45MDg5IDYuNDYxNDNDMTIuODIyOSA2LjU5NjgyIDEyLjc0OTQgNi43Mzk4MiAxMi42ODk1IDYuODg4NjNDMTIuMjQ4OSA3Ljk5ODk5IDEzLjA4MSA5LjEwMzQyIDEzLjg2NzYgOS40MTQzOUMxNC42NTQyIDkuNzI1MzYgMTUuNjQ5MSA5LjA3NzM0IDE2LjA4OTYgNy45NjY5OEMxNi41MjQyIDYuODcxNzkgMTYuMDk5NSA1LjQ4MDQ0IDE1LjMzMyA1LjE0NDI4TDE1LjMzMzYgNS4xNDI5NEwxMy43MDEzIDQuNDY0NDVMNy4wMzA3OCAxLjY0OTc1TDcuMDMwNSAxLjY0OTYyTDYuODE0MTUgMS41NTgzNEw0LjM0NTQ4IDAuNTE2NjYzTDAuODM5ODQ0IDkuMzUxODVMMTAuMTcyNyAxMy4yOTQ3TDEwLjIyMTcgMTMuMzM5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})),s.a.createElement("div",{className:"malibu-tablet-uLoading-music three"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMyAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4yNDYzIDcuMDAyN0wxMS4yNDY5IDcuMDAxNDJMOS42MTQ2MSA2LjMyMjg4TDIuNzkyNTkgMy42NzU4MUw0LjUxNDQxIDIuMTQ2NzNDNC44NTEyNSAxLjY5ODUgNS4zNDg2OCAxLjM5NzYyIDUuOTAyNjQgMS4zMDcwNEM2LjQ1NjYgMS4yMTY0NiA3LjAyNDE5IDEuMzQzMTggNy40ODY3MSAxLjY2MDY5TDYuOTUyMzkgMC44NjgwNEM2Ljk1MjM5IDAuODY4MDQgNS45NDc5MSAtMC40NTkzNyA0LjU0MTgyIDAuOTQ1MDg2QzQuNTQxODIgMC45NDUwODYgMi44MDIwNyAzLjUwNTEzIDAuMDY5MzM1OSAyLjg1MjU2TDkuNDAyMTcgNi43OTU0NUw5LjQ1MTE1IDYuODM5NzVMOC44MjIyNiA4LjMxOTkxQzguNzM2MTQgOC40NTUyOSA4LjY2MjY4IDguNTk4MyA4LjYwMjgxIDguNzQ3MTFDOC4xNjIyNyA5Ljg1NzQzIDguOTk0MzQgMTAuOTYxOSA5Ljc4MDkzIDExLjI3MjhDMTAuNTY3NSAxMS41ODM4IDExLjU2MjMgMTAuOTM1OCAxMi4wMDI5IDkuODI1NDZDMTIuNDM3NSA4LjczMDI2IDEyLjAxMjggNy4zMzg5MiAxMS4yNDYzIDcuMDAyN1oiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",alt:"music"})),s.a.createElement("div",{className:"malibu-tablet-uLoading-music two"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMyAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4zNzkzIDMuODQ5NzdMMTEuMzc5NyAzLjg0ODg0TDEwLjIwNDUgMy4zNjAyOUw1LjI0NTggMS4yNjc4OEwzLjQ2ODM3IDAuNTE3OTE0TDMuMzMxOTYgMC44NjE2NTZMMC45NDQzMzYgNi44NzkxNUw3LjY2Mzg5IDkuNzE4MDJMNy42OTkxNiA5Ljc0OTkxTDcuMjQ2MzUgMTAuODE1NkM3LjE4NDM3IDEwLjkxMzEgNy4xMzE0OSAxMS4wMTYxIDcuMDg4MzYgMTEuMTIzMkM2Ljc3MTE3IDExLjkyMjYgNy4zNzAyNyAxMi43MTc4IDcuOTM2NjEgMTIuOTQxN0M4LjUwMjk1IDEzLjE2NTYgOS4yMTkyMyAxMi42OTkxIDkuNTM2NDIgMTEuODk5NkM5Ljg0OTMgMTEuMTExMSA5LjU0MzU0IDEwLjEwOTMgOC45OTE2MyA5Ljg2NzI4TDguOTkyMTEgOS44NjYzNEw3LjgxNjg3IDkuMzc3NzlMMy43OTY1MiA3LjgxNzhMNi4wOTM2NiAyLjAyODQyTDUuNzUzMTkgMS44OTM4NEwzLjQ1NTIzIDcuNjg1MzdMMi45NTgxIDcuNDkyNDZMNS4yNjUwNCAxLjY3ODMzTDUuMzI1ODEgMS43MDQwMUwxMC4wNTE1IDMuNzAwNUwxMC4wODY4IDMuNzMyMzlMOS42MzQwMiA0Ljc5ODEzQzkuNTcyMDMgNC44OTU2IDkuNTE5MTQgNC45OTg1NSA5LjQ3NjAzIDUuMTA1NjlDOS4xNTg4IDUuOTA1MTIgOS43NTc5IDYuNzAwMzMgMTAuMzI0MiA2LjkyNDE5QzEwLjg5MDYgNy4xNDgwNiAxMS42MDY5IDYuNjgxNTUgMTEuOTI0MSA1Ljg4MjExQzEyLjIzNjkgNS4wOTM1NiAxMS45MzEyIDQuMDkxODEgMTEuMzc5MyAzLjg0OTc3WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})),s.a.createElement("div",{className:"malibu-tablet-uLoading-music one"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDEzIDkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMTIuNjM2OSA4LjYyMjg0QzEwLjE5NzYgNy4yMzA3NiAxMC42ODU3IDQuMTc1ODcgMTAuNjg1NyA0LjE3NTg3QzEwLjYyNDMgMi4xOTEzMSA4Ljk4MTY5IDIuNDcyMjEgOC45ODE2OSAyLjQ3MjIxTDguMzgzODYgMi42MDg0MUM4LjEwNjE0IDIuNDc5NzUgNy44MDAzMiAyLjQyMzMgNy40OTQ4NyAyLjQ0NDMxTDYuNTg1NDYgMi41OTcwNUM4LjY1NjI2IDMuMDgyNzEgOC40ODYxMyA0LjgxMTg1IDguNDg2MTMgNC44MTE4NUw4Ljc3NjI1IDYuODMzNjZMMy4zNTAxNiA0LjY0ODcyTDMuOTczMTYgMy4xODI1QzQuMDU5MjYgMy4wNDcxMSA0LjEzMjcyIDIuOTA0MTEgNC4xOTI1OSAyLjc1NTNDNC42MzMxNCAxLjY0NDk0IDMuODAxMDcgMC41NDA1MDYgMy4wMTQ0OCAwLjIyOTU3NkMyLjIyNzg4IC0wLjA4MTQzMTQgMS4yMzMwNiAwLjU2NjYzMSAwLjc5MjQ3NiAxLjY3Njk1QzAuMzU3OTQ2IDIuNzcyMTQgMC43ODI2NDIgNC4xNjM0OCAxLjU0OTE2IDQuNDk5NjNMMS41NDg1MSA0LjUwMDk3TDMuMTgwOCA1LjE3OTQ2TDMuMTkyOTUgNS4xNDEwNEwxMi42MzY5IDguNjIyODRaTTkuODgxNDQgNS4wNzA0MUwxMC4wNTU0IDcuMDA1NjRDOS40NDEwNSA2LjE0NTE1IDkuMTUyNDMgNS4wOTUwMSA5LjI0MDkxIDQuMDQyMDVDOS4yMjY0OSAzLjY2NzUgOS4wOTk5MSAzLjMwNTg3IDguODc3NTEgMy4wMDM4NkM5LjIxOTQgMy4yMjI1IDkuNDk0MTEgMy41MzEyMSA5LjY3MTI3IDMuODk1ODlDOS44NDg0MyA0LjI2MDU4IDkuOTIxMTcgNC42NjcwNSA5Ljg4MTQ0IDUuMDcwNFY1LjA3MDQxWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"}))),s.a.createElement("div",{className:"malibu-tablet-uLoading-progress-bar "},s.a.createElement("div",{className:"malibu-tablet-uLoading-progress",style:{width:this.state.width}}),s.a.createElement("label",{className:"loading"},this.props.dataFull.title),s.a.createElement("label",{className:"number-percent"},s.a.createElement("input",{className:"number-percent-input",readOnly:!0}),"%")),this.props.dataFull.speed.title?s.a.createElement("div",{className:"row",style:{margin:"auto",marginTop:"150px",width:"fit-content"}},s.a.createElement("div",{className:"malibu-desktop-uLoading-rocket"},s.a.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfOSURBVHgBzZldbBzVFcf/dz722+t1SJOqH2RT6AMVNCsV+hKgS/pQlxRwGqlK3KjY6gMoqZT1S9SqlWyr5akPXktJVLVVsSVwTNUSC5IIPzSZUHho0hajBAWhAAYChJBk1/Z+785czp31rL27M7vrXQf4P/hez71z5zfnnnPuvbMMXwIlYn0hBZ7IoStq5FwG28AR4mARJiEk6nb3MHxBErAS/AME8BhhRAAeuloEhq7IEGUzfe7gS7E9UQ55mKpRu/ZW4T838MVY/wBN/0F6YKRZ31bgbzl4Mws7qRn8LQMvB5x/mAMxtKlG8LcEPBHrj8hgx6kaRodygE/KWGelhvYJP56haqhRP6lnI5mNepYaR2GACO8PcLyalpAyli9yvLmuFl+K7SPX4CNO7fIdd8Hd+1NIX98C5vWVGbIZlC78F4XZ4zBufuo4dpXlOdfWDbwRNPP64e7bB/X7DzQco/DS88jPPu/YbsF/XMD4urhKM0v7njgE5Z7vmfW8wfGf6zreWNRxccGATtO/ySOZbfKddwE0A/p7l23HsdzmgwJ/rmOLN4NW73sAnv4nzPrFBR3/uloy4VerW2XYs8VllkLp3w81dBsd+kMSOlB5UXGGFnL37jbLhSLHqY+KddBW2/R7hUqb+uCPGg2Jnvi0pmCNivbFQulCMrw9qIv9xZgIcSeJYGQbNpr10580zh4C/kJSx70bFIqFB5Gfecapqyb+tAQuYOHN04ZIesww8lFeAvbfZjS9T9rwlUr9/TRv2v9artxHZByJXti4ed2mF59sCi6AJV/hIEcxBi6ZeTmfL+AXPTq+qmJNsnORWuWa24L829BE6Qge3fNklLHi05yzsHWtVNJxGy9ioAVrC/FsulL/pl/CB+nG9212r+QKe2tDI/+eFxXJHnr/MGPyGdQs2dlsDo+3CC2kv33JXGCE7ulunnnvDpX76JcvOfQwxq2aZA/NRmqvl4olbJYN9AabT7klAV0893IZisBF4Dnp4a+plXRYPP9y/VjAfDB+bMYW3AlaKF8orMnalgq0EvLlad+xWTEBrQXHLTHc7pPMHH738oyIFy2e+3fdOAx8tPr/CvSTYXKPd+0ebhgGArk0jm3V0Y5EhvAd+F0lNTpJuEj2b2MV97IkrN0df3Zr1ZhWZdmnbSUyyTZv6y5SKxFomSN/qLhNrQRojvJ25shTddDm/eC7aq+ZFicXGSAXeRoOWlpK48/fKOJODzqWyNFiTyI2XiYULe3OwWhqIhh/drD2ohktBD1sc4PGDf46bYLmvusxwgQ9jBaVNhiuGRK2KvWuVd7G/q+lcYSL0DZs1K5NEfkaVtpjSHKDjSOnxLWZeNLqdCL285aOXwL4rykvTmdd+MvGRXQq4SJW3q6VAib1lZnZuJFRRlYDW6KI/kGzU94LGTemUx6kOcMOTwGb5LVnoNWizdtoT3xqzqldAWfbqNPgmekjE3Yd0i/8uI+/n4vyGyp4oj4PCysfS3vwIoELCeC9gRw6he6OT4006qOAXEP7+5GZ2obE8WjI5fKNMc4GWDgPdkcRsuylvawLhTkOI1WG/m0igHdLK6viXn+uI2sT9HgzaCHH+c+c2PkaFREKXCjdXigBd6VNQCf+z3DovL8K+lFfHr/syqJD6JbiSXGAHjOhZQnuTV0Q5WpJAeA3b1dDiwzSIfRoK5a2VAeeOvnwAI1ivrUdtNDkq25cvlYN/VRPCu2IPsslGYwhgp5Yy311VBIv53Q15LOFnr3gwuQrKytR5PYS/rg9Db+09pX1co5h7BMMBtcILVRl8aUXe6NUhAXwap+2dHVBMq1tafe9BRz4YRa8QIH6DsyyFaUoqP+ZoJm7KYvVL4k2VAVORzMzp0u+leMN51ysrGZ99qJqwgfcHId2ZnH/t8vnSOaiGfoO7QTnmj/wpQVGwBJu0KP9AQ/OPndUQxuqApeZyOmkkoHCjRSMog7F54IS9CKVZ3jlLRWPb89j9315E77q3i30EnOqsF7ICXh2keFCUYHb7YZXMWNEQ5uqAqfIDgu769llS5LLyF0r/jzWn64DtlTKZcF6WGj1IjWXYXidEs0/EhKykmwC+/0rQU2zOYn1ACeX0MoDYkCUKuVvy02cgE3oVB5cfJLq1pNIqBoZ4Oyvr0g4n5XGVFWB4lXhV+qObvNYPvi2o6q04d15clCnh5ovIaxNbmJJ+HpxsT5PC+DSQvk6+1ZmKBh/Zhdt+uOXEEBXMACP1wOlHloYZFKb/tM82lRdHq+kQ7K2JWFRAccUes/gynVOMZC/njJfyuB8PPDoqYlKo8rCcNY8beji6EBV4InjvWGIdEhnQWFtI18kK+eoLJnt4roJTKClpRz0pbxZJ2mBR05VL9W0eXPaUNAnj0G7XWjb4LKsRKxParkPkxZUlYS7rAIuW7oGunx+tf/Nh1xk9Myxwxo6VJWPS5LIKoROX52WwebIOqMSY+buUVi+RDNgWVnn7KE6S5dHisIB+vTU4RGsg6rTIWdzBuNDYDwpF1yad9fMvLieOfkT+j2Hz5v7Cs7P6pBmuh45odkNWLZ2/VGQXnXozNThjvx6tdb9x6sdew+M1fzSpnEyhjZ1tIV1tXWt+TNzI0X79x/kvAKtiQVGmz46gVugdbN49Ge/6mMyPyi+DFD6mdGmOw/ARvoMZ7pw6Vztu/cAAAAASUVORK5CYII=",alt:"rocket"})),s.a.createElement("div",{className:"malibu-desktop-uLoading-speed"},s.a.createElement("label",null,this.props.dataFull.speed.title),s.a.createElement("div",{className:"malibu-desktop-uLoading-speed-number "+(this.props.dataFull.cmd.error.message?"error":"")},s.a.createElement("div",{style:{margin:"auto"}},this.props.dataFull.speed.number_speed),s.a.createElement("img",{src:this.props.dataFull.cmd.error.message?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGiSURBVHgB7ZXRTcMwEIbvXPJStciEB6jUVMkG7QZlg44AE5QNygYdATahG8AGrQRSWx7AEhIvSDli5AQ3cWO7ooiHfpIlxz75fOf/LgAH/gPL0+hSDvgL1jwarcOI5Fjy7hA8YeALg2k+bSBOwBMvhyqNcf5NCMNV2LsGD9DVcMnPY8aCe92hQnyk70kihHA5xznCBgsmBmcS3mJt59Q6Raiim9fZpOln0hGrBVhwipBhMLXZNDC4BQesDr+FgjDS15BoBkSP+poUkEuZWFOa1ZtMZawtibPXpxM5eQmjN8reUNtbZHtJ3Xms3lnXJJRCjaTNFfE67N3ALg6lUBDQq8bUNcZzzrm3Q1kGpXTlFGu4Zb+uTIxvaCsDhEwwhEIKZZtNmtJFRzzPyutHJmPVUbZCgH2b3FSfnVXOLi+U+6UBKZQ7ObAqmp9LyTIx/MI27ikfu8naDxaHhfQNJVOxzfrsQO+zGxE2WWtsOcCXuMmON5ReROjSL3dEZH12kPfZIkL1N9gHXO+zekpHsCdIe6aiLCiFq5RRH/YBVcvjwK/xBRbpfbJqi9GHAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgB3ZZLUuMwEIa7pZqZ5eQInhMM3MBZThlqnBMQdiwIBScIuQFVAYodzgWIgQKW+AaEExBuEJYkZTUtB8dvEtuw4d9EVrr6a0ndagF8d+GqhjtD2/jx0zcF4l9F2NBzAmmiiB5nU+mdtdzxKn6WAnevN0yUsgsE5hJPHpAa9K1r52OzAu0P7Yb/i84ZZEM5ObMp9opWnAvcv7MNX9E9Dw2opjFDm3lQ/ALYAiqnuH7UcifxSZG2Ylj3E2BaRnAkKSWAnZvNNv+0oaKIaOADrvO+ufMJsHXSFQIBxRbUgB1vXLVPLXfE2Xq5cKkzPI4IB+9n9wQVFMJifhI5oEAaJ9bFsx4vVugr34QKWgYLbPxZMxwvgKRwLcffGGrCAghGvqMzRGjEjfj6Ouhbl384kB7UgAWuBf7OAtNGpIIAjjfdQ/7argpLKwISTFJRdffuWkHW9i3XCaFVYKToJQNEQaOsoXLiUN7eZpWVoRCjDFAK6UFudBGUt9crC9OaTcHLAI/+8UWL0R9F0LIwIkj0ykTSkJ+fkSG0c/t/yLAHKHHXIuIg8Z020E4r9MAiOVxaiQzPlIV8DbJxDPWle2JmxzJA3b+kwGZNaGEDzi18nUAaqmsOyopbk268pZ4YcXVu7DaDtxA/fkTpbATCXlg6xfGsqHk5gImg1gjmdyMCvRDQqMwz8fvrDeQ/QIleItNVAAAAAElFTkSuQmCC",alt:"icon"})))):null,this.props.dataFull.cmd.error.message?s.a.createElement("div",{className:"malibu-desktop-uLoading-message-error"},this.props.dataFull.cmd.error.message):null)):"mobile"===this.state.device?s.a.createElement("div",{className:"malibu-mobile-uLoading "+this.state.class},s.a.createElement("div",{className:"malibu-mobile-uLoading-header"},s.a.createElement("div",{className:"malibu-mobile-uLoading-chicken",style:{position:"absolute",zIndex:"3"}},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMzIiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDEzMyAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02Ni4wODI4IDExNy4yNDVDOTUuNjg4NyAxMTcuMjQ1IDExOS42ODkgOTMuMjg5MSAxMTkuNjg5IDYzLjczNzRDMTE5LjY4OSAzNC4xODU4IDk1LjY4ODcgMTAuMjI5NSA2Ni4wODI4IDEwLjIyOTVDMzYuNDc2OSAxMC4yMjk1IDEyLjQ3NjYgMzQuMTg1OCAxMi40NzY2IDYzLjczNzRDMTIuNDc2NiA5My4yODkxIDM2LjQ3NjkgMTE3LjI0NSA2Ni4wODI4IDExNy4yNDVaIiBmaWxsPSIjM0YzRDU2Ii8+CjxwYXRoIGQ9Ik0zMi4zMzQ0IDY4LjAzMjZDMzMuNjY1OCA2Ni40NDE3IDM1LjMzMDkgNjUuMTYyIDM3LjIxMiA2NC4yODM4QzM5LjA5MzIgNjMuNDA1NiA0MS4xNDQ3IDYyLjk1MDUgNDMuMjIxNCA2Mi45NTA1QzQ1LjI5ODEgNjIuOTUwNSA0Ny4zNDk2IDYzLjQwNTYgNDkuMjMwNyA2NC4yODM4QzUxLjExMTkgNjUuMTYyIDUyLjc3NyA2Ni40NDE3IDU0LjEwODQgNjguMDMyNkM1Ni4zODY1IDY1Ljg2MTkgNTcuOTYxIDYzLjA1OTggNTguNjI5MSA1OS45ODc2QzU5LjI5NzIgNTYuOTE1NSA1OS4wMjgyIDUzLjcxNCA1Ny44NTY4IDUwLjc5NThDNTYuNjg1NCA0Ny44Nzc2IDU0LjY2NTIgNDUuMzc2NSA1Mi4wNTY3IDQzLjYxNDhDNDkuNDQ4MiA0MS44NTMxIDQ2LjM3MDkgNDAuOTExNiA0My4yMjE0IDQwLjkxMTZDNDAuMDcxOSA0MC45MTE2IDM2Ljk5NDYgNDEuODUzMSAzNC4zODYxIDQzLjYxNDhDMzEuNzc3NiA0NS4zNzY1IDI5Ljc1NzQgNDcuODc3NiAyOC41ODYgNTAuNzk1OEMyNy40MTQ2IDUzLjcxNCAyNy4xNDU2IDU2LjkxNTUgMjcuODEzNyA1OS45ODc2QzI4LjQ4MTggNjMuMDU5OCAzMC4wNTYzIDY1Ljg2MTkgMzIuMzM0NCA2OC4wMzI2VjY4LjAzMjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzQuOTA0IDY4LjAzMjZDNzYuMjM1MyA2Ni40NDE3IDc3LjkwMDQgNjUuMTYxOSA3OS43ODE2IDY0LjI4MzhDODEuNjYyOCA2My40MDU2IDgzLjcxNDIgNjIuOTUwNSA4NS43OTEgNjIuOTUwNUM4Ny44Njc3IDYyLjk1MDUgODkuOTE5MSA2My40MDU2IDkxLjgwMDMgNjQuMjgzOEM5My42ODE1IDY1LjE2MTkgOTUuMzQ2NSA2Ni40NDE3IDk2LjY3NzkgNjguMDMyNkM5OC45NTYgNjUuODYxOSAxMDAuNTMxIDYzLjA1OTggMTAxLjE5OSA1OS45ODc2QzEwMS44NjcgNTYuOTE1NSAxMDEuNTk4IDUzLjcxNCAxMDAuNDI2IDUwLjc5NThDOTkuMjU0OSA0Ny44Nzc2IDk3LjIzNDggNDUuMzc2NSA5NC42MjYzIDQzLjYxNDhDOTIuMDE3OCA0MS44NTMxIDg4Ljk0MDQgNDAuOTExNiA4NS43OTEgNDAuOTExNkM4Mi42NDE1IDQwLjkxMTYgNzkuNTY0MSA0MS44NTMxIDc2Ljk1NTYgNDMuNjE0OEM3NC4zNDcxIDQ1LjM3NjUgNzIuMzI3IDQ3Ljg3NzYgNzEuMTU1NiA1MC43OTU4QzY5Ljk4NDEgNTMuNzE0IDY5LjcxNTEgNTYuOTE1NSA3MC4zODMyIDU5Ljk4NzZDNzEuMDUxMyA2My4wNTk4IDcyLjYyNTkgNjUuODYxOSA3NC45MDQgNjguMDMyNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yNy40NTQ4IDgzLjQwOTRDMzAuOTM3OSA4My40MDk0IDMzLjc2MTQgODAuNTkxIDMzLjc2MTQgNzcuMTE0M0MzMy43NjE0IDczLjYzNzcgMzAuOTM3OSA3MC44MTkzIDI3LjQ1NDggNzAuODE5M0MyMy45NzE4IDcwLjgxOTMgMjEuMTQ4MiA3My42Mzc3IDIxLjE0ODIgNzcuMTE0M0MyMS4xNDgyIDgwLjU5MSAyMy45NzE4IDgzLjQwOTQgMjcuNDU0OCA4My40MDk0WiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNOTkuOTgwNyA4My40MDk0QzEwMy40NjQgODMuNDA5NCAxMDYuMjg3IDgwLjU5MSAxMDYuMjg3IDc3LjExNDNDMTA2LjI4NyA3My42Mzc3IDEwMy40NjQgNzAuODE5MyA5OS45ODA3IDcwLjgxOTNDOTYuNDk3NiA3MC44MTkzIDkzLjY3NDEgNzMuNjM3NyA5My42NzQxIDc3LjExNDNDOTMuNjc0MSA4MC41OTEgOTYuNDk3NiA4My40MDk0IDk5Ljk4MDcgODMuNDA5NFoiIGZpbGw9IiNGRjY1ODQiLz4KPHBhdGggZD0iTTYzLjcxNzcgNjQuNTI0MUw1OC45ODc4IDg0Ljk4MzFMNjYuODcxIDc3LjExNDRMNjMuNzE3NyA2NC41MjQxWiIgZmlsbD0iI0ZGNjU4NCIvPgo8cGF0aCBkPSJNODguMDIxNiAxNDMuMjEyTDgyLjY1MTYgMTM4LjcxNEw4Mi43NzY3IDE0My4yMTJIODEuMTA4OEw4MC45NzU2IDEzOC40NTZMNzMuNzI1MiAxNDMuMjEySDcwLjY4OTlMODAuOTIxNCAxMzYuNUw4MC41MjUxIDEyMi40MDRMODAuMjI5MSAxMTEuNzU5TDgxLjg5MjggMTExLjcxM0w4Mi4xOTMgMTIyLjQwNEw4Mi41ODkgMTM2LjQ4N0w5MC42MTQ3IDE0My4yMTJIODguMDIxNloiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTYyLjc5MzEgMTQzLjIxMkw1Ny40MjMgMTM4LjcxNEw1Ny41NDgyIDE0My4yMTJINTUuODg0OEw1NS43NTEzIDEzOC40NTZMNDguNTAwOCAxNDMuMjEySDQ1LjQ2NTZMNTUuNjkyOSAxMzYuNUw1NS4yOTY5IDEyMi40MDRMNTUuMDAwOCAxMTEuNzU5TDU2LjY2ODQgMTExLjcxM0w1Ni45Njg3IDEyMi40MDRMNTcuMzYwNSAxMzYuNDg3TDY1LjM4NjUgMTQzLjIxMkg2Mi43OTMxWiIgZmlsbD0iIzNGM0Q1NiIvPgo8cGF0aCBkPSJNNjYuODcxMyA2LjI5NTAxQzY1LjQwMDQgNi4yOTUwMSA2NC4xMDI4IDcuNDM1NDggNjMuMjM1MyA5LjE4NzIzQzYyLjQ3MDYgNi41NTMxMiA2MC44NjQxIDQuNzIxMjcgNTguOTg4IDQuNzIxMjdDNTguODYwNSA0LjczMzkyIDU4LjczNCA0Ljc1NTEzIDU4LjYwOTMgNC43ODQ3NkM1Ny44ODgyIDEuOTcyMzYgNTYuMjEyMSAtMi40Nzk1NWUtMDUgNTQuMjU4IC0yLjQ3OTU1ZS0wNUM1MS42NDU3IC0yLjQ3OTU1ZS0wNSA0OS41MjgxIDMuNTIyOTkgNDkuNTI4MSA3Ljg2ODhDNDkuNTI4MSAxMi4yMTQ2IDUxLjY0NTcgMTUuNzM3NiA1NC4yNTggMTUuNzM3NkM1NC4zODU1IDE1LjcyNSA1NC41MTIxIDE1LjcwMzcgNTQuNjM2NyAxNS42NzQxQzU1LjM1NzkgMTguNDg2NSA1Ny4wMzM5IDIwLjQ1ODkgNTguOTg4IDIwLjQ1ODlDNjAuNDU4OSAyMC40NTg5IDYxLjc1NjUgMTkuMzE4NCA2Mi42MjQgMTcuNTY2N0M2My4zODg3IDIwLjIwMDggNjQuOTk1MSAyMi4wMzI2IDY2Ljg3MTMgMjIuMDMyNkM2OS40ODM2IDIyLjAzMjYgNzEuNjAxMiAxOC41MDk2IDcxLjYwMTIgMTQuMTYzOEM3MS42MDEyIDkuODE4MDEgNjkuNDgzNiA2LjI5NTAxIDY2Ljg3MTMgNi4yOTUwMVoiIGZpbGw9IiMzRjNENTYiLz4KPHBhdGggZD0iTTE1Ljc2NjYgODQuMDE0NUMxMy42OTYxIDg0LjAxNDUgMTEuNjQ1OSA4My42MDc0IDkuNzMzMDEgODIuODE2NkM3LjgyMDEyIDgyLjAyNTcgNi4wODIwMyA4MC44NjY1IDQuNjE3OTcgNzkuNDA1MUMzLjE1MzkxIDc3Ljk0MzcgMS45OTI1NiA3Ni4yMDg4IDEuMjAwMjEgNzQuMjk5NEMwLjQwNzg3MiA3Mi4zOTAxIDYuNDI5NWUtMDUgNzAuMzQzNiA2LjQyOTVlLTA1IDY4LjI3NjlMNi40Mjk1ZS0wNSA2MC40MDhDNi40Mjk1ZS0wNSA1Ni4yMzQyIDEuNjYxMTcgNTIuMjMxMyA0LjYxNzk3IDQ5LjI3OTlDNy41NzQ3NyA0Ni4zMjg1IDExLjU4NTEgNDQuNjcwNCAxNS43NjY2IDQ0LjY3MDRWNDQuNjcwNEwxNS43NjY2IDg0LjAxNDVaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMTYuMzk5IDQ0LjY3MDVDMTE4LjQ3IDQ0LjY3MDUgMTIwLjUyIDQ1LjA3NzYgMTIyLjQzMyA0NS44Njg1QzEyNC4zNDYgNDYuNjU5NCAxMjYuMDg0IDQ3LjgxODYgMTI3LjU0OCA0OS4yOEMxMjkuMDEyIDUwLjc0MTMgMTMwLjE3MyA1Mi40NzYyIDEzMC45NjYgNTQuMzg1NkMxMzEuNzU4IDU2LjI5NSAxMzIuMTY2IDU4LjM0MTQgMTMyLjE2NiA2MC40MDgxVjY4LjI3N0MxMzIuMTY2IDcwLjM0MzcgMTMxLjc1OCA3Mi4zOTAxIDEzMC45NjYgNzQuMjk5NUMxMzAuMTczIDc2LjIwODkgMTI5LjAxMiA3Ny45NDM4IDEyNy41NDggNzkuNDA1MUMxMjYuMDg0IDgwLjg2NjUgMTI0LjM0NiA4Mi4wMjU3IDEyMi40MzMgODIuODE2NkMxMjAuNTIgODMuNjA3NSAxMTguNDcgODQuMDE0NiAxMTYuMzk5IDg0LjAxNDZWODQuMDE0NlY0NC42NzA1SDExNi4zOTlaIiBmaWxsPSIjNTU1N0U0Ii8+CjxwYXRoIGQ9Ik0xMjQuNjYxIDYxLjY0NDZIMTIyLjE2QzEyMi4xNiAyOS45Nzc1IDk2LjM0OTIgNC4yMTQyMyA2NC42MjM3IDQuMjE0MjNDMzIuODk4MyA0LjIxNDIzIDcuMDg3NzUgMjkuOTc3NSA3LjA4Nzc1IDYxLjY0NDZINC41ODYxOEM0LjU4NjE4IDI4LjYwMDUgMzEuNTE4OSAxLjcxNzI2IDY0LjYyMzcgMS43MTcyNkM5Ny43Mjg2IDEuNzE3MjYgMTI0LjY2MSAyOC42MDA2IDEyNC42NjEgNjEuNjQ0NloiIGZpbGw9IiM1NTU3RTQiLz4KPC9zdmc+Cg==",alt:"chicken"}),s.a.createElement("div",{className:"malibu-mobile-uLoading-chiken-eye left"}),s.a.createElement("div",{className:"malibu-mobile-uLoading-chiken-eye right"}),s.a.createElement("div",{className:"malibu-mobile-uLoading-path"},s.a.createElement("svg",{width:"12",height:"3",xmlns:"http://www.w3.org/2000/svg",style:{visibility:"hidden"}},s.a.createElement("path",{d:"M 0 2 Q 6 -5 12 2 M 12 2 Q 6 -5 0 2",stroke:"black",fill:"transparent"})))),s.a.createElement("div",{className:"malibu-mobile-uLoading-ground",style:{position:"absolute"}},s.a.createElement("img",{src:"data:image/svg+xml;base64,DQo8c3ZnIHdpZHRoPSI4NyIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDI4NyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yODYuMzUxIDExLjY4Nkw4MS40MDg4IDE0Ljc3MDFMMC4wNTc2MTcyIDAuMzc4MTc0SDEyNy4wNThMMjg2LjM1MSAxMS42ODZaIiBmaWxsPSIjRTZFNkU2Ii8+DQo8L3N2Zz4NCg==",alt:"ground"})),s.a.createElement("div",{className:"malibu-mobile-uLoading-tree one"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-mobile-uLoading-tree two"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-mobile-uLoading-tree three"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-mobile-uLoading-tree four"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-mobile-uLoading-tree five"},s.a.createElement("img",{src:this.tree_item,alt:"tree"})),s.a.createElement("div",{className:"malibu-mobile-uLoading-sun"}),s.a.createElement("div",{className:"malibu-mobile-uLoading-music-list",style:{position:"absolute"}},s.a.createElement("div",{className:"malibu-mobile-uLoading-music six"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMiAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xOS42NDU5IDEyLjA5MDVMMTkuNjQ3IDEyLjA4ODJMMTYuODM3MiAxMC45MjAyTDUuMDkzNDUgNi4zNjMzNUw4LjA1NzQ1IDMuNzMxMTJDOC4wNTc0NSAzLjczMTEyIDEwLjAyOSAxLjAwMDU1IDEzLjE3NDEgMi44OTQ0OUwxMi4yNTQzIDEuNTI5OTVDMTIuMjU0MyAxLjUyOTk1IDEwLjUyNTEgLTAuNzU1MTU3IDguMTA0NjUgMS42NjI1NEM4LjEwNDY1IDEuNjYyNTQgNS4xMDk3NiA2LjA2OTU0IDAuNDA1NTE4IDQuOTQ2MTlMMTYuNDcxNCAxMS43MzM2TDE2LjU1NTcgMTEuODA5OUwxNS40NzMxIDE0LjM1NzlDMTUuMzI0OSAxNC41OTEgMTUuMTk4NSAxNC44MzcxIDE1LjA5NTQgMTUuMDkzM0MxNC4zMzcgMTcuMDA0NyAxNS43Njk0IDE4LjkwNTkgMTcuMTIzNCAxOS40NDEyQzE4LjQ3NzUgMTkuOTc2NiAyMC4xOTAxIDE4Ljg2MSAyMC45NDg1IDE2Ljk0OTZDMjEuNjk2NSAxNS4wNjQzIDIwLjk2NTQgMTIuNjY5MiAxOS42NDU5IDEyLjA5MDVaIiBmaWxsPSIjM0YzRDU2Ii8+DQo8L3N2Zz4NCg==",alt:"music"})),s.a.createElement("div",{className:"malibu-mobile-uLoading-music five"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAzMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yOS4yNjg5IDIwLjM2ODFDMjMuNDM2OCAxNy4wMzk3IDI0LjYwMzkgOS43MzU4NCAyNC42MDM5IDkuNzM1ODRDMjQuNDU3MSA0Ljk5MDg5IDIwLjUyOTcgNS42NjI1NiAyMC41Mjk3IDUuNjYyNTZMMTkuMTAwMyA1Ljk4ODE0QzE4LjQzNjMgNS42ODA1MSAxNy43MDUxIDUuNTQ1NTMgMTYuOTc0OCA1LjU5NTc1TDE0LjgwMDUgNS45NjFDMTkuNzUxNiA3LjEyMjE5IDE5LjM0NDggMTEuMjU2NCAxOS4zNDQ4IDExLjI1NjRMMjAuMDM4NCAxNi4wOTAzTDcuMDY1MTUgMTAuODY2NEw4LjU1NDY5IDcuMzYwNjdDOC43NjA1NSA3LjAzNjk2IDguOTM2MTggNi42OTUwNiA5LjA3OTM4IDYuMzM5MjhDMTAuMTMyNyAzLjY4NDUzIDguMTQzMyAxLjA0MzkxIDYuMjYyNTkgMC4zMDA0MkM0LjM4MTg5IC0wLjQ0MzA2NyAyLjAwMzM2IDEuMTA2MyAwLjk1MDAxOCAzLjc2MUMtMC4wODg5Nzk3IDYuMzc5NTIgMC45MjY0MDcgOS43MDYxNSAyLjc1OTExIDEwLjUwOTlMMi43NTc1NiAxMC41MTNMNi42NjAyMiAxMi4xMzUzTDYuNjg5MjcgMTIuMDQzNUwyOS4yNjg5IDIwLjM2ODFaTTIyLjY4MDkgMTEuODc0NkwyMy4wOTgzIDE2LjUxNzVDMjAuNjQ4OCAxMy4yNzE5IDIxLjE0OTUgOS40MTU3OCAyMS4xNDk1IDkuNDE1NzhDMjEuMTE1IDguNTIwMjkgMjAuODEyMyA3LjY1NTY5IDIwLjI4MDYgNi45MzM1OUMyMy4wOTQ0IDguNjE0MzIgMjIuNjgwOSAxMS44NzQ2IDIyLjY4MDkgMTEuODc0NkgyMi42ODA5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})),s.a.createElement("div",{className:"malibu-mobile-uLoading-music four"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxNyAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMC4yMjE3IDEzLjMzOUw5LjU5Mjc0IDE0LjgxOTJDOS41MDY2NSAxNC45NTQ2IDkuNDMzMjEgMTUuMDk3NiA5LjM3MzM0IDE1LjI0NjRDOC45MzI3NSAxNi4zNTY3IDkuNzY0ODQgMTcuNDYxMSAxMC41NTE0IDE3Ljc3MjFDMTEuMzM4IDE4LjA4MzEgMTIuMzMyOSAxNy40MzUxIDEyLjc3MzQgMTYuMzI0N0MxMy4yMDggMTUuMjI5NSAxMi43ODMzIDEzLjgzODIgMTIuMDE2OCAxMy41MDJMMTIuMDE3NCAxMy41MDA3TDEwLjM4NTEgMTIuODIyMkw0LjgwMTI2IDEwLjY1NTVMNy45OTE3NCAyLjYxNDYzTDcuNTE4ODggMi40Mjc2OEw0LjMyNzE5IDEwLjQ3MTZMMy42MzY3NSAxMC4yMDM3TDYuODQwODMgMi4xMjgzOUw2LjkyNTI1IDIuMTY0MDVMMTMuNDg4OCA0LjkzNjk4TDEzLjUzNzggNC45ODEyOEwxMi45MDg5IDYuNDYxNDNDMTIuODIyOSA2LjU5NjgyIDEyLjc0OTQgNi43Mzk4MiAxMi42ODk1IDYuODg4NjNDMTIuMjQ4OSA3Ljk5ODk5IDEzLjA4MSA5LjEwMzQyIDEzLjg2NzYgOS40MTQzOUMxNC42NTQyIDkuNzI1MzYgMTUuNjQ5MSA5LjA3NzM0IDE2LjA4OTYgNy45NjY5OEMxNi41MjQyIDYuODcxNzkgMTYuMDk5NSA1LjQ4MDQ0IDE1LjMzMyA1LjE0NDI4TDE1LjMzMzYgNS4xNDI5NEwxMy43MDEzIDQuNDY0NDVMNy4wMzA3OCAxLjY0OTc1TDcuMDMwNSAxLjY0OTYyTDYuODE0MTUgMS41NTgzNEw0LjM0NTQ4IDAuNTE2NjYzTDAuODM5ODQ0IDkuMzUxODVMMTAuMTcyNyAxMy4yOTQ3TDEwLjIyMTcgMTMuMzM5WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})),s.a.createElement("div",{className:"malibu-mobile-uLoading-music three"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMyAxMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4yNDYzIDcuMDAyN0wxMS4yNDY5IDcuMDAxNDJMOS42MTQ2MSA2LjMyMjg4TDIuNzkyNTkgMy42NzU4MUw0LjUxNDQxIDIuMTQ2NzNDNC44NTEyNSAxLjY5ODUgNS4zNDg2OCAxLjM5NzYyIDUuOTAyNjQgMS4zMDcwNEM2LjQ1NjYgMS4yMTY0NiA3LjAyNDE5IDEuMzQzMTggNy40ODY3MSAxLjY2MDY5TDYuOTUyMzkgMC44NjgwNEM2Ljk1MjM5IDAuODY4MDQgNS45NDc5MSAtMC40NTkzNyA0LjU0MTgyIDAuOTQ1MDg2QzQuNTQxODIgMC45NDUwODYgMi44MDIwNyAzLjUwNTEzIDAuMDY5MzM1OSAyLjg1MjU2TDkuNDAyMTcgNi43OTU0NUw5LjQ1MTE1IDYuODM5NzVMOC44MjIyNiA4LjMxOTkxQzguNzM2MTQgOC40NTUyOSA4LjY2MjY4IDguNTk4MyA4LjYwMjgxIDguNzQ3MTFDOC4xNjIyNyA5Ljg1NzQzIDguOTk0MzQgMTAuOTYxOSA5Ljc4MDkzIDExLjI3MjhDMTAuNTY3NSAxMS41ODM4IDExLjU2MjMgMTAuOTM1OCAxMi4wMDI5IDkuODI1NDZDMTIuNDM3NSA4LjczMDI2IDEyLjAxMjggNy4zMzg5MiAxMS4yNDYzIDcuMDAyN1oiIGZpbGw9IiMzRjNENTYiLz4NCjwvc3ZnPg0K",alt:"music"})),s.a.createElement("div",{className:"malibu-mobile-uLoading-music two"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMyAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS4zNzkzIDMuODQ5NzdMMTEuMzc5NyAzLjg0ODg0TDEwLjIwNDUgMy4zNjAyOUw1LjI0NTggMS4yNjc4OEwzLjQ2ODM3IDAuNTE3OTE0TDMuMzMxOTYgMC44NjE2NTZMMC45NDQzMzYgNi44NzkxNUw3LjY2Mzg5IDkuNzE4MDJMNy42OTkxNiA5Ljc0OTkxTDcuMjQ2MzUgMTAuODE1NkM3LjE4NDM3IDEwLjkxMzEgNy4xMzE0OSAxMS4wMTYxIDcuMDg4MzYgMTEuMTIzMkM2Ljc3MTE3IDExLjkyMjYgNy4zNzAyNyAxMi43MTc4IDcuOTM2NjEgMTIuOTQxN0M4LjUwMjk1IDEzLjE2NTYgOS4yMTkyMyAxMi42OTkxIDkuNTM2NDIgMTEuODk5NkM5Ljg0OTMgMTEuMTExMSA5LjU0MzU0IDEwLjEwOTMgOC45OTE2MyA5Ljg2NzI4TDguOTkyMTEgOS44NjYzNEw3LjgxNjg3IDkuMzc3NzlMMy43OTY1MiA3LjgxNzhMNi4wOTM2NiAyLjAyODQyTDUuNzUzMTkgMS44OTM4NEwzLjQ1NTIzIDcuNjg1MzdMMi45NTgxIDcuNDkyNDZMNS4yNjUwNCAxLjY3ODMzTDUuMzI1ODEgMS43MDQwMUwxMC4wNTE1IDMuNzAwNUwxMC4wODY4IDMuNzMyMzlMOS42MzQwMiA0Ljc5ODEzQzkuNTcyMDMgNC44OTU2IDkuNTE5MTQgNC45OTg1NSA5LjQ3NjAzIDUuMTA1NjlDOS4xNTg4IDUuOTA1MTIgOS43NTc5IDYuNzAwMzMgMTAuMzI0MiA2LjkyNDE5QzEwLjg5MDYgNy4xNDgwNiAxMS42MDY5IDYuNjgxNTUgMTEuOTI0MSA1Ljg4MjExQzEyLjIzNjkgNS4wOTM1NiAxMS45MzEyIDQuMDkxODEgMTEuMzc5MyAzLjg0OTc3WiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"})),s.a.createElement("div",{className:"malibu-mobile-uLoading-music one"},s.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDEzIDkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMTIuNjM2OSA4LjYyMjg0QzEwLjE5NzYgNy4yMzA3NiAxMC42ODU3IDQuMTc1ODcgMTAuNjg1NyA0LjE3NTg3QzEwLjYyNDMgMi4xOTEzMSA4Ljk4MTY5IDIuNDcyMjEgOC45ODE2OSAyLjQ3MjIxTDguMzgzODYgMi42MDg0MUM4LjEwNjE0IDIuNDc5NzUgNy44MDAzMiAyLjQyMzMgNy40OTQ4NyAyLjQ0NDMxTDYuNTg1NDYgMi41OTcwNUM4LjY1NjI2IDMuMDgyNzEgOC40ODYxMyA0LjgxMTg1IDguNDg2MTMgNC44MTE4NUw4Ljc3NjI1IDYuODMzNjZMMy4zNTAxNiA0LjY0ODcyTDMuOTczMTYgMy4xODI1QzQuMDU5MjYgMy4wNDcxMSA0LjEzMjcyIDIuOTA0MTEgNC4xOTI1OSAyLjc1NTNDNC42MzMxNCAxLjY0NDk0IDMuODAxMDcgMC41NDA1MDYgMy4wMTQ0OCAwLjIyOTU3NkMyLjIyNzg4IC0wLjA4MTQzMTQgMS4yMzMwNiAwLjU2NjYzMSAwLjc5MjQ3NiAxLjY3Njk1QzAuMzU3OTQ2IDIuNzcyMTQgMC43ODI2NDIgNC4xNjM0OCAxLjU0OTE2IDQuNDk5NjNMMS41NDg1MSA0LjUwMDk3TDMuMTgwOCA1LjE3OTQ2TDMuMTkyOTUgNS4xNDEwNEwxMi42MzY5IDguNjIyODRaTTkuODgxNDQgNS4wNzA0MUwxMC4wNTU0IDcuMDA1NjRDOS40NDEwNSA2LjE0NTE1IDkuMTUyNDMgNS4wOTUwMSA5LjI0MDkxIDQuMDQyMDVDOS4yMjY0OSAzLjY2NzUgOS4wOTk5MSAzLjMwNTg3IDguODc3NTEgMy4wMDM4NkM5LjIxOTQgMy4yMjI1IDkuNDk0MTEgMy41MzEyMSA5LjY3MTI3IDMuODk1ODlDOS44NDg0MyA0LjI2MDU4IDkuOTIxMTcgNC42NjcwNSA5Ljg4MTQ0IDUuMDcwNFY1LjA3MDQxWiIgZmlsbD0iIzNGM0Q1NiIvPg0KPC9zdmc+DQo=",alt:"music"}))),s.a.createElement("div",{className:"malibu-mobile-uLoading-progress-bar "},s.a.createElement("div",{className:"malibu-mobile-uLoading-progress",style:{width:this.state.width}}),s.a.createElement("label",{className:"loading"},this.props.dataFull.title),s.a.createElement("label",{className:"number-percent"},s.a.createElement("input",{className:"number-percent-input",readOnly:!0}),"%")),this.props.dataFull.speed.title?s.a.createElement("div",{className:"row",style:{margin:"auto",marginTop:"150px",width:"fit-content"}},s.a.createElement("div",{className:"malibu-mobile-uLoading-rocket"},s.a.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfOSURBVHgBzZldbBzVFcf/dz722+t1SJOqH2RT6AMVNCsV+hKgS/pQlxRwGqlK3KjY6gMoqZT1S9SqlWyr5akPXktJVLVVsSVwTNUSC5IIPzSZUHho0hajBAWhAAYChJBk1/Z+785czp31rL27M7vrXQf4P/hez71z5zfnnnPuvbMMXwIlYn0hBZ7IoStq5FwG28AR4mARJiEk6nb3MHxBErAS/AME8BhhRAAeuloEhq7IEGUzfe7gS7E9UQ55mKpRu/ZW4T838MVY/wBN/0F6YKRZ31bgbzl4Mws7qRn8LQMvB5x/mAMxtKlG8LcEPBHrj8hgx6kaRodygE/KWGelhvYJP56haqhRP6lnI5mNepYaR2GACO8PcLyalpAyli9yvLmuFl+K7SPX4CNO7fIdd8Hd+1NIX98C5vWVGbIZlC78F4XZ4zBufuo4dpXlOdfWDbwRNPP64e7bB/X7DzQco/DS88jPPu/YbsF/XMD4urhKM0v7njgE5Z7vmfW8wfGf6zreWNRxccGATtO/ySOZbfKddwE0A/p7l23HsdzmgwJ/rmOLN4NW73sAnv4nzPrFBR3/uloy4VerW2XYs8VllkLp3w81dBsd+kMSOlB5UXGGFnL37jbLhSLHqY+KddBW2/R7hUqb+uCPGg2Jnvi0pmCNivbFQulCMrw9qIv9xZgIcSeJYGQbNpr10580zh4C/kJSx70bFIqFB5Gfecapqyb+tAQuYOHN04ZIesww8lFeAvbfZjS9T9rwlUr9/TRv2v9artxHZByJXti4ed2mF59sCi6AJV/hIEcxBi6ZeTmfL+AXPTq+qmJNsnORWuWa24L829BE6Qge3fNklLHi05yzsHWtVNJxGy9ioAVrC/FsulL/pl/CB+nG9212r+QKe2tDI/+eFxXJHnr/MGPyGdQs2dlsDo+3CC2kv33JXGCE7ulunnnvDpX76JcvOfQwxq2aZA/NRmqvl4olbJYN9AabT7klAV0893IZisBF4Dnp4a+plXRYPP9y/VjAfDB+bMYW3AlaKF8orMnalgq0EvLlad+xWTEBrQXHLTHc7pPMHH738oyIFy2e+3fdOAx8tPr/CvSTYXKPd+0ebhgGArk0jm3V0Y5EhvAd+F0lNTpJuEj2b2MV97IkrN0df3Zr1ZhWZdmnbSUyyTZv6y5SKxFomSN/qLhNrQRojvJ25shTddDm/eC7aq+ZFicXGSAXeRoOWlpK48/fKOJODzqWyNFiTyI2XiYULe3OwWhqIhh/drD2ohktBD1sc4PGDf46bYLmvusxwgQ9jBaVNhiuGRK2KvWuVd7G/q+lcYSL0DZs1K5NEfkaVtpjSHKDjSOnxLWZeNLqdCL285aOXwL4rykvTmdd+MvGRXQq4SJW3q6VAib1lZnZuJFRRlYDW6KI/kGzU94LGTemUx6kOcMOTwGb5LVnoNWizdtoT3xqzqldAWfbqNPgmekjE3Yd0i/8uI+/n4vyGyp4oj4PCysfS3vwIoELCeC9gRw6he6OT4006qOAXEP7+5GZ2obE8WjI5fKNMc4GWDgPdkcRsuylvawLhTkOI1WG/m0igHdLK6viXn+uI2sT9HgzaCHH+c+c2PkaFREKXCjdXigBd6VNQCf+z3DovL8K+lFfHr/syqJD6JbiSXGAHjOhZQnuTV0Q5WpJAeA3b1dDiwzSIfRoK5a2VAeeOvnwAI1ivrUdtNDkq25cvlYN/VRPCu2IPsslGYwhgp5Yy311VBIv53Q15LOFnr3gwuQrKytR5PYS/rg9Db+09pX1co5h7BMMBtcILVRl8aUXe6NUhAXwap+2dHVBMq1tafe9BRz4YRa8QIH6DsyyFaUoqP+ZoJm7KYvVL4k2VAVORzMzp0u+leMN51ysrGZ99qJqwgfcHId2ZnH/t8vnSOaiGfoO7QTnmj/wpQVGwBJu0KP9AQ/OPndUQxuqApeZyOmkkoHCjRSMog7F54IS9CKVZ3jlLRWPb89j9315E77q3i30EnOqsF7ICXh2keFCUYHb7YZXMWNEQ5uqAqfIDgu769llS5LLyF0r/jzWn64DtlTKZcF6WGj1IjWXYXidEs0/EhKykmwC+/0rQU2zOYn1ACeX0MoDYkCUKuVvy02cgE3oVB5cfJLq1pNIqBoZ4Oyvr0g4n5XGVFWB4lXhV+qObvNYPvi2o6q04d15clCnh5ovIaxNbmJJ+HpxsT5PC+DSQvk6+1ZmKBh/Zhdt+uOXEEBXMACP1wOlHloYZFKb/tM82lRdHq+kQ7K2JWFRAccUes/gynVOMZC/njJfyuB8PPDoqYlKo8rCcNY8beji6EBV4InjvWGIdEhnQWFtI18kK+eoLJnt4roJTKClpRz0pbxZJ2mBR05VL9W0eXPaUNAnj0G7XWjb4LKsRKxParkPkxZUlYS7rAIuW7oGunx+tf/Nh1xk9Myxwxo6VJWPS5LIKoROX52WwebIOqMSY+buUVi+RDNgWVnn7KE6S5dHisIB+vTU4RGsg6rTIWdzBuNDYDwpF1yad9fMvLieOfkT+j2Hz5v7Cs7P6pBmuh45odkNWLZ2/VGQXnXozNThjvx6tdb9x6sdew+M1fzSpnEyhjZ1tIV1tXWt+TNzI0X79x/kvAKtiQVGmz46gVugdbN49Ge/6mMyPyi+DFD6mdGmOw/ARvoMZ7pw6Vztu/cAAAAASUVORK5CYII=",alt:"rocket"})),s.a.createElement("div",{className:"malibu-mobile-uLoading-speed"},s.a.createElement("label",null,this.props.dataFull.speed.title),s.a.createElement("div",{className:"malibu-mobile-uLoading-speed-number "+(this.props.dataFull.cmd.error.message?"error":"")},s.a.createElement("div",{style:{margin:"auto"}},this.props.dataFull.speed.number_speed),s.a.createElement("img",{src:this.props.dataFull.cmd.error.message?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGiSURBVHgB7ZXRTcMwEIbvXPJStciEB6jUVMkG7QZlg44AE5QNygYdATahG8AGrQRSWx7AEhIvSDli5AQ3cWO7ooiHfpIlxz75fOf/LgAH/gPL0+hSDvgL1jwarcOI5Fjy7hA8YeALg2k+bSBOwBMvhyqNcf5NCMNV2LsGD9DVcMnPY8aCe92hQnyk70kihHA5xznCBgsmBmcS3mJt59Q6Raiim9fZpOln0hGrBVhwipBhMLXZNDC4BQesDr+FgjDS15BoBkSP+poUkEuZWFOa1ZtMZawtibPXpxM5eQmjN8reUNtbZHtJ3Xms3lnXJJRCjaTNFfE67N3ALg6lUBDQq8bUNcZzzrm3Q1kGpXTlFGu4Zb+uTIxvaCsDhEwwhEIKZZtNmtJFRzzPyutHJmPVUbZCgH2b3FSfnVXOLi+U+6UBKZQ7ObAqmp9LyTIx/MI27ikfu8naDxaHhfQNJVOxzfrsQO+zGxE2WWtsOcCXuMmON5ReROjSL3dEZH12kPfZIkL1N9gHXO+zekpHsCdIe6aiLCiFq5RRH/YBVcvjwK/xBRbpfbJqi9GHAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgB3ZZLUuMwEIa7pZqZ5eQInhMM3MBZThlqnBMQdiwIBScIuQFVAYodzgWIgQKW+AaEExBuEJYkZTUtB8dvEtuw4d9EVrr6a0ndagF8d+GqhjtD2/jx0zcF4l9F2NBzAmmiiB5nU+mdtdzxKn6WAnevN0yUsgsE5hJPHpAa9K1r52OzAu0P7Yb/i84ZZEM5ObMp9opWnAvcv7MNX9E9Dw2opjFDm3lQ/ALYAiqnuH7UcifxSZG2Ylj3E2BaRnAkKSWAnZvNNv+0oaKIaOADrvO+ufMJsHXSFQIBxRbUgB1vXLVPLXfE2Xq5cKkzPI4IB+9n9wQVFMJifhI5oEAaJ9bFsx4vVugr34QKWgYLbPxZMxwvgKRwLcffGGrCAghGvqMzRGjEjfj6Ouhbl384kB7UgAWuBf7OAtNGpIIAjjfdQ/7argpLKwISTFJRdffuWkHW9i3XCaFVYKToJQNEQaOsoXLiUN7eZpWVoRCjDFAK6UFudBGUt9crC9OaTcHLAI/+8UWL0R9F0LIwIkj0ykTSkJ+fkSG0c/t/yLAHKHHXIuIg8Z020E4r9MAiOVxaiQzPlIV8DbJxDPWle2JmxzJA3b+kwGZNaGEDzi18nUAaqmsOyopbk268pZ4YcXVu7DaDtxA/fkTpbATCXlg6xfGsqHk5gImg1gjmdyMCvRDQqMwz8fvrDeQ/QIleItNVAAAAAElFTkSuQmCC",alt:"icon"})))):null,this.props.dataFull.cmd.error.message?s.a.createElement("div",{className:"malibu-mobile-uLoading-message-error"},this.props.dataFull.cmd.error.message):null)):s.a.createElement("div",null,"Kh\xf4ng h\u1ed7 tr\u1ee3")}render(){return this.state.visible?this.renderForDevice():s.a.createElement("div",null)}}var h=d;class _ extends o.Component{constructor(e){super(e),this.setPercent=(e,t,a,i,o)=>{let s=100*o/i,l="Loading...";window.process_loading.max.main_script+window.process_loading.max.template_script+window.process_loading.max.template_component+window.process_loading.max.template_css===o&&(s=100),this.createOneLoading(Object(r.a)({title:l,percent:s},this.getInfoNetWork()))},this.callBack_animationPercent=()=>{let e=this.state.index_loading;void 0!==this.state.list_loading[e+1]?(e++,this.flagLoaing=!0,this.setState({index_loading:e})):this.flagLoaing=!1},this.flagLoaing=!0,this.state={index_loading:0,list_loading:[Object(r.a)({title:"Loading...",percent:0},this.getInfoNetWork())]}}createOneLoading(e){let t=this.state.list_loading;t[t.length]=e,this.setState({list_loading:t},()=>{this.flagLoaing||this.callBack_animationPercent()})}getInfoNetWork(){if(void 0!==navigator.connection){let e="";void 0!==navigator.connection.effectiveType&&(e=": "+navigator.connection.effectiveType);let t=navigator.connection.downlink,a="";return t<=1&&(a="Internet speed slow"),{cmd:{error:{message:a}},speed:{title:"Speed test"+e,number_speed:t+" Mb/s"}}}return{cmd:{error:{message:""}},speed:{title:"",number_speed:""}}}reportWindowSize(){let e="",t=(window.innerHeight,window.innerWidth);return t>996?e="desktop":t<=996&&t>425?e="tablet":t<=425&&(e="mobile"),e}componentDidMount(){var e;e=this,c.start.DOM_Html=e,setTimeout(()=>{document.getElementById("root").style.display=""},500)}render(){return s.a.createElement(h,{device:this.reportWindowSize(),f_callBack_animationPercent:this.callBack_animationPercent,dataFull:this.state.list_loading[this.state.index_loading]})}}var u=_,g=a(4);let m=window.location.hostname,p=window.location.port,f=window.location.protocol,v=!1;"www."===m.substr(0,4)&&(m=m.replace("www.",""));var b="//jwebui.com:8443";if(i.g.checkIsPublic()){let e=new URL(window.location.href);if(v="true"===e.searchParams.get("isMobile"),v){let t=e.searchParams.get("cordovaProtocol"),a=e.searchParams.get("cordovaDomain"),i=e.searchParams.get("cordovaPort");a&&t&&i?(m=a,f=t,p=i,b=t+"://"+a+":"+i):b=""}else b=""}Object(i.C)(v),Object(i.B)(m),Object(i.F)(f),Object(i.E)(p),n.a.render(s.a.createElement(u,null),document.getElementById("loading"));let y,D=null;function C(){window.process_loading.loading.main_script--,window.processLoadingGUI("Main Script",window.process_loading.max.main_script-window.process_loading.loading.main_script+"/"+window.process_loading.max.main_script),0===window.process_loading.loading.template_script&&0===window.process_loading.loading.main_script&&window.callStart()}function A(e){window.process_loading.loading.template_css--,window.processLoadingGUI("Template CSS",window.process_loading.max.template_css-window.process_loading.loading.template_css+"/"+window.process_loading.max.template_css,e),0===window.process_loading.loading.template_css&&window.obManagerTemplate_libManagerTemplate.managerTemplate_begin_2(y.template,y.screen_working,D,!0,k)}function k(){window.process_loading.loading.template_component--,window.processLoadingGUI("Template Component",window.process_loading.max.template_component-window.process_loading.loading.template_component+"/"+window.process_loading.max.template_component),i.g.start(window.mainstart.configGlobal)}function M(){!0!==window.mainstart.isDev&&(window.addEventListener("beforeunload",e=>Object(g.b)([{txcode:"bo-delete-session",input:{token_webui:i.g.getSessionFromStore()}}],{}),!1),window.addEventListener("onbeforeunload",e=>Object(g.b)([{txcode:"bo-delete-session",input:{token_webui:i.g.getSessionFromStore()}}],{}),!1),window.addEventListener("unload",e=>Object(g.b)([{txcode:"bo-delete-session",input:{token_webui:i.g.getSessionFromStore()}}],{}),!1),window.addEventListener("pagehide",e=>{Object(g.b)([{txcode:"bo-delete-session",input:{token_webui:i.g.getSessionFromStore()}}],{})},!1)),void 0!==window.mainstart.rsa&&window.mainstart.configGlobal&&(i.g.rsa_setPublicKey(window.mainstart.rsa),i.g.readHTML5RSA(),y=i.g.template_getConfigTemplate(),void 0!==y.theme&&(D=y.theme),window.obManagerTemplate_libManagerTemplate.managerTemplate_begin(y.template,y.screen_working,D,!0,A,window.mainstart.template_host_dev))}function x(e,t,a){((e,t,a)=>{null!==c.start.DOM_Html&&(c.start.current++,c.start.DOM_Html.setPercent(e,t,a,c.start.max_pack,c.start.current))})(e,t,a)}window.processLoadingGUI=x,window.callStart=M,i.g.addSript(b+"/webchannel/template_dynamic",C),i.g.addSript(b+"/webchannel/config-client",C)}],[[189,135,137]]]);