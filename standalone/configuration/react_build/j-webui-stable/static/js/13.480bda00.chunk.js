(this["webpackJsonpstable-app"]=this["webpackJsonpstable-app"]||[]).push([[13],{44:function(e,t,a){"use strict";a.r(t);var l=a(0),o=a.n(l),i=a(1),n=a(3);class s extends l.Component{constructor(e){super(e),this.getData=()=>{let{form:e}=this.state;const t=e.rule_setDataGB.action.dataFull.data.find(e=>e.selected),a=e.rule_setDataGB.get_data.dataFull.data.find(e=>e.selected),l=e.rule_setDataGB.filter_data.dataFull.data.find(e=>e.selected);let o={};o={component_action:e.rule_setDataGB.code_active.dataFull.value,component_result:e.rule_setDataGB.code_get_data.dataFull.value,component_event:t.value,query:"query"===a.value?e.rule_setDataGB.CDLIST.dataFull.value:this.data.query,query_db:"query_db"===a.value?e.rule_setDataGB.CDLIST.dataFull.value:this.data.query_db,api:"query"===a.value?e.rule_setDataGB.CDLIST.dataFull.value:this.data.api,data_type:a.value,mode_filter:l.value,js_condition:e.rule_setDataGB.is_condition.dataFull.value,filter_condition:this.data.filter_condition},this.validateDataAction()?this.props.func_save_rule_and_close(o):(e.rule_getInfo.button_save.dataFull.config.default.type="danger",this.setState({form:e}))},this.validateDataAction=()=>{let{form:e}=this.state;return void 0!==e.rule_setDataGB.action.dataFull.data.find(e=>e.selected)||(e.rule_setDataGB.action.dataFull.config.cmd.error.message=" required",this.setState({form:e}),!1)},this.convert_action_template=()=>{let e={},t=[{name:"Enter/Tab",val:"enter_tab"},{name:"Change",val:"on_change"},{name:"Click",val:"on_click"},{name:"Checked",val:"checked"},{name:"All",val:"all"}],a=[];for(let l=0;l<t.length;l++)a.push({title:t[l].name,value:t[l].val,selected:t[l].val===this.data.component_event});return a.find(e=>e.selected)||(a[0].selected=!0),e={dataFull:{config:{default:{search:{placeholder:i.g.getLang("designForm_rule_action")},helper:i.g.getLang("designForm_rule_action_helper"),data_status:"No Result",title:i.g.getLang("designForm_rule_action"),class:"col-md-6",required:!0,code_form_component:"action"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:a,search_value:"",abs_Change:this.onChangeValueSelect,abs_search:this.search}},e},this.convert_code_get_data_template=()=>{let e={};return e={dataFull:{config:{default:{title:i.g.getLang("designForm_rule_component_result"),class:"col-md-12 ",required:!1,placeholder:i.g.getLang("designForm_rule_component_result"),helper:i.g.getLang("designForm_rule_component_result_helper"),rows:7,code_form_component:"code_get_data"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},data:[],value:this.data.component_result,abs_Change:this.onChangeValue}},e},this.convert_active_template=()=>({dataFull:{config:{default:{title:i.g.getLang("designForm_rule_component_action"),class:"col-md-6 ",required:!1,placeholder:i.g.getLang("designForm_rule_component_action"),helper:i.g.getLang("designForm_rule_component_action_helper"),code_form_component:"code_active"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.data.component_action,abs_Change:this.onChangeValue}}),this.convert_get_data_template=()=>{let e=[{title:"Cdlist",val:"query"},{title:"Query",val:"query_db"},{title:"Api",val:"api"}],t=[];for(let a=0;a<e.length;a++)t.push({title:e[a].title,value:e[a].val,selected:e[a].val===this.data.data_type});return{dataFull:{config:{default:{search:{placeholder:i.g.getLang("designForm_rule_data_type")},helper:i.g.getLang("designForm_rule_data_type_helper"),data_status:"No Result",title:i.g.getLang("designForm_rule_data_type"),class:"col-md-6",required:!1,code_form_component:"get_data"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:t,search_value:"",abs_Change:this.onChangeValueSelect_getData,abs_search:this.search}}},this.convert_CDLIST_template=()=>{let e="CDLIST (cdname;cdgroup) ",t="query";return"query"===this.data.data_type&&(e="CDLIST",t="query"),"query_db"===this.data.data_type&&(e="Query",t="query_db"),"api"===this.data.data_type&&(e="Api",t="api"),{dataFull:{config:{default:{title:e,class:"col-md-6 ",required:!1,placeholder:e,helper:e,code_form_component:t},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:this.data[t],abs_Change:this.onChangeValue_data_query}}},this.convert_filter_data=()=>({dataFull:{config:{default:{search:{placeholder:i.g.getLang("designForm_rule_filter_condition")},helper:i.g.getLang("designForm_rule_filter_condition_helper"),data_status:"No Result",title:i.g.getLang("designForm_rule_filter_condition"),class:"col-md-6",required:!1,code_form_component:"filter_data"},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}},mode:{}},data:[{title:"Javascript",value:"js_condition",selected:"js_condition"===this.data.mode_filter},{title:"No",value:"_",selected:"_"===this.data.mode_filter}],search_value:"",abs_Change:this.onChangeValueSelect,abs_search:this.search}}),this.convert_js_condition_template=()=>({dataFull:{config:{default:{helper:i.g.getLang("designForm_rule_js_filter_helper"),title:i.g.getLang("designForm_rule_js_filter"),class:"col-md-12",rows:10,code_form_component:"is_condition"},cmd:{isHelper:!0,disable:!1,visible:"js_condition"===this.data.mode_filter,error:{message:"",type:""}}},data:[],value:this.data.js_condition,abs_Change:this.onChangeValue}}),this.loadDataToState=()=>{let e={};return e.title=i.g.getLang("designForm_rule_modalSetDataGB_title"),e.status_form=this.props.modal_edit_rule_func.ruleStrong_default.isStatus,e.order=this.props.modal_edit_rule_func.ruleStrong_default.order,e.begin=this.props.modal_edit_rule_func.ruleStrong_default.isStart,e.status=this.props.modal_edit_rule_func.ruleStrong_default.inUse,e.isDidStart=this.props.modal_edit_rule_func.ruleStrong_default.isDidStart,e.isOpenFromOther=this.props.modal_edit_rule_func.ruleStrong_default.isOpenFromOther,e.code_active=this.convert_active_template(),e.action=this.convert_action_template(),e.code_get_data=this.convert_code_get_data_template(),e.get_data=this.convert_get_data_template(),e.CDLIST=this.convert_CDLIST_template(),e.filter_data=this.convert_filter_data(),e.is_condition=this.convert_js_condition_template(),e.button_save={dataFull:{config:{default:{title:i.g.getLang("designForm_rule_save"),type:"primary",icon:""},cmd:{disable:!1,isLoading:!1,isFocus:!1}},abs_Click:this.getData}},e},this.componentDidMount=()=>{let{modal:e}=this.state,{form:t}=this.state;e={title:i.g.getLang("designForm_rule_modal_title"),helper:i.g.getLang("designForm_rule_modal_title_helper"),abs_Close:this.func_close_modal,visibility:!0},t.rule_setDataGB=this.loadDataToState(),t.list_component={title:i.g.getLang("designForm_rule_listcp"),helper:i.g.getLang("designForm_rule_listcp_helper"),table_config:[{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}},{type:"uTableColumnDefault",config:{mode:"left",isFrozen:!1}}],table_header:{dataFull:{Header:{data:[{title:"Layout",config:{width:"",isFrozen:!1}},{title:"View",config:{isFrozen:!1}},{title:"Name",config:{isFrozen:!1}},{title:"Code",config:{isFrozen:!1}}],config:{mode:{hasSearch:!1,isFrozenHeader:!0}}},config:{mode:{noHeader:!1}}}},table_data:this.props.modal_edit_rule_func.list_components},this.setState({modal:e,form:t})},this.func_close_modal=()=>{this.props.func_cancel_modal_edit_rule_func()},this.onChangeValue_data_query=e=>{let{form:t}=this.state;t.rule_setDataGB.CDLIST.dataFull.value=e.target.value,this.setState({form:t})},this.onChangeValue=(e,t)=>{let{form:a}=this.state;a.rule_setDataGB[t].dataFull.value=e.target.value,this.setState({form:a})},this.onChangeValueSelect=(e,t,a)=>{let{form:l}=this.state;if(a){let e=[],o=[];e=l.rule_setDataGB[a].dataFull.data.filter(e=>e.selected),o=l.rule_setDataGB[a].dataFull.data.filter((e,a)=>a===t),e.length>0&&(e[0].selected=!1),o.length>0&&(o[0].selected=!0),"js_condition"===o[0].value&&(l.rule_setDataGB.is_condition.dataFull.config.cmd.visible=!0),"_"===o[0].value&&(l.rule_setDataGB.is_condition.dataFull.config.cmd.visible=!1),this.setState({form:l})}},this.onChangeValueSelect_getData=(e,t,a)=>{let{form:l}=this.state;if(a){let e=[],o=[];e=l.rule_setDataGB[a].dataFull.data.filter(e=>e.selected),o=l.rule_setDataGB[a].dataFull.data.filter((e,a)=>a===t),e.length>0&&(e[0].selected=!1),o.length>0&&(o[0].selected=!0),l.rule_setDataGB.CDLIST={dataFull:{config:{default:{title:o[0].title,class:"col-md-6 ",required:!1,placeholder:o[0].title,helper:o[0].title,code_form_component:o[0].value},cmd:{isHelper:!0,disable:!1,visible:!0,isFocus:!1,error:{message:"",type:""}}},mode:{isSearch:!1},value:"",abs_Change:this.onChangeValue_data_query}},this.setState({form:l})}},this.Modal_setDataGB_Rule=Object(n.c)("designFormModal_ruleFunction_setDataGB"),this.DESIGNFORM_CODE_TOOL_ITEMS="designToolItem",this.data=this.readConfig(this.props.modal_edit_rule_func.ruleStrong_detail),this.state={modal:{},form:{}}}readConfig(e){var t={};return void 0===e&&(e={}),null!=e.component_event&&""!==e.component_event?t.component_event=e.component_event:t.component_event="enter_tab",null!=e.component_action?t.component_action=e.component_action:t.component_action="",null!=e.component_result?t.component_result=e.component_result:t.component_result="",null!=e.data_type?t.data_type=e.data_type:t.data_type="query",null!=e.query?t.query=e.query:t.query="",null!=e.api?t.api=e.api:t.api="",null!=e.query_db?t.query_db=e.query_db:t.query_db="select * from cdlist",null!=e.mode_filter?t.mode_filter=e.mode_filter:t.mode_filter="_",null!=e.filter_condition?t.filter_condition=e.filter_condition:t.filter_condition='{\n            "col_col1": "condition_1",\n            "col_col2": "condition_2"\n            }',e.js_condition?t.js_condition=e.js_condition:t.js_condition=" data_gb = data_gb.filter(data=>{\n        return data.c_cdlist.cdid !== undefined;\n    })",t}render(){const e=this.Modal_setDataGB_Rule;return o.a.createElement(e,{stateData:this.state})}}t.default=s}}]);