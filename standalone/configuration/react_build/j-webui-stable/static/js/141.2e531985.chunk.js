(this["webpackJsonpstable-app"]=this["webpackJsonpstable-app"]||[]).push([[141],{225:function(t,a,e){"use strict";e.r(a);var l=e(0),i=e.n(l),n=e(1),g=e(8),s=e(3);class d extends l.Component{constructor(t){super(t),this.table_input_change=(t,a,e,l)=>{let i=t.target.value;if(0!==l||0===l&&i.length<=2){let t=this.state.stateData;t.table_lang_data.data[e].all_column[l].data=i,t.table_lang_data.data[e].all_column[l].isUpdate=!1,this.updateLanguageSystem(e,this.mappingIndexToKeyLanguage[l.toString()],i),this.setState({stateData:t})}},this.table_input_change_detail=(t,a,e,l)=>{let i=t.target.value,n=this.state.stateData;if(n.table_lang_detail_data.data[e].all_column[l].data=i,n.table_lang_detail_data.data[e].all_column[l].isUpdate=!1,l>1){let t=this.logicState.lang_system[l-2].key;this.logicState.data[e].lang[t]=i}else this.logicState.data[e].key=i;this.setState({stateData:n})},this.clickAddLangButtonHandler=()=>{let t=prompt(this.logicState.languages.alert,"");if(null!=t&&"yes"===t){this.logicState.lang_system.push({key:"",view:"",img:""});let{stateData:t}=this.state;t.table_lang_data.data=this.getDataTableLangConfig(this.logicState.lang_system),this.setState({stateData:t})}},this.clickAddLangDetailHandler=()=>{let t=prompt(this.logicState.languages.alert,"");if(null!=t&&"yes"===t){let t={key:"",lang:{}};this.logicState.data.push(t);let{stateData:a}=this.state,e=this.getEachRowDataLangDetailConfig(t,a.table_lang_detail_data.data.length,this.logicState.lang_system);a.table_lang_detail_data.data.push(e),this.setState({stateData:a})}},this.changeKeyLanguage=t=>{let a={note:n.g.getLang("note"),title_detail:n.g.getLang("langApplication_titleDetail"),title_:n.g.getLang("langApplication_title"),des_:n.g.getLang("langApplication_des"),lang_code:n.g.getLang("langApplication_code"),lang_name:n.g.getLang("langApplication_name"),lang_img:n.g.getLang("langApplication_img"),lowercase:n.g.getLang("langApplication_lowercase"),btn_save:n.g.getLang("langApplication_btnSave"),btn_add:n.g.getLang("langApplication_btnAdd"),btn_save_detail:n.g.getLang("langApplication_btnSaveDetail"),btn_add_detail:n.g.getLang("langApplication_btnAddDetail"),alert:n.g.getLang("langApplication_alert")};if(void 0!==t)return a;let e=this.logicState.infoA;e.title=n.g.getLang("langApplication_title"),e.des=n.g.getLang("langApplication_des"),e.lang_form.vi=n.g.getLang("langApplication_title"),e.lang_form.en=n.g.getLang("langApplication_title"),this.logicState.languages=a,this.logicState.infoA=e,this.changeLanguageTemplate(a)},this.saveLangSystem=()=>{let t=n.g.getConfigUserDefault("");if(void 0!==t){t.list_lang_config=this.logicState.lang_system,g.a.quickPost([{txcode:"#sys:bo-save-langList",input:{content:t}}],{});let{stateData:a}=this.state;a.table_lang_data.data=this.getDataTableLangConfig(this.logicState.lang_system,!0),a.table_lang_detail_header.Header.data=this.getHeaderTableLangDetailConfig(this.logicState.lang_system),a.table_lang_detail_data.data=this.getDataTableLangDetailConfig(this.logicState.data,this.logicState.lang_system),this.setState({stateData:a})}},this.saveLangDetail=()=>{let t=this.logicState.data,a=this.logicState.lang_system,e={};for(let n=0;n<a.length;n++)e[a[n].key]={};for(let n=0;n<t.length;n++)if(void 0!==t[n].lang&&void 0!==t[n].key){let a=t[n].lang,l=t[n].key.trim();for(let t in a)e[t][l]=a[t].trim()}let l=[];for(let n in e)l[l.length]={key:n,content:e[n]};g.a.quickPost([{txcode:"#sys:bo-save-langDetail",input:{lang_detail:l}}],{});let{stateData:i}=this.state;i.table_lang_detail_data.data=this.getDataTableLangDetailConfig(this.logicState.data,this.logicState.lang_system,!0),this.setState({stateData:i})},this.getInfoA=()=>this.logicState.infoA,this.getKeyFormAuto=()=>this.key_form,this.callSetHidden=t=>{this.setState({visibility:t})},this.key_form="langApplication";let a=n.g.getConfigUserDefault("list_lang_config"),e=this.props.data;this.LangApplicationForm=Object(s.c)("jwebui_langManager");let l=[];for(let n in e){let t=e[n];for(let a in t){let e=t[a],i=this.checkHasKey(l,a);if(-1!==i){let t=l[i];t.lang[n]=e,l[i]=t}else{let t={key:a,lang:{}};t.lang[n]=e,l[l.length]=t}}}l.sort((function(t,a){return t.key===a.key?0:t.key>a.key?1:-1}));let i=this.changeKeyLanguage("start");this.mappingIndexToKeyLanguage={0:"key",1:"view",2:"img"},this.logicState={data:l,lang_system:a,infoA:{lang_form:{vi:n.g.getLang("langApplication_title"),en:n.g.getLang("langApplication_title")},title:"Language management",des:"Qu\u1ea3n l\xfd t\u1ea5t c\u1ea3 ng\xf4n ng\u1eef thu\u1ed9c \u1ee9ng d\u1ee5ng, ng\xf4n ng\u1eef \u0111\xe3 t\u1ea1o kh\xf4ng \u0111\u01b0\u1ee3c x\xf3a!",openOne:"true",form_code:this.key_form,ofModal:!1},check_screen_width:void 0,languages:i},this.state={isReload:!1,visibility:"",stateData:{form:{config:{default:{title:i.title_,title_sub:i.des_}},cmd:{visibility:""}},layout:{dataFull:{config:{title:i.title_detail}}},save_lang:{dataFull:{config:{default:{title:i.btn_save,type:"primary",class:""}}},abs_Click:this.saveLangSystem},add_lang:{dataFull:{config:{default:{title:i.btn_add,type:"",class:""}}},abs_Click:this.clickAddLangButtonHandler},save_detail:{dataFull:{config:{default:{title:i.btn_save_detail,type:"primary",class:""}}},abs_Click:this.saveLangDetail},add_detail:{dataFull:{config:{default:{title:i.btn_add_detail,type:"",class:""}}},abs_Click:this.clickAddLangDetailHandler},table_lang_header:{Header:{data:[{title:`${i.lang_code} ${i.lowercase}`,config:{width:"",isFrozen:!1}},{title:i.lang_name,config:{width:"",isFrozen:!1}},{title:i.lang_img,config:{width:"",isFrozen:!1}}],config:{mode:{hasSearch:!1}}}},table_lang_data:{data:this.getDataTableLangConfig(a)},table_lang_detail_header:{Header:{data:this.getHeaderTableLangDetailConfig(a),config:{mode:{hasSearch:!1}}}},table_lang_detail_data:{data:this.getDataTableLangDetailConfig(l,a)}}}}getDataTableLangConfig(){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(a=>({all_column:[{data:a.key,isUpdate:t,dataItem:{},abs_Change:this.table_input_change},{data:a.view,isUpdate:t,dataItem:{},abs_Change:this.table_input_change},{data:a.img||"",isUpdate:t,dataItem:{},abs_Change:this.table_input_change}]}))}getDataTableLangDetailConfig(){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e,l)=>this.getEachRowDataLangDetailConfig(e,l,t,a))}getEachRowDataLangDetailConfig(t,a){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=arguments.length>3?arguments[3]:void 0,i=[{data:a+1,config:{mode:"center"}},{data:t.key,isUpdate:l,dataItem:{},abs_Change:this.table_input_change_detail}];return e.forEach(a=>{i.push({data:void 0!==t.lang[a.key]?t.lang[a.key]:"",isUpdate:l,dataItem:{},abs_Change:this.table_input_change_detail})}),{all_column:i}}getHeaderTableLangDetailConfig(){let t=[{title:"No.",config:{width:"50px",isFrozen:!1}},{title:"Key",config:{width:"",isFrozen:!1}}];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(a=>{t.push({title:a.view,config:{width:"",isFrozen:!1}})}),t}updateLanguageSystem(t,a,e){this.logicState.lang_system[t][a]=e}changeLanguageTemplate(t){let{stateData:a}=this.state;a.form.config.default.title=t.title_,a.form.config.default.title_sub=t.des_,a.layout.dataFull.config.title=t.title_detail,a.save_lang.dataFull.config.default.title=t.btn_save,a.add_lang.dataFull.config.default.title=t.btn_add,a.save_detail.dataFull.config.default.title=t.btn_save_detail,a.add_detail.dataFull.config.default.title=t.btn_add_detail,a.table_lang_header.Header.data[0].title=`${t.lang_code} ${t.lowercase}`,a.table_lang_header.Header.data[1].title=t.lang_name,a.table_lang_header.Header.data[2].title=t.lang_img,this.setState({stateData:a})}checkHasKey(t,a){for(let e=0;e<t.length;e++)if(void 0!==t[e].key&&t[e].key===a)return e;return-1}render(){if("none"===this.state.visibility)return null;const t=this.LangApplicationForm;return i.a.createElement(t,{stateData:this.state.stateData})}componentDidMount(){n.g.addAppAuto(this.key_form,this,this.logicState.infoA.ofModal),n.g.form_addMapping(this.key_form,this.props.mapping_key)}}a.default=d}}]);